import{r as x,j as r,a as b}from"./index-CaqiBWD3.js";import{g as n,F as s,M as P,I as q,B as l,b1 as y}from"./editorApp-DZMui-50.js";import{u as C}from"./mainLayout-CX6TZjFj.js";import{h as k}from"./moment-G82_0lEo.js";import{S as p}from"./confirm-Bux8TUvH.js";import"./SettingOutlined-C1WwUn5q.js";import"./index-9gNDCDRB.js";import"./pageAPI-DlCcwu0D.js";import"./localActiveAPI-BM1IHP6l.js";import"./___vite-browser-external_commonjs-proxy-BovDvJPF.js";import"./useAddNavigateToWindow-CzS9wfsG.js";import"./getLocalUrlFromString-MtGJfgQO.js";import"./shared-worker-manager-Bj7aMh3z.js";import"./variablesAPI-C9KILpk_.js";import"./datasourceTools-BSEF0Knj.js";import"./index-DwV6AUp4.js";import"./details-TLFobnpp.js";import"./index-_8W0n6rO.js";import"./index-BzblAUWm.js";import"./index-vWj0pZVz.js";import"./PlusCircleOutlined-Urd2TsKl.js";import"./formItemPropsWrapper-sw6ticMr.js";import"./Styles-BsfcSZ3N.js";import"./useCustomFonts-Bu6XhDHJ.js";import"./calcMediaUrl-BnxoRVw_.js";import"./modificatorAPI-DPI9vIG8.js";import"./renderActionTag-AacAROej.js";const{Option:T}=p,Y=({setOpenNewProjectModal:o})=>{const i=C(e=>e.themesList),c=n(e=>e.myProjects??[]),u=n(e=>e.myTemplates??[]),[a]=s.useForm(),m=()=>{a.submit()};function d(e){return![...c,...u].some(t=>t.attributes.name===e)}const f=({name:e,theme:t})=>{j(!0),y({inputData:{name:e,theme:t}}).then(()=>{o(!1),b.success("Project created")})},[h,j]=x.useState(!1);return r.jsx("div",{onKeyUp:e=>{e.key==="Enter"&&m()},children:r.jsx(P,{maskClosable:!1,title:"Create New Project",open:!0,onCancel:()=>o(!1),footer:[r.jsx(l,{onClick:()=>o(!1),children:"Cancel"},"back"),r.jsx(l,{loading:h,type:"primary",onClick:m,children:"Add new project"},"submit")],children:r.jsxs(s,{labelCol:{xs:{span:9}},wrapperCol:{xs:{span:12}},form:a,initialValues:{name:`New project (${k(new Date).format("MMM Do, h:mm a")})`,theme:i?.[0]?.id,defaultOrientation:"portrait"},onFinish:f,scrollToFirstError:!0,children:[r.jsx(s.Item,{colon:!1,required:!1,name:"name",label:"Name",rules:[{required:!0,message:"This field is required."},()=>({validator(e,t){return t&&d(t)?Promise.resolve():Promise.reject(new Error("Project name must be unique"))}})],children:r.jsx(q,{})}),r.jsx(s.Item,{colon:!1,required:!1,name:"theme",label:"Theme",rules:[{required:!0,message:"This field is required."}],children:r.jsx(p,{children:i?.map(e=>r.jsx(T,{value:e.id,children:e.attributes.name},e.id))})})]})})})};export{Y as default};
