import{r as Bt}from"./index-CaqiBWD3.js";function Fn(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return!0;return!1}function ci(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return t[n];return null}function vi(t){var r=t;if(typeof r>"u"){if(typeof navigator>"u"||!navigator)return"";r=navigator.userAgent||""}return r.toLowerCase()}function Nn(t,r){try{return new RegExp(t,"g").exec(r)}catch{return null}}function ds(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,r=t.brands||t.uaList;return!!(r&&r.length)}function gs(t,r){var e=Nn("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",r);return e?e[3]:""}function pn(t){return t.replace(/_/g,".")}function qr(t,r){var e=null,n="-1";return Fn(t,function(a){var i=Nn("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!i||a.brand?!1:(e=a,n=i[3]||"-1",a.versionAlias?n=a.versionAlias:a.versionTest&&(n=gs(a.versionTest.toLowerCase(),r)||n),n=pn(n),!0)}),{preset:e,version:n}}function ce(t,r){var e={brand:"",version:"-1"};return Fn(t,function(n){var a=pi(r,n);return a?(e.brand=n.id,e.version=n.versionAlias||a.version,e.version!=="-1"):!1}),e}function pi(t,r){return ci(t,function(e){var n=e.brand;return Nn(""+r.test,n.toLowerCase())})}var di=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],gi=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],dn=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],hi=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],mi=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function xi(t){return!!qr(hi,t).preset}function hs(t){var r=vi(t),e=!!/mobi/g.exec(r),n={name:"unknown",version:"-1",majorVersion:-1,webview:xi(r),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=qr(di,r),o=i.preset,s=i.version,u=qr(mi,r),f=u.preset,l=u.version,v=qr(gi,r);if(n.chromium=!!v.preset,n.chromiumVersion=v.version,!n.chromium){var c=qr(dn,r);n.webkit=!!c.preset,n.webkitVersion=c.version}return f&&(a.name=f.id,a.version=l,a.majorVersion=parseInt(l,10)),o&&(n.name=o.id,n.version=s,n.webview&&a.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:a,isMobile:e,isHints:!1}}function ms(t){var r=navigator.userAgentData,e=(r.uaList||r.brands).slice(),n=r.mobile||!1,a=e[0],i=(r.platform||navigator.platform).toLowerCase(),o={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ce(hi,e).brand||xi(vi())},s={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&Fn(dn,function(c){return pi(e,c)});var u=ce(gi,e);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var f=ce(dn,e);o.webkit=!!f.brand,o.webkitVersion=f.version||"-1"}var l=ci(mi,function(c){return new RegExp(""+c.test,"g").exec(i)});s.name=l?l.id:"";{var v=ce(di,e);o.name=v.brand||o.name,o.version=v.brand&&t?t.uaFullVersion:v.version}return o.webkit&&(s.name=n?"ios":"mac"),s.name==="ios"&&o.webview&&(o.version="-1"),s.version=pn(s.version),o.version=pn(o.version),s.majorVersion=parseInt(s.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:s,isMobile:n,isHints:!0}}function xs(t){return ds()?ms():hs(t)}function Ss(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return r.map(function(n){return n.split(" ").map(function(a){return a?""+t+a:""}).join(" ")}).join(" ")}function Es(t,r){return r.replace(/([^}{]*){/gm,function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function xr(t,r){return function(e){e&&(t[r]=e)}}function Si(t,r,e){return function(n){n&&(t[r][e]=n)}}function Jl(t,r){return function(e){var n=e.prototype;t.forEach(function(a){r(n,a)})}}function Ds(t,r){return r===void 0&&(r={}),function(e,n){t.forEach(function(a){var i=r[a]||a;i in e||(e[i]=function(){for(var o,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var f=(o=this[n])[a].apply(o,s);return f===this[n]?this:f})})}}var ys="function",bs="object",Cs="string",_s="number",Ln="undefined",Ei=typeof window!==Ln,Ms=typeof document!==Ln&&document,ws=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Dt=1e-7,ve={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,r){return t*r/100},vw:function(t,r){return r===void 0&&(r=window.innerWidth),t/100*r},vh:function(t,r){return r===void 0&&(r=window.innerHeight),t/100*r},vmax:function(t,r){return r===void 0&&(r=Math.max(window.innerWidth,window.innerHeight)),t/100*r},vmin:function(t,r){return r===void 0&&(r=Math.min(window.innerWidth,window.innerHeight)),t/100*r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Rs(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function Me(t,r,e,n){return(t*n+r*e)/(e+n)}function Yn(t){return typeof t===Ln}function Ut(t){return t&&typeof t===bs}function Mt(t){return Array.isArray(t)}function er(t){return typeof t===Cs}function re(t){return typeof t===_s}function Wn(t){return typeof t===ys}function Ts(t,r){var e=t===""||t==" ",n=r===""||r==" ";return n&&e||t===r}function Di(t,r,e,n,a){var i=Xn(t,r,e);return i?e:Os(t,r,e+1,n,a)}function Xn(t,r,e){if(!t.ignore)return null;var n=r.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(n)}function Os(t,r,e,n,a){for(var i=function(f){var l=r[f].trim();if(l===t.close&&!Xn(t,r,f))return{value:f};var v=f,c=Lt(a,function(p){var d=p.open;return d===l});if(c&&(v=Di(c,r,f,n,a)),v===-1)return o=f,"break";f=v,o=f},o,s=e;s<n;++s){var u=i(s);if(s=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function Hn(t,r){var e=er(r)?{separator:r}:r,n=e.separator,a=n===void 0?",":n,i=e.isSeparateFirst,o=e.isSeparateOnlyOpenClose,s=e.isSeparateOpenClose,u=s===void 0?o:s,f=e.openCloseCharacters,l=f===void 0?ws:f,v=l.map(function(C){var b=C.open,_=C.close;return b===_?b:b+"|"+_}).join("|"),c="(\\s*"+a+"\\s*|"+v+"|\\s+)",p=new RegExp(c,"g"),d=t.split(p).filter(function(C){return C&&C!=="undefined"}),g=d.length,h=[],m=[];function x(){return m.length?(h.push(m.join("")),m=[],!0):!1}for(var S=function(C){var b=d[C].trim(),_=C,w=Lt(l,function(T){var I=T.open;return I===b}),P=Lt(l,function(T){var I=T.close;return I===b});if(w){if(_=Di(w,d,C,g,l),_!==-1&&u)return x()&&i||(h.push(d.slice(C,_+1).join("")),C=_,i)?(E=C,"break"):(E=C,"continue")}else if(P&&!Xn(P,d,C)){var O=Rs(l);return O.splice(l.indexOf(P),1),{value:Hn(t,{separator:a,isSeparateFirst:i,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:O})}}else if(Ts(b,a)&&!o)return x(),i?(E=C,"break"):(E=C,"continue");_===-1&&(_=g-1),m.push(d.slice(C,_+1).join("")),C=_,E=C},E,y=0;y<g;++y){var D=S(y);if(y=E,typeof D=="object")return D.value;if(D==="break")break}return m.length&&h.push(m.join("")),h}function fr(t){return Hn(t,"")}function mr(t){return Hn(t,",")}function yi(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function ie(t){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!r)return{prefix:"",unit:"",value:NaN};var e=r[1],n=r[2],a=r[3];return{prefix:e,unit:a,value:parseFloat(n)}}function Ql(t){return t.replace(/[\s-_]+([^\s-_])/g,function(r,e){return e.toUpperCase()})}function Ps(t,r){return t.replace(/([a-z])([A-Z])/g,function(e,n,a){return""+n+r+a.toLowerCase()})}function ee(){return Date.now?Date.now():new Date().getTime()}function rr(t,r,e){e===void 0&&(e=-1);for(var n=t.length,a=0;a<n;++a)if(r(t[a],a,t))return a;return e}function Is(t,r,e){e===void 0&&(e=-1);for(var n=t.length,a=n-1;a>=0;--a)if(r(t[a],a,t))return a;return e}function tc(t,r,e){var n=Is(t,r);return n>-1?t[n]:e}function Lt(t,r,e){var n=rr(t,r);return n>-1?t[n]:e}var bi=function(){var t=ee(),r=Ei&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return r?r.bind(window):function(e){var n=ee(),a=setTimeout(function(){e(n-t)},1e3/60);return a}}(),Gs=function(){var t=Ei&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(r){clearTimeout(r)}}();function Lr(t){return Object.keys(t)}function vt(t,r){var e=ie(t),n=e.value,a=e.unit;if(Ut(r)){var i=r[a];if(i){if(Wn(i))return i(n);if(ve[a])return ve[a](n,i)}}else if(a==="%")return n*r/100;return ve[a]?ve[a](n):n}function gn(t,r,e){return Math.max(r,Math.min(t,e))}function Ma(t,r,e,n){return n===void 0&&(n=t[0]/t[1]),[[tt(r[0],Dt),tt(r[0]/n,Dt)],[tt(r[1]*n,Dt),tt(r[1],Dt)]].filter(function(a){return a.every(function(i,o){var s=r[o],u=tt(s,Dt);return e?i<=s||i<=u:i>=s||i>=u})})[0]||t}function Ci(t,r,e,n){if(!n)return t.map(function(p,d){return gn(p,r[d],e[d])});var a=t[0],i=t[1],o=n===!0?a/i:n,s=Ma(t,r,!1,o),u=s[0],f=s[1],l=Ma(t,e,!0,o),v=l[0],c=l[1];return a<u||i<f?(a=u,i=f):(a>v||i>c)&&(a=v,i=c),[a,i]}function zs(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return e}function hn(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return r?e/r:0}function xt(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=Math.atan2(n,e);return a>=0?a:a+Math.PI*2}function Bs(t){return[0,1].map(function(r){return hn(t.map(function(e){return e[r]}))})}function wa(t){var r=Bs(t),e=xt(r,t[0]),n=xt(r,t[1]);return e<n&&n-e<Math.PI||e>n&&n-e<-Math.PI?1:-1}function Qt(t,r){return Math.sqrt(Math.pow((r?r[0]:0)-t[0],2)+Math.pow((r?r[1]:0)-t[1],2))}function tt(t,r){if(!r)return t;var e=1/r;return Math.round(t/r)/e}function Ra(t,r){return t.forEach(function(e,n){t[n]=tt(t[n],r)}),t}function As(t){for(var r=[],e=0;e<t;++e)r.push(e);return r}function ks(t){return t.reduce(function(r,e){return r.concat(e)},[])}function _i(t,r){t.indexOf(r)===-1&&t.push(r)}function bt(t,r){return t.classList?t.classList.contains(r):!!t.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}function Mi(t,r){t.classList?t.classList.add(r):t.className+=" "+r}function wi(t,r){if(t.classList)t.classList.remove(r);else{var e=new RegExp("(\\s|^)"+r+"(\\s|$)");t.className=t.className.replace(e," ")}}function Tt(t,r,e,n){t.addEventListener(r,e,n)}function wt(t,r,e,n){t.removeEventListener(r,e,n)}function Vn(t){return t?.ownerDocument||Ms}function qn(t){return Vn(t).documentElement}function vr(t){return Vn(t).body}function ur(t){var r;return((r=t?.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window}function Ri(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function jn(t){return Ut(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}function Fs(t,r,e,n,a,i){for(var o=0;o<a;++o){var s=e+o*a,u=n+o*a;t[s]+=t[u]*i,r[s]+=r[u]*i}}function Ns(t,r,e,n,a){for(var i=0;i<a;++i){var o=e+i*a,s=n+i*a,u=t[o],f=r[o];t[o]=t[s],t[s]=u,r[o]=r[s],r[s]=f}}function Ls(t,r,e,n,a){for(var i=0;i<n;++i){var o=e+i*n;t[o]/=a,r[o]/=a}}function Ti(t,r,e){for(var n=t.slice(),a=0;a<e;++a)n[a*e+r-1]=0,n[(r-1)*e+a]=0;return n[(r-1)*(e+1)]=1,n}function $t(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=t.slice(),n=ht(r),a=0;a<r;++a){var i=r*a+a;if(!tt(e[i],Dt)){for(var o=a+1;o<r;++o)if(e[r*a+o]){Ns(e,n,a,o,r);break}}if(!tt(e[i],Dt))return[];Ls(e,n,a,r,e[i]);for(var o=0;o<r;++o){var s=o,u=o+a*r,f=e[u];!tt(f,Dt)||a===o||Fs(e,n,s,a,r,-f)}}return n}function Ys(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=0;n<r;++n)for(var a=0;a<r;++a)e[a*r+n]=t[r*n+a];return e}function Oi(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=t[r*r-1],a=0;a<r-1;++a)e[a]=t[r*(r-1)+a]/n;return e[r-1]=0,e}function Ws(t,r){for(var e=ht(r),n=0;n<r-1;++n)e[r*(r-1)+n]=t[n]||0;return e}function Er(t,r){for(var e=t.slice(),n=t.length;n<r-1;++n)e[n]=0;return e[r-1]=1,e}function Zt(t,r,e){if(r===void 0&&(r=Math.sqrt(t.length)),r===e)return t;for(var n=ht(e),a=Math.min(r,e),i=0;i<a-1;++i){for(var o=0;o<a-1;++o)n[i*e+o]=t[i*r+o];n[(i+1)*e-1]=t[(i+1)*r-1],n[(e-1)*e+i]=t[(r-1)*r+i]}return n[e*e-1]=t[r*r-1],n}function we(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=ht(t);return r.forEach(function(a){n=pt(n,a,t)}),n}function pt(t,r,e){e===void 0&&(e=Math.sqrt(t.length));var n=[],a=t.length/e,i=r.length/a;if(a){if(!i)return t}else return r;for(var o=0;o<e;++o)for(var s=0;s<i;++s){n[s*e+o]=0;for(var u=0;u<a;++u)n[s*e+o]+=t[u*e+o]*r[s*a+u]}return n}function ut(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),a=0;a<e;++a)n[a]=n[a]+r[a];return n}function Q(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),a=0;a<e;++a)n[a]=n[a]-r[a];return n}function Xs(t,r){return r===void 0&&(r=t.length===6),r?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Pi(t,r){return r===void 0&&(r=t.length===9),r?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Pt(t,r,e){e===void 0&&(e=r.length);var n=pt(t,r,e),a=n[e-1];return n.map(function(i){return i/a})}function Hs(t,r){return pt(t,[1,0,0,0,0,Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1],4)}function Vs(t,r){return pt(t,[Math.cos(r),0,-Math.sin(r),0,0,1,0,0,Math.sin(r),0,Math.cos(r),0,0,0,0,1],4)}function qs(t,r){return pt(t,se(r,4))}function pe(t,r){var e=r[0],n=e===void 0?1:e,a=r[1],i=a===void 0?1:a,o=r[2],s=o===void 0?1:o;return pt(t,[n,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1],4)}function oe(t,r){return Pt(se(r,3),Er(t,3))}function Qe(t,r){var e=r[0],n=e===void 0?0:e,a=r[1],i=a===void 0?0:a,o=r[2],s=o===void 0?0:o;return pt(t,[1,0,0,0,0,1,0,0,0,0,1,0,n,i,s,1],4)}function mn(t,r){return pt(t,r,4)}function se(t,r){var e=Math.cos(t),n=Math.sin(t),a=ht(r);return a[0]=e,a[1]=n,a[r]=-n,a[r+1]=e,a}function ht(t){for(var r=t*t,e=[],n=0;n<r;++n)e[n]=n%(t+1)?0:1;return e}function Un(t,r){for(var e=ht(r),n=Math.min(t.length,r-1),a=0;a<n;++a)e[(r+1)*a]=t[a];return e}function Dr(t,r){for(var e=ht(r),n=Math.min(t.length,r-1),a=0;a<n;++a)e[r*(r-1)+a]=t[a];return e}function $n(t,r,e,n,a,i,o,s){var u=t[0],f=t[1],l=r[0],v=r[1],c=e[0],p=e[1],d=n[0],g=n[1],h=a[0],m=a[1],x=i[0],S=i[1],E=o[0],y=o[1],D=s[0],C=s[1],b=[u,0,l,0,c,0,d,0,f,0,v,0,p,0,g,0,1,0,1,0,1,0,1,0,0,u,0,l,0,c,0,d,0,f,0,v,0,p,0,g,0,1,0,1,0,1,0,1,-h*u,-m*u,-x*l,-S*l,-E*c,-y*c,-D*d,-C*d,-h*f,-m*f,-x*v,-S*v,-E*p,-y*p,-D*g,-C*g],_=$t(b,8);if(!_.length)return[];var w=pt(_,[h,m,x,S,E,y,D,C],8);return w[8]=1,Zt(Ys(w),3,4)}var $r=function(){return $r=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},$r.apply(this,arguments)};function Ii(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Gr(t,r){return r===void 0&&(r=0),wr(zr(t,r))}function js(t,r){var e=Pt(t,[r[0],r[1]||0,r[2]||0,1],4),n=e[3]||1;return[e[0]/n,e[1]/n,e[2]/n]}function rc(t,r){r===void 0&&(r=document.body);for(var e=t,n=Ii();e;){var a=getComputedStyle(e).transform;if(n=mn(Gr(a),n),e===r)break;e=e.parentElement}return n=$t(n,4),n[12]=0,n[13]=0,n[14]=0,n}function wr(t){var r=Ii();return t.forEach(function(e){var n=e.matrixFunction,a=e.functionValue;n&&(r=n(r,a))}),r}function zr(t,r){r===void 0&&(r=0);var e=Mt(t)?t:fr(t);return e.map(function(n){var a=yi(n),i=a.prefix,o=a.value,s=null,u=i,f="";if(i==="translate"||i==="translateX"||i==="translate3d"){var l=Ut(r)?$r($r({},r),{"o%":r["%"]}):{"%":r,"o%":r},v=mr(o).map(function(T,I){return I===0&&"x%"in l?l["%"]=r["x%"]:I===1&&"y%"in l?l["%"]=r["y%"]:l["%"]=r["o%"],vt(T,l)}),c=v[0],p=v[1],d=p===void 0?0:p,g=v[2],h=g===void 0?0:g;s=Qe,f=[c,d,h]}else if(i==="translateY"){var m=Ut(r)?$r({"%":r["y%"]},r):{"%":r},d=vt(o,m);s=Qe,f=[0,d,0]}else if(i==="translateZ"){var h=parseFloat(o);s=Qe,f=[0,0,h]}else if(i==="scale"||i==="scale3d"){var x=mr(o).map(function(T){return parseFloat(T)}),S=x[0],E=x[1],y=E===void 0?S:E,D=x[2],C=D===void 0?1:D;s=pe,f=[S,y,C]}else if(i==="scaleX"){var S=parseFloat(o);s=pe,f=[S,1,1]}else if(i==="scaleY"){var y=parseFloat(o);s=pe,f=[1,y,1]}else if(i==="scaleZ"){var C=parseFloat(o);s=pe,f=[1,1,C]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var b=ie(o),_=b.unit,w=b.value,P=_==="rad"?w:w*Math.PI/180;i==="rotate"||i==="rotateZ"?(u="rotateZ",s=qs):i==="rotateX"?s=Hs:i==="rotateY"&&(s=Vs),f=P}else if(i==="matrix3d")s=mn,f=mr(o).map(function(T){return parseFloat(T)});else if(i==="matrix"){var O=mr(o).map(function(T){return parseFloat(T)});s=mn,f=[O[0],O[1],0,0,O[2],O[3],0,0,0,0,1,0,O[4],O[5],0,1]}else u="";return{name:i,functionName:u,value:o,matrixFunction:s,functionValue:f}})}var Us=function(){function t(){this.keys=[],this.values=[]}var r=t.prototype;return r.get=function(e){return this.values[this.keys.indexOf(e)]},r.set=function(e,n){var a=this.keys,i=this.values,o=a.indexOf(e),s=o===-1?a.length:o;a[s]=e,i[s]=n},t}(),$s=function(){function t(){this.object={}}var r=t.prototype;return r.get=function(e){return this.object[e]},r.set=function(e,n){this.object[e]=n},t}(),Zs=typeof Map=="function",Ks=function(){function t(){}var r=t.prototype;return r.connect=function(e,n){this.prev=e,this.next=n,e&&(e.next=this),n&&(n.prev=this)},r.disconnect=function(){var e=this.prev,n=this.next;e&&(e.next=n),n&&(n.prev=e)},r.getIndex=function(){for(var e=this,n=-1;e;)e=e.prev,++n;return n},t}();function Js(t,r){var e=[],n=[];return t.forEach(function(a){var i=a[0],o=a[1],s=new Ks;e[i]=s,n[o]=s}),e.forEach(function(a,i){a.connect(e[i-1])}),t.filter(function(a,i){return!r[i]}).map(function(a,i){var o=a[0],s=a[1];if(o===s)return[0,0];var u=e[o],f=n[s-1],l=u.getIndex();u.disconnect(),f?u.connect(f,f.next):u.connect(void 0,e[0]);var v=u.getIndex();return[l,v]})}var Qs=function(){function t(e,n,a,i,o,s,u,f){this.prevList=e,this.list=n,this.added=a,this.removed=i,this.changed=o,this.maintained=s,this.changedBeforeAdded=u,this.fixed=f}var r=t.prototype;return Object.defineProperty(r,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),r.caculateOrdered=function(){var e=Js(this.changedBeforeAdded,this.fixed),n=this.changed,a=[];this.cacheOrdered=e.filter(function(i,o){var s=i[0],u=i[1],f=n[o],l=f[0],v=f[1];if(s!==u)return a.push([l,v]),!0}),this.cachePureChanged=a},t}();function Zn(t,r,e){var n=Zs?Map:e?$s:Us,a=e||function(x){return x},i=[],o=[],s=[],u=t.map(a),f=r.map(a),l=new n,v=new n,c=[],p=[],d={},g=[],h=0,m=0;return u.forEach(function(x,S){l.set(x,S)}),f.forEach(function(x,S){v.set(x,S)}),u.forEach(function(x,S){var E=v.get(x);typeof E>"u"?(++m,o.push(S)):d[E]=m}),f.forEach(function(x,S){var E=l.get(x);typeof E>"u"?(i.push(S),++h):(s.push([E,S]),m=d[S]||0,c.push([E-m,S-h]),p.push(S===E),E!==S&&g.push([E,S]))}),o.reverse(),new Qs(t,r,i,o,g,s,c,p)}var tu=function(){function t(e,n){e===void 0&&(e=[]),this.findKeyCallback=n,this.list=[].slice.call(e)}var r=t.prototype;return r.update=function(e){var n=[].slice.call(e),a=Zn(this.list,n,this.findKeyCallback);return this.list=n,a},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var xn=function(t,r){return xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},xn(t,r)};function ru(t,r){xn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Gi=typeof Map=="function"?void 0:function(){var t=0;return function(r){return r.__DIFF_KEY__||(r.__DIFF_KEY__=++t)}}(),zi=function(t){ru(r,t);function r(e){return e===void 0&&(e=[]),t.call(this,e,Gi)||this}return r}(tu);function eu(t,r){return Zn(t,r,Gi)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sn=function(){return Sn=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Sn.apply(this,arguments)};function nu(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}var Kn=function(){function t(){this._events={}}var r=t.prototype;return r.on=function(e,n){if(Ut(e))for(var a in e)this.on(a,e[a]);else this._addEvent(e,n,{});return this},r.off=function(e,n){if(!e)this._events={};else if(Ut(e))for(var a in e)this.off(a);else if(!n)this._events[e]=[];else{var i=this._events[e];if(i){var o=rr(i,function(s){return s.listener===n});o>-1&&i.splice(o,1)}}return this},r.once=function(e,n){var a=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(i){a._addEvent(e,i,{once:!0})})},r.emit=function(e,n){var a=this;n===void 0&&(n={});var i=this._events[e];if(!e||!i)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,nu(i).forEach(function(s){s.listener(n),s.once&&a.off(e,s.listener)}),!o},r.trigger=function(e,n){return n===void 0&&(n={}),this.emit(e,n)},r._addEvent=function(e,n,a){var i=this._events;i[e]=i[e]||[];var o=i[e];o.push(Sn({listener:n},a))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var En=function(t,r){return En=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},En(t,r)};function au(t,r){En(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Rr=function(){return Rr=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Rr.apply(this,arguments)};function iu(t){var r=t.container;return r===document.body?[r.scrollLeft||document.documentElement.scrollLeft,r.scrollTop||document.documentElement.scrollTop]:[r.scrollLeft,r.scrollTop]}function Ta(t,r){return t.addEventListener("scroll",r),function(){t.removeEventListener("scroll",r)}}function de(t){if(t){if(er(t))return document.querySelector(t)}else return null;if(Wn(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var ou=function(t){au(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var a=n._currentOptions;n._lock||!a||n.emit("scrollDrag",{next:function(i){n.checkScroll({container:a.container,inputEvent:i})}})},n}var e=r.prototype;return e.dragStart=function(n,a){var i=de(a.container);if(!i){this._flag=!1;return}var o=0,s=0,u=0,f=0;if(i===document.body)u=window.innerWidth,f=window.innerHeight;else{var l=i.getBoundingClientRect();o=l.top,s=l.left,u=l.width,f=l.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:u,height:f},this._prevScrollPos=this._getScrollPosition([0,0],a),this._currentOptions=a,this._registerScrollEvent(a)},e.drag=function(n,a){if(clearTimeout(this._timer),!!this._flag){var i=n.clientX,o=n.clientY,s=a.threshold,u=s===void 0?0:s,f=this,l=f._startRect,v=f._startPos;this._currentOptions=a;var c=[0,0];return l.top>o-u?(v[1]>l.top||o<v[1])&&(c[1]=-1):l.top+l.height<o+u&&(v[1]<l.top+l.height||o>v[1])&&(c[1]=1),l.left>i-u?(v[0]>l.left||i<v[0])&&(c[0]=-1):l.left+l.width<i+u&&(v[0]<l.left+l.width||i>v[0])&&(c[0]=1),!c[0]&&!c[1]?!1:this._continueDrag(Rr(Rr({},a),{direction:c,inputEvent:n,isDrag:!0}))}},e.checkScroll=function(n){var a=this;if(this._isWait)return!1;var i=n.prevScrollPos,o=i===void 0?this._prevScrollPos:i,s=n.direction,u=n.throttleTime,f=u===void 0?0:u,l=n.inputEvent,v=n.isDrag,c=this._getScrollPosition(s||[0,0],n),p=c[0]-o[0],d=c[1]-o[1],g=s||[p?Math.abs(p)/p:0,d?Math.abs(d)/d:0];return this._prevScrollPos=c,this._lock=!1,!p&&!d?!1:(this.emit("move",{offsetX:g[0]?p:0,offsetY:g[1]?d:0,inputEvent:l}),f&&v&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(n)},f)),!0)},e.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},e._getScrollPosition=function(n,a){var i=a.container,o=a.getScrollPosition,s=o===void 0?iu:o;return s({container:de(i),direction:n})},e._continueDrag=function(n){var a=this,i,o=n.container,s=n.direction,u=n.throttleTime,f=n.useScroll,l=n.isDrag,v=n.inputEvent;if(!(!this._flag||l&&this._isWait)){var c=ee(),p=Math.max(u+this._prevTime-c,0);if(p>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(n)},p),!1;this._prevTime=c;var d=this._getScrollPosition(s,n);this._prevScrollPos=d,l&&(this._isWait=!0),f||(this._lock=!0);var g={container:de(o),direction:s,inputEvent:v};return(i=n.requestScroll)===null||i===void 0||i.call(n,g),this.emit("scroll",g),this._isWait=!1,f||this.checkScroll(Rr(Rr({},n),{prevScrollPos:d,direction:s,inputEvent:v}))}},e._registerScrollEvent=function(n){this._unregisterScrollEvent();var a=n.checkScrollEvent;if(a){var i=a===!0?Ta:a,o=de(n.container);a===!0&&(o===document.body||o===document.documentElement)?this._unregister=Ta(window,this._onScroll):this._unregister=i(o,this._onScroll)}},e._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},r}(Kn);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function su(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}function Ft(t){return tt(t,Dt)}function uu(t,r){return t.every(function(e,n){return Ft(e-r[n])===0})}function fu(t,r){return!Ft(t[0]-r[0])&&!Ft(t[1]-r[1])}function Bi(t){return t.length<3?0:Math.abs(zs(t.map(function(r,e){var n=t[e+1]||t[0];return r[0]*n[1]-n[0]*r[1]})))/2}function Oa(t,r){var e=r.width,n=r.height,a=r.left,i=r.top,o=yr(t),s=o.minX,u=o.minY,f=o.maxX,l=o.maxY,v=e/(f-s),c=n/(l-u);return t.map(function(p){return[a+(p[0]-s)*v,i+(p[1]-u)*c]})}function yr(t){var r=t.map(function(n){return n[0]}),e=t.map(function(n){return n[1]});return{minX:Math.min.apply(Math,r),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,r),maxY:Math.max.apply(Math,e)}}function Dn(t,r,e){var n=t[0],a=t[1],i=yr(r),o=i.minX,s=i.maxX,u=[[o,a],[s,a]],f=Re(u[0],u[1]),l=yn(r),v=[];if(l.forEach(function(d){var g=Re(d[0],d[1]),h=d[0];if(uu(f,g))v.push({pos:t,line:d,type:"line"});else{var m=Ai(Jn(f,g),[u,d]);m.forEach(function(x){d.some(function(S){return fu(S,x)})?v.push({pos:x,line:d,type:"point"}):Ft(h[1]-a)!==0&&v.push({pos:x,line:d,type:"intersection"})})}}),Lt(v,function(d){return d[0]===n}))return!0;var c=0,p={};return v.forEach(function(d){var g=d.pos,h=d.type,m=d.line;if(!(g[0]>n))if(h==="intersection")++c;else{if(h==="line")return;if(h==="point"){var x=Lt(m,function(y){return y[1]!==a}),S=p[g[0]],E=x[1]>a?1:-1;S?S!==E&&++c:p[g[0]]=E}}}),c%2===1}function Re(t,r){var e=t[0],n=t[1],a=r[0],i=r[1],o=a-e,s=i-n;Math.abs(o)<Dt&&(o=0),Math.abs(s)<Dt&&(s=0);var u=0,f=0,l=0;return o?s?(u=-s/o,f=1,l=-u*e-n):(f=1,l=-n):s&&(u=-1,l=e),[u,f,l]}function Jn(t,r){var e=t[0],n=t[1],a=t[2],i=r[0],o=r[1],s=r[2],u=e===0&&i===0,f=n===0&&o===0,l=[];if(u&&f)return[];if(u){var v=-a/n,c=-s/o;return v!==c?[]:[[-1/0,v],[1/0,v]]}else if(f){var p=-a/e,d=-s/i;return p!==d?[]:[[p,-1/0],[p,1/0]]}else if(e===0){var g=-a/n,h=-(o*g+s)/i;l=[[h,g]]}else if(i===0){var g=-s/o,h=-(n*g+a)/e;l=[[h,g]]}else if(n===0){var h=-a/e,g=-(i*h+s)/o;l=[[h,g]]}else if(o===0){var h=-s/i,g=-(e*h+a)/n;l=[[h,g]]}else{var h=(n*s-o*a)/(o*e-n*i),g=-(e*h+a)/n;l=[[h,g]]}return l.map(function(m){return[m[0],m[1]]})}function Ai(t,r){var e=r.map(function(v){return[0,1].map(function(c){return[Math.min(v[0][c],v[1][c]),Math.max(v[0][c],v[1][c])]})}),n=[];if(t.length===2){var a=t[0],i=a[0],o=a[1];if(Ft(i-t[1][0])){if(!Ft(o-t[1][1])){var f=Math.max.apply(Math,e.map(function(v){return v[0][0]})),l=Math.min.apply(Math,e.map(function(v){return v[0][1]}));if(Ft(f-l)>0)return[];n=[[f,o],[l,o]]}}else{var s=Math.max.apply(Math,e.map(function(v){return v[1][0]})),u=Math.min.apply(Math,e.map(function(v){return v[1][1]}));if(Ft(s-u)>0)return[];n=[[i,s],[i,u]]}}return n.length||(n=t.filter(function(v){var c=v[0],p=v[1];return e.every(function(d){return 0<=Ft(c-d[0][0])&&0<=Ft(d[0][1]-c)&&0<=Ft(p-d[1][0])&&0<=Ft(d[1][1]-p)})})),n.map(function(v){return[Ft(v[0]),Ft(v[1])]})}function yn(t){return su(t.slice(1),[t[0]]).map(function(r,e){return[t[e],r]})}function lu(t,r){var e=t.slice(),n=r.slice();wa(e)===-1&&e.reverse(),wa(n)===-1&&n.reverse();var a=yn(e),i=yn(n),o=a.map(function(l){return Re(l[0],l[1])}),s=i.map(function(l){return Re(l[0],l[1])}),u=[];o.forEach(function(l,v){var c=a[v],p=[];s.forEach(function(d,g){var h=Jn(l,d),m=Ai(h,[c,i[g]]);p.push.apply(p,m.map(function(x){return{index1:v,index2:g,pos:x,type:"intersection"}}))}),p.sort(function(d,g){return Qt(c[0],d.pos)-Qt(c[0],g.pos)}),u.push.apply(u,p),Dn(c[1],n)&&u.push({index1:v,index2:-1,pos:c[1],type:"inside"})}),i.forEach(function(l,v){if(Dn(l[1],e)){var c=!1,p=rr(u,function(d){var g=d.index2;return g===v?(c=!0,!1):!!c});p===-1&&(c=!1,p=rr(u,function(d){var g=d.index1,h=d.index2;return g===-1&&h+1===v?(c=!0,!1):!!c})),p===-1?u.push({index1:-1,index2:v,pos:l[1],type:"inside"}):u.splice(p,0,{index1:-1,index2:v,pos:l[1],type:"inside"})}});var f={};return u.filter(function(l){var v=l.pos,c=v[0]+"x"+v[1];return f[c]?!1:(f[c]=!0,!0)})}function cu(t,r){var e=lu(t,r);return e.map(function(n){var a=n.pos;return a})}function vu(t,r){var e=cu(t,r);return Bi(e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bn=function(t,r){return bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},bn(t,r)};function pu(t,r){bn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Et=function(){return Et=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Et.apply(this,arguments)};function du(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=Math.atan2(n,e);return a>=0?a:a+Math.PI*2}function tn(t){return du([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function gu(t){return t.touches&&t.touches.length>=2}function ge(t){return t?t.touches?mu(t.touches):[ki(t)]:[]}function hu(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function Pa(t,r,e){var n=e.length,a=Zr(t,n),i=a.clientX,o=a.clientY,s=a.originalClientX,u=a.originalClientY,f=Zr(r,n),l=f.clientX,v=f.clientY,c=Zr(e,n),p=c.clientX,d=c.clientY,g=i-l,h=o-v,m=i-p,x=o-d;return{clientX:s,clientY:u,deltaX:g,deltaY:h,distX:m,distY:x}}function rn(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function mu(t){for(var r=Math.min(t.length,2),e=[],n=0;n<r;++n)e.push(ki(t[n]));return e}function ki(t){return{clientX:t.clientX,clientY:t.clientY}}function Zr(t,r){r===void 0&&(r=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(t.length,r),a=0;a<n;++a){var i=t[a];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return r?{clientX:e.clientX/r,clientY:e.clientY/r,originalClientX:e.originalClientX/r,originalClientY:e.originalClientY/r}:e}var en=function(){function t(r){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=r,this.prevClients=r,this.length=r.length}return t.prototype.getAngle=function(r){return r===void 0&&(r=this.prevClients),tn(r)},t.prototype.getRotation=function(r){return r===void 0&&(r=this.prevClients),tn(r)-tn(this.startClients)},t.prototype.getPosition=function(r,e){r===void 0&&(r=this.prevClients);var n=Pa(r||this.prevClients,this.prevClients,this.startClients),a=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(a*a+i*i),this.prevClients=r,n},t.prototype.getPositions=function(r){r===void 0&&(r=this.prevClients);for(var e=this.prevClients,n=this.startClients,a=Math.min(this.length,e.length),i=[],o=0;o<a;++o)i[o]=Pa([r[o]],[e[o]],[n[o]]);return i},t.prototype.getMovement=function(r){var e=this.movement;if(!r)return e;var n=Zr(r,this.length),a=Zr(this.prevClients,this.length),i=n.clientX-a.clientX,o=n.clientY-a.clientY;return Math.sqrt(i*i+o*o)+e},t.prototype.getDistance=function(r){return r===void 0&&(r=this.prevClients),rn(r)},t.prototype.getScale=function(r){return r===void 0&&(r=this.prevClients),rn(r)/rn(this.startClients)},t.prototype.move=function(r,e){this.startClients.forEach(function(n){n.clientX-=r,n.clientY-=e}),this.prevClients.forEach(function(n){n.clientX-=r,n.clientY-=e})},t}(),Ia=["textarea","input"],xu=function(t){pu(r,t);function r(e,n){n===void 0&&(n={});var a=t.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._useMouse=!1,a._useTouch=!1,a._useDrag=!1,a._dragFlag=!1,a._isTrusted=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a._prevInputEvent=null,a._isDragAPI=!1,a._isIdle=!0,a._preventMouseEventId=0,a._window=window,a.onDragStart=function(c,p){if(p===void 0&&(p=!0),!(!a.flag&&c.cancelable===!1)){var d=c.type.indexOf("drag")>=-1;if(!(a.flag&&d)){a._isDragAPI=!0;var g=a.options,h=g.container,m=g.pinchOutside,x=g.preventWheelClick,S=g.preventRightClick,E=g.preventDefault,y=g.checkInput,D=g.dragFocusedInput,C=g.preventClickEventOnDragStart,b=g.preventClickEventOnDrag,_=g.preventClickEventByCondition,w=a._useTouch,P=!a.flag;if(a._isSecondaryButton=c.which===3||c.button===2,x&&(c.which===2||c.button===1)||S&&(c.which===3||c.button===2))return a.stop(),!1;if(P){var O=a._window.document.activeElement,T=c.target;if(T){var I=T.tagName.toLowerCase(),G=Ia.indexOf(I)>-1,k=T.isContentEditable;if(G||k){if(y||!D&&O===T)return!1;if(O&&(O===T||k&&O.isContentEditable&&O.contains(T)))if(D)T.blur();else return!1}else if((E||c.type==="touchstart")&&O){var F=O.tagName.toLowerCase();(O.isContentEditable||Ia.indexOf(F)>-1)&&O.blur()}(C||b||_)&&Tt(a._window,"click",a._onClick,!0)}a.clientStores=[new en(ge(c))],a._isIdle=!1,a.flag=!0,a.isDrag=!1,a._isTrusted=p,a._dragFlag=!0,a._prevInputEvent=c,a.data={},a.doubleFlag=ee()-a.prevTime<200,a._isMouseEvent=hu(c),!a._isMouseEvent&&a._preventMouseEvent&&a._allowMouseEvent();var A=a._preventMouseEvent||a.emit("dragStart",Et(Et({data:a.data,datas:a.data,inputEvent:c,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:p,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){c.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));A===!1&&a.stop(),a._isMouseEvent&&a.flag&&E&&c.preventDefault()}if(!a.flag)return!1;var L=0;if(P?(a._attchDragEvent(),w&&m&&(L=setTimeout(function(){Tt(h,"touchstart",a.onDragStart,{passive:!1})}))):w&&m&&wt(h,"touchstart",a.onDragStart),a.flag&&gu(c)){if(clearTimeout(L),P&&c.touches.length!==c.changedTouches.length)return;a.pinchFlag||a.onPinchStart(c)}}}},a.onDrag=function(c,p){if(a.flag){var d=a.options.preventDefault;!a._isMouseEvent&&d&&c.preventDefault(),a._prevInputEvent=c;var g=ge(c),h=a.moveClients(g,c,!1);if(a._dragFlag){if(a.pinchFlag||h.deltaX||h.deltaY){var m=a._preventMouseEvent||a.emit("drag",Et(Et({},h),{isScroll:!!p,inputEvent:c}));if(m===!1){a.stop();return}}a.pinchFlag&&a.onPinch(c,g)}a.getCurrentStore().getPosition(g,!0)}},a.onDragEnd=function(c){if(a.flag){var p=a.options,d=p.pinchOutside,g=p.container,h=p.preventClickEventOnDrag,m=p.preventClickEventOnDragStart,x=p.preventClickEventByCondition,S=a.isDrag;(h||m||x)&&requestAnimationFrame(function(){a._allowClickEvent()}),!x&&!m&&h&&!S&&a._allowClickEvent(),a._useTouch&&d&&wt(g,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(c);var E=c?.touches?ge(c):[],y=E.length;y===0||!a.options.keepDragging?a.flag=!1:a._addStore(new en(E));var D=a._getPosition(),C=ee(),b=!S&&a.doubleFlag;a._prevInputEvent=null,a.prevTime=S||b?0:C,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",Et({data:a.data,datas:a.data,isDouble:b,isDrag:S,isClick:!S,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:c,isTrusted:a._isTrusted},D)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,clearTimeout(a._preventMouseEventId),a._preventMouseEventId=setTimeout(function(){a._preventMouseEvent=!1},200)),a._isIdle=!0)}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){wt(a._window,"click",a._onClick,!0)},a._onClick=function(c){a._allowClickEvent(),a._allowMouseEvent();var p=a.options.preventClickEventByCondition;p?.(c)||(c.stopPropagation(),c.preventDefault())},a._onContextMenu=function(c){var p=a.options;p.preventRightClick?a.onDragEnd(c):c.preventDefault()},a._passCallback=function(){};var i=[].concat(e),o=i[0];a._window=Ri(o)?o:ur(o),a.options=Et({checkInput:!1,container:o&&!("document"in o)?ur(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var s=a.options,u=s.container,f=s.events,l=s.checkWindowBlur;if(a._useDrag=f.indexOf("drag")>-1,a._useTouch=f.indexOf("touch")>-1,a._useMouse=f.indexOf("mouse")>-1,a.targets=i,a._useDrag&&i.forEach(function(c){Tt(c,"dragstart",a.onDragStart)}),a._useMouse&&(i.forEach(function(c){Tt(c,"mousedown",a.onDragStart),Tt(c,"mousemove",a._passCallback)}),Tt(u,"contextmenu",a._onContextMenu)),l&&Tt(ur(),"blur",a.onBlur),a._useTouch){var v={passive:!1};i.forEach(function(c){Tt(c,"touchstart",a.onDragStart,v),Tt(c,"touchmove",a._passCallback,v)})}return a}return r.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},r.prototype.getMovement=function(e){return this.getCurrentStore().getMovement(e)+this.clientStores.slice(1).reduce(function(n,a){return n+a.movement},0)},r.prototype.isDragging=function(){return this.isDrag},r.prototype.isIdle=function(){return this._isIdle},r.prototype.isFlag=function(){return this.flag},r.prototype.isPinchFlag=function(){return this.pinchFlag},r.prototype.isDoubleFlag=function(){return this.doubleFlag},r.prototype.isPinching=function(){return this.isPinch},r.prototype.scrollBy=function(e,n,a,i){i===void 0&&(i=!0),this.flag&&(this.clientStores[0].move(e,n),i&&this.onDrag(a,!0))},r.prototype.move=function(e,n){var a=e[0],i=e[1],o=this.getCurrentStore(),s=o.prevClients;return this.moveClients(s.map(function(u){var f=u.clientX,l=u.clientY;return{clientX:f+a,clientY:l+i,originalClientX:f,originalClientY:l}}),n,!0)},r.prototype.triggerDragStart=function(e){this.onDragStart(e,!1)},r.prototype.setEventData=function(e){var n=this.data;for(var a in e)n[a]=e[a];return this},r.prototype.setEventDatas=function(e){return this.setEventData(e)},r.prototype.getCurrentEvent=function(e){return e===void 0&&(e=this._prevInputEvent),Et(Et({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},r.prototype.getEventData=function(){return this.data},r.prototype.getEventDatas=function(){return this.data},r.prototype.unset=function(){var e=this,n=this.targets,a=this.options.container;this.off(),wt(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(i){wt(i,"dragstart",e.onDragStart)}),this._useMouse&&(n.forEach(function(i){wt(i,"mousedown",e.onDragStart)}),wt(a,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(i){wt(i,"touchstart",e.onDragStart)}),wt(a,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},r.prototype.onPinchStart=function(e){var n=this,a=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>a)){var i=new en(ge(e));this.pinchFlag=!0,this._addStore(i);var o=this.emit("pinchStart",Et(Et({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:e,isTrusted:this._isTrusted,preventDefault:function(){e.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},r.prototype.onPinch=function(e,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Et(Et({data:this.data,datas:this.data,movement:this.getMovement(n),angle:a.getAngle(n),rotation:a.getRotation(n),touches:a.getPositions(n),scale:a.getScale(n),distance:a.getDistance(n)},a.getPosition(n)),{inputEvent:e,isTrusted:this._isTrusted}))}},r.prototype.onPinchEnd=function(e){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",Et(Et({data:this.data,datas:this.data,isPinch:n,touches:a.getPositions()},a.getPosition()),{inputEvent:e}))}},r.prototype.getCurrentStore=function(){return this.clientStores[0]},r.prototype.moveClients=function(e,n,a){var i=this._getPosition(e,a),o=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var s=!1;return!o&&this.isDrag&&(s=!0),Et(Et({data:this.data,datas:this.data},i),{movement:this.getMovement(e),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:s})},r.prototype._addStore=function(e){this.clientStores.splice(0,0,e)},r.prototype._getPosition=function(e,n){var a=this.getCurrentStore(),i=a.getPosition(e,n),o=this.clientStores.slice(1).reduce(function(f,l){var v=l.getPosition();return f.distX+=v.distX,f.distY+=v.distY,f},i),s=o.distX,u=o.distY;return Et(Et({},i),{distX:s,distY:u})},r.prototype._attchDragEvent=function(){var e=this._window,n=this.options.container,a={passive:!1};this._isDragAPI&&(Tt(n,"dragover",this.onDrag,a),Tt(e,"dragend",this.onDragEnd)),this._useMouse&&(Tt(n,"mousemove",this.onDrag),Tt(e,"mouseup",this.onDragEnd)),this._useTouch&&(Tt(n,"touchmove",this.onDrag,a),Tt(e,"touchend",this.onDragEnd,a),Tt(e,"touchcancel",this.onDragEnd,a))},r.prototype._dettachDragEvent=function(){var e=this._window,n=this.options.container;this._isDragAPI&&(wt(n,"dragover",this.onDrag),wt(e,"dragend",this.onDragEnd)),this._useMouse&&(wt(n,"mousemove",this.onDrag),wt(e,"mouseup",this.onDragEnd)),this._useTouch&&(wt(n,"touchstart",this.onDragStart),wt(n,"touchmove",this.onDrag),wt(e,"touchend",this.onDragEnd),wt(e,"touchcancel",this.onDragEnd))},r.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},r}(Kn);function Su(t){for(var r=5381,e=t.length;e;)r=r*33^t.charCodeAt(--e);return r>>>0}var Eu=Su;function Du(t){return Eu(t).toString(36)}function yu(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function bu(t,r,e){return e.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,a){var i=a.trim();return(i?mr(i):[""]).map(function(o){var s=o.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(t))):s?".".concat(t," ").concat(s):".".concat(t)}).join(", ")+" {"})}function Cu(t,r,e,n,a){var i=Vn(n),o=i.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),e.nonce&&o.setAttribute("nonce",e.nonce),o.innerHTML=bu(t,r,e),(a||i.head||i.body).appendChild(o),o}function _u(t){var r="rCS"+Du(t);return{className:r,inject:function(e,n){n===void 0&&(n={});var a=yu(e),i=(a||e.ownerDocument||document).querySelector('style[data-styled-id="'.concat(r,'"]'));if(!i)i=Cu(r,t,n,e,a);else{var o=parseFloat(i.getAttribute("data-styled-count"))||0;i.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var s,u=parseFloat(i.getAttribute("data-styled-count"))||0;u<=1?(i.remove?i.remove():(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=null):i.setAttribute("data-styled-count","".concat(u-1))}}}}}var Cn=function(){return Cn=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Cn.apply(this,arguments)};function Mu(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}function Fi(t,r){var e=_u(r),n=e.className;return Bt.forwardRef(function(a,i){var o=a.className,s=o===void 0?"":o;a.cspNonce;var u=Mu(a,["className","cspNonce"]),f=Bt.useRef();return Bt.useImperativeHandle(i,function(){return f.current},[]),Bt.useEffect(function(){var l=e.inject(f.current,{nonce:a.cspNonce});return function(){l.destroy()}},[]),Bt.createElement(t,Cn({ref:f,"data-styled-id":n,className:"".concat(s," ").concat(n)},u))})}var _n=function(t,r){return _n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},_n(t,r)};function Yr(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");_n(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var M=function(){return M=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},M.apply(this,arguments)};function wu(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}function Ru(t,r,e,n){var a=arguments.length,i=a<3?r:n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(r,e,i):o(r,e))||i);return a>3&&i&&Object.defineProperty(r,e,i),i}function Tu(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),a,i=[],o;try{for(;(r===void 0||r-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return i}function N(t,r,e){if(arguments.length===2)for(var n=0,a=r.length,i;n<a;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return t.concat(i||Array.prototype.slice.call(r))}function Wr(t,r){return M({events:[],props:[],name:t},r)}var Ou=["n","w","s","e"],Fe=["n","w","s","e","nw","ne","sw","se"];function Pu(t,r){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(r,'deg);transform-origin: 16px 16px"></path></svg>')}function Iu(t){var r=Pu(1,t),e=Math.round(t/45)*45%180,n="ns-resize";return e===135?n="nwse-resize":e===45?n="nesw-resize":e===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(r,"') 16 16, ").concat(n,";")}var Xr=xs(),Ni=Xr.browser.webkit,Li=Ni&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,r=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return r?parseFloat(r[1])<605:!1}(),Yi=Xr.browser.name,Wi=parseInt(Xr.browser.version,10),Gu=Yi==="chrome",zu=Xr.browser.chromium,Bu=parseInt(Xr.browser.chromiumVersion,10)||0,Au=Gu&&Wi>=109||zu&&Bu>=109,ku=Yi==="firefox",Fu=parseInt(Xr.browser.webkitVersion,10)>=612||Wi>=15,Qn="moveable-",Nu=Fe.map(function(t){var r="",e="",n="center",a="center",i="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(r="top: ".concat(i,";"),a="bottom"),t.indexOf("s")>-1&&(r="top: 0px;",a="top"),t.indexOf("w")>-1&&(e="left: ".concat(i,";"),n="right"),t.indexOf("e")>-1&&(e="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(e).concat(r,`
        transform-origin: `).concat(n," ").concat(a,`;
    }`)}).join(`
`),Lu=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Nu,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(Iu(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(Li?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Yu=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Mn=1e-4,kt=1e-7,he=1e-9,wn=Math.pow(10,10),Ga=-wn,Wu={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},ta={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Xi={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Hi=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function ue(t,r,e,n,a,i){var o,s;i===void 0&&(i="draggable");var u=(s=(o=r.gestos[i])===null||o===void 0?void 0:o.move(e,t.inputEvent))!==null&&s!==void 0?s:{},f=u.originalDatas||u.datas,l=f[i]||(f[i]={});return M(M({},u),{isPinch:!!n,parentEvent:!0,datas:l,originalDatas:t.originalDatas})}var Br=function(){function t(r){var e;r===void 0&&(r="draggable"),this.ableName=r,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(e={},e[r]={},e)}return t.prototype.dragStart=function(r,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),M(M({},this.move(r,e.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(r,e){return this.move([r[0]-this.prevX,r[1]-this.prevY],e)},t.prototype.move=function(r,e){var n,a,i=!1;if(!this.isFlag)this.prevX=r[0],this.prevY=r[1],this.startX=r[0],this.startY=r[1],n=r[0],a=r[1],this.isFlag=!0;else{var o=this.isDrag;n=this.prevX+r[0],a=this.prevY+r[1],(r[0]||r[1])&&(this.isDrag=!0),!o&&this.isDrag&&(i=!0)}return this.prevX=n,this.prevY=a,{type:"drag",clientX:n,clientY:a,inputEvent:e,isFirstDrag:i,isDrag:this.isDrag,distX:n-this.startX,distY:a-this.startY,deltaX:r[0],deltaY:r[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Sr(t,r,e,n){var a=t.length===16,i=a?4:3,o=_r(t,e,n,i),s=R(o,4),u=R(s[0],2),f=u[0],l=u[1],v=R(s[1],2),c=v[0],p=v[1],d=R(s[2],2),g=d[0],h=d[1],m=R(s[3],2),x=m[0],S=m[1],E=R(mt(t,r,i),2),y=E[0],D=E[1],C=Math.min(f,c,g,x),b=Math.min(l,p,h,S),_=Math.max(f,c,g,x),w=Math.max(l,p,h,S);f=f-C||0,c=c-C||0,g=g-C||0,x=x-C||0,l=l-b||0,p=p-b||0,h=h-b||0,S=S-b||0,y=y-C||0,D=D-b||0;var P=t[0],O=t[i+1],T=zt(P*O);return{left:C,top:b,right:_,bottom:w,origin:[y,D],pos1:[f,l],pos2:[c,p],pos3:[g,h],pos4:[x,S],direction:T}}function Vi(t,r){var e=r.clientX,n=r.clientY,a=r.datas,i=t.state,o=i.moveableClientRect,s=i.rootMatrix,u=i.is3d,f=i.pos1,l=o.left,v=o.top,c=u?4:3,p=R(Q(Fr(s,[e-l,n-v],c),f),2),d=p[0],g=p[1],h=R(Jt({datas:a,distX:d,distY:g}),2),m=h[0],x=h[1];return[m,x]}function Cr(t,r){var e=r.datas,n=t.state,a=n.allMatrix,i=n.beforeMatrix,o=n.is3d,s=n.left,u=n.top,f=n.origin,l=n.offsetMatrix,v=n.targetMatrix,c=n.transformOrigin,p=o?4:3;e.is3d=o,e.matrix=a,e.targetMatrix=v,e.beforeMatrix=i,e.offsetMatrix=l,e.transformOrigin=c,e.inverseMatrix=$t(a,p),e.inverseBeforeMatrix=$t(i,p),e.absoluteOrigin=Er(ut([s,u],f),p),e.startDragBeforeDist=Pt(e.inverseBeforeMatrix,e.absoluteOrigin,p),e.startDragDist=Pt(e.inverseMatrix,e.absoluteOrigin,p)}function Xu(t){return Sr(t.datas.beforeTransform,[50,50],100,100).direction}function Ne(t,r,e){var n=r.datas,a=r.originalDatas.beforeRenderable,i=n.transformIndex,o=a.nextTransforms,s=o.length,u=a.nextTransformAppendedIndexes,f=-1;i===-1?(e==="translate"?f=0:e==="rotate"&&(f=rr(o,function(p){return p.match(/scale\(/g)})),f===-1&&(f=o.length),n.transformIndex=f):Lt(u,function(p){return p.index===i&&p.functionName===e})?f=i:f=i+u.filter(function(p){return p.index<i}).length;var l=dl(o,t.state,f),v=l.targetFunction,c=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=l.beforeFunctionTexts,n.afterFunctionTexts=l.afterFunctionTexts,n.beforeTransform=l.beforeFunctionMatrix,n.beforeTransform2=l.beforeFunctionMatrix2,n.targetTansform=l.targetFunctionMatrix,n.afterTransform=l.afterFunctionMatrix,n.afterTransform2=l.afterFunctionMatrix2,n.targetAllTransform=l.allFunctionMatrix,v.functionName===c?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>f&&(n.isAppendTransform=!0,a.nextTransformAppendedIndexes=N(N([],R(u),!1),[{functionName:e,index:f,isAppend:!0}],!1))}function Le(t,r,e){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?e:r," ").concat(t.afterFunctionTexts.join(" "))}function Hu(t){var r=t.datas,e=t.distX,n=t.distY,a=R(ji({datas:r,distX:e,distY:n}),2),i=a[0],o=a[1],s=qi(r,Ws([i,o],4));return Pt(s,Er([0,0,0],4),4)}function qi(t,r,e){var n=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,u=e?pt(s,r,4):pt(r,s,4),f=pt($t(e?i:n,4),u,4),l=pt(f,$t(e?o:a,4),4);return l}function ji(t){var r=t.datas,e=t.distX,n=t.distY,a=r.inverseBeforeMatrix,i=r.is3d,o=r.startDragBeforeDist,s=r.absoluteOrigin,u=i?4:3;return Q(Pt(a,ut(s,[e,n]),u),o)}function Jt(t,r){var e=t.datas,n=t.distX,a=t.distY,i=e.inverseBeforeMatrix,o=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,f=e.startDragDist,l=e.absoluteOrigin,v=s?4:3;return Q(Pt(r?i:o,ut(l,[n,a]),v),r?u:f)}function Vu(t,r){var e=t.datas,n=t.distX,a=t.distY;e.beforeMatrix;var i=e.matrix,o=e.is3d;e.startDragBeforeDist;var s=e.startDragDist,u=e.absoluteOrigin,f=o?4:3;return Q(Pt(i,ut(s,[n,a]),f),u)}function qu(t,r,e,n,a,i){return n===void 0&&(n=r),a===void 0&&(a=e),i===void 0&&(i=[0,0]),t?t.map(function(o,s){var u=ie(o),f=u.value,l=u.unit,v=s?a:n,c=s?e:r;if(o==="%"||isNaN(f)){var p=v?i[s]/v:0;return c*p}else if(l!=="%")return f;return c*f/100}):i}function Ui(t){var r=[];return t[1]>=0&&(t[0]>=0&&r.push(3),t[0]<=0&&r.push(2)),t[1]<=0&&(t[0]>=0&&r.push(1),t[0]<=0&&r.push(0)),r}function ju(t,r){return Ui(r).map(function(e){return t[e]})}function nn(t,r){var e=(r+1)/2;return[Me(t[0][0],t[1][0],e,1-e),Me(t[0][1],t[1][1],e,1-e)]}function Ct(t,r){var e=nn([t[0],t[1]],r[0]),n=nn([t[2],t[3]],r[0]);return nn([e,n],r[1])}function Uu(t,r,e,n,a,i){var o=_r(r,e,n,a),s=Ct(o,i),u=t[0]-s[0],f=t[1]-s[1];return[u,f]}function fe(t,r,e,n){return pt(t,Jr(r,n,e),n)}function $u(t,r,e,n){var a=t.transformOrigin,i=t.offsetMatrix,o=t.is3d,s=o?4:3,u;if(er(e)){var f=r.beforeTransform,l=r.afterTransform;n?u=Zt(Gr(e),4,s):u=Zt(pt(pt(f,Gr([e]),4),l,4),4,s)}else u=e;return fe(i,u,a,s)}function Zu(t,r){var e=t.transformOrigin,n=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,o=t.targetAllTransform,s=a?4:3;return fe(n,pt(o||i,Un(r,s),s),e,s)}function Ye(t,r){var e=Hr(r);return{setTransform:function(n,a){a===void 0&&(a=-1),e.startTransforms=Mt(n)?n:fr(n),Rn(t,r,a)},setTransformIndex:function(n){Rn(t,r,n)}}}function We(t,r,e){var n=Hr(r),a=n.startTransforms;Rn(t,r,rr(a,function(i){return i.indexOf("".concat(e,"("))===0}))}function Rn(t,r,e){var n=Hr(r),a=r.datas;if(a.transformIndex=e,e!==-1){var i=n.startTransforms[e];if(i){var o=t.state,s=zr([i],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});a.startValue=s[0].functionValue}}}function ra(t,r){var e=Hr(t);e.nextTransforms=fr(r)}function Hr(t){return t.originalDatas.beforeRenderable}function Te(t){var r=t.originalDatas.beforeRenderable;return r.nextTransforms}function me(t){return(Te(t)||[]).join(" ")}function xe(t){return Hr(t).nextStyle}function $i(t,r,e,n,a){ra(a,r);var i=Ot.drag(t,ue(a,t.state,e,n)),o=i?i.transform:r;return M(M({transform:r,drag:i},At({transform:o},a)),{afterTransform:o})}function ea(t,r,e,n,a,i){var o=$u(t.state,a,r,i),s=Qu(t,e,n,o);return s}function Zi(t,r,e,n,a,i,o){var s=ea(t,r,e,a,i,o),u=t.state,f=u.left,l=u.top,v=t.props.groupable,c=v?f:0,p=v?l:0,d=Q(n,s);return Q(d,[c,p])}function Ku(t,r,e,n,a,i,o){var s=Zi(t,r,e,n,a,i,o);return s}function Ju(t,r,e){return[r?-1+t[0]/(r/2):0,e?-1+t[1]/(e/2):0]}function Qu(t,r,e,n){n===void 0&&(n=t.state.allMatrix);var a=t.state,i=a.width,o=a.height,s=a.is3d,u=s?4:3,f=[i/2*(1+r[0])+e[0],o/2*(1+r[1])+e[1]];return mt(n,f,u)}function tf(t,r,e){var n=e.fixedDirection,a=e.fixedPosition,i=e.fixedOffset;return Zi(t,"rotate(".concat(r,"deg)"),n,a,i,e)}function rf(t,r,e,n,a,i){var o=t.props.groupable,s=t.state,u=s.transformOrigin,f=s.offsetMatrix,l=s.is3d,v=s.width,c=s.height,p=s.left,d=s.top,g=i.fixedDirection,h=i.nextTargetMatrix||s.targetMatrix,m=l?4:3,x=qu(a,r,e,v,c,u),S=o?p:0,E=o?d:0,y=fe(f,h,x,m),D=Uu(n,y,r,e,m,g);return Q(D,[S,E])}function ef(t,r){return Ct(Vt(t.state),r)}function nf(t,r){var e=t.targetGesto,n=t.controlGesto,a;return e?.isFlag()&&(a=e.getEventData()[r]),!a&&n?.isFlag()&&(a=n.getEventData()[r]),a||{}}function af(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function of(t){var r=t("scale"),e=t("rotate"),n=t("translate"),a=[];return n&&n!=="0px"&&n!=="none"&&a.push("translate(".concat(n.split(/\s+/).join(","),")")),e&&e!=="1"&&e!=="none"&&a.push("rotate(".concat(e,")")),r&&r!=="1"&&r!=="none"&&a.push("scale(".concat(r.split(/\s+/).join(","),")")),a}function Ki(t,r,e){for(var n=t,a=[],i=qn(t)||vr(t),o=!e&&t===r||t===i,s=o,u=!1,f=3,l,v,c,p=!1,d=ae(r,r,!0).offsetParent,g=1;n&&!s;){s=o;var h=Nt(n),m=h("position"),x=Co(n),S=m==="fixed",E=of(h),y=Xs(rl(x)),D=void 0,C=!1,b=!1,_=0,w=0,P=0,O=0,T={hasTransform:!1,fixedContainer:null};S&&(p=!0,T=ol(n),d=T.fixedContainer);var I=y.length;!u&&(I===16||E.length)&&(u=!0,f=4,Gn(a),c&&(c=Zt(c,3,4))),u&&I===9&&(y=Zt(y,3,4));var G=il(n,t),k=G.tagName,F=G.hasOffset,A=G.isSVG,L=G.origin,Y=G.targetOrigin,z=G.offset,V=R(z,2),q=V[0],W=V[1];k==="svg"&&!n.ownerSVGElement&&c&&(a.push({type:"target",target:n,matrix:sl(n,f)}),a.push({type:"offset",target:n,matrix:ht(f)}));var j=parseFloat(h("zoom"))||1;if(S)D=T.fixedContainer,C=!0;else{var X=ae(n,r,!1,!0,h),$=X.offsetZoom;if(D=X.offsetParent,C=X.isEnd,b=X.isStatic,g*=$,(X.isCustomElement||$!==1)&&b)q-=D.offsetLeft,W-=D.offsetTop;else if(ku||Au){var J=X.parentSlotElement;if(J){for(var at=D,st=0,H=0;at&&af(at);)st+=at.offsetLeft,H+=at.offsetTop,at=at.offsetParent;q-=st,W-=H}}}if(Ni&&!Fu&&F&&!A&&b&&(m==="relative"||m==="static")&&(q-=D.offsetLeft,W-=D.offsetTop,o=o||C),S)F&&T.hasTransform&&(P=D.clientLeft,O=D.clientTop);else if(F&&d!==D&&(_=D.clientLeft,w=D.clientTop),F&&D===i){var Z=_o(n,!1);q+=Z[0],W+=Z[1]}if(a.push({type:"target",target:n,matrix:Jr(y,f,L)}),E.length&&(a.push({type:"offset",target:n,matrix:ht(f)}),a.push({type:"target",target:n,matrix:Jr(Gr(E),f,L)})),F){var ft=n===t,rt=ft?0:n.scrollLeft,et=ft?0:n.scrollTop;a.push({type:"offset",target:n,matrix:Dr([q-rt+_-P,W-et+w-O],f)})}else a.push({type:"offset",target:n,origin:L});if(j!==1&&a.push({type:"zoom",target:n,matrix:Jr(Un([j,j],f),f,[0,0])}),c||(c=y),l||(l=L),v||(v=Y),s||S)break;n=D,o=C,(!e||n===i)&&(s=o)}return c||(c=ht(f)),l||(l=[0,0]),v||(v=[0,0]),{zoom:g,offsetContainer:d,matrixes:a,targetMatrix:c,transformOrigin:l,targetOrigin:v,is3d:u,hasFixed:p}}var pr=null,dr=null,Tr=null;function Ar(t){t?(window.Map&&(pr=new Map,dr=new Map),Tr=[]):(pr=null,Tr=null,dr=null)}function sf(t){var r=dr?.get(t);if(r)return r;var e=Qr(t,!0);return dr&&dr.set(t,e),e}function uf(t,r){if(Tr){var e=Lt(Tr,function(a){return a[0][0]==t&&a[0][1]==r});if(e)return e[1]}var n=Ki(t,r,!0);return Tr&&Tr.push([[t,r],n]),n}function Nt(t){var r=pr?.get(t);if(!r){var e=ur(t).getComputedStyle(t);if(!pr)return function(i){return e[i]};r={style:e,cached:{}},pr.set(t,r)}var n=r.cached,a=r.style;return function(i){return i in n||(n[i]=a[i]),n[i]}}function jt(t,r,e){var n=e.originalDatas;n.groupable=n.groupable||{};var a=n.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map(function(o,s){return i[s]=i[s]||{},i[s][r]=i[s][r]||{},M(M({},e),{isRequestChild:!0,datas:i[s][r],originalDatas:i[s]})})}function an(t,r,e,n,a,i,o){var s=!!e.match(/Start$/g),u=!!e.match(/End$/g),f=a.isPinch,l=a.datas,v=jt(t,r.name,a),c=t.moveables,p=[],d=v.map(function(g,h){var m=c[h],x=m.state,S=x.gestos,E=g;if(s)E=new Br(o).dragStart(n,g),p.push(E);else{if(S[o]||(S[o]=l.childGestos[h]),!S[o])return;E=ue(g,x,n,f,i,o),p.push(E)}var y=r[e](m,M(M({},E),{parentFlag:!0}));return u&&(S[o]=null),y});return s&&(l.childGestos=c.map(function(g){return g.state.gestos[o]})),{eventParams:d,childEvents:p}}function tr(t,r,e,n,a,i){a===void 0&&(a=function(l,v){return v});var o=!!e.match(/End$/g),s=jt(t,r.name,n),u=t.moveables,f=s.map(function(l,v){var c=u[v],p=l;p=a(c,l);var d=r[e](c,M(M({},p),{parentFlag:!0}));return o&&(c.state.gestos={}),d});return f}function Oe(t,r,e,n){var a=e.fixedDirection,i=e.fixedPosition,o=n.datas.startPositions||Vt(r.state),s=Ct(o,a),u=R(Pt(se(-t.rotation/180*Math.PI,3),[s[0]-i[0],s[1]-i[1],1],3),2),f=u[0],l=u[1];return n.datas.originalX=f,n.datas.originalY=l,n}function Ji(t,r,e,n){var a=t.getState(),i=a.renderPoses,o=a.rotation,s=a.direction,u=br(t.props,r).zoom,f=Kr(o/Math.PI*180),l={},v=t.renderState;v.renderDirectionMap||(v.renderDirectionMap={});var c=v.renderDirectionMap;e.forEach(function(d){var g=d.dir;l[g]=!0});var p=zt(s);return e.map(function(d){var g=d.data,h=d.classNames,m=d.dir,x=ta[m];if(!x||!l[m])return null;c[m]=!0;var S=(tt(f,15)+p*Xi[m]+720)%180,E={};return Lr(g).forEach(function(y){E["data-".concat(y)]=g[y]}),n.createElement("div",M({className:K.apply(void 0,N(["control","direction",m,r],R(h),!1)),"data-rotation":S,"data-direction":m},E,{key:"direction-".concat(m),style:Be.apply(void 0,N([o,u],R(x.map(function(y){return i[y]})),!1))}))})}function Qi(t,r,e,n){var a=br(t.props,e),i=a.renderDirections,o=i===void 0?r:i,s=a.displayAroundControls;if(!o)return[];var u=o===!0?Fe:o;return N(N([],R(s?no(t,n,e,u):[]),!1),R(Ji(t,e,u.map(function(f){return{data:{},classNames:[],dir:f}}),n)),!1)}function ne(t,r,e,n,a,i){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var u=xt(e,n),f=r?tt(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(i),className:K.apply(void 0,N(["line","direction",r?"edge":"",r],R(o),!1)),"data-rotation":f,"data-line-key":i,"data-direction":r,style:Ur(e,n,a,u)})}function to(t,r,e,n,a){var i=e===!0?Ou:e;return i.map(function(o,s){var u=R(ta[o],2),f=u[0],l=u[1];if(l!=null)return ne(t,o,n[f],n[l],a,"".concat(r,"Edge").concat(s),r)}).filter(Boolean)}function ro(t){return function(r,e){var n=br(r.props,t).edge;return n&&(n===!0||n.length)?N(N([],R(to(e,t,n,r.getState().renderPoses,r.props.zoom)),!1),R(ff(r,t,e)),!1):eo(r,t,e)}}function eo(t,r,e){return Qi(t,Fe,r,e)}function ff(t,r,e){return Qi(t,["nw","ne","sw","se"],r,e)}function no(t,r,e,n){var a=t.renderState;a.renderDirectionMap||(a.renderDirectionMap={});var i=t.getState(),o=i.renderPoses,s=i.rotation,u=i.direction,f=a.renderDirectionMap,l=t.props.zoom,v=zt(u),c=s/Math.PI*180;return(n||Lr(f)).map(function(p){var d=ta[p];if(!d)return null;var g=(tt(c,15)+v*Xi[p]+720)%180,h=["around-control"];return e&&h.push("direction",e),r.createElement("div",{className:K.apply(void 0,N([],R(h),!1)),"data-rotation":g,"data-direction":p,key:"direction-around-".concat(p),style:Be.apply(void 0,N([s,l],R(d.map(function(m){return o[m]})),!1))})})}function na(t,r,e){var n=t||{},a=n.position,i=a===void 0?"client":a,o=n.left,s=o===void 0?-1/0:o,u=n.top,f=u===void 0?-1/0:u,l=n.right,v=l===void 0?1/0:l,c=n.bottom,p=c===void 0?1/0:c,d={position:i,left:s,top:f,right:v,bottom:p};return{vertical:za(d,r,!0),horizontal:za(d,e,!1)}}function Xe(t,r){var e=t.state,n=e.containerClientRect,a=n.clientHeight,i=n.clientWidth,o=n.clientLeft,s=n.clientTop,u=e.snapOffset,f=u.left,l=u.top,v=u.right,c=u.bottom,p=r||t.props.bounds||{},d=p.position||"client",g=d==="css",h=p.left,m=h===void 0?-1/0:h,x=p.top,S=x===void 0?-1/0:x,E=p.right,y=E===void 0?g?-1/0:1/0:E,D=p.bottom,C=D===void 0?g?-1/0:1/0:D;return g&&(y=i+v-f-y,C=a+c-l-C),{left:m+f-o,right:y+f-o,top:S+l-s,bottom:C+l-s}}function lf(t,r,e){var n=Xe(t),a=n.left,i=n.top,o=n.right,s=n.bottom,u=R(e,2),f=u[0],l=u[1],v=R(Q(e,r),2),c=v[0],p=v[1];B(c)<kt&&(c=0),B(p)<kt&&(p=0);var d=p>0,g=c>0,h={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(c===0&&p===0)return{vertical:h,horizontal:m};if(c===0)d?s<l&&(m.pos=s,m.offset=l-s):i>l&&(m.pos=i,m.offset=l-i);else if(p===0)g?o<f&&(h.pos=o,h.offset=f-o):a>f&&(h.pos=a,h.offset=f-a);else{var x=p/c,S=e[1]-x*f,E=0,y=0,D=!1;g&&o<=f?(E=x*o+S,y=o,D=!0):!g&&f<=a&&(E=x*a+S,y=a,D=!0),D&&(E<i||E>s)&&(D=!1),D||(d&&s<=l?(E=s,y=(E-S)/x,D=!0):!d&&l<=i&&(E=i,y=(E-S)/x,D=!0)),D&&(h.isBound=!0,h.pos=y,h.offset=f-y,m.isBound=!0,m.pos=E,m.offset=l-E)}return{vertical:h,horizontal:m}}function za(t,r,e){var n=t[e?"left":"top"],a=t[e?"right":"bottom"],i=Math.min.apply(Math,N([],R(r),!1)),o=Math.max.apply(Math,N([],R(r),!1)),s=[];return n+1>i&&s.push({direction:"start",isBound:!0,offset:i-n,pos:n}),a-1<o&&s.push({direction:"end",isBound:!0,offset:o-a,pos:a}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(u,f){return B(f.offset)-B(u.offset)})}function Ba(t,r,e){var n=e?t.map(function(a){return oe(a,e)}):t;return n.some(function(a){return a[0]<r.left&&B(a[0]-r.left)>.1||a[0]>r.right&&B(a[0]-r.right)>.1||a[1]<r.top&&B(a[1]-r.top)>.1||a[1]>r.bottom&&B(a[1]-r.bottom)>.1})}function cf(t,r,e){var n=Ht(t),a=Math.sqrt(n*n-r*r)||0;return[a,-a].sort(function(i,o){return B(i-t[e?0:1])-B(o-t[e?0:1])}).map(function(i){return xt([0,0],e?[i,r]:[r,i])})}function vf(t,r,e,n,a){if(!t.props.bounds)return[];var i=a*Math.PI/180,o=Xe(t),s=o.left,u=o.top,f=o.right,l=o.bottom,v=s-n[0],c=f-n[0],p=u-n[1],d=l-n[1],g={left:v,top:p,right:c,bottom:d};if(!Ba(e,g,0))return[];var h=[];return[[v,0],[c,0],[p,1],[d,1]].forEach(function(m){var x=R(m,2),S=x[0],E=x[1];e.forEach(function(y){var D=xt([0,0],y);h.push.apply(h,N([],R(cf(y,S,E).map(function(C){return i+C-D}).filter(function(C){return!Ba(r,g,C)}).map(function(C){return tt(C*180/Math.PI,kt)})),!1))})}),h}var pf=["left","right","center"],df=["top","bottom","middle"],Aa={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},lr={start:"left",end:"right",center:"center"},cr={start:"top",end:"bottom",center:"middle"};function Or(){return{left:!1,top:!1,right:!1,bottom:!1}}function Vr(t,r){var e=t.props,n=e.snappable,a=e.bounds,i=e.innerBounds,o=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,f=e.snapGridHeight,l=t.state,v=l.guidelines,c=l.enableSnap;return!n||!c||r&&n!==!0&&n.indexOf(r)<0?!1:!!(u||f||a||i||v&&v.length||o&&o.length||s&&s.length)}function aa(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function gf(t,r){var e=aa(t),n={};for(var a in e)a in r&&e[a]&&(n[a]=r[a]);return n}function ia(t,r){var e=gf(t,r),n=df.filter(function(i){return i in e}),a=pf.filter(function(i){return i in e});return{horizontalNames:n,verticalNames:a,horizontal:n.map(function(i){return e[i]}),vertical:a.map(function(i){return e[i]})}}function hf(t,r,e){var n=mt(t,[r.clientLeft,r.clientTop],e);return[r.left+n[0],r.top+n[1]]}function mf(t){var r=R(t,2),e=r[0],n=r[1],a=n[0]-e[0],i=n[1]-e[1];Math.abs(a)<Dt&&(a=0),Math.abs(i)<Dt&&(i=0);var o=0,s=0,u=0;return a?i?(o=-i/a,s=1,u=o*e[0]-e[1]):(s=1,u=-e[1]):(o=-1,u=e[0]),[o,s,u].map(function(f){return tt(f,Dt)})}var ao="snapRotationThreshold",io="snapRotationDegrees",oo="snapHorizontalThreshold",so="snapVerticalThreshold";function He(t,r,e,n,a,i,o){var s;n===void 0&&(n=[]),a===void 0&&(a=[]);var u=t.props,f=((s=t.state.snapThresholdInfo)===null||s===void 0?void 0:s.multiples)||[1,1],l=Ka(o,u[oo],5),v=Ka(i,u[so],5);return uo(t.state.guidelines,r,e,n,a,l,v,f)}function uo(t,r,e,n,a,i,o,s){return{vertical:Fa(t,"vertical",r,o*s[0],n),horizontal:Fa(t,"horizontal",e,i*s[1],a)}}function xf(t,r,e){var n=R(e,2),a=n[0],i=n[1],o=R(r,2),s=o[0],u=o[1],f=R(Q(e,r),2),l=f[0],v=f[1],c=v>0,p=l>0;l=Ae(l),v=Ae(v);var d={isSnap:!1,offset:0,pos:0},g={isSnap:!1,offset:0,pos:0};if(l===0&&v===0)return{vertical:d,horizontal:g};var h=He(t,l?[a]:[],v?[i]:[],[],[],void 0,void 0),m=h.vertical,x=h.horizontal;m.posInfos.filter(function(k){var F=k.pos;return p?F>=s:F<=s}),x.posInfos.filter(function(k){var F=k.pos;return c?F>=u:F<=u}),m.isSnap=m.posInfos.length>0,x.isSnap=x.posInfos.length>0;var S=Tn(m),E=S.isSnap,y=S.guideline,D=Tn(x),C=D.isSnap,b=D.guideline,_=C?b.pos[1]:0,w=E?y.pos[0]:0;if(l===0)C&&(g.isSnap=!0,g.pos=b.pos[1],g.offset=i-g.pos);else if(v===0)E&&(d.isSnap=!0,d.pos=w,d.offset=a-w);else{var P=v/l,O=e[1]-P*a,T=0,I=0,G=!1;E?(I=w,T=P*I+O,G=!0):C&&(T=_,I=(T-O)/P,G=!0),G&&(d.isSnap=!0,d.pos=I,d.offset=a-I,g.isSnap=!0,g.pos=T,g.offset=i-T)}return{vertical:d,horizontal:g}}function or(t){var r="";return t===-1||t==="top"||t==="left"?r="start":t===0||t==="center"||t==="middle"?r="center":(t===1||t==="right"||t==="bottom")&&(r="end"),r}function ka(t,r,e,n){var a=ia(t.props.snapDirections,r),i=He(t,a.vertical,a.horizontal,a.verticalNames.map(function(u){return or(u)}),a.horizontalNames.map(function(u){return or(u)}),e,n),o=or(a.horizontalNames[i.horizontal.index]),s=or(a.verticalNames[i.vertical.index]);return{vertical:M(M({},i.vertical),{direction:s}),horizontal:M(M({},i.horizontal),{direction:o})}}function Tn(t){var r=t.isSnap;if(!r)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],n=e.guidelineInfos[0],a=n.offset,i=n.dist,o=n.guideline;return{isSnap:r,offset:a,dist:i,pos:e.pos,guideline:o}}function Fa(t,r,e,n,a){var i,o;if(a===void 0&&(a=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s=r==="vertical",u=s?0:1,f=e.map(function(v,c){var p=a[c]||"",d=t.map(function(g){var h=g.pos,m=v-h[u];return{offset:m,dist:B(m),guideline:g,direction:p}}).filter(function(g){var h=g.guideline,m=g.dist,x=h.type;return!(x!==r||m>n)}).sort(function(g,h){return g.dist-h.dist});return{pos:v,index:c,guidelineInfos:d,direction:p}}).filter(function(v){return v.guidelineInfos.length>0}).sort(function(v,c){return v.guidelineInfos[0].dist-c.guidelineInfos[0].dist}),l=f.length>0;return{isSnap:l,index:l?f[0].index:-1,direction:(o=(i=f[0])===null||i===void 0?void 0:i.direction)!==null&&o!==void 0?o:"",posInfos:f}}function Sf(t,r,e,n,a){var i=[];e[0]&&e[1]?i=[e,[-e[0],e[1]],[e[0],-e[1]]]:!e[0]&&!e[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(c,p,d){var g=d[p+1]||d[0];i.push(c),i.push([(c[0]+g[0])/2,(c[1]+g[1])/2])}):t.props.keepRatio?i.push([-1,-1],[-1,1],[1,-1],[1,1],e):(i.push.apply(i,N([],R(ju([[-1,-1],[1,-1],[-1,-1],[1,1]],e)),!1)),i.length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));var o=i.map(function(c){return Ct(r,c)}),s=o.map(function(c){return c[0]}),u=o.map(function(c){return c[1]}),f=He(t,s,u,i.map(function(c){return or(c[0])}),i.map(function(c){return or(c[1])}),n,a),l=or(i.map(function(c){return c[0]})[f.vertical.index]),v=or(i.map(function(c){return c[1]})[f.horizontal.index]);return{vertical:M(M({},f.vertical),{direction:l}),horizontal:M(M({},f.horizontal),{direction:v})}}function fo(t,r){var e=B(t.offset),n=B(r.offset);return t.isBound&&r.isBound?n-e:t.isBound?-1:r.isBound?1:t.isSnap&&r.isSnap?n-e:t.isSnap?-1:r.isSnap||e<kt?1:n<kt?-1:e-n}function Pe(t,r){return t.slice().sort(function(e,n){var a=e.sign[r],i=n.sign[r],o=e.offset[r],s=n.offset[r];if(a){if(!i)return-1}else return 1;return fo({isBound:e.isBound,isSnap:e.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function Ef(t,r,e){var n=[];if(e)B(r[0])!==1||B(r[1])!==1?n.push([r,[-1,-1]],[r,[-1,1]],[r,[1,-1]],[r,[1,1]]):n.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),n.push([r,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var u=[o*a[0],s*a[1]];r[0]===u[0]&&r[1]===u[1]||n.push([r,u])})})}else if(t[0]){var i=B(r[0])===1?[1]:[1,-1];i.forEach(function(o){n.push([[r[0],-1],[o*t[0],-1]],[[r[0],0],[o*t[0],0]],[[r[0],1],[o*t[0],1]])})}else if(t[1]){var i=B(r[1])===1?[1]:[1,-1];i.forEach(function(s){n.push([[-1,r[1]],[-1,s*t[1]]],[[0,r[1]],[0,s*t[1]]],[[1,r[1]],[1,s*t[1]]])})}return n}function lo(t,r){var e=hn([r[0][0],r[1][0]]),n=hn([r[0][1],r[1][1]]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function oa(t,r){var e=R(r,2),n=e[0],a=e[1],i=a[0]-n[0],o=a[1]-n[1];B(i)<kt&&(i=0),B(o)<kt&&(o=0);var s,u;if(!i)s=n[0],u=t[0];else if(!o)s=n[1],u=t[1];else{var f=o/i;s=f*(t[0]-n[0])+n[1],u=t[1]}return s-u}function co(t,r,e,n){return n===void 0&&(n=kt),t.every(function(a){var i=oa(a,r),o=i<=0;return o===e||B(i)<=n})}function Na(t,r,e,n,a){return a===void 0&&(a=0),n&&r-a<=t||!n&&t<=e+a?{isBound:!0,offset:n?r-t:e-t}:{isBound:!1,offset:0}}function Df(t,r){var e=r.line,n=r.centerSign,a=r.verticalSign,i=r.horizontalSign,o=r.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,f=s.top,l=s.width,v=s.height,c=[[u,f],[u,f+v]],p=[[u,f],[u+l,f]],d=[[u+l,f],[u+l,f+v]],g=[[u,f+v],[u+l,f+v]];if(co([[u,f],[u+l,f],[u,f+v],[u+l,f+v]],e,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var h=sr(e,o,p,a),m=sr(e,o,g,a),x=sr(e,o,c,i),S=sr(e,o,d,i),E=h.isBound&&m.isBound,y=h.isBound||m.isBound,D=x.isBound&&S.isBound,C=x.isBound||S.isBound,b=kr(h.offset,m.offset),_=kr(x.offset,S.offset),w=[0,0],P=!1,O=!1;return B(_)<B(b)?(w=[b,0],P=y,O=E):(w=[0,_],P=C,O=D),{isAllBound:O,isVerticalBound:y,isHorizontalBound:C,isBound:P,offset:w}}function sr(t,r,e,n,a,i){var o=R(r,2),s=o[0],u=o[1],f=t[0],l=e[0],v=e[1],c=Ae(v[1]-l[1]),p=Ae(v[0]-l[0]),d=u,g=s,h=-s/u;if(p){if(!c){if(i&&!d)return{isBound:!1,offset:0};if(g){var E=(l[1]-f[1])/h+f[0];return Na(E,l[0],v[0],n,a)}else{var x=l[1]-f[1],S=B(x)<=(a||0);return{isBound:S,offset:S?x:0}}}}else{if(i&&!g)return{isBound:!1,offset:0};if(d){var m=h*(l[0]-f[0])+f[1];return Na(m,l[1],v[1],n,a)}else{var x=l[0]-f[0],S=B(x)<=(a||0);return{isBound:S,offset:S?x:0}}}return{isBound:!1,offset:0}}function vo(t,r,e){return r.map(function(n){var a=Df(t,n),i=a.isBound,o=a.offset,s=a.isVerticalBound,u=a.isHorizontalBound,f=n.multiple,l=Jt({datas:e,distX:o[0],distY:o[1]}).map(function(v,c){return v*(f[c]?2/f[c]:0)});return{sign:f,isBound:i,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function yf(t,r,e){var n,a=sa(t,r,[0,0],!1).map(function(c){return M(M({},c),{multiple:c.multiple.map(function(p){return B(p)*2})})}),i=vo(t,a,e),o=Pe(i,0),s=Pe(i,1),u=0,f=0,l=o.isVerticalBound||s.isVerticalBound,v=o.isHorizontalBound||s.isHorizontalBound;return(l||v)&&(n=R(Vu({datas:e,distX:-o.offset[0],distY:-s.offset[1]}),2),u=n[0],f=n[1]),{vertical:{isBound:l,offset:u},horizontal:{isBound:v,offset:f}}}function bf(t,r){var e=[],n=t[0],a=t[1];return n&&a?e.push([[0,a*2],t,[-n,a]],[[n*2,0],t,[n,-a]]):n?(e.push([[n*2,0],[n,1],[n,-1]]),r&&e.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):a?(e.push([[0,a*2],[1,a],[-1,a]]),r&&e.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e}function sa(t,r,e,n){var a=t.state,i=a.allMatrix,o=a.is3d,s=_r(i,100,100,o?4:3),u=Ct(s,[0,0]);return bf(e,n).map(function(f){var l=R(f,3),v=l[0],c=l[1],p=l[2],d=[Ct(s,c),Ct(s,p)],g=mf(d),h=lo(u,d),m=h.vertical,x=h.horizontal,S=oa(u,d)<=0;return{multiple:v,centerSign:S,verticalSign:m,horizontalSign:x,lineConstants:g,line:[Ct(r,c),Ct(r,p)]}})}function La(t,r,e,n){var a=n?t.map(function(i){return oe(i,n)}):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var o=oa(e,i)<=0;return!co(r,i,o)})}function Cf(t){var r=R(t,2),e=r[0],n=r[1],a=n[0]-e[0],i=n[1]-e[1];if(!a)return B(e[0]);if(!i)return B(e[1]);var o=i/a;return B((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}function _f(t){var r=R(t,2),e=r[0],n=r[1],a=n[0]-e[0],i=n[1]-e[1];if(!a)return[e[0],0];if(!i)return[0,e[1]];var o=i/a,s=-o*e[0]+e[1];return[-s/(o+1/o),s/(o*o+1)]}function Mf(t,r,e,n,a){var i=t.props.innerBounds,o=a*Math.PI/180;if(!i)return[];var s=i.left,u=i.top,f=i.width,l=i.height,v=s-n[0],c=s+f-n[0],p=u-n[1],d=u+l-n[1],g=[[v,p],[c,p],[v,d],[c,d]],h=Ct(e,[0,0]);if(!La(e,g,h,0))return[];var m=[],x=g.map(function(S){return[Ht(S),xt([0,0],S)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(S){var E=xt([0,0],_f(S)),y=Cf(S);m.push.apply(m,N([],R(x.filter(function(D){var C=R(D,1),b=C[0];return b&&y<=b}).map(function(D){var C=R(D,2),b=C[0],_=C[1],w=Math.acos(b?y/b:0),P=_+w,O=_-w;return[o+P-E,o+O-E]}).reduce(function(D,C){return D.push.apply(D,N([],R(C),!1)),D},[]).filter(function(D){return!La(r,g,h,D)}).map(function(D){return tt(D*180/Math.PI,kt)})),!1))}),m}function wf(t){var r=t.props.innerBounds,e=Or();if(!r)return{boundMap:e,vertical:[],horizontal:[]};var n=t.getRect(),a=n.pos1,i=n.pos2,o=n.pos3,s=n.pos4,u=[a,i,o,s],f=Ct(u,[0,0]),l=r.left,v=r.top,c=r.width,p=r.height,d=[[l,v],[l,v+p]],g=[[l,v],[l+c,v]],h=[[l+c,v],[l+c,v+p]],m=[[l,v+p],[l+c,v+p]],x=sa(t,u,[0,0],!1),S=[],E=[];return x.forEach(function(y){var D=y.line,C=y.lineConstants,b=lo(f,D),_=b.horizontal,w=b.vertical,P=sr(D,C,g,w,1,!0),O=sr(D,C,m,w,1,!0),T=sr(D,C,d,_,1,!0),I=sr(D,C,h,_,1,!0);P.isBound&&!e.top&&(S.push(v),e.top=!0),O.isBound&&!e.bottom&&(S.push(v+p),e.bottom=!0),T.isBound&&!e.left&&(E.push(l),e.left=!0),I.isBound&&!e.right&&(E.push(l+c),e.right=!0)}),{boundMap:e,horizontal:S,vertical:E}}function Rf(t,r,e,n){var a=r[0]-t[0],i=r[1]-t[1];if(B(a)<Dt&&(a=0),B(i)<Dt&&(i=0),!a)return n?[0,0]:[0,e];if(!i)return n?[e,0]:[0,0];var o=i/a,s=t[1]-o*t[0];if(n){var u=o*(r[0]+e)+s;return[e,u-r[1]]}else{var f=(r[1]+e-s)/o;return[f-r[0],e]}}function On(t,r,e,n,a){var i=Rf(t,r,e,n);if(!i)return{isOutside:!1,offset:[0,0]};var o=Qt(t,r),s=Qt(i,t),u=Qt(i,r),f=s>o||u>o,l=R(Jt({datas:a,distX:i[0],distY:i[1]}),2),v=l[0],c=l[1];return{offset:[v,c],isOutside:f}}function Ie(t,r){return t.isBound?t.offset:r.isSnap?Tn(r).offset:0}function Tf(t,r,e,n,a){var i=R(r,2),o=i[0],s=i[1],u=R(e,2),f=u[0],l=u[1],v=R(n,2),c=v[0],p=v[1],d=R(a,2),g=d[0],h=d[1],m=-g,x=-h;if(t&&o&&s){m=0,x=0;var S=[];if(f&&l?S.push([0,h],[g,0]):f?S.push([g,0]):l?S.push([0,h]):c&&p?S.push([0,h],[g,0]):c?S.push([g,0]):p&&S.push([0,h]),S.length){S.sort(function(C,b){return Ht(Q([o,s],C))-Ht(Q([o,s],b))});var E=S[0];if(E[0]&&B(o)>Dt)m=-E[0],x=s*B(o+m)/B(o)-s;else if(E[1]&&B(s)>Dt){var y=s;x=-E[1],m=o*B(s+x)/B(y)-o}if(t&&l&&f)if(B(m)>Dt&&B(m)<B(g)){var D=B(g)/B(m);m*=D,x*=D}else if(B(x)>Dt&&B(x)<B(h)){var D=B(h)/B(x);m*=D,x*=D}else m=kr(-g,m),x=kr(-h,x)}}else m=o||f?-g:0,x=s||l?-h:0;return[m,x]}function Of(t,r,e,n,a,i){if(!Vr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=la(i.absolutePoses,[r,e]),s=Xt(o),u=s.left,f=s.right,l=s.top,v=s.bottom,c={horizontal:o.map(function(I){return I[1]}),vertical:o.map(function(I){return I[0]})},p=aa(t.props.snapDirections),d=ia(p,{left:u,right:f,top:l,bottom:v,center:(u+f)/2,middle:(l+v)/2}),g=Ve(t,a,d,c),h=g.vertical,m=g.horizontal,x=yf(t,o,i),S=x.vertical,E=x.horizontal,y=h.isSnap,D=m.isSnap,C=h.isBound||S.isBound,b=m.isBound||E.isBound,_=kr(h.offset,S.offset),w=kr(m.offset,E.offset),P=R(Tf(n,[r,e],[C,b],[y,D],[_,w]),2),O=P[0],T=P[1];return[{isBound:C,isSnap:y,offset:O},{isBound:b,isSnap:D,offset:T}]}function Ve(t,r,e,n){n===void 0&&(n=e);var a=na(Xe(t),n.vertical,n.horizontal),i=a.horizontal,o=a.vertical,s=r?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:He(t,e.vertical,e.horizontal,void 0,void 0,void 0,void 0),u=s.horizontal,f=s.vertical,l=Ie(i[0],u),v=Ie(o[0],f),c=B(l),p=B(v);return{horizontal:{isBound:i[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:l,dist:c,bounds:i,snap:u},vertical:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:v,dist:p,bounds:o,snap:f}}}function Ya(t,r,e,n,a,i,o){o===void 0&&(o=[1,1]);var s=na(r,e,n),u=s.horizontal,f=s.vertical,l=uo(t,e,n,[],[],a,i,o),v=l.horizontal,c=l.vertical,p=Ie(u[0],v),d=Ie(f[0],c),g=B(p),h=B(d);return{horizontal:{isBound:u[0].isBound,isSnap:v.isSnap,snapIndex:v.index,offset:p,dist:g,bounds:u,snap:v},vertical:{isBound:f[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:h,bounds:f,snap:c}}}function Pf(t,r,e,n){var a=xt(t,r)/Math.PI*180,i=e.vertical,o=i.isBound,s=i.isSnap,u=i.dist,f=e.horizontal,l=f.isBound,v=f.isSnap,c=f.dist,p=a%180,d=p<3||p>177,g=p>87&&p<93;return c<u&&(o||s&&!g&&(!n||!d))?"vertical":l||v&&!d&&(!n||!g)?"horizontal":""}function If(t,r,e,n,a,i){return e.map(function(o){var s=R(o,2),u=s[0],f=s[1],l=Ct(r,u),v=Ct(r,f),c=n?Gf(t,l,v,a):Ve(t,a,{vertical:[v[0]],horizontal:[v[1]]}),p=c.horizontal,d=p.offset,g=p.isBound,h=p.isSnap,m=c.vertical,x=m.offset,S=m.isBound,E=m.isSnap,y=Q(f,u);if(!x&&!d)return{isBound:S||g,isSnap:E||h,sign:y,offset:[0,0]};var D=Pf(l,v,c,n);if(!D)return{sign:y,isBound:!1,isSnap:!1,offset:[0,0]};var C=D==="vertical",b=[0,0];return!n&&B(f[0])===1&&B(f[1])===1&&u[0]!==f[0]&&u[1]!==f[1]?b=Jt({datas:i,distX:-x,distY:-d}):b=On(l,v,-(C?x:d),C,i).offset,b=b.map(function(_,w){return _*(y[w]?2/y[w]:0)}),{sign:y,isBound:C?S:g,isSnap:C?E:h,offset:b}})}function Wa(t,r){return t.isBound?t.offset:r.isSnap?r.offset:0}function Gf(t,r,e,n){var a=lf(t,r,e),i=a.horizontal,o=a.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:xf(t,r,e),u=s.horizontal,f=s.vertical,l=Wa(i,u),v=Wa(o,f),c=B(l),p=B(v);return{horizontal:{isBound:i.isBound,isSnap:u.isSnap,offset:l,dist:c},vertical:{isBound:o.isBound,isSnap:f.isSnap,offset:v,dist:p}}}function zf(t,r,e,n,a){var i=[-e[0],-e[1]],o=t.state,s=o.width,u=o.height,f=t.props.bounds,l=1/0,v=1/0;if(f){var c=[[e[0],-e[1]],[-e[0],e[1]]],p=f.left,d=p===void 0?-1/0:p,g=f.top,h=g===void 0?-1/0:g,m=f.right,x=m===void 0?1/0:m,S=f.bottom,E=S===void 0?1/0:S;c.forEach(function(y){var D=y[0]!==i[0],C=y[1]!==i[1],b=Ct(r,y),_=xt(n,b)*360/Math.PI;if(C){var w=b.slice();(B(_-360)<2||B(_-180)<2)&&(w[1]=n[1]);var P=On(n,w,(n[1]<b[1]?E:h)-b[1],!1,a),O=R(P.offset,2),T=O[1],I=P.isOutside;isNaN(T)||(v=u+(I?1:-1)*B(T))}if(D){var w=b.slice();(B(_-90)<2||B(_-270)<2)&&(w[0]=n[0]);var G=On(n,w,(n[0]<b[0]?x:d)-b[0],!0,a),k=R(G.offset,1),F=k[0],A=G.isOutside;isNaN(F)||(l=s+(A?1:-1)*B(F))}})}return{maxWidth:l,maxHeight:v}}var Ot={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,r){var e=t.props,n=e.hideThrottleDragRotateLine,a=e.throttleDragRotate,i=e.zoom,o=t.getState(),s=o.dragInfo,u=o.beforeOrigin;if(n||!a||!s)return[];var f=s.dist;if(!f[0]&&!f[1])return[];var l=Ht(f),v=xt(f,[0,0]);return[r.createElement("div",{className:K("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(l,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(v,"rad) scaleY(").concat(i,")")}})]},dragStart:function(t,r){var e=r.datas,n=r.parentEvent,a=r.parentGesto,i=t.state,o=i.gestos,s=i.style;if(o.draggable)return!1;o.draggable=a||t.targetGesto,e.datas={},e.left=parseFloat(s.left||"")||0,e.top=parseFloat(s.top||"")||0,e.bottom=parseFloat(s.bottom||"")||0,e.right=parseFloat(s.right||"")||0,e.startValue=[0,0],Cr(t,r),We(t,r,"translate"),Jf(t,e),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0];var u=nt(t,r,M({set:function(l){e.startValue=l}},Ye(t,r))),f=n||U(t,"onDragStart",u);return f!==!1?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,e.isPinch=!1),e.isDrag?u:!1},drag:function(t,r){if(r){Ne(t,r,"translate");var e=r.datas,n=r.parentEvent,a=r.parentFlag,i=r.isPinch,o=r.deltaOffset,s=r.useSnap,u=r.isRequest,f=r.isGroup,l=r.parentThrottleDrag,v=r.distX,c=r.distY,p=e.isDrag,d=e.prevDist,g=e.prevBeforeDist,h=e.startValue;if(p){o&&(v+=o[0],c+=o[1]);var m=t.props,x=m.parentMoveable,S=f?0:m.throttleDrag||l||0,E=n?0:m.throttleDragRotate||0,y=0,D=!1,C=!1,b=!1,_=!1;if(!n&&E>0&&(v||c)){var w=m.startDragRotate||0,P=tt(w+xt([0,0],[v,c])*180/Math.PI,E)-w,O=c*Math.abs(Math.cos((P-90)/180*Math.PI)),T=v*Math.abs(Math.cos(P/180*Math.PI)),I=Ht([T,O]);y=P*Math.PI/180,v=I*Math.cos(y),c=I*Math.sin(y)}if(!i&&!n&&!a){var G=R(Of(t,v,c,E,!s&&u||o,e),2),k=G[0],F=G[1];D=k.isSnap,C=k.isBound,b=F.isSnap,_=F.isBound;var A=k.offset,L=F.offset;v+=A,c+=L}var Y=ut(ji({datas:e,distX:v,distY:c}),h),z=ut(Hu({datas:e,distX:v,distY:c}),h);Ra(z,kt),Ra(Y,kt),E||(!D&&!C&&(z[0]=tt(z[0],S),Y[0]=tt(Y[0],S)),!b&&!_&&(z[1]=tt(z[1],S),Y[1]=tt(Y[1],S)));var V=Q(Y,h),q=Q(z,h),W=Q(q,d),j=Q(V,g);e.prevDist=q,e.prevBeforeDist=V,e.passDelta=W,e.passDist=q;var X=e.left+V[0],$=e.top+V[1],J=e.right-V[0],at=e.bottom-V[1],st=Le(e,"translate(".concat(z[0],"px, ").concat(z[1],"px)"),"translate(".concat(q[0],"px, ").concat(q[1],"px)"));if(ra(r,st),t.state.dragInfo.dist=n?[0,0]:q,!(!n&&!x&&W.every(function(et){return!et})&&j.some(function(et){return!et}))){var H=t.state,Z=H.width,ft=H.height,rt=nt(t,r,M({transform:st,dist:q,delta:W,translate:z,beforeDist:V,beforeDelta:j,beforeTranslate:Y,left:X,top:$,right:J,bottom:at,width:Z,height:ft,isPinch:i},At({transform:st},r)));return!n&&U(t,"onDrag",rt),rt}}}},dragAfter:function(t,r){var e=r.datas,n=e.deltaOffset;return n[0]||n[1]?(e.deltaOffset=[0,0],this.drag(t,M(M({},r),{deltaOffset:n}))):!1},dragEnd:function(t,r){var e=r.parentEvent,n=r.datas;if(t.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var a=Yt(t,r,{});return!e&&U(t,"onDragEnd",a),a}},dragGroupStart:function(t,r){var e,n,a=r.datas,i=r.clientX,o=r.clientY,s=this.dragStart(t,r);if(!s)return!1;var u=an(t,this,"dragStart",[i||0,o||0],r,!1,"draggable"),f=u.childEvents,l=u.eventParams,v=M(M({},s),{targets:t.props.targets,events:l}),c=U(t,"onDragGroupStart",v);a.isDrag=c!==!1;var p=(n=(e=f[0])===null||e===void 0?void 0:e.datas.startValue)!==null&&n!==void 0?n:[0,0];return a.throttleOffset=[p[0]%1,p[1]%1],a.isDrag?s:!1},dragGroup:function(t,r){var e=r.datas;if(e.isDrag){var n=this.drag(t,M(M({},r),{parentThrottleDrag:t.props.throttleDrag})),a=r.datas.passDelta,i=an(t,this,"drag",a,r,!1,"draggable").eventParams;if(n){var o=M({targets:t.props.targets,events:i},n);return U(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isDrag){this.dragEnd(t,r);var a=an(t,this,"dragEnd",[0,0],r,!1,"draggable").eventParams;return U(t,"onDragGroupEnd",Yt(t,r,{targets:t.props.targets,events:a})),e}},request:function(t){var r={},e=t.getRect(),n=0,a=0,i=!1;return{isControl:!1,requestStart:function(o){return i=o.useSnap,{datas:r,useSnap:i}},request:function(o){return"x"in o?n=o.x-e.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?a=o.y-e.top:"deltaY"in o&&(a+=o.deltaY),{datas:r,distX:n,distY:a,useSnap:i}},requestEnd:function(){return{datas:r,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function po(t,r){var e=Ct(t,r),n=[0,0];return{fixedPosition:e,fixedDirection:r,fixedOffset:n}}function Bf(t,r){var e=t.allMatrix,n=t.is3d,a=t.width,i=t.height,o=n?4:3,s=[a/2*(1+r[0]),i/2*(1+r[1])],u=mt(e,s,o),f=[0,0];return{fixedPosition:u,fixedDirection:r,fixedOffset:f}}function go(t,r){var e=t.allMatrix,n=t.is3d,a=t.width,i=t.height,o=n?4:3,s=Ju(r,a,i),u=mt(e,r,o),f=[a?0:r[0],i?0:r[1]];return{fixedPosition:u,fixedDirection:s,fixedOffset:f}}var Xa=pa("resizable"),Ge={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:ro("resizable"),dragControlCondition:Xa,viewClassName:va("resizable"),dragControlStart:function(t,r){var e,n=r.inputEvent,a=r.isPinch,i=r.isGroup,o=r.parentDirection,s=r.parentGesto,u=r.datas,f=r.parentFixedDirection,l=r.parentEvent,v=Oo(o,a,n,u),c=t.state,p=c.target,d=c.width,g=c.height,h=c.gestos;if(!v||!p||h.resizable)return!1;h.resizable=s||t.controlGesto,!a&&Cr(t,r),u.datas={},u.direction=v,u.startOffsetWidth=d,u.startOffsetHeight=g,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=c.inlineCSSWidth||c.cssWidth,u.startHeight=c.inlineCSSHeight||c.cssHeight,u.maxSize=[1/0,1/0],i||(u.minSize=[c.minOffsetWidth,c.minOffsetHeight],u.maxSize=[c.maxOffsetWidth,c.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";u.transformOrigin=er(m)?m.split(" "):m,u.startOffsetMatrix=c.offsetMatrix,u.startTransformOrigin=c.transformOrigin,u.isWidth=(e=r?.parentIsWidth)!==null&&e!==void 0?e:!v[0]&&!v[1]||v[0]||!v[1];function x(_){u.ratio=_&&isFinite(_)?_:0}u.startPositions=Vt(t.state);function S(_){var w=po(u.startPositions,_);u.fixedDirection=w.fixedDirection,u.fixedPosition=w.fixedPosition,u.fixedOffset=w.fixedOffset}function E(_){var w=go(t.state,_);u.fixedDirection=w.fixedDirection,u.fixedPosition=w.fixedPosition,u.fixedOffset=w.fixedOffset}function y(_){u.minSize=[vt("".concat(_[0]),0)||0,vt("".concat(_[1]),0)||0]}function D(_){var w=[_[0]||1/0,_[1]||1/0];(!re(w[0])||isFinite(w[0]))&&(w[0]=vt("".concat(w[0]),0)||1/0),(!re(w[1])||isFinite(w[1]))&&(w[1]=vt("".concat(w[1]),0)||1/0),u.maxSize=w}x(d/g),S(f||[-v[0],-v[1]]),u.setFixedDirection=S,u.setFixedPosition=E,u.setMin=y,u.setMax=D;var C=nt(t,r,{direction:v,startRatio:u.ratio,set:function(_){var w=R(_,2),P=w[0],O=w[1];u.startWidth=P,u.startHeight=O},setMin:y,setMax:D,setRatio:x,setFixedDirection:S,setFixedPosition:E,setOrigin:function(_){u.transformOrigin=_},dragStart:Ot.dragStart(t,new Br().dragStart([0,0],r))}),b=l||U(t,"onResizeStart",C);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,b!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:r.isRequest,direction:v}),u.isResize?C:!1},dragControl:function(t,r){var e,n=r.datas,a=r.parentFlag,i=r.isPinch,o=r.parentKeepRatio,s=r.dragClient,u=r.parentDist,f=r.useSnap,l=r.isRequest,v=r.isGroup,c=r.parentEvent,p=r.resolveMatrix,d=n.isResize,g=n.transformOrigin,h=n.startWidth,m=n.startHeight,x=n.prevWidth,S=n.prevHeight,E=n.minSize,y=n.maxSize,D=n.ratio,C=n.startOffsetWidth,b=n.startOffsetHeight,_=n.isWidth;if(!d)return;if(p){var w=t.state.is3d,P=n.startOffsetMatrix,O=n.startTransformOrigin,T=w?4:3,I=Gr(Te(r)),G=Math.sqrt(I.length);T!==G&&(I=Zt(I,G,T));var k=fe(P,I,O,T),F=_r(k,C,b,T);n.startPositions=F,n.nextTargetMatrix=I,n.nextAllMatrix=k}var A=br(t.props,"resizable"),L=A.resizeFormat,Y=A.throttleResize,z=Y===void 0?a?0:1:Y,V=A.parentMoveable,q=A.keepRatioFinally,W=n.direction,j=W,X=0,$=0;!W[0]&&!W[1]&&(j=[1,1]);var J=D&&(o??A.keepRatio)||!1;function at(){var St=n.fixedDirection,yt=Ao(j,J,n,r);X=yt.distWidth,$=yt.distHeight;var nr=j[0]-St[0]||J?Math.max(C+X,kt):C,ar=j[1]-St[1]||J?Math.max(b+$,kt):b;return J&&C&&b&&(_?ar=nr/D:nr=ar*D),[nr,ar]}var st=R(at(),2),H=st[0],Z=st[1];c||(n.setFixedDirection(n.fixedDirection),U(t,"onBeforeResize",nt(t,r,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(St){var yt;return n.setFixedDirection(St),yt=R(at(),2),H=yt[0],Z=yt[1],[H,Z]},setFixedPosition:function(St){var yt;return n.setFixedPosition(St),yt=R(at(),2),H=yt[0],Z=yt[1],[H,Z]},boundingWidth:H,boundingHeight:Z,setSize:function(St){var yt;yt=R(St,2),H=yt[0],Z=yt[1]}},!0)));var ft=s;s||(!a&&i?ft=ef(t,[0,0]):ft=n.fixedPosition);var rt=[0,0];i||(rt=Zf(t,H,Z,W,ft,!f&&l,n)),u&&(!u[0]&&(rt[0]=0),!u[1]&&(rt[1]=0));function et(){var St;L&&(St=R(L([H,Z]),2),H=St[0],Z=St[1]),H=tt(H,z),Z=tt(Z,z)}if(J){j[0]&&j[1]&&rt[0]&&rt[1]&&(B(rt[0])>B(rt[1])?rt[1]=0:rt[0]=0);var ot=!rt[0]&&!rt[1];ot&&et(),j[0]&&!j[1]||rt[0]&&!rt[1]||ot&&_?(H+=rt[0],Z=H/D):(!j[0]&&j[1]||!rt[0]&&rt[1]||ot&&!_)&&(Z+=rt[1],H=Z*D)}else H+=rt[0],Z+=rt[1],H=Math.max(0,H),Z=Math.max(0,Z);e=R(Ci([H,Z],E,y,J?D:!1),2),H=e[0],Z=e[1],et(),J&&(v||q)&&(_?Z=H/D:H=Z*D),X=H-C,$=Z-b;var ct=[X-x,$-S];n.prevWidth=X,n.prevHeight=$;var dt=rf(t,H,Z,ft,g,n);if(!(!V&&ct.every(function(St){return!St})&&dt.every(function(St){return!St}))){var it=Ot.drag(t,ue(r,t.state,dt,!!i,!1,"draggable")),lt=it.transform,_t=h+X,It=m+$,Rt=nt(t,r,M({width:_t,height:It,offsetWidth:Math.round(H),offsetHeight:Math.round(Z),startRatio:D,boundingWidth:H,boundingHeight:Z,direction:W,dist:[X,$],delta:ct,isPinch:!!i,drag:it},Io({style:{width:"".concat(_t,"px"),height:"".concat(It,"px")},transform:lt},it,r)));return!c&&U(t,"onResize",Rt),Rt}},dragControlAfter:function(t,r){var e=r.datas,n=e.isResize,a=e.startOffsetWidth,i=e.startOffsetHeight,o=e.prevWidth,s=e.prevHeight;if(!(!n||t.props.checkResizableError===!1)){var u=t.state,f=u.width,l=u.height,v=f-(a+o),c=l-(i+s),p=B(v)>3,d=B(c)>3;if(p&&(e.startWidth+=v,e.startOffsetWidth+=v,e.prevWidth+=v),d&&(e.startHeight+=c,e.startOffsetHeight+=c,e.prevHeight+=c),p||d)return this.dragControl(t,r)}},dragControlEnd:function(t,r){var e=r.datas,n=r.parentEvent;if(e.isResize){e.isResize=!1;var a=Yt(t,r,{});return!n&&U(t,"onResizeEnd",a),a}},dragGroupControlCondition:Xa,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,M(M({},r),{isGroup:!0}));if(!n)return!1;var a=jt(t,"resizable",r),i=e.startOffsetWidth,o=e.startOffsetHeight;function s(){var p=e.minSize;a.forEach(function(d){var g=d.datas,h=g.minSize,m=g.startOffsetWidth,x=g.startOffsetHeight,S=i*(m?h[0]/m:0),E=o*(x?h[1]/x:0);p[0]=Math.max(p[0],S),p[1]=Math.max(p[1],E)})}function u(){var p=e.maxSize;a.forEach(function(d){var g=d.datas,h=g.maxSize,m=g.startOffsetWidth,x=g.startOffsetHeight,S=i*(m?h[0]/m:0),E=o*(x?h[1]/x:0);p[0]=Math.min(p[0],S),p[1]=Math.min(p[1],E)})}var f=tr(t,this,"dragControlStart",r,function(p,d){return Oe(t,p,e,d)});s(),u();var l=function(p){n.setFixedDirection(p),f.forEach(function(d,g){d.setFixedDirection(p),Oe(t,d.moveable,e,a[g])})};e.setFixedDirection=l;var v=M(M({},n),{targets:t.props.targets,events:f.map(function(p){return M(M({},p),{setMin:function(d){p.setMin(d),s()},setMax:function(d){p.setMax(d),u()}})}),setFixedDirection:l,setMin:function(p){n.setMin(p),s()},setMax:function(p){n.setMax(p),u()}}),c=U(t,"onResizeGroupStart",v);return e.isResize=c!==!1,e.isResize?n:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isResize){var n=br(t.props,"resizable");je(t,"onBeforeResize",function(p){U(t,"onBeforeResizeGroup",nt(t,r,M(M({},p),{targets:n.targets}),!0))});var a=this.dragControl(t,M(M({},r),{isGroup:!0}));if(a){var i=a.boundingWidth,o=a.boundingHeight,s=a.dist,u=n.keepRatio,f=[i/(i-s[0]),o/(o-s[1])],l=e.fixedPosition,v=tr(t,this,"dragControl",r,function(p,d){var g=R(Pt(se(t.rotation/180*Math.PI,3),[d.datas.originalX*f[0],d.datas.originalY*f[1],1],3),2),h=g[0],m=g[1];return M(M({},d),{parentDist:null,parentScale:f,dragClient:ut(l,[h,m]),parentKeepRatio:u})}),c=M({targets:n.targets,events:v},a);return U(t,"onResizeGroup",c),c}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isResize){this.dragControlEnd(t,r);var a=tr(t,this,"dragControlEnd",r),i=Yt(t,r,{targets:t.props.targets,events:a});return U(t,"onResizeGroupEnd",i),e}},request:function(t){var r={},e=0,n=0,a=!1,i=t.getRect();return{isControl:!0,requestStart:function(o){var s;return a=o.useSnap,{datas:r,parentDirection:o.direction||[1,1],parentIsWidth:(s=o?.horizontal)!==null&&s!==void 0?s:!0,useSnap:a}},request:function(o){return"offsetWidth"in o?e=o.offsetWidth-i.offsetWidth:"deltaWidth"in o&&(e+=o.deltaWidth),"offsetHeight"in o?n=o.offsetHeight-i.offsetHeight:"deltaHeight"in o&&(n+=o.deltaHeight),{datas:r,parentDist:[e,n],parentKeepRatio:o.keepRatio,useSnap:a}},requestEnd:function(){return{datas:r,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.resizable=null}};function on(t,r,e,n,a){var i=t.props.groupable,o=t.state,s=o.is3d?4:3,u=r.origin,f=mt(t.state.rootMatrix,Q([u[0],u[1]],i?[0,0]:[o.left,o.top]),s),l=ut([a.left,a.top],f);r.startAbsoluteOrigin=l,r.prevDeg=xt(l,[e,n])/Math.PI*180,r.defaultDeg=r.prevDeg,r.prevSnapDeg=0,r.loop=0,r.startDist=Qt(l,[e,n])}function _e(t,r,e){var n=e.defaultDeg,a=e.prevDeg,i=a%360,o=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++o:i<t&&i<90&&t>270&&--o;var s=r*(o*360+t-n);return e.prevDeg=n+s,s}function sn(t,r,e,n){return _e(xt(n.startAbsoluteOrigin,[t,r])/Math.PI*180,e,n)}function un(t,r,e,n,a,i){var o=t.props.throttleRotate,s=o===void 0?0:o,u=e.prevSnapDeg,f=0,l=!1;if(i){var v=$f(t,r,n,a+n);l=v.isSnap,f=a+v.dist}l||(f=tt(a+n,s));var c=f-a;return e.prevSnapDeg=c,[c-u,c,f]}function ho(t,r,e){var n=R(r,4),a=n[0],i=n[1],o=n[2],s=n[3];if(t==="none")return[];if(Mt(t))return t.map(function(h){return ho(h,[a,i,o,s],e)[0]});var u=R((t||"top").split("-"),2),f=u[0],l=u[1],v=[a,i];f==="left"?v=[o,a]:f==="right"?v=[i,s]:f==="bottom"&&(v=[s,o]);var c=[(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2],p=Ro(v,e);if(l){var d=l==="top"||l==="left",g=f==="bottom"||f==="left";c=v[d&&!g||!d&&g?0:1]}return[[c,p]]}function Pn(t,r){if(r.isRequest)return r.requestAble==="rotatable";var e=r.inputEvent.target;if(bt(e,K("rotation-control"))||t.props.rotateAroundControls&&bt(e,K("around-control"))||bt(e,K("control"))&&bt(e,K("rotatable")))return!0;var n=t.props.rotationTarget;return n?da(n,!0).some(function(a){return a?e===a||e.contains(a):!1}):!1}var Af=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,mo={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Af],viewClassName:function(t){return t.isDragging("rotatable")?K("view-rotation-dragging"):""},render:function(t,r){var e=br(t.props,"rotatable"),n=e.rotatable,a=e.rotationPosition,i=e.zoom,o=e.renderDirections,s=e.rotateAroundControls,u=e.resolveAblesWithRotatable,f=t.getState(),l=f.renderPoses,v=f.direction;if(!n)return null;var c=ho(a,l,v),p=[];if(c.forEach(function(m,x){var S=R(m,2),E=S[0],y=S[1];p.push(r.createElement("div",{key:"rotation".concat(x),className:K("rotation"),style:{transform:"translate(-50%) translate(".concat(E[0],"px, ").concat(E[1],"px) rotate(").concat(y,"rad)")}},r.createElement("div",{className:K("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),r.createElement("div",{className:K("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),o){var d=Lr(u||{}),g={};d.forEach(function(m){u[m].forEach(function(x){g[x]=m})});var h=[];Mt(o)&&(h=o.map(function(m){var x=g[m];return{data:x?{resolve:x}:{},classNames:x?["move"]:[],dir:m}})),p.push.apply(p,N([],R(Ji(t,"rotatable",h,r)),!1))}return s&&p.push.apply(p,N([],R(no(t,r)),!1)),p},dragControlCondition:Pn,dragControlStart:function(t,r){var e,n,a=r.datas,i=r.clientX,o=r.clientY,s=r.parentRotate,u=r.parentFlag,f=r.isPinch,l=r.isRequest,v=t.state,c=v.target,p=v.left,d=v.top,g=v.direction,h=v.beforeDirection,m=v.targetTransform,x=v.moveableClientRect,S=v.offsetMatrix,E=v.targetMatrix,y=v.allMatrix,D=v.width,C=v.height;if(!l&&!c)return!1;var b=t.getRect();a.rect=b,a.transform=m,a.left=p,a.top=d;var _=function(j){var X=go(t.state,j);a.fixedDirection=X.fixedDirection,a.fixedOffset=X.fixedOffset,a.fixedPosition=X.fixedPosition,z&&z.setFixedPosition(j)},w=function(j){var X=Bf(t.state,j);a.fixedDirection=X.fixedDirection,a.fixedOffset=X.fixedOffset,a.fixedPosition=X.fixedPosition,z&&z.setFixedDirection(j)},P=i,O=o;if(l||f||u){var T=s||0;a.beforeInfo={origin:b.beforeOrigin,prevDeg:T,defaultDeg:T,prevSnapDeg:0,startDist:0},a.afterInfo=M(M({},a.beforeInfo),{origin:b.origin}),a.absoluteInfo=M(M({},a.beforeInfo),{origin:b.origin,startValue:T})}else{var I=(n=r.inputEvent)===null||n===void 0?void 0:n.target;if(I){var G=I.getAttribute("data-direction")||"",k=Wu[G];if(k){a.isControl=!0,a.isAroundControl=bt(I,K("around-control")),a.controlDirection=k;var F=I.getAttribute("data-resolve");F&&(a.resolveAble=F);var A=ll(v.rootMatrix,v.renderPoses,x);e=R(Ct(A,k),2),P=e[0],O=e[1]}}a.beforeInfo={origin:b.beforeOrigin},a.afterInfo={origin:b.origin},a.absoluteInfo={origin:b.origin,startValue:b.rotation};var L=_;_=function(j){var X=v.is3d?4:3,$=R(ut(Oi(E,X),j),2),J=$[0],at=$[1],st=Pt(S,Er([J,at],X)),H=Pt(y,Er([j[0],j[1]],X));L(j);var Z=v.posDelta;a.beforeInfo.origin=Q(st,Z),a.afterInfo.origin=Q(H,Z),a.absoluteInfo.origin=Q(H,Z),on(t,a.beforeInfo,P,O,x),on(t,a.afterInfo,P,O,x),on(t,a.absoluteInfo,P,O,x)},w=function(j){var X=Ct([[0,0],[D,0],[0,C],[D,C]],j);_(X)}}a.startClientX=P,a.startClientY=O,a.direction=g,a.beforeDirection=h,a.startValue=0,a.datas={},We(t,r,"rotate");var Y=!1,z=!1;if(a.isControl&&a.resolveAble){var V=a.resolveAble;V==="resizable"&&(z=Ge.dragControlStart(t,M(M({},new Br("resizable").dragStart([0,0],r)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition})))}z||(Y=Ot.dragStart(t,new Br().dragStart([0,0],r))),_(cl(t));var q=nt(t,r,M(M({set:function(j){a.startValue=j*Math.PI/180},setFixedDirection:w,setFixedPosition:_},Ye(t,r)),{dragStart:Y,resizeStart:z})),W=U(t,"onRotateStart",q);return a.isRotate=W!==!1,v.snapRenderInfo={request:r.isRequest},a.isRotate?q:!1},dragControl:function(t,r){var e,n,a,i=r.datas,o=r.clientDistX,s=r.clientDistY,u=r.parentRotate,f=r.parentFlag,l=r.isPinch,v=r.groupDelta,c=r.resolveMatrix,p=i.beforeDirection,d=i.beforeInfo,g=i.afterInfo,h=i.absoluteInfo,m=i.isRotate,x=i.startValue,S=i.rect,E=i.startClientX,y=i.startClientY;if(m){Ne(t,r,"rotate");var D=Xu(r),C=p*D,b=t.props.parentMoveable,_=0,w,P,O=0,T,I,G=0,k,F,A=180/Math.PI*x,L=h.startValue,Y=!1,z=E+o,V=y+s;if(!f&&"parentDist"in r){var q=r.parentDist;w=q,T=q,k=q}else l||f?(w=_e(u,p,d),T=_e(u,C,g),k=_e(u,C,h)):(w=sn(z,V,p,d),T=sn(z,V,C,g),k=sn(z,V,C,h),Y=!0);if(P=A+w,I=A+T,F=L+k,U(t,"onBeforeRotate",nt(t,r,{beforeRotation:P,rotation:I,absoluteRotation:F,setRotation:function(ft){T=ft-A,w=T,k=T}},!0)),e=R(un(t,S,d,w,A,Y),3),_=e[0],w=e[1],P=e[2],n=R(un(t,S,g,T,A,Y),3),O=n[0],T=n[1],I=n[2],a=R(un(t,S,h,k,L,Y),3),G=a[0],k=a[1],F=a[2],!(!G&&!O&&!_&&!b&&!c)){var W=Le(i,"rotate(".concat(I,"deg)"),"rotate(".concat(T,"deg)"));c&&(i.fixedPosition=ea(t,i.targetAllTransform,i.fixedDirection,i.fixedOffset,i));var j=tf(t,T,i),X=Q(ut(v||[0,0],j),i.prevInverseDist||[0,0]);i.prevInverseDist=j,i.requestValue=null;var $=$i(t,W,X,l,r),J=$,at=Qt([z,V],h.startAbsoluteOrigin)-h.startDist,st=void 0;if(i.resolveAble==="resizable"){var H=Ge.dragControl(t,M(M({},ue(r,t.state,[r.deltaX,r.deltaY],!!l,!1,"resizable")),{resolveMatrix:!0,parentDistance:at}));H&&(st=H,J=Io(J,H,r))}var Z=nt(t,r,M(M({delta:O,dist:T,rotate:I,rotation:I,beforeDist:w,beforeDelta:_,beforeRotate:P,beforeRotation:P,absoluteDist:k,absoluteDelta:G,absoluteRotate:F,absoluteRotation:F,isPinch:!!l,resize:st},$),J));return U(t,"onRotate",Z),Z}}},dragControlEnd:function(t,r){var e=r.datas;if(e.isRotate){e.isRotate=!1;var n=Yt(t,r,{});return U(t,"onRotateEnd",n),n}},dragGroupControlCondition:Pn,dragGroupControlStart:function(t,r){var e=r.datas,n=t.state,a=n.left,i=n.top,o=n.beforeOrigin,s=this.dragControlStart(t,r);if(!s)return!1;s.set(e.beforeDirection*t.rotation);var u=tr(t,this,"dragControlStart",r,function(v,c){var p=v.state,d=p.left,g=p.top,h=p.beforeOrigin,m=ut(Q([d,g],[a,i]),Q(h,o));return c.datas.startGroupClient=m,c.datas.groupClient=m,M(M({},c),{parentRotate:0})}),f=M(M({},s),{targets:t.props.targets,events:u}),l=U(t,"onRotateGroupStart",f);return e.isRotate=l!==!1,e.isRotate?s:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isRotate){je(t,"onBeforeRotate",function(f){U(t,"onBeforeRotateGroup",nt(t,r,M(M({},f),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var a=e.beforeDirection,i=n.beforeDist,o=i/180*Math.PI,s=tr(t,this,"dragControl",r,function(f,l){var v=l.datas.startGroupClient,c=R(l.datas.groupClient,2),p=c[0],d=c[1],g=R(oe(v,o*a),2),h=g[0],m=g[1],x=[h-p,m-d];return l.datas.groupClient=[h,m],M(M({},l),{parentRotate:i,groupDelta:x})});t.rotation=a*n.beforeRotation;var u=M({targets:t.props.targets,events:s,set:function(f){t.rotation=f},setGroupRotation:function(f){t.rotation=f}},n);return U(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isRotate){this.dragControlEnd(t,r);var a=tr(t,this,"dragControlEnd",r),i=Yt(t,r,{targets:t.props.targets,events:a});return U(t,"onRotateGroupEnd",i),e}},request:function(t){var r={},e=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:r}},request:function(a){return"deltaRotate"in a?e+=a.deltaRotate:"rotate"in a&&(e=a.rotate-n),{datas:r,parentDist:e}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function kf(t,r){var e,n=t.direction,a=t.classNames,i=t.size,o=t.pos,s=t.zoom,u=t.key,f=n==="horizontal",l=f?"Y":"X";return r.createElement("div",{key:u,className:a.join(" "),style:(e={},e[f?"width":"height"]="".concat(i),e.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(l,"(-50%) scale").concat(l,"(").concat(s,")"),e)})}function ua(t,r){return kf(M(M({},t),{classNames:N([K("line","guideline",t.direction)],R(t.classNames),!1).filter(function(e){return e}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(e){return"".concat(tt(e,.1),"px")})}),r)}function Ha(t,r,e,n,a,i,o,s){var u=t.props.zoom;return e.map(function(f,l){var v=f.type,c=f.pos,p=[0,0];return p[o]=n,p[o?0:1]=-a+c,ua({key:"".concat(r,"TargetGuideline").concat(l),classNames:[K("target","bold",v)],posValue:p,sizeValue:i,zoom:u,direction:r},s)})}function Va(t,r,e,n,a,i){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,f=r==="horizontal"?lr:cr,l=a[f.start],v=a[f.end];return e.filter(function(c){var p=c.hide,d=c.elementRect;if(p)return!1;if(u&&d){var g=d.rect;if(g[f.start]<=l&&v<=g[f.end])return!1}return!0}).map(function(c,p){var d=c.pos,g=c.size,h=c.element,m=c.className,x=[-n[0]+d[0],-n[1]+d[1]];return ua({key:"".concat(r,"-default-guideline-").concat(p),classNames:h?[K("bold"),m]:[K("normal"),m],direction:r,posValue:x,sizeValue:g,zoom:s},i)})}function jr(t,r,e,n,a,i,o,s){var u,f=t.props,l=f.snapDigit,v=l===void 0?0:l,c=f.isDisplaySnapDigit,p=c===void 0?!0:c,d=f.snapDistFormat,g=d===void 0?function(y,D){return y}:d,h=f.zoom,m=r==="horizontal"?"X":"Y",x=r==="vertical"?"height":"width",S=Math.abs(a),E=p?parseFloat(S.toFixed(v)):0;return s.createElement("div",{key:"".concat(r,"-").concat(e,"-guideline-").concat(n),className:K("guideline-group",r),style:(u={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},u[x]="".concat(S,"px"),u)},ua({direction:r,classNames:[K(e),o],size:"100%",posValue:[0,0],sizeValue:S,zoom:h},s),s.createElement("div",{className:K("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(h,")")}},E>0?g(E,r):""))}function Ff(t,r,e,n){var a=t==="vertical"?0:1,i=t==="vertical"?1:0,o=a?lr:cr,s=e[o.start],u=e[o.end];return Go(r,function(f){return f.pos[a]}).map(function(f){var l=[],v=[],c=[];return f.forEach(function(p){var d,g,h=p.element,m=p.elementRect.rect;if(m[o.end]<s)l.push(p);else if(u<m[o.start])v.push(p);else if(m[o.start]<=s&&u<=m[o.end]&&n){var x=p.pos,S={element:h,rect:M(M({},m),(d={},d[o.end]=m[o.start],d))},E={element:h,rect:M(M({},m),(g={},g[o.start]=m[o.end],g))},y=[0,0],D=[0,0];y[a]=x[a],y[i]=x[i],D[a]=x[a],D[i]=x[i]+p.size,l.push({type:t,pos:y,size:0,elementRect:S,direction:"",elementDirection:"end"}),v.push({type:t,pos:D,size:0,elementRect:E,direction:"",elementDirection:"start"})}}),l.sort(function(p,d){return d.pos[i]-p.pos[i]}),v.sort(function(p,d){return p.pos[i]-d.pos[i]}),{total:f,start:l,end:v,inner:c}})}function Nf(t,r,e,n,a){var i=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var u=r.filter(function(h){return h.type===s}),f=s==="vertical"?1:0,l=f?0:1,v=Ff(s,u,n,i),c=f?cr:lr,p=f?lr:cr,d=n[c.start],g=n[c.end];v.forEach(function(h){var m=h.total,x=h.start,S=h.end,E=h.inner,y=e[l]+m[0].pos[l]-n[p.start],D=n;x.forEach(function(C){var b=C.elementRect.rect,_=D[c.start]-b[c.end];if(_>0){var w=[0,0];w[f]=e[f]+D[c.start]-d-_,w[l]=y,o.push(jr(t,s,"dashed",o.length,_,w,C.className,a))}D=b}),D=n,S.forEach(function(C){var b=C.elementRect.rect,_=b[c.start]-D[c.end];if(_>0){var w=[0,0];w[f]=e[f]+D[c.end]-d,w[l]=y,o.push(jr(t,s,"dashed",o.length,_,w,C.className,a))}D=b}),E.forEach(function(C){var b=C.elementRect.rect,_=d-b[c.start],w=b[c.end]-g,P=[0,0],O=[0,0];P[f]=e[f]-_,P[l]=y,O[f]=e[f]+g-d,O[l]=y,o.push(jr(t,s,"dashed",o.length,_,P,C.className,a)),o.push(jr(t,s,"dashed",o.length,w,O,C.className,a))})})}),o}function Lf(t,r,e,n,a){var i=[];return["horizontal","vertical"].forEach(function(o){var s=r.filter(function(h){return h.type===o}).slice(0,1),u=o==="vertical"?0:1,f=u?0:1,l=u?cr:lr,v=u?lr:cr,c=n[l.start],p=n[l.end],d=n[v.start],g=n[v.end];s.forEach(function(h){var m=h.gap,x=h.gapRects,S=Math.max.apply(Math,N([d],R(x.map(function(D){var C=D.rect;return C[v.start]})),!1)),E=Math.min.apply(Math,N([g],R(x.map(function(D){var C=D.rect;return C[v.end]})),!1)),y=(S+E)/2;S===E||y===(d+g)/2||x.forEach(function(D){var C=D.rect,b=D.className,_=[e[0],e[1]];if(C[l.end]<c)_[u]+=C[l.end]-c;else if(p<C[l.start])_[u]+=C[l.start]-c-m;else return;_[f]+=y-d,i.push(jr(t,u?"vertical":"horizontal","gap",i.length,m,_,b,a))})})}),i}function In(t){var r,e,n=t.state,a=n.containerClientRect,i=n.hasFixed,o=a.overflow,s=a.scrollHeight,u=a.scrollWidth,f=a.clientHeight,l=a.clientWidth,v=a.clientLeft,c=a.clientTop,p=t.props,d=p.snapGap,g=d===void 0?!0:d,h=p.verticalGuidelines,m=p.horizontalGuidelines,x=p.snapThreshold,S=x===void 0?5:x,E=p.maxSnapElementGuidelineDistance,y=E===void 0?1/0:E,D=p.isDisplayGridGuidelines,C=Xt(Vt(t.state)),b=C.top,_=C.left,w=C.bottom,P=C.right,O={top:b,left:_,bottom:w,right:P,center:(_+P)/2,middle:(b+w)/2},T=Hf(t),I=N([],R(T),!1),G=((e=(r=n.snapThresholdInfo)===null||r===void 0?void 0:r.multiples)!==null&&e!==void 0?e:[1,1]).map(function(L){return L*S});g&&I.push.apply(I,N([],R(Yf(t,O,G)),!1));var k=M({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(I.push.apply(I,N([],R(Xf(t,o?u:l,o?s:f,v,c,k,D)),!1)),i){var F=a.left,A=a.top;k.left+=F,k.top+=A,k.right+=F,k.bottom+=A}return I.push.apply(I,N([],R(So(m||!1,h||!1,o?u:l,o?s:f,v,c,k)),!1)),I=I.filter(function(L){var Y=L.element,z=L.elementRect,V=L.type;if(!Y||!z)return!0;var q=z.rect;return xo(O,q,V,y)}),I}function Yf(t,r,e){var n=t.props,a=n.maxSnapElementGuidelineDistance,i=a===void 0?1/0:a,o=n.maxSnapElementGapDistance,s=o===void 0?1/0:o,u=t.state.elementRects,f=[];return[["vertical",lr,cr],["horizontal",cr,lr]].forEach(function(l){var v=R(l,3),c=v[0],p=v[1],d=v[2],g=r[p.start],h=r[p.end],m=r[p.center],x=r[d.start],S=r[d.end],E={left:e[0],top:e[1]};function y(b){var _=b.rect,w=E[p.start];return _[p.end]<g+w?g-_[p.end]:h-w<_[p.start]?_[p.start]-h:-1}var D=u.filter(function(b){var _=b.rect;return _[d.start]>S||_[d.end]<x?!1:y(b)>0}).sort(function(b,_){return y(b)-y(_)}),C=[];D.forEach(function(b){D.forEach(function(_){if(b!==_){var w=b.rect,P=_.rect,O=w[d.start],T=w[d.end],I=P[d.start],G=P[d.end];O>G||I>T||C.push([b,_])}})}),C.forEach(function(b){var _=R(b,2),w=_[0],P=_[1],O=w.rect,T=P.rect,I=O[p.start],G=O[p.end],k=T[p.start],F=T[p.end],A=E[p.start],L=0,Y=0,z=!1,V=!1,q=!1;if(G<=g&&h<=k){if(V=!0,L=(k-G-(h-g))/2,Y=G+L+(h-g)/2,B(Y-m)>A)return}else if(G<k&&F<g+A){if(z=!0,L=k-G,Y=F+L,B(Y-g)>A)return}else if(G<k&&h-A<I){if(q=!0,L=k-G,Y=I-L,B(Y-h)>A)return}else return;L&&xo(r,T,c,i)&&(L>s||f.push({type:c,pos:c==="vertical"?[Y,0]:[0,Y],element:P.element,size:0,className:P.className,isStart:z,isCenter:V,isEnd:q,gap:L,hide:!0,gapRects:[w,P],direction:"",elementDirection:""}))})}),f}function Wf(t,r,e,n){var a,i,o=t.props,s=t.state,u=o.snapGridAll,f=o.snapGridWidth,l=f===void 0?0:f,v=o.snapGridHeight,c=v===void 0?0:v,p=s.snapRenderInfo,d=p&&(((a=p.direction)===null||a===void 0?void 0:a[0])||((i=p.direction)===null||i===void 0?void 0:i[1])),g=t.moveables;if(u&&g&&d&&(l||c)){if(s.snapThresholdInfo)return;s.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var h=t.getRect(),m=h.children,x=p.direction;if(m){var S=x.map(function(y,D){var C=D===0?{snapSize:l,posName:"left",sizeName:"width",clientOffset:n.left-r}:{snapSize:c,posName:"top",sizeName:"height",clientOffset:n.top-e},b=C.snapSize,_=C.posName,w=C.sizeName,P=C.clientOffset;if(!b)return{dir:y,multiple:1,snapSize:b,snapOffset:0};var O=h[w],T=h[_],I=ks(m.map(function(z){return[z[_]-T,z[w],O-z[w]-z[_]+T]})).filter(function(z){return z}).sort(function(z,V){return z-V}),G=I[0],k=I.map(function(z){return tt(z/G,.1)*b}),F=1,A=tt(O/G,.1);for(F=1;F<=10&&!k.every(function(z){return z*F%1===0});++F);var L=(-y+1)/2,Y=Me(T-P,T-P+O,L,1-L);return{multiple:A*F,dir:y,snapSize:b,snapOffset:Math.round(Y/b)}}),E=S.map(function(y){return y.multiple||1});s.snapThresholdInfo.multiples=E,s.snapThresholdInfo.offset=S.map(function(y){return y.snapOffset}),S.forEach(function(y,D){y.snapSize})}}else s.snapThresholdInfo=null}function Xf(t,r,e,n,a,i,o){n===void 0&&(n=0),a===void 0&&(a=0);var s=t.props,u=t.state,f=s.snapGridWidth,l=f===void 0?0:f,v=s.snapGridHeight,c=v===void 0?0:v,p=[],d=i.left,g=i.top,h=[0,0];Wf(t,n,a,i);var m=u.snapThresholdInfo,x=l,S=c;if(m&&(l*=m.multiples[0]||1,c*=m.multiples[1]||1,h=m.offset),c){for(var E=function(D){p.push({type:"horizontal",pos:[d,tt(h[1]*S+D-a+g,.1)],className:K("grid-guideline"),size:r,hide:!o,direction:"",grid:!0})},y=0;y<=e*2;y+=c)E(y);for(var y=-c;y>=-e;y-=c)E(y)}if(l){for(var E=function(C){p.push({type:"vertical",pos:[tt(h[0]*x+C-n+d,.1),g],className:K("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},y=0;y<=r*2;y+=l)E(y);for(var y=-l;y>=-r;y-=l)E(y)}return p}function xo(t,r,e,n){return e==="horizontal"?B(t.right-r.left)<=n||B(t.left-r.right)<=n||t.left<=r.right&&r.left<=t.right:e==="vertical"?B(t.bottom-r.top)<=n||B(t.top-r.bottom)<=n||t.top<=r.bottom&&r.top<=t.bottom:!0}function Hf(t){var r=t.state,e=t.props.elementGuidelines,n=e===void 0?[]:e;if(!n.length)return r.elementRects=[],[];var a=(r.elementRects||[]).filter(function(c){return!c.refresh}),i=n.map(function(c){return Ut(c)&&"element"in c?M(M({},c),{element:Kt(c.element,!0)}):{element:Kt(c,!0)}}).filter(function(c){return c.element}),o=eu(a.map(function(c){return c.element}),i.map(function(c){return c.element})),s=o.maintained,u=o.added,f=[];s.forEach(function(c){var p=R(c,2),d=p[0],g=p[1];f[g]=a[d]}),Vf(t,u.map(function(c){return i[c]})).map(function(c,p){f[u[p]]=c}),r.elementRects=f;var l=aa(t.props.elementSnapDirections),v=[];return f.forEach(function(c){var p=c.element,d=c.top,g=d===void 0?l.top:d,h=c.left,m=h===void 0?l.left:h,x=c.right,S=x===void 0?l.right:x,E=c.bottom,y=E===void 0?l.bottom:E,D=c.center,C=D===void 0?l.center:D,b=c.middle,_=b===void 0?l.middle:b,w=c.className,P=c.rect,O=ia({top:g,right:S,left:m,bottom:y,center:C,middle:_},P),T=O.horizontal,I=O.vertical,G=O.horizontalNames,k=O.verticalNames,F=P.top,A=P.left,L=P.right-A,Y=P.bottom-F,z=[L,Y];I.forEach(function(V,q){v.push({type:"vertical",element:p,pos:[tt(V,.1),F],size:Y,sizes:z,className:w,elementRect:c,elementDirection:Aa[k[q]]||k[q],direction:""})}),T.forEach(function(V,q){v.push({type:"horizontal",element:p,pos:[A,tt(V,.1)],size:L,sizes:z,className:w,elementRect:c,elementDirection:Aa[G[q]]||G[q],direction:""})})}),v}function qa(t,r){return t?t.map(function(e){var n=Ut(e)?e:{pos:e},a=n.pos;return re(a)?n:M(M({},n),{pos:vt(a,r)})}):[]}function So(t,r,e,n,a,i,o){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],u=o.left,f=o.top,l=o.bottom,v=o.right,c=e+v-u,p=n+l-f;return qa(t,p).forEach(function(d){s.push({type:"horizontal",pos:[u,tt(d.pos-i+f,.1)],size:c,className:d.className,direction:""})}),qa(r,c).forEach(function(d){s.push({type:"vertical",pos:[tt(d.pos-a+u,.1),f],size:p,className:d.className,direction:""})}),s}function Vf(t,r){if(!r.length)return[];var e=t.props.groupable,n=t.state,a=n.containerClientRect,i=n.rootMatrix,o=n.is3d,s=n.offsetDelta,u=o?4:3,f=R(hf(i,a,u),2),l=f[0],v=f[1],c=e?0:s[0],p=e?0:s[1];return r.map(function(d){var g=d.element.getBoundingClientRect(),h=g.left-l-c,m=g.top-v-p,x=m+g.height,S=h+g.width,E=R(Fr(i,[h,m],u),2),y=E[0],D=E[1],C=R(Fr(i,[S,x],u),2),b=C[0],_=C[1];return M(M({},d),{rect:{left:y,right:b,top:D,bottom:_,center:(y+b)/2,middle:(D+_)/2}})})}function Se(t){var r=t.state,e=r.container,n=t.props.snapContainer||e;if(r.snapContainer===n&&r.guidelines&&r.guidelines.length)return!1;var a=r.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(e!==n){var o=Kt(n,!0);if(o){var s=Qr(o),u=Ja(r,[s.left-a.left,s.top-a.top]),f=Ja(r,[s.right-a.right,s.bottom-a.bottom]);i.left=tt(u[0],1e-5),i.top=tt(u[1],1e-5),i.right=tt(f[0],1e-5),i.bottom=tt(f[1],1e-5)}}return r.snapContainer=n,r.snapOffset=i,r.guidelines=In(t),r.enableSnap=!0,!0}function Eo(t,r,e,n,a,i){var o=_r(t,r,e,i?4:3),s=Ct(o,n);return la(o,Q(a,s))}function ja(t){return t?t/B(t):0}function qf(t,r,e,n,a,i){var o=i.fixedDirection,s=Ef(e,o,n),u=sa(t,r,e,n),f=N(N([],R(If(t,r,s,n,a,i)),!1),R(vo(t,u,i)),!1),l=Pe(f,0),v=Pe(f,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:v.isBound,offset:v.offset[1]}}}function jf(t,r,e,n,a,i,o,s,u){var f=Ct(r,o),l=Ve(t,s,{vertical:[f[0]],horizontal:[f[1]]}),v=l.horizontal.offset,c=l.vertical.offset;if(tt(c,Mn)||tt(v,Mn)){var p=R(Jt({datas:u,distX:-c,distY:-v}),2),d=p[0],g=p[1],h=Math.min(a||1/0,e+o[0]*d),m=Math.min(i||1/0,n+o[1]*g);return[h-e,m-n]}return[0,0]}function Do(t,r,e,n,a,i,o,s){for(var u=Vt(t.state),f=t.props.keepRatio,l=0,v=0,c=0;c<2;++c){var p=r(l,v),d=qf(t,p,a,f,o,s),g=d.width,h=d.height,m=g.isBound,x=h.isBound,S=g.offset,E=h.offset;if(c===1&&(m||(S=0),x||(E=0)),c===0&&o&&!m&&!x)return[0,0];if(f){var y=B(S)*(e?1/e:1),D=B(E)*(n?1/n:1),C=m&&x?y<D:x||!m&&y<D;C?S=e*E/n:E=n*S/e}l+=S,v+=E}if(!f&&a[0]&&a[1]){var b=zf(t,u,a,i,s),_=b.maxWidth,w=b.maxHeight,P=R(jf(t,r(l,v).map(function(I){return I.map(function(G){return tt(G,Mn)})}),e+l,n+v,_,w,a,o,s),2),S=P[0],E=P[1];l+=S,v+=E}return[l,v]}function Kr(t){return t<0&&(t=t%360+360),t%=360,t}function Uf(t,r){r=Kr(r);var e=Math.floor(t/360),n=e*360+360-r,a=e*360+r;return B(t-n)<B(t-a)?n:a}function fn(t,r){t=Kr(t),r=Kr(r);var e=Kr(t-r);return Math.min(e,360-e)}function $f(t,r,e,n){var a,i=t.props,o=(a=i[ao])!==null&&a!==void 0?a:5,s=i[io];if(Vr(t,"rotatable")){var u=r.pos1,f=r.pos2,l=r.pos3,v=r.pos4,c=r.origin,p=e*Math.PI/180,d=[u,f,l,v].map(function(E){return Q(E,c)}),g=d.map(function(E){return oe(E,p)}),h=N(N([],R(vf(t,d,g,c,e)),!1),R(Mf(t,d,g,c,e)),!1);h.sort(function(E,y){return B(E-e)-B(y-e)});var m=h.length>0;if(m)return{isSnap:m,dist:m?h[0]:e}}if(s?.length&&o){var x=s.slice().sort(function(E,y){return fn(E,n)-fn(y,n)}),S=x[0];if(fn(S,n)<=o)return{isSnap:!0,dist:e+Uf(n,S)-n}}return{isSnap:!1,dist:e}}function Zf(t,r,e,n,a,i,o){if(!Vr(t,"resizable"))return[0,0];var s=o.fixedDirection,u=o.nextAllMatrix,f=t.state,l=f.allMatrix,v=f.is3d;return Do(t,function(c,p){return Eo(u||l,r+c,e+p,s,a,v)},r,e,n,a,i,o)}function Kf(t,r,e,n,a){if(!Vr(t,"scalable"))return[0,0];var i=a.startOffsetWidth,o=a.startOffsetHeight,s=a.fixedPosition,u=a.fixedDirection,f=a.is3d,l=Do(t,function(v,c){return Eo(Zu(a,ut(r,[v/i,c/o])),i,o,u,s,f)},i,o,e,s,n,a);return[l[0]/i,l[1]/o]}function Jf(t,r){r.absolutePoses=Vt(t.state)}function Ua(t){var r=[];return t.forEach(function(e){e.guidelineInfos.forEach(function(n){var a=n.guideline;Lt(r,function(i){return i.guideline===a})||(a.direction="",r.push({guideline:a,posInfo:e}))})}),r.map(function(e){var n=e.guideline,a=e.posInfo;return M(M({},n),{direction:a.direction})})}function $a(t,r,e,n,a,i){var o=na(Xe(t,i),r,e),s=o.vertical,u=o.horizontal,f=Or();s.forEach(function(d){d.isBound&&(d.direction==="start"&&(f.left=!0),d.direction==="end"&&(f.right=!0),n.push({type:"bounds",pos:d.pos}))}),u.forEach(function(d){d.isBound&&(d.direction==="start"&&(f.top=!0),d.direction==="end"&&(f.bottom=!0),a.push({type:"bounds",pos:d.pos}))});var l=wf(t),v=l.boundMap,c=l.vertical,p=l.horizontal;return c.forEach(function(d){rr(n,function(g){var h=g.type,m=g.pos;return h==="bounds"&&m===d})>=0||n.push({type:"bounds",pos:d})}),p.forEach(function(d){rr(a,function(g){var h=g.type,m=g.pos;return h==="bounds"&&m===d})>=0||a.push({type:"bounds",pos:d})}),{boundMap:f,innerBoundMap:v}}var Qf=pa("",["resizable","scalable"]),yo={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",ao,io,oo,so,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,r){var e=t.state,n=e.top,a=e.left,i=e.pos1,o=e.pos2,s=e.pos3,u=e.pos4,f=e.snapRenderInfo,l=t.props.snapRenderThreshold,v=l===void 0?1:l;if(!f||!f.render||!Vr(t,""))return Ir(t,"boundMap",Or(),function(W){return JSON.stringify(W)}),Ir(t,"innerBoundMap",Or(),function(W){return JSON.stringify(W)}),[];e.guidelines=In(t);var c=Math.min(i[0],o[0],s[0],u[0]),p=Math.min(i[1],o[1],s[1],u[1]),d=f.externalPoses||[],g=Vt(t.state),h=[],m=[],x=[],S=[],E=[],y=Xt(g),D=y.width,C=y.height,b=y.top,_=y.left,w=y.bottom,P=y.right,O={left:_,right:P,top:b,bottom:w,center:(_+P)/2,middle:(b+w)/2},T=d.length>0,I=T?Xt(d):{};if(!f.request){if(f.direction&&E.push(Sf(t,g,f.direction,v,v)),f.snap){var G=Xt(g);f.center&&(G.middle=(G.top+G.bottom)/2,G.center=(G.left+G.right)/2),E.push(ka(t,G,v,v))}T&&(f.center&&(I.middle=(I.top+I.bottom)/2,I.center=(I.left+I.right)/2),E.push(ka(t,I,v,v))),E.forEach(function(W){var j=W.vertical.posInfos,X=W.horizontal.posInfos;h.push.apply(h,N([],R(j.filter(function($){var J=$.guidelineInfos;return J.some(function(at){var st=at.guideline;return!st.hide})}).map(function($){return{type:"snap",pos:$.pos}})),!1)),m.push.apply(m,N([],R(X.filter(function($){var J=$.guidelineInfos;return J.some(function(at){var st=at.guideline;return!st.hide})}).map(function($){return{type:"snap",pos:$.pos}})),!1)),x.push.apply(x,N([],R(Ua(j)),!1)),S.push.apply(S,N([],R(Ua(X)),!1))})}var k=$a(t,[_,P],[b,w],h,m),F=k.boundMap,A=k.innerBoundMap;T&&$a(t,[I.left,I.right],[I.top,I.bottom],h,m,f.externalBounds);var L=N(N([],R(x),!1),R(S),!1),Y=L.filter(function(W){return W.element&&!W.gapRects}),z=L.filter(function(W){return W.gapRects}).sort(function(W,j){return W.gap-j.gap});U(t,"onSnap",{guidelines:L.filter(function(W){var j=W.element;return!j}),elements:Y,gaps:z},!0);var V=Ir(t,"boundMap",F,function(W){return JSON.stringify(W)},Or()),q=Ir(t,"innerBoundMap",A,function(W){return JSON.stringify(W)},Or());return(F===V||A===q)&&U(t,"onBound",{bounds:F,innerBounds:A},!0),N(N(N(N(N(N([],R(Nf(t,Y,[c,p],O,r)),!1),R(Lf(t,z,[c,p],O,r)),!1),R(Va(t,"horizontal",S,[a,n],O,r)),!1),R(Va(t,"vertical",x,[a,n],O,r)),!1),R(Ha(t,"horizontal",m,c,n,D,0,r)),!1),R(Ha(t,"vertical",h,p,a,C,1,r)),!1)},dragStart:function(t,r){t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},Se(t)},drag:function(t){var r=t.state;Se(t)||(r.guidelines=In(t)),r.snapRenderInfo&&(r.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,r){if(Qf(t,r)||Pn(t,r))return!0;if(!r.isRequest&&r.inputEvent)return bt(r.inputEvent.target,K("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Se(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,r){this.dragStart(t,r)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Se(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var r=t.state;r.enableSnap=!1,r.guidelines=[],r.snapRenderInfo=null,r.elementRects=[]}};function tl(t,r){return[t[0]*r[0],t[1]*r[1]]}function K(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Ss.apply(void 0,N([Qn],R(t),!1))}function bo(t){t()}function rl(t){return!t||t==="none"?[1,0,0,1,0,0]:Ut(t)?t:Gr(t)}function Jr(t,r,e){return we(r,Dr(e,r),t,Dr(e.map(function(n){return-n}),r))}function el(t,r,e){if(r==="%"){var n=fa(t.ownerSVGElement);return n[e?"width":"height"]/100}return 1}function nl(t){var r=al(ca(t,":before"));return r.map(function(e,n){var a=ie(e),i=a.value,o=a.unit;return i*el(t,o,n===0)})}function ze(t){return t?t.split(" "):["0","0"]}function al(t){return ze(t.transformOrigin)}function Co(t){var r=Nt(t),e=r("transform");if(e&&e!=="none")return e;if("transform"in t){var n=t.transform,a=n.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var o=[],s=function(f){var l=a[f].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(v){return l[v]}).join(", "),")"))},u=0;u<i;++u)s(u);return o.join(" ")}return""}function ae(t,r,e,n,a){var i,o,s=qn(t)||vr(t),u=!1,f,l;if(!t||e)f=t;else{var v=(i=t?.assignedSlot)===null||i===void 0?void 0:i.parentElement,c=t.parentElement;v?(u=!0,l=c,f=v):f=c}for(var p=!1,d=t===r||f===r,g="relative",h=1,m=parseFloat(a?.("zoom"))||1,x=a?.("position");f&&f!==s;){r===f&&(d=!0);var S=Nt(f),E=f.tagName.toLowerCase(),y=Co(f),D=S("willChange"),C=parseFloat(S("zoom"))||1;if(g=S("position"),n&&C!==1){h=C;break}if(!e&&n&&m!==1&&x&&x!=="absolute"||E==="svg"||E==="foreignobject"||g!=="static"||y&&y!=="none"||D==="transform")break;var b=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,_=f.parentNode;b&&(u=!0,l=_);var w=_;if(w&&w.nodeType===11){f=w.host,p=!0,g=Nt(f)("position");break}f=w,g="relative"}return{offsetZoom:h,hasSlot:u,parentSlotElement:l,isCustomElement:p,isStatic:g==="static",isEnd:d||!f||f===s,offsetParent:f||s}}function il(t,r){var e,n=t.tagName.toLowerCase(),a=t.offsetLeft,i=t.offsetTop,o=Nt(t),s=Yn(a),u=!s,f,l;return!u&&(n!=="svg"||t.ownerSVGElement)?(f=Li?nl(t):ze(o("transformOrigin")).map(function(v){return parseFloat(v)}),l=f.slice(),u=!0,n==="svg"?(a=0,i=0):(e=R(ul(t,f,t===r&&r.tagName.toLowerCase()==="g"),4),a=e[0],i=e[1],f[0]=e[2],f[1]=e[3])):(f=ze(o("transformOrigin")).map(function(v){return parseFloat(v)}),l=f.slice()),{tagName:n,isSVG:s,hasOffset:u,offset:[a||0,i||0],origin:f,targetOrigin:l}}function _o(t,r){var e=Nt(t),n=Nt(vr(t)),a=n("position");if(!r&&(!a||a==="static"))return[0,0];var i=parseInt(n("marginLeft"),10),o=parseInt(n("marginTop"),10);return e("position")==="absolute"&&((e("top")!=="auto"||e("bottom")!=="auto")&&(o=0),(e("left")!=="auto"||e("right")!=="auto")&&(i=0)),[i,o]}function Gn(t){t.forEach(function(r){var e=r.matrix;e&&(r.matrix=Zt(e,3,4))})}function ol(t){for(var r=t.parentElement,e=!1,n=vr(t);r;){var a=ca(r).transform;if(a&&a!=="none"){e=!0;break}if(r===n)break;r=r.parentElement}return{fixedContainer:r||n,hasTransform:e}}function qe(t,r){return r===void 0&&(r=t.length>9),"".concat(r?"matrix3d":"matrix","(").concat(Pi(t,!r).join(","),")")}function fa(t){var r=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:r,clientHeight:e};var n=t.viewBox,a=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||r,height:a.height||e,clientWidth:r,clientHeight:e}}function sl(t,r){var e,n=fa(t),a=n.width,i=n.height,o=n.clientWidth,s=n.clientHeight,u=o/a,f=s/i,l=t.preserveAspectRatio.baseVal,v=l.align,c=l.meetOrSlice,p=[0,0],d=[u,f],g=[0,0];if(v!==1){var h=(v-2)%3,m=Math.floor((v-2)/3);p[0]=a*h/2,p[1]=i*m/2;var x=c===2?Math.max(f,u):Math.min(u,f);d[0]=x,d[1]=x,g[0]=(o-a)/2*h,g[1]=(s-i)/2*m}var S=Un(d,r);return e=R(g,2),S[r*(r-1)]=e[0],S[r*(r-1)+1]=e[1],Jr(S,r,p)}function ul(t,r,e){var n=t.tagName.toLowerCase();if(!t.getBBox||!e&&n==="g")return[0,0,0,0];var a=Nt(t),i=a("transform-box")==="fill-box",o=t.getBBox(),s=fa(t.ownerSVGElement),u=o.x,f=o.y;n==="foreignobject"&&!u&&!f&&(u=parseFloat(t.getAttribute("x"))||0,f=parseFloat(t.getAttribute("y"))||0);var l=u-s.x,v=f-s.y,c=i?r[0]:r[0]-l,p=i?r[1]:r[1]-v;return[l,v,c,p]}function mt(t,r,e){return Pt(t,Er(r,e),e)}function _r(t,r,e,n){return[[0,0],[r,0],[0,e],[r,e]].map(function(a){return mt(t,a,n)})}function Xt(t){var r=t.map(function(f){return f[0]}),e=t.map(function(f){return f[1]}),n=Math.min.apply(Math,N([],R(r),!1)),a=Math.min.apply(Math,N([],R(e),!1)),i=Math.max.apply(Math,N([],R(r),!1)),o=Math.max.apply(Math,N([],R(e),!1)),s=i-n,u=o-a;return{left:n,top:a,right:i,bottom:o,width:s,height:u}}function Za(t,r,e,n){var a=_r(t,r,e,n);return Xt(a)}function fl(t,r,e,n,a){var i,o=t.target,s=t.origin,u=r.matrix,f=wo(o),l=f.offsetWidth,v=f.offsetHeight,c=e.getBoundingClientRect(),p=[0,0];e===vr(e)&&(p=_o(o,!0));for(var d=o.getBoundingClientRect(),g=d.left-c.left+e.scrollLeft-(e.clientLeft||0)+p[0],h=d.top-c.top+e.scrollTop-(e.clientTop||0)+p[1],m=d.width,x=d.height,S=we(n,a,u),E=Za(S,l,v,n),y=E.left,D=E.top,C=E.width,b=E.height,_=mt(S,s,n),w=Q(_,[y,D]),P=[g+w[0]*m/C,h+w[1]*x/b],O=[0,0],T=0;++T<10;){var I=$t(a,n);i=R(Q(mt(I,P,n),mt(I,_,n)),2),O[0]=i[0],O[1]=i[1];var G=we(n,a,Dr(O,n),u),k=Za(G,l,v,n),F=k.left,A=k.top,L=F-g,Y=A-h;if(B(L)<2&&B(Y)<2)break;P[0]-=L,P[1]-=Y}return O.map(function(z){return Math.round(z)})}function ll(t,r,e){var n=t.length===16,a=n?4:3,i=r.map(function(u){return mt(t,u,a)}),o=e.left,s=e.top;return i.map(function(u){return[u[0]+o,u[1]+s]})}function Ht(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Mo(t,r){return Ht([r[0]-t[0],r[1]-t[1]])}function Ur(t,r,e,n){e===void 0&&(e=1),n===void 0&&(n=xt(t,r));var a=Mo(t,r);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(e,")"),width:"".concat(a,"px")}}function Be(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var a=e.length,i=e.reduce(function(s,u){return s+u[0]},0)/a,o=e.reduce(function(s,u){return s+u[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(r,")")}}function br(t,r){var e=t[r];return Ut(e)?M(M({},t),e):t}function wo(t){var r=t&&!Yn(t.offsetWidth),e=0,n=0,a=0,i=0,o=0,s=0,u=0,f=0,l=0,v=0,c=0,p=0,d=1/0,g=1/0,h=1/0,m=1/0,x=0,S=0,E=!1;if(t)if(!r&&t.ownerSVGElement){var y=t.getBBox();E=!0,e=y.width,n=y.height,o=e,s=n,u=e,f=n,a=e,i=n}else{var D=Nt(t),C=t.style,b=D("boxSizing")==="border-box",_=parseFloat(D("borderLeftWidth"))||0,w=parseFloat(D("borderRightWidth"))||0,P=parseFloat(D("borderTopWidth"))||0,O=parseFloat(D("borderBottomWidth"))||0,T=parseFloat(D("paddingLeft"))||0,I=parseFloat(D("paddingRight"))||0,G=parseFloat(D("paddingTop"))||0,k=parseFloat(D("paddingBottom"))||0,F=T+I,A=G+k,L=_+w,Y=P+O,z=F+L,V=A+Y,q=D("position"),W=0,j=0;if("clientLeft"in t){var X=null;if(q==="absolute"){var $=ae(t,vr(t));X=$.offsetParent}else X=t.parentElement;if(X){var J=Nt(X);W=parseFloat(J("width")),j=parseFloat(J("height"))}}l=Math.max(F,vt(D("minWidth"),W)||0),v=Math.max(A,vt(D("minHeight"),j)||0),d=vt(D("maxWidth"),W),g=vt(D("maxHeight"),j),isNaN(d)&&(d=1/0),isNaN(g)&&(g=1/0),x=vt(C.width,0)||0,S=vt(C.height,0)||0,o=parseFloat(D("width"))||0,s=parseFloat(D("height"))||0,u=B(o-x)<1?gn(l,x||o,d):o,f=B(s-S)<1?gn(v,S||s,g):s,e=u,n=f,a=u,i=f,b?(h=d,m=g,c=l,p=v,u=e-z,f=n-V):(h=d+z,m=g+V,c=l+z,p=v+V,e=u+z,n=f+V),a=u+F,i=f+A}return{svg:E,offsetWidth:e,offsetHeight:n,clientWidth:a,clientHeight:i,contentWidth:u,contentHeight:f,inlineCSSWidth:x,inlineCSSHeight:S,cssWidth:o,cssHeight:s,minWidth:l,minHeight:v,maxWidth:d,maxHeight:g,minOffsetWidth:c,minOffsetHeight:p,maxOffsetWidth:h,maxOffsetHeight:m}}function Ro(t,r){return xt(r>0?t[0]:t[1],r>0?t[1]:t[0])}function Ee(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function To(t,r){var e=t===vr(t)||t===qn(t),n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return e&&(n.clientHeight=Math.max(r.height,n.clientHeight),n.scrollHeight=Math.max(r.height,n.scrollHeight)),n.overflow=Nt(t)("overflow")!=="visible",M(M({},r),n)}function ln(t,r,e,n){var a=t.left,i=t.right,o=t.top,s=t.bottom,u=r.top,f=r.left,l={left:f+a,top:u+o,right:f+i,bottom:u+s,width:i-a,height:s-o};return e&&n?To(e,l):l}function Qr(t,r){var e=0,n=0,a=0,i=0;if(t){var o=t.getBoundingClientRect();e=o.left,n=o.top,a=o.width,i=o.height}var s={left:e,top:n,width:a,height:i,right:e+a,bottom:n+i};return t&&r?To(t,s):s}function cl(t){var r=t.props,e=r.groupable,n=r.svgOrigin,a=t.getState(),i=a.offsetWidth,o=a.offsetHeight,s=a.svg,u=a.transformOrigin;return!e&&s&&n?ga(n,i,o):u}function Oo(t,r,e,n){var a;if(t)a=t;else if(r)a=[0,0];else{var i=e.target;a=Po(i,n)}return a}function Po(t,r){if(t){var e=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(r.deg=e,!!n){var a=[0,0];return n.indexOf("w")>-1&&(a[0]=-1),n.indexOf("e")>-1&&(a[0]=1),n.indexOf("n")>-1&&(a[1]=-1),n.indexOf("s")>-1&&(a[1]=1),a}}}function la(t,r){return[ut(r,t[0]),ut(r,t[1]),ut(r,t[2]),ut(r,t[3])]}function Vt(t){var r=t.left,e=t.top,n=t.pos1,a=t.pos2,i=t.pos3,o=t.pos4;return la([n,a,i,o],[r,e])}function zn(t,r){t[r?"controlAbles":"targetAbles"].forEach(function(e){e.unset&&e.unset(t)})}function Pr(t,r){var e=r?"controlGesto":"targetGesto",n=t[e];n?.isIdle()===!1&&zn(t,r),n?.unset(),t[e]=null}function At(t,r){if(r){var e=Hr(r);e.nextStyle=M(M({},e.nextStyle),t)}return{style:t,cssText:Lr(t).map(function(n){return"".concat(Ps(n,"-"),": ").concat(t[n],";")}).join("")}}function Io(t,r,e){var n=r.afterTransform||r.transform;return M(M({},At(M(M(M({},t.style),r.style),{transform:n}),e)),{afterTransform:n,transform:t.transform})}function nt(t,r,e,n){var a=r.datas;a.datas||(a.datas={});var i=M(M({},e),{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,moveable:t,datas:a.datas,isRequest:r.isRequest,isRequestChild:r.isRequestChild,isFirstDrag:!!r.isFirstDrag,isTrusted:r.isTrusted!==!1,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var o;(o=r.stop)===null||o===void 0||o.call(r)}});return a.isStartEvent?n||(a.lastEvent=i):a.isStartEvent=!0,i}function Yt(t,r,e){var n=r.datas,a="isDrag"in e?e.isDrag:r.isDrag;return n.datas||(n.datas={}),M(M({isDrag:a},e),{moveable:t,target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:r.isDouble,datas:n.datas,isFirstDrag:!!r.isFirstDrag})}function je(t,r,e){t._emitter.on(r,e)}function U(t,r,e,n,a){return t.triggerEvent(r,e,n,a)}function ca(t,r){return ur(t).getComputedStyle(t,r)}function De(t,r,e){var n={},a={};return t.filter(function(i){var o=i.name;if(n[o]||!r.some(function(s){return i[s]}))return!1;if(!e&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return n[o]=!0,!0})}function Bn(t,r){return t===r||t==null&&r==null}function Ka(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=t.length-1,n=0;n<e;++n){var a=t[n];if(!Yn(a))return a}return t[e]}function Go(t,r){var e=[],n=[];return t.forEach(function(a,i){var o=r(a,i,t),s=n.indexOf(o),u=e[s]||[];s===-1&&(n.push(o),e.push(u)),u.push(a)}),e}function vl(t,r){var e=[],n={};return t.forEach(function(a,i){var o=r(a,i,t),s=n[o];s||(s=[],n[o]=s,e.push(s)),s.push(a)}),e}function zo(t){return t.reduce(function(r,e){return r.concat(e)},[])}function kr(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort(function(e,n){return B(n)-B(e)}),t[0]}function Fr(t,r,e){return Pt($t(t,e),Er(r,e),e)}function pl(t,r){var e,n=t.is3d,a=t.rootMatrix,i=n?4:3;return e=R(Fr(a,[r.distX,r.distY],i),2),r.distX=e[0],r.distY=e[1],r}function Wt(t,r,e,n){if(!e[0]&&!e[1])return r;var a=mt(t,[ja(e[0]||1),0],n),i=mt(t,[0,ja(e[1]||1)],n),o=mt(t,[e[0]/Ht(a),e[1]/Ht(i)],n);return ut(r,o)}function qt(t,r,e){return e?"".concat(t/r*100,"%"):"".concat(t,"px")}function Ae(t){return B(t)<=kt?0:t}function va(t){return function(r){if(!r.isDragging(t))return"";var e=nf(r,t),n=e.deg;return n?K("view-control-rotation".concat(n)):""}}function pa(t,r){return r===void 0&&(r=[t]),function(e,n){if(n.isRequest)return r.some(function(i){return n.requestAble===i})?n.parentDirection:!1;var a=n.inputEvent.target;return bt(a,K("direction"))&&(!t||bt(a,K(t)))}}function dl(t,r,e){var n,a=zr(t,{"x%":function(y){return y/100*r.offsetWidth},"y%":function(y){return y/100*r.offsetHeight}}),i=t.slice(0,e<0?void 0:e),o=t.slice(0,e<0?void 0:e+1),s=t[e]||"",u=e<0?[]:t.slice(e),f=e<0?[]:t.slice(e+1),l=a.slice(0,e<0?void 0:e),v=a.slice(0,e<0?void 0:e+1),c=(n=a[e])!==null&&n!==void 0?n:zr([""])[0],p=e<0?[]:a.slice(e),d=e<0?[]:a.slice(e+1),g=c?[c]:[],h=wr(l),m=wr(v),x=wr(p),S=wr(d),E=pt(h,x,4);return{transforms:t,beforeFunctionMatrix:h,beforeFunctionMatrix2:m,targetFunctionMatrix:wr(g),afterFunctionMatrix:x,afterFunctionMatrix2:S,allFunctionMatrix:E,beforeFunctions:l,beforeFunctions2:v,targetFunction:g[0],afterFunctions:p,afterFunctions2:d,beforeFunctionTexts:i,beforeFunctionTexts2:o,targetFunctionText:s,afterFunctionTexts:u,afterFunctionTexts2:f}}function gl(t){return!t||!Ut(t)||jn(t)?!1:Mt(t)||"length"in t}function Kt(t,r){return t?jn(t)?t:er(t)?r?document.querySelector(t):t:Wn(t)?t():Ri(t)?t:"current"in t?t.current:t:null}function da(t,r){if(!t)return[];var e=gl(t)?[].slice.call(t):[t];return e.reduce(function(n,a){return er(a)&&r?N(N([],R(n),!1),R([].slice.call(document.querySelectorAll(a))),!1):(Mt(a)?n.push(da(a,r)):n.push(Kt(a,r)),n)},[])}function hl(t,r,e){var n=xt(t,r)/Math.PI*180;return n=e>=0?n:180-n,n=n>=0?n:360+n,n}function Ja(t,r){var e=t.rootMatrix,n=t.is3d,a=n?4:3,i=$t(e,a);return n||(i=Zt(i,3,4)),i[12]=0,i[13]=0,i[14]=0,js(i,r)}function Bo(t,r,e,n,a){var i=R(t,2),o=i[0],s=i[1],u=0,f=0;if(a&&o&&s){var l=xt([0,0],r),v=xt([0,0],n),c=Ht(r),p=Math.cos(l-v)*c;if(!n[0])f=p,u=f*e;else if(!n[1])u=p,f=u/e;else{var d=n[0]*o,g=n[1]*s,h=Math.atan2(d+r[0],g+r[1]),m=Math.atan2(d,g);h<0&&(h+=Math.PI*2),m<0&&(m+=Math.PI*2);var x=0;B(h-m)<Math.PI/2||B(h-m)>Math.PI/2*3||(m+=Math.PI),x=h-m,x>Math.PI*2?x-=Math.PI*2:x>Math.PI?x=2*Math.PI-x:x<-Math.PI&&(x=-2*Math.PI-x);var S=Ht([d+r[0],g+r[1]])*Math.cos(x);u=S*Math.sin(m)-d,f=S*Math.cos(m)-g,n[0]<0&&(u*=-1),n[1]<0&&(f*=-1)}}else u=n[0]*r[0],f=n[1]*r[1];return[u,f]}function Ao(t,r,e,n){var a,i=e.ratio,o=e.startOffsetWidth,s=e.startOffsetHeight,u=0,f=0,l=n.distX,v=n.distY,c=n.pinchScale,p=n.parentDistance,d=n.parentDist,g=n.parentScale,h=e.fixedDirection,m=[0,1].map(function(C){return B(t[C]-h[C])}),x=[0,1].map(function(C){var b=m[C];return b!==0&&(b=2/b),b});if(d)u=d[0],f=d[1],r&&(u?f||(f=u/i):u=f*i);else if(re(c))u=(c-1)*o,f=(c-1)*s;else if(g)u=(g[0]-1)*o,f=(g[1]-1)*s;else if(p){var S=o*m[0],E=s*m[1],y=Ht([S,E]);u=p/y*S*x[0],f=p/y*E*x[1]}else{var D=Jt({datas:e,distX:l,distY:v});D=x.map(function(C,b){return D[b]*C}),a=R(Bo([o,s],D,i,t,r),2),u=a[0],f=a[1]}return{distWidth:u,distHeight:f}}function An(t,r){if(r){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var e=R(t.split(" "),2),n=e[0],a=e[1],i=An(n||""),o=An(a||""),s=M(M({},i),o),u={x:"50%",y:"50%"};return s.x&&(u.x=s.x),s.y&&(u.y=s.y),s.value&&(s.x&&!s.y&&(u.y=s.value),!s.x&&s.y&&(u.x=s.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function ga(t,r,e){var n=An(t,!0),a=n.x,i=n.y;return[vt(a,r)||0,vt(i,e)||0]}function ml(t,r,e){var n=t.map(function(i){return Q(i,r)}),a=n.map(function(i){return oe(i,e)});return{prev:n,next:a,result:a.map(function(i){return ut(i,r)})}}function ko(t,r){return t.length===r.length&&t.every(function(e,n){var a=r[n],i=Mt(e),o=Mt(a);return i&&o?ko(e,a):!i&&!o?e===a:!1})}function Ir(t,r,e,n,a){var i=t._store,o=i[r];if(!(r in i))if(a!=null)i[r]=a,o=a;else return i[r]=e,e;return o===e||n(o)===n(e)?o:(i[r]=e,e)}function zt(t){return t>=0?1:-1}function B(t){return Math.abs(t)}function cn(t,r){return As(t).map(function(e){return r(e)})}function Fo(t){return re(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var No=Wr("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,r){var e=r.datas,n=r.targets,a=r.angle,i=r.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var f="onPinch".concat(n?"Group":"","Start"),l="drag".concat(n?"Group":"","ControlStart"),v=(s===!0?t.controlAbles:u.filter(function(g){return s.indexOf(g.name)>-1})).filter(function(g){return g.canPinch&&g[l]}),c=nt(t,r,{});n&&(c.targets=n);var p=U(t,f,c);e.isPinch=p!==!1,e.ables=v;var d=e.isPinch;return d?(v.forEach(function(g){if(i[g.name]=i[g.name]||{},!!g[l]){var h=M(M({},r),{datas:i[g.name],parentRotate:a,isPinch:!0});g[l](t,h)}}),t.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},d):!1},pinch:function(t,r){var e=r.datas,n=r.scale,a=r.distance,i=r.originalDatas,o=r.inputEvent,s=r.targets,u=r.angle;if(e.isPinch){var f=a*(1-1/n),l=nt(t,r,{});s&&(l.targets=s);var v="onPinch".concat(s?"Group":"");U(t,v,l);var c=e.ables,p="drag".concat(s?"Group":"","Control");return c.forEach(function(d){d[p]&&d[p](t,M(M({},r),{datas:i[d.name],inputEvent:o,resolveMatrix:!0,pinchScale:n,parentDistance:f,parentRotate:u,isPinch:!0}))}),l}},pinchEnd:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.targets,o=r.originalDatas;if(e.isPinch){var s="onPinch".concat(i?"Group":"","End"),u=Yt(t,r,{isDrag:n});i&&(u.targets=i),U(t,s,u);var f=e.ables,l="drag".concat(i?"Group":"","ControlEnd");return f.forEach(function(v){v[l]&&v[l](t,M(M({},r),{isDrag:n,datas:o[v.name],inputEvent:a,isPinch:!0}))}),n}},pinchGroupStart:function(t,r){return this.pinchStart(t,M(M({},r),{targets:t.props.targets}))},pinchGroup:function(t,r){return this.pinch(t,M(M({},r),{targets:t.props.targets}))},pinchGroupEnd:function(t,r){return this.pinchEnd(t,M(M({},r),{targets:t.props.targets}))}}),Qa=pa("scalable"),Lo={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:ro("scalable"),dragControlCondition:Qa,viewClassName:va("scalable"),dragControlStart:function(t,r){var e=r.datas,n=r.isPinch,a=r.inputEvent,i=r.parentDirection,o=Oo(i,n,a,e),s=t.state,u=s.width,f=s.height,l=s.targetTransform,v=s.target,c=s.pos1,p=s.pos2,d=s.pos4;if(!o||!v)return!1;n||Cr(t,r),e.datas={},e.transform=l,e.prevDist=[1,1],e.direction=o,e.startOffsetWidth=u,e.startOffsetHeight=f,e.startValue=[1,1];var g=!o[0]&&!o[1]||o[0]||!o[1];We(t,r,"scale"),e.isWidth=g;function h(D){e.ratio=D&&isFinite(D)?D:0}e.startPositions=Vt(t.state);function m(D){var C=po(e.startPositions,D);e.fixedDirection=C.fixedDirection,e.fixedPosition=C.fixedPosition,e.fixedOffset=C.fixedOffset}e.setFixedDirection=m,h(Qt(c,p)/Qt(p,d)),m([-o[0],-o[1]]);var x=function(D){e.minScaleSize=D},S=function(D){e.maxScaleSize=D};x([-1/0,-1/0]),S([1/0,1/0]);var E=nt(t,r,M(M({direction:o,set:function(D){e.startValue=D},setRatio:h,setFixedDirection:m,setMinScaleSize:x,setMaxScaleSize:S},Ye(t,r)),{dragStart:Ot.dragStart(t,new Br().dragStart([0,0],r))})),y=U(t,"onScaleStart",E);return e.startFixedDirection=e.fixedDirection,y!==!1&&(e.isScale=!0,t.state.snapRenderInfo={request:r.isRequest,direction:o}),e.isScale?E:!1},dragControl:function(t,r){Ne(t,r,"scale");var e=r.datas,n=r.parentKeepRatio,a=r.parentFlag,i=r.isPinch,o=r.dragClient,s=r.isRequest,u=r.useSnap,f=r.resolveMatrix,l=e.prevDist,v=e.direction,c=e.startOffsetWidth,p=e.startOffsetHeight,d=e.isScale,g=e.startValue,h=e.isWidth,m=e.ratio;if(!d)return!1;var x=t.props,S=x.throttleScale,E=x.parentMoveable,y=v;!v[0]&&!v[1]&&(y=[1,1]);var D=m&&(n??x.keepRatio)||!1,C=t.state,b=[g[0],g[1]];function _(){var H=Ao(y,D,e,r),Z=H.distWidth,ft=H.distHeight,rt=c?(c+Z)/c:1,et=p?(p+ft)/p:1;g[0]||(b[0]=Z/c),g[1]||(b[1]=ft/p);var ot=(y[0]||D?rt:1)*b[0],ct=(y[1]||D?et:1)*b[1];return ot===0&&(ot=zt(l[0])*he),ct===0&&(ct=zt(l[1])*he),[ot,ct]}var w=_();if(!i&&t.props.groupable){var P=C.snapRenderInfo||{},O=P.direction;Mt(O)&&(O[0]||O[1])&&(C.snapRenderInfo={direction:v,request:r.isRequest})}U(t,"onBeforeScale",nt(t,r,{scale:w,setFixedDirection:function(H){return e.setFixedDirection(H),w=_(),w},startFixedDirection:e.startFixedDirection,setScale:function(H){w=H}},!0));var T=[w[0]/b[0],w[1]/b[1]],I=o,G=[0,0],k=zt(T[0]*T[1]),F=!o&&!a&&i;if(F||f?I=ea(t,e.targetAllTransform,[0,0],[0,0],e):o||(I=e.fixedPosition),i||(G=Kf(t,T,v,!u&&s,e)),D){y[0]&&y[1]&&G[0]&&G[1]&&(Math.abs(G[0]*c)>Math.abs(G[1]*p)?G[1]=0:G[0]=0);var A=!G[0]&&!G[1];if(A&&(h?T[0]=tt(T[0]*b[0],S)/b[0]:T[1]=tt(T[1]*b[1],S)/b[1]),y[0]&&!y[1]||G[0]&&!G[1]||A&&h){T[0]+=G[0];var L=c*T[0]*b[0]/m;T[1]=zt(k*T[0])*B(L/p/b[1])}else if(!y[0]&&y[1]||!G[0]&&G[1]||A&&!h){T[1]+=G[1];var Y=p*T[1]*b[1]*m;T[0]=zt(k*T[1])*B(Y/c/b[0])}}else T[0]+=G[0],T[1]+=G[1],G[0]||(T[0]=tt(T[0]*b[0],S)/b[0]),G[1]||(T[1]=tt(T[1]*b[1],S)/b[1]);T[0]===0&&(T[0]=zt(l[0])*he),T[1]===0&&(T[1]=zt(l[1])*he),w=tl(T,[b[0],b[1]]);var z=[c,p],V=[c*w[0],p*w[1]];V=Ci(V,e.minScaleSize,e.maxScaleSize,D?m:!1),w=cn(2,function(H){return z[H]?V[H]/z[H]:V[H]}),T=cn(2,function(H){return w[H]/b[H]});var q=cn(2,function(H){return l[H]?T[H]/l[H]:T[H]}),W="scale(".concat(T.join(", "),")"),j="scale(".concat(w.join(", "),")"),X=Le(e,j,W),$=!g[0]||!g[1],J=Ku(t,$?j:W,e.fixedDirection,I,e.fixedOffset,e,$),at=F?J:Q(J,e.prevInverseDist||[0,0]);if(e.prevDist=T,e.prevInverseDist=J,w[0]===l[0]&&w[1]===l[1]&&at.every(function(H){return!H})&&!E&&!F)return!1;var st=nt(t,r,M({offsetWidth:c,offsetHeight:p,direction:v,scale:w,dist:T,delta:q,isPinch:!!i},$i(t,X,at,i,r)));return U(t,"onScale",st),st},dragControlEnd:function(t,r){var e=r.datas;if(!e.isScale)return!1;e.isScale=!1;var n=Yt(t,r,{});return U(t,"onScaleEnd",n),n},dragGroupControlCondition:Qa,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,r);if(!n)return!1;var a=jt(t,"resizable",r);e.moveableScale=t.scale;var i=tr(t,this,"dragControlStart",r,function(f,l){return Oe(t,f,e,l)}),o=function(f){n.setFixedDirection(f),i.forEach(function(l,v){l.setFixedDirection(f),Oe(t,l.moveable,e,a[v])})};e.setFixedDirection=o;var s=M(M({},n),{targets:t.props.targets,events:i,setFixedDirection:o}),u=U(t,"onScaleGroupStart",s);return e.isScale=u!==!1,e.isScale?s:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isScale){je(t,"onBeforeScale",function(l){U(t,"onBeforeScaleGroup",nt(t,r,M(M({},l),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var a=n.dist,i=e.moveableScale;t.scale=[a[0]*i[0],a[1]*i[1]];var o=t.props.keepRatio,s=e.fixedPosition,u=tr(t,this,"dragControl",r,function(l,v){var c=R(Pt(se(t.rotation/180*Math.PI,3),[v.datas.originalX*a[0],v.datas.originalY*a[1],1],3),2),p=c[0],d=c[1];return M(M({},v),{parentDist:null,parentScale:a,parentKeepRatio:o,dragClient:ut(s,[p,d])})}),f=M({targets:t.props.targets,events:u},n);return U(t,"onScaleGroup",f),f}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isScale){this.dragControlEnd(t,r);var a=tr(t,this,"dragControlEnd",r),i=Yt(t,r,{targets:t.props.targets,events:a});return U(t,"onScaleGroupEnd",i),e}},request:function(){var t={},r=0,e=0,n=!1;return{isControl:!0,requestStart:function(a){return n=a.useSnap,{datas:t,parentDirection:a.direction||[1,1],useSnap:n}},request:function(a){return r+=a.deltaWidth,e+=a.deltaHeight,{datas:t,parentDist:[r,e],parentKeepRatio:a.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}}};function ir(t,r){return t.map(function(e,n){return Me(e,r[n],1,2)})}function ti(t,r,e){var n=xt(t,r),a=xt(t,e),i=a-n;return i>=0?i:i+2*Math.PI}function xl(t,r){var e=ti(t[0],t[1],t[2]),n=ti(r[0],r[1],r[2]),a=Math.PI;return!(e>=a&&n<=a||e<=a&&n>=a)}var Yo={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:va("warpable"),render:function(t,r){var e=t.props,n=e.resizable,a=e.scalable,i=e.warpable,o=e.zoom;if(n||a||!i)return[];var s=t.state,u=s.pos1,f=s.pos2,l=s.pos3,v=s.pos4,c=ir(u,f),p=ir(f,u),d=ir(u,l),g=ir(l,u),h=ir(l,v),m=ir(v,l),x=ir(f,v),S=ir(v,f);return N([r.createElement("div",{className:K("line"),key:"middeLine1",style:Ur(c,h,o)}),r.createElement("div",{className:K("line"),key:"middeLine2",style:Ur(p,m,o)}),r.createElement("div",{className:K("line"),key:"middeLine3",style:Ur(d,x,o)}),r.createElement("div",{className:K("line"),key:"middeLine4",style:Ur(g,S,o)})],R(eo(t,"warpable",r)),!1)},dragControlCondition:function(t,r){if(r.isRequest)return!1;var e=r.inputEvent.target;return bt(e,K("direction"))&&bt(e,K("warpable"))},dragControlStart:function(t,r){var e=r.datas,n=r.inputEvent,a=t.props.target,i=n.target,o=Po(i,e);if(!o||!a)return!1;var s=t.state,u=s.transformOrigin,f=s.is3d,l=s.targetTransform,v=s.targetMatrix,c=s.width,p=s.height,d=s.left,g=s.top;e.datas={},e.targetTransform=l,e.warpTargetMatrix=f?v:Zt(v,3,4),e.targetInverseMatrix=Ti($t(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=d,e.top=g,e.poses=[[0,0],[c,0],[0,p],[c,p]].map(function(x){return Q(x,u)}),e.nextPoses=e.poses.map(function(x){var S=R(x,2),E=S[0],y=S[1];return Pt(e.warpTargetMatrix,[E,y,0,1],4)}),e.startValue=ht(4),e.prevMatrix=ht(4),e.absolutePoses=Vt(s),e.posIndexes=Ui(o),Cr(t,r),We(t,r,"matrix3d"),s.snapRenderInfo={request:r.isRequest,direction:o};var h=nt(t,r,M({set:function(x){e.startValue=x}},Ye(t,r))),m=U(t,"onWarpStart",h);return m!==!1&&(e.isWarp=!0),e.isWarp},dragControl:function(t,r){var e=r.datas,n=r.isRequest,a=r.distX,i=r.distY,o=e.targetInverseMatrix,s=e.prevMatrix,u=e.isWarp,f=e.startValue,l=e.poses,v=e.posIndexes,c=e.absolutePoses;if(!u)return!1;if(Ne(t,r,"matrix3d"),Vr(t,"warpable")){var p=v.map(function(_){return c[_]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var d=Ve(t,n,{horizontal:p.map(function(_){return _[1]+i}),vertical:p.map(function(_){return _[0]+a})}),g=d.horizontal,h=d.vertical;i-=g.offset,a-=h.offset}var m=Jt({datas:e,distX:a,distY:i},!0),x=e.nextPoses.slice();if(v.forEach(function(_){x[_]=ut(x[_],m)}),!Yu.every(function(_){return xl(_.map(function(w){return l[w]}),_.map(function(w){return x[w]}))}))return!1;var S=$n(l[0],l[2],l[1],l[3],x[0],x[2],x[1],x[3]);if(!S.length)return!1;var E=pt(o,S,4),y=qi(e,E,!0),D=pt($t(s,4),y,4);e.prevMatrix=y;var C=pt(f,y,4),b=Le(e,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(y.join(", "),")"));return ra(r,b),U(t,"onWarp",nt(t,r,M({delta:D,matrix:C,dist:y,multiply:pt,transform:b},At({transform:b},r)))),!0},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return e.isWarp?(e.isWarp=!1,U(t,"onWarpEnd",Yt(t,r,{})),n):!1}},Sl=K("area-pieces"),ye=K("area-piece"),Wo=K("avoid"),El=K("view-dragging");function vn(t){var r=t.areaElement;if(r){var e=t.state,n=e.width,a=e.height;wi(r,Wo),r.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(a,"px")}}function ri(t){return t.createElement("div",{key:"area_pieces",className:Sl},t.createElement("div",{className:ye}),t.createElement("div",{className:ye}),t.createElement("div",{className:ye}),t.createElement("div",{className:ye}))}var Xo={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,r){var e=t.props,n=e.target,a=e.dragArea,i=e.groupable,o=e.passDragArea,s=t.getState(),u=s.width,f=s.height,l=s.renderPoses,v=o?K("area","pass"):K("area");if(i)return[r.createElement("div",{key:"area",ref:xr(t,"areaElement"),className:v}),ri(r)];if(!n||!a)return[];var c=$n([0,0],[u,0],[0,f],[u,f],l[0],l[1],l[2],l[3]),p=c.length?qe(c,!0):"none";return[r.createElement("div",{key:"area",ref:xr(t,"areaElement"),className:v,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(f,"px"),transformOrigin:"0 0",transform:p}}),ri(r)]},dragStart:function(t,r){var e=r.datas,n=r.clientX,a=r.clientY,i=r.inputEvent;if(!i)return!1;e.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,f=s.renderPoses,l=s.rootMatrix,v=s.is3d,c=u.left,p=u.top,d=Xt(f),g=d.left,h=d.top,m=d.width,x=d.height,S=v?4:3,E=R(Fr(l,[n-c,a-p],S),2),y=E[0],D=E[1];y-=g,D-=h;var C=[{left:g,top:h,width:m,height:D-10},{left:g,top:h,width:y-10,height:x},{left:g,top:h+D+10,width:m,height:x-D-10},{left:g+y+10,top:h,width:m-y-10,height:x}],b=[].slice.call(o.nextElementSibling.children);C.forEach(function(_,w){b[w].style.cssText="left: ".concat(_.left,"px;top: ").concat(_.top,"px; width: ").concat(_.width,"px; height: ").concat(_.height,"px;")}),Mi(o,Wo),s.disableNativeEvent=!0},drag:function(t,r){var e=r.datas,n=r.inputEvent;if(this.enableNativeEvent(t),!n)return!1;e.isDragArea||(e.isDragArea=!0,vn(t))},dragEnd:function(t,r){this.enableNativeEvent(t);var e=r.inputEvent,n=r.datas;if(!e)return!1;n.isDragArea||vn(t)},dragGroupStart:function(t,r){return this.dragStart(t,r)},dragGroup:function(t,r){return this.drag(t,r)},dragGroupEnd:function(t,r){return this.dragEnd(t,r)},unset:function(t){vn(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var r=t.state;r.disableNativeEvent&&bi(function(){r.disableNativeEvent=!1})}},Dl=Wr("origin",{props:["origin","svgOrigin"],render:function(t,r){var e=t.props,n=e.zoom,a=e.svgOrigin,i=e.groupable,o=t.getState(),s=o.beforeOrigin,u=o.rotation,f=o.svg,l=o.allMatrix,v=o.is3d,c=o.left,p=o.top,d=o.offsetWidth,g=o.offsetHeight,h;if(!i&&f&&a){var m=R(ga(a,d,g),2),x=m[0],S=m[1],E=v?4:3,y=mt(l,[x,S],E);h=Be(u,n,Q(y,[c,p]))}else h=Be(u,n,s);return[r.createElement("div",{className:K("control","origin"),style:h,key:"beforeOrigin"})]}});function yl(t){var r=t.scrollContainer;return[r.scrollLeft,r.scrollTop]}var bl={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,r){var e=t.props,n=e.scrollContainer,a=n===void 0?t.getContainer():n,i=e.scrollOptions,o=new ou,s=Kt(a,!0);r.datas.dragScroll=o,t.state.dragScroll=o;var u=r.isControl?"controlGesto":"targetGesto",f=r.targets;o.on("scroll",function(l){var v=l.container,c=l.direction,p=nt(t,r,{scrollContainer:v,direction:c}),d=f?"onScrollGroup":"onScroll";f&&(p.targets=f),U(t,d,p)}).on("move",function(l){var v=l.offsetX,c=l.offsetY,p=l.inputEvent;t[u].scrollBy(v,c,p.inputEvent,!1)}).on("scrollDrag",function(l){var v=l.next;v(t[u].getCurrentEvent())}),o.dragStart(r,M({container:s},i))},checkScroll:function(t,r){var e=r.datas.dragScroll;if(e){var n=t.props,a=n.scrollContainer,i=a===void 0?t.getContainer():a,o=n.scrollThreshold,s=o===void 0?0:o,u=n.scrollThrottleTime,f=u===void 0?0:u,l=n.getScrollPosition,v=l===void 0?yl:l,c=n.scrollOptions;return e.drag(r,M({container:i,threshold:s,throttleTime:f,getScrollPosition:function(p){return v({scrollContainer:p.container,direction:p.direction})}},c)),!0}},drag:function(t,r){return this.checkScroll(t,r)},dragEnd:function(t,r){r.datas.dragScroll.dragEnd(),r.datas.dragScroll=null},dragControlStart:function(t,r){return this.dragStart(t,M(M({},r),{isControl:!0}))},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupStart:function(t,r){return this.dragStart(t,M(M({},r),{targets:t.props.targets}))},dragGroup:function(t,r){return this.drag(t,M(M({},r),{targets:t.props.targets}))},dragGroupEnd:function(t,r){return this.dragEnd(t,M(M({},r),{targets:t.props.targets}))},dragGroupControlStart:function(t,r){return this.dragStart(t,M(M({},r),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,r){return this.drag(t,M(M({},r),{targets:t.props.targets}))},dragGroupControEnd:function(t,r){return this.dragEnd(t,M(M({},r),{targets:t.props.targets}))},unset:function(t){var r,e=t.state;(r=e.dragScroll)===null||r===void 0||r.dragEnd(),e.dragScroll=null}},Ho={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},Cl=Wr("padding",{props:["padding"],render:function(t,r){var e=t.props;if(e.dragArea)return[];var n=Fo(e.padding||{}),a=n.left,i=n.top,o=n.right,s=n.bottom,u=t.getState(),f=u.renderPoses,l=u.pos1,v=u.pos2,c=u.pos3,p=u.pos4,d=[l,v,c,p],g=[];return a>0&&g.push([0,2]),i>0&&g.push([0,1]),o>0&&g.push([1,3]),s>0&&g.push([2,3]),g.map(function(h,m){var x=R(h,2),S=x[0],E=x[1],y=d[S],D=d[E],C=f[S],b=f[E],_=$n([0,0],[100,0],[0,100],[100,100],y,D,C,b);if(_.length)return r.createElement("div",{key:"padding".concat(m),className:K("padding"),style:{transform:qe(_,!0)}})})}}),ei=["nw","ne","se","sw"];function be(t,r){var e=t[0]+t[1],n=e>r?r/e:1;return t[0]*=n,t[1]=r-t[1]*n,t}var _l=[1,2,5,6],Ml=[0,3,4,7],gr=[1,-1,-1,1],hr=[1,1,-1,-1];function ha(t,r,e,n,a,i,o,s){a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=e),s===void 0&&(s=n);var u=[],f=!1,l=t.filter(function(c){return!c.virtual}),v=l.map(function(c){var p=c.horizontal,d=c.vertical,g=c.pos;if(d&&!f&&(f=!0,u.push("/")),f){var h=Math.max(0,d===1?g[1]-i:s-g[1]);return u.push(qt(h,n,r)),h}else{var h=Math.max(0,p===1?g[0]-a:o-g[0]);return u.push(qt(h,e,r)),h}});return{radiusPoses:l,styles:u,raws:v}}function Vo(t){for(var r=[0,0],e=[0,0],n=t.length,a=0;a<n;++a){var i=t[a];i.sub&&(i.horizontal&&(r[1]===0&&(r[0]=a),r[1]=a-r[0]+1,e[0]=a+1),i.vertical&&(e[1]===0&&(e[0]=a),e[1]=a-e[0]+1))}return{horizontalRange:r,verticalRange:e}}function qo(t,r,e,n,a,i,o){var s,u,f,l;i===void 0&&(i=[0,0]),o===void 0&&(o=!1);var v=t.indexOf("/"),c=(v>-1?t.slice(0,v):t).length,p=t.slice(0,c),d=t.slice(c+1),g=p.length,h=d.length,m=h>0,x=R(p,4),S=x[0],E=S===void 0?"0px":S,y=x[1],D=y===void 0?E:y,C=x[2],b=C===void 0?E:C,_=x[3],w=_===void 0?D:_,P=R(d,4),O=P[0],T=O===void 0?E:O,I=P[1],G=I===void 0?m?T:D:I,k=P[2],F=k===void 0?m?T:b:k,A=P[3],L=A===void 0?m?G:w:A,Y=[E,D,b,w].map(function(X){return vt(X,r)}),z=[T,G,F,L].map(function(X){return vt(X,e)}),V=Y.slice(),q=z.slice();s=R(be([V[0],V[1]],r),2),V[0]=s[0],V[1]=s[1],u=R(be([V[3],V[2]],r),2),V[3]=u[0],V[2]=u[1],f=R(be([q[0],q[3]],e),2),q[0]=f[0],q[3]=f[1],l=R(be([q[1],q[2]],e),2),q[1]=l[0],q[2]=l[1];var W=o?V:V.slice(0,Math.max(i[0],g)),j=o?q:q.slice(0,Math.max(i[1],h));return N(N([],R(W.map(function(X,$){var J=ei[$];return{virtual:$>=g,horizontal:gr[$],vertical:0,pos:[n+X,a+(hr[$]===-1?e:0)],sub:!0,raw:Y[$],direction:J}})),!1),R(j.map(function(X,$){var J=ei[$];return{virtual:$>=h,horizontal:0,vertical:hr[$],pos:[n+(gr[$]===-1?r:0),a+X],sub:!0,raw:z[$],direction:J}})),!1)}function wl(t,r,e,n,a){a===void 0&&(a=r.length);var i=Vo(t.slice(n)),o=i.horizontalRange,s=i.verticalRange,u=e-n,f=0;if(u===0)f=a;else if(u>0&&u<o[1])f=o[1]-u;else if(u>=s[0])f=s[0]+s[1]-u;else return;t.splice(e,f),r.splice(e,f)}function Rl(t,r,e,n,a,i,o,s,u,f,l){f===void 0&&(f=0),l===void 0&&(l=0);var v=Vo(t.slice(e)),c=v.horizontalRange,p=v.verticalRange;if(n>-1)for(var d=gr[n]===1?i-f:s-i,g=c[1];g<=n;++g){var h=hr[g]===1?l:u,m=0;if(n===g?m=i:g===0?m=f+d:gr[g]===-1&&(m=s-(r[e][0]-f)),t.splice(e+g,0,{horizontal:gr[g],vertical:0,pos:[m,h]}),r.splice(e+g,0,[m,h]),g===0)break}else if(a>-1){var x=hr[a]===1?o-l:u-o;if(c[1]===0&&p[1]===0){var S=[f+x,l];t.push({horizontal:gr[0],vertical:0,pos:S}),r.push(S)}for(var E=p[0],g=p[1];g<=a;++g){var m=gr[g]===1?f:s,h=0;if(a===g?h=o:g===0?h=l+x:hr[g]===1?h=r[e+E][1]:hr[g]===-1&&(h=u-(r[e+E][1]-l)),t.push({horizontal:0,vertical:hr[g],pos:[m,h]}),r.push([m,h]),g===0)break}}}function Tl(t,r){r===void 0&&(r=t.map(function(a){return a.raw}));var e=t.map(function(a,i){return a.horizontal?r[i]:null}).filter(function(a){return a!=null}),n=t.map(function(a,i){return a.vertical?r[i]:null}).filter(function(a){return a!=null});return{horizontals:e,verticals:n}}var Ol=[[0,-1,"n"],[1,0,"e"]],Pl=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function ma(t,r,e){var n=t.props.clipRelative,a=t.state,i=a.width,o=a.height,s=r,u=s.type,f=s.poses,l=u==="rect",v=u==="circle";if(u==="polygon")return e.map(function(D){return"".concat(qt(D[0],i,n)," ").concat(qt(D[1],o,n))});if(l||u==="inset"){var c=e[1][1],p=e[3][0],d=e[7][0],g=e[5][1];if(l)return[c,p,g,d].map(function(D){return"".concat(D,"px")});var h=[c,i-p,o-g,d].map(function(D,C){return qt(D,C%2?i:o,n)});if(e.length>8){var m=R(Q(e[4],e[0]),2),x=m[0],S=m[1];h.push.apply(h,N(["round"],R(ha(f.slice(8).map(function(D,C){return M(M({},D),{pos:e[C]})}),n,x,S,d,c,p,g).styles),!1))}return h}else if(v||u==="ellipse"){var E=e[0],y=qt(B(e[1][1]-E[1]),v?Math.sqrt((i*i+o*o)/2):o,n),h=v?[y]:[qt(B(e[2][0]-E[0]),i,n),y];return h.push("at",qt(E[0],i,n),qt(E[1],o,n)),h}}function ke(t,r,e,n){var a=[n,(n+r)/2,r],i=[t,(t+e)/2,e];return Pl.map(function(o){var s=R(o,3),u=s[0],f=s[1],l=s[2],v=a[u+1],c=i[f+1];return{vertical:B(f),horizontal:B(u),direction:l,pos:[v,c]}})}function jo(t){var r=[1/0,-1/0],e=[1/0,-1/0];return t.forEach(function(n){var a=n.pos;r[0]=Math.min(r[0],a[0]),r[1]=Math.max(r[1],a[0]),e[0]=Math.min(e[0],a[1]),e[1]=Math.max(e[1],a[1])}),[B(r[1]-r[0]),B(e[1]-e[0])]}function ni(t,r,e,n,a){var i,o,s,u,f,l,v,c,p;if(t){var d=a;if(!d){var g=Nt(t),h=g("clipPath");d=h!=="none"?h:g("clip")}if(!((!d||d==="none"||d==="auto")&&(d=n,!d))){var m=yi(d),x=m.prefix,S=x===void 0?d:x,E=m.value,y=E===void 0?"":E,D=S==="circle",C=" ";if(S==="polygon"){var b=mr(y||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var _=b.map(function(_t){var It=R(_t.split(" "),2),Rt=It[0],St=It[1];return{vertical:1,horizontal:1,pos:[vt(Rt,r),vt(St,e)]}}),w=yr(_.map(function(_t){return _t.pos}));return{type:S,clipText:d,poses:_,splitter:C,left:w.minX,right:w.maxX,top:w.minY,bottom:w.maxY}}else if(D||S==="ellipse"){var P="",O="",T=0,I=0,b=fr(y);if(D){var G="";i=R(b,4),o=i[0],G=o===void 0?"50%":o,s=i[2],P=s===void 0?"50%":s,u=i[3],O=u===void 0?"50%":u,T=vt(G,Math.sqrt((r*r+e*e)/2)),I=T}else{var k="",F="";f=R(b,5),l=f[0],k=l===void 0?"50%":l,v=f[1],F=v===void 0?"50%":v,c=f[3],P=c===void 0?"50%":c,p=f[4],O=p===void 0?"50%":p,T=vt(k,r),I=vt(F,e)}var A=[vt(P,r),vt(O,e)],_=N([{vertical:1,horizontal:1,pos:A,direction:"nesw"}],R(Ol.slice(0,D?1:2).map(function(Rt){return{vertical:B(Rt[1]),horizontal:Rt[0],direction:Rt[2],sub:!0,pos:[A[0]+Rt[0]*T,A[1]+Rt[1]*I]}})),!1);return{type:S,clipText:d,radiusX:T,radiusY:I,left:A[0]-T,top:A[1]-I,right:A[0]+T,bottom:A[1]+I,poses:_,splitter:C}}else if(S==="inset"){var b=fr(y||"0 0 0 0"),L=b.indexOf("round"),Y=(L>-1?b.slice(0,L):b).length,z=b.slice(Y+1),V=R(b.slice(0,Y),4),q=V[0],W=V[1],j=W===void 0?q:W,X=V[2],$=X===void 0?q:X,J=V[3],at=J===void 0?j:J,st=R([q,$].map(function(Rt){return vt(Rt,e)}),2),H=st[0],Z=st[1],ft=R([at,j].map(function(Rt){return vt(Rt,r)}),2),rt=ft[0],et=ft[1],ot=r-et,ct=e-Z,dt=qo(z,ot-rt,ct-H,rt,H),_=N(N([],R(ke(H,ot,ct,rt)),!1),R(dt),!1);return{type:"inset",clipText:d,poses:_,top:H,left:rt,right:ot,bottom:ct,radius:z,splitter:C}}else if(S==="rect"){var b=mr(y||"0px, ".concat(r,"px, ").concat(e,"px, 0px"));C=",";var it=R(b.map(function(nr){var ar=ie(nr).value;return ar}),4),lt=it[0],et=it[1],Z=it[2],rt=it[3],_=ke(lt,et,Z,rt);return{type:"rect",clipText:d,poses:_,top:lt,right:et,bottom:Z,left:rt,values:b,splitter:C}}}}}function Il(t,r,e,n,a){var i=t[r],o=i.direction,s=i.sub,u=t.map(function(){return[0,0]}),f=o?o.split(""):[];if(n&&r<8){var l=f.filter(function(T){return T==="w"||T==="e"}),v=f.filter(function(T){return T==="n"||T==="s"}),c=l[0],p=v[0];u[r]=e;var d=R(jo(t),2),g=d[0],h=d[1],m=g&&h?g/h:0;if(m&&a){var x=(r+4)%8,S=t[x].pos,E=[0,0];o.indexOf("w")>-1?E[0]=-1:o.indexOf("e")>-1&&(E[0]=1),o.indexOf("n")>-1?E[1]=-1:o.indexOf("s")>-1&&(E[1]=1);var y=Bo([g,h],e,m,E,!0),D=g+y[0],C=h+y[1],b=S[1],_=S[1],w=S[0],P=S[0];E[0]===-1?w=P-D:E[0]===1?P=w+D:(w=w-D/2,P=P+D/2),E[1]===-1?b=_-C:(E[1]===1||(b=_-C/2),_=b+C);var O=ke(b,P,_,w);t.forEach(function(T,I){u[I][0]=O[I].pos[0]-T.pos[0],u[I][1]=O[I].pos[1]-T.pos[1]})}else t.forEach(function(T,I){var G=T.direction;G&&(G.indexOf(c)>-1&&(u[I][0]=e[0]),G.indexOf(p)>-1&&(u[I][1]=e[1]))}),c&&(u[1][0]=e[0]/2,u[5][0]=e[0]/2),p&&(u[3][1]=e[1]/2,u[7][1]=e[1]/2)}else o&&!s?f.forEach(function(T){var I=T==="n"||T==="s";t.forEach(function(G,k){var F=G.direction,A=G.horizontal,L=G.vertical;!F||F.indexOf(T)===-1||(u[k]=[I||!A?0:e[0],!I||!L?0:e[1]])})}):u[r]=e;return u}function Gl(t,r){var e=R(Vi(t,r),2),n=e[0],a=e[1],i=r.datas,o=i.clipPath,s=i.clipIndex,u=o,f=u.type,l=u.poses,v=u.splitter,c=l.map(function(x){return x.pos});if(f==="polygon")c.splice(s,0,[n,a]);else if(f==="inset"){var p=_l.indexOf(s),d=Ml.indexOf(s),g=l.length;if(Rl(l,c,8,p,d,n,a,c[4][0],c[4][1],c[0][0],c[0][1]),g===l.length)return}else return;var h=ma(t,o,c),m="".concat(f,"(").concat(h.join(v),")");U(t,"onClip",nt(t,r,M({clipEventType:"added",clipType:f,poses:c,clipStyles:h,clipStyle:m,distX:0,distY:0},At({clipPath:m},r))))}function zl(t,r){var e=r.datas,n=e.clipPath,a=e.clipIndex,i=n,o=i.type,s=i.poses,u=i.splitter,f=s.map(function(p){return p.pos}),l=f.length;if(o==="polygon")s.splice(a,1),f.splice(a,1);else if(o==="inset"){if(a<8||(wl(s,f,a,8,l),l===s.length))return}else return;var v=ma(t,n,f),c="".concat(o,"(").concat(v.join(u),")");U(t,"onClip",nt(t,r,M({clipEventType:"removed",clipType:o,poses:f,clipStyles:v,clipStyle:c,distX:0,distY:0},At({clipPath:c},r))))}var Uo={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,r){var e=t.props,n=e.customClipPath,a=e.defaultClipPath,i=e.clipArea,o=e.zoom,s=e.groupable,u=t.getState(),f=u.target,l=u.width,v=u.height,c=u.allMatrix,p=u.is3d,d=u.left,g=u.top,h=u.pos1,m=u.pos2,x=u.pos3,S=u.pos4,E=u.clipPathState,y=u.snapBoundInfos,D=u.rotation;if(!f||s)return[];var C=ni(f,l,v,a||"inset",E||n);if(!C)return[];var b=p?4:3,_=C.type,w=C.poses,P=w.map(function(et){var ot=mt(c,et.pos,b);return[ot[0]-d,ot[1]-g]}),O=[],T=[],I=_==="rect",G=_==="inset",k=_==="polygon";if(I||G||k){var F=G?P.slice(0,8):P;T=F.map(function(et,ot){var ct=ot===0?F[F.length-1]:F[ot-1],dt=xt(ct,et),it=Mo(ct,et);return r.createElement("div",{key:"clipLine".concat(ot),className:K("line","clip-line","snap-control"),"data-clip-index":ot,style:{width:"".concat(it,"px"),transform:"translate(".concat(ct[0],"px, ").concat(ct[1],"px) rotate(").concat(dt,"rad) scaleY(").concat(o,")")}})})}if(O=P.map(function(et,ot){return r.createElement("div",{key:"clipControl".concat(ot),className:K("control","clip-control","snap-control"),"data-clip-index":ot,style:{transform:"translate(".concat(et[0],"px, ").concat(et[1],"px) rotate(").concat(D,"rad) scale(").concat(o,")")}})}),G&&O.push.apply(O,N([],R(P.slice(8).map(function(et,ot){return r.createElement("div",{key:"clipRadiusControl".concat(ot),className:K("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+ot,style:{transform:"translate(".concat(et[0],"px, ").concat(et[1],"px) rotate(").concat(D,"rad) scale(").concat(o,")")}})})),!1)),_==="circle"||_==="ellipse"){var A=C.left,L=C.top,Y=C.radiusX,z=C.radiusY,V=R(Q(mt(c,[A,L],b),mt(c,[0,0],b)),2),q=V[0],W=V[1],j="none";if(!i){for(var X=Math.max(10,Y/5,z/5),$=[],J=0;J<=X;++J){var at=Math.PI*2/X*J;$.push([Y+(Y-o)*Math.cos(at),z+(z-o)*Math.sin(at)])}$.push([Y,-2]),$.push([-2,-2]),$.push([-2,z*2+2]),$.push([Y*2+2,z*2+2]),$.push([Y*2+2,-2]),$.push([Y,-2]),j="polygon(".concat($.map(function(et){return"".concat(et[0],"px ").concat(et[1],"px")}).join(", "),")")}O.push(r.createElement("div",{key:"clipEllipse",className:K("clip-ellipse","snap-control"),style:{width:"".concat(Y*2,"px"),height:"".concat(z*2,"px"),clipPath:j,transform:"translate(".concat(-d+q,"px, ").concat(-g+W,"px) ").concat(qe(c))}}))}if(i){var st=Xt(N([h,m,x,S],R(P),!1)),H=st.width,Z=st.height,ft=st.left,rt=st.top;if(k||I||G){var $=G?P.slice(0,8):P;O.push(r.createElement("div",{key:"clipArea",className:K("clip-area","snap-control"),style:{width:"".concat(H,"px"),height:"".concat(Z,"px"),transform:"translate(".concat(ft,"px, ").concat(rt,"px)"),clipPath:"polygon(".concat($.map(function(ot){return"".concat(ot[0]-ft,"px ").concat(ot[1]-rt,"px")}).join(", "),")")}}))}}return y&&["vertical","horizontal"].forEach(function(et){var ot=y[et],ct=et==="horizontal";ot.isSnap&&T.push.apply(T,N([],R(ot.snap.posInfos.map(function(dt,it){var lt=dt.pos,_t=Q(mt(c,ct?[0,lt]:[lt,0],b),[d,g]),It=Q(mt(c,ct?[l,lt]:[lt,v],b),[d,g]);return ne(r,"",_t,It,o,"clip".concat(et,"snap").concat(it),"guideline")})),!1)),ot.isBound&&T.push.apply(T,N([],R(ot.bounds.map(function(dt,it){var lt=dt.pos,_t=Q(mt(c,ct?[0,lt]:[lt,0],b),[d,g]),It=Q(mt(c,ct?[l,lt]:[lt,v],b),[d,g]);return ne(r,"",_t,It,o,"clip".concat(et,"bounds").concat(it),"guideline","bounds","bold")})),!1))}),N(N([],R(O),!1),R(T),!1)},dragControlCondition:function(t,r){return r.inputEvent&&(r.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,r){var e=t.props,n=e.dragWithClip,a=n===void 0?!0:n;return a?!1:this.dragControlStart(t,r)},drag:function(t,r){return this.dragControl(t,M(M({},r),{isDragTarget:!0}))},dragEnd:function(t,r){return this.dragControlEnd(t,r)},dragControlStart:function(t,r){var e=t.state,n=t.props,a=n.defaultClipPath,i=n.customClipPath,o=e.target,s=e.width,u=e.height,f=r.inputEvent?r.inputEvent.target:null,l=f&&f.getAttribute("class")||"",v=r.datas,c=ni(o,s,u,a||"inset",i);if(!c)return!1;var p=c.clipText,d=c.type,g=c.poses,h=U(t,"onClipStart",nt(t,r,{clipType:d,clipStyle:p,poses:g.map(function(m){return m.pos})}));return h===!1?(v.isClipStart=!1,!1):(v.isControl=l&&l.indexOf("clip-control")>-1,v.isLine=l.indexOf("clip-line")>-1,v.isArea=l.indexOf("clip-area")>-1||l.indexOf("clip-ellipse")>-1,v.clipIndex=f?parseInt(f.getAttribute("data-clip-index"),10):-1,v.clipPath=c,v.isClipStart=!0,e.clipPathState=p,Cr(t,r),!0)},dragControl:function(t,r){var e,n,a,i=r.datas,o=r.originalDatas,s=r.isDragTarget;if(!i.isClipStart)return!1;var u=i,f=u.isControl,l=u.isLine,v=u.isArea,c=u.clipIndex,p=u.clipPath;if(!p)return!1;var d=br(t.props,"clippable"),g=d.keepRatio,h=0,m=0,x=o.draggable,S=Jt(r);s&&x?(e=R(x.prevBeforeDist,2),h=e[0],m=e[1]):(n=R(S,2),h=n[0],m=n[1]);var E=[h,m],y=t.state,D=y.width,C=y.height,b=!v&&!f&&!l,_=p.type,w=p.poses,P=p.splitter,O=w.map(function(gt){return gt.pos});b&&(h=-h,m=-m);var T=!f||w[c].direction==="nesw",I=_==="inset"||_==="rect",G=w.map(function(){return[0,0]});if(f&&!T){var k=w[c],F=k.horizontal,A=k.vertical,L=[h*B(F),m*B(A)];G=Il(w,c,L,I,g)}else T&&(G=O.map(function(){return[h,m]}));var Y=O.map(function(gt,Gt){return ut(gt,G[Gt])}),z=N([],R(Y),!1);y.snapBoundInfos=null;var V=p.type==="circle",q=p.type==="ellipse";if(V||q){var W=Xt(Y),j=B(W.bottom-W.top),X=B(q?W.right-W.left:j),$=Y[0][1]+j,J=Y[0][0]-X,at=Y[0][0]+X;V&&(z.push([at,W.bottom]),G.push([1,0])),z.push([W.left,$]),G.push([0,1]),z.push([J,W.bottom]),G.push([1,0])}var st=So((d.clipHorizontalGuidelines||[]).map(function(gt){return vt("".concat(gt),C)}),(d.clipVerticalGuidelines||[]).map(function(gt){return vt("".concat(gt),D)}),D,C),H=[],Z=[];if(V||q)H=[z[4][0],z[2][0]],Z=[z[1][1],z[3][1]];else if(I){var ft=[z[0],z[2],z[4],z[6]],rt=[G[0],G[2],G[4],G[6]];H=ft.filter(function(gt,Gt){return rt[Gt][0]}).map(function(gt){return gt[0]}),Z=ft.filter(function(gt,Gt){return rt[Gt][1]}).map(function(gt){return gt[1]})}else H=z.filter(function(gt,Gt){return G[Gt][0]}).map(function(gt){return gt[0]}),Z=z.filter(function(gt,Gt){return G[Gt][1]}).map(function(gt){return gt[1]});var et=[0,0],ot=Ya(st,d.clipTargetBounds&&{left:0,top:0,right:D,bottom:C},H,Z,5,5),ct=ot.horizontal,dt=ot.vertical,it=ct.offset,lt=dt.offset;if(ct.isBound&&(et[1]+=it),dt.isBound&&(et[0]+=lt),(q||V)&&G[0][0]===0&&G[0][1]===0){var W=Xt(Y),_t=W.bottom-W.top,It=q?W.right-W.left:_t,Rt=dt.isBound?B(lt):dt.snapIndex===0?-lt:lt,St=ct.isBound?B(it):ct.snapIndex===0?-it:it;It-=Rt,_t-=St,V&&(_t=fo(dt,ct)>0?_t:It,It=_t);var yt=z[0];z[1][1]=yt[1]-_t,z[2][0]=yt[0]+It,z[3][1]=yt[1]+_t,z[4][0]=yt[0]-It}else if(I&&g&&f){var nr=R(jo(w),2),ar=nr[0],Da=nr[1],ya=ar&&Da?ar/Da:0,us=w[c],le=us.direction||"",$e=z[1][1],$=z[5][1],J=z[7][0],at=z[3][0];B(it)<=B(lt)?it=zt(it)*B(lt)/ya:lt=zt(lt)*B(it)*ya,le.indexOf("w")>-1?J-=lt:le.indexOf("e")>-1?at-=lt:(J+=lt/2,at-=lt/2),le.indexOf("n")>-1?$e-=it:le.indexOf("s")>-1?$-=it:($e+=it/2,$-=it/2);var fs=ke($e,at,$,J);z.forEach(function(_a,ps){var Je;Je=R(fs[ps].pos,2),_a[0]=Je[0],_a[1]=Je[1]})}else z.forEach(function(gt,Gt){var Ca=G[Gt];Ca[0]&&(gt[0]-=lt),Ca[1]&&(gt[1]-=it)});var ba=ma(t,p,Y),Ze="".concat(_,"(").concat(ba.join(P),")");if(y.clipPathState=Ze,V||q)H=[z[4][0],z[2][0]],Z=[z[1][1],z[3][1]];else if(I){var ft=[z[0],z[2],z[4],z[6]];H=ft.map(function(Gt){return Gt[0]}),Z=ft.map(function(Gt){return Gt[1]})}else H=z.map(function(gt){return gt[0]}),Z=z.map(function(gt){return gt[1]});if(y.snapBoundInfos=Ya(st,d.clipTargetBounds&&{left:0,top:0,right:D,bottom:C},H,Z,1,1),x){var ls=y.is3d,cs=y.allMatrix,vs=ls?4:3,Ke=et;s&&(Ke=[E[0]+et[0]-S[0],E[1]+et[1]-S[1]]),x.deltaOffset=pt(cs,[Ke[0],Ke[1],0,0],vs)}return U(t,"onClip",nt(t,r,M({clipEventType:"changed",clipType:_,poses:Y,clipStyle:Ze,clipStyles:ba,distX:h,distY:m},At((a={},a[_==="rect"?"clip":"clipPath"]=Ze,a),r)))),!0},dragControlEnd:function(t,r){this.unset(t);var e=r.isDrag,n=r.datas,a=r.isDouble,i=n.isLine,o=n.isClipStart,s=n.isControl;return o?(U(t,"onClipEnd",Yt(t,r,{})),a&&(s?zl(t,r):i&&Gl(t,r)),a||e):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Bl={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,r){return r.isRequest?r.requestAble==="originDraggable":bt(r.inputEvent.target,K("origin"))},dragControlStart:function(t,r){var e=r.datas;Cr(t,r);var n=nt(t,r,{dragStart:Ot.dragStart(t,new Br().dragStart([0,0],r))}),a=U(t,"onDragOriginStart",n);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],e.isDragOrigin=!0,a===!1?(e.isDragOrigin=!1,!1):n},dragControl:function(t,r){var e=r.datas,n=r.isPinch,a=r.isRequest;if(!e.isDragOrigin)return!1;var i=R(Jt(r),2),o=i[0],s=i[1],u=t.state,f=u.width,l=u.height,v=u.offsetMatrix,c=u.targetMatrix,p=u.is3d,d=t.props.originRelative,g=d===void 0?!0:d,h=p?4:3,m=[o,s];if(a){var x=r.distOrigin;(x[0]||x[1])&&(m=x)}var S=ut(e.startOrigin,m),E=ut(e.startTargetOrigin,m),y=Q(m,e.prevOrigin),D=fe(v,c,S,h),C=t.getRect(),b=Xt(_r(D,f,l,h)),_=[C.left-b.left,C.top-b.top];e.prevOrigin=m;var w=[qt(E[0],f,g),qt(E[1],l,g)].join(" "),P=Ot.drag(t,ue(r,t.state,_,!!n)),O=nt(t,r,M(M({width:f,height:l,origin:S,dist:m,delta:y,transformOrigin:w,drag:P},At({transformOrigin:w,transform:P.transform},r)),{afterTransform:P.transform}));return U(t,"onDragOrigin",O),O},dragControlEnd:function(t,r){var e=r.datas;return e.isDragOrigin?(U(t,"onDragOriginEnd",Yt(t,r,{})),!0):!1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);return!!e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);return e?(t.transformOrigin=e.transformOrigin,!0):!1},request:function(t){var r={},e=t.getRect(),n=0,a=0,i=e.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:r}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-i[0],o[1]=s.origin[1]-i[1]):("x"in s?n=s.x-e.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?a=s.y-e.top:"deltaY"in s&&(a+=s.deltaY)),{datas:r,distX:n,distY:a,distOrigin:o}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function Al(t,r,e,n){var a=t.filter(function(u){var f=u.virtual,l=u.horizontal;return l&&!f}).length,i=t.filter(function(u){var f=u.virtual,l=u.vertical;return l&&!f}).length,o=-1;if(r===0&&(a===0?o=0:a===1&&(o=1)),r===2&&(a<=2?o=2:a<=3&&(o=3)),r===3&&(i===0?o=4:i<4&&(o=7)),r===1&&(i<=1?o=5:i<=2&&(o=6)),!(o===-1||!t[o].virtual)){var s=t[o];kl(t,o),o<4?s.pos[0]=e:s.pos[1]=n}}function kl(t,r){r<4?t.slice(0,r+1).forEach(function(e){e.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,r+1).forEach(function(e){e.virtual=!1}))}function Fl(t,r){r<4?t.slice(r,4).forEach(function(e){e.virtual=!0}):t.slice(r).forEach(function(e){e.virtual=!0})}function ai(t,r,e,n,a){n===void 0&&(n=[0,0]);var i=[];return!t||t==="0px"?i=[]:i=fr(t),qo(i,r,e,0,0,n,a)}function ii(t,r,e,n,a){var i=t.state,o=i.width,s=i.height,u=ha(a,t.props.roundRelative,o,s),f=u.raws,l=u.styles,v=u.radiusPoses,c=Tl(v,f),p=c.horizontals,d=c.verticals,g=l.join(" ");i.borderRadiusState=g;var h=nt(t,r,M({horizontals:p,verticals:d,borderRadius:g,width:o,height:s,delta:n,dist:e},At({borderRadius:g},r)));return U(t,"onRound",h),h}function oi(t){var r,e,n=t.getState().style,a=n.borderRadius||"";if(!a&&t.props.groupable){var i=t.moveables[0],o=t.getTargets()[0];o&&(i?.props.target===o?(a=(e=(r=t.moveables[0])===null||r===void 0?void 0:r.state.style.borderRadius)!==null&&e!==void 0?e:"",n.borderRadius=a):(a=ca(o).borderRadius,n.borderRadius=a))}return a}var $o={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var r=t.props.roundClickable;return r===!0||r==="line"?K("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,r){var e=t.getState(),n=e.target,a=e.width,i=e.height,o=e.allMatrix,s=e.is3d,u=e.left,f=e.top,l=e.borderRadiusState,v=t.props,c=v.minRoundControls,p=c===void 0?[0,0]:c,d=v.maxRoundControls,g=d===void 0?[4,4]:d,h=v.zoom,m=v.roundPadding,x=m===void 0?0:m,S=v.isDisplayShadowRoundControls,E=v.groupable;if(!n)return null;var y=l||oi(t),D=s?4:3,C=ai(y,a,i,p,!0);if(!C)return null;var b=0,_=0,w=E?[0,0]:[u,f];return C.map(function(P,O){var T=P.horizontal,I=P.vertical,G=P.direction||"",k=N([],R(P.pos),!1);_+=Math.abs(T),b+=Math.abs(I),T&&G.indexOf("n")>-1&&(k[1]-=x),I&&G.indexOf("w")>-1&&(k[0]-=x),T&&G.indexOf("s")>-1&&(k[1]+=x),I&&G.indexOf("e")>-1&&(k[0]+=x);var F=Q(mt(o,k,D),w),A=S&&S!=="horizontal",L=P.vertical?b<=g[1]&&(A||!P.virtual):_<=g[0]&&(S||!P.virtual);return r.createElement("div",{key:"borderRadiusControl".concat(O),className:K("control","border-radius",P.vertical?"vertical":"",P.virtual?"virtual":""),"data-radius-index":O,style:{display:L?"block":"none",transform:"translate(".concat(F[0],"px, ").concat(F[1],"px) scale(").concat(h,")")}})})},dragControlCondition:function(t,r){if(!r.inputEvent||r.isRequest)return!1;var e=r.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragControlStart:function(t,r){var e=r.inputEvent,n=r.datas,a=e.target,i=a.getAttribute("class")||"",o=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,u=o?parseInt(a.getAttribute("data-radius-index"),10):-1,f=-1;if(s){var l=a.getAttribute("data-line-key")||"";l&&(f=parseInt(l.replace(/render-line-/g,""),10),isNaN(f)&&(f=-1))}if(!o&&!s)return!1;var v=nt(t,r,{}),c=U(t,"onRoundStart",v);if(c===!1)return!1;n.lineIndex=f,n.controlIndex=u,n.isControl=o,n.isLine=s,Cr(t,r);var p=t.props,d=p.roundRelative,g=p.minRoundControls,h=g===void 0?[0,0]:g,m=t.state,x=m.width,S=m.height;n.isRound=!0,n.prevDist=[0,0];var E=oi(t),y=ai(E||"",x,S,h,!0)||[];return n.controlPoses=y,m.borderRadiusState=ha(y,d,x,S).styles.join(" "),v},dragControl:function(t,r){var e=r.datas,n=e.controlPoses;if(!e.isRound||!e.isControl||!n.length)return!1;var a=e.controlIndex,i=R(Jt(r),2),o=i[0],s=i[1],u=[o,s],f=Q(u,e.prevDist),l=t.props.maxRoundControls,v=l===void 0?[4,4]:l,c=t.state,p=c.width,d=c.height,g=n[a],h=g.vertical,m=g.horizontal,x=n.map(function(E){var y=E.horizontal,D=E.vertical,C=[y*m*u[0],D*h*u[1]];if(y){if(v[0]===1)return C;if(v[0]<4&&y!==m)return C}else{if(v[1]===0)return C[1]=D*m*u[0]/p*d,C;if(h){if(v[1]===1)return C;if(v[1]<4&&D!==h)return C}}return[0,0]});x[a]=u;var S=n.map(function(E,y){return M(M({},E),{pos:ut(E.pos,x[y])})});return a<4?S.slice(0,a+1).forEach(function(E){E.virtual=!1}):S.slice(4,a+1).forEach(function(E){E.virtual=!1}),e.prevDist=[o,s],ii(t,r,u,f,S)},dragControlEnd:function(t,r){var e=t.state;e.borderRadiusState="";var n=r.datas,a=r.isDouble;if(!n.isRound)return!1;var i=n.isControl,o=n.controlIndex,s=n.isLine,u=n.lineIndex,f=n.controlPoses,l=f.filter(function(m){var x=m.virtual;return x}).length,v=t.props.roundClickable,c=v===void 0?!0:v;if(a&&c){if(i&&(c===!0||c==="control"))Fl(f,o);else if(s&&(c===!0||c==="line")){var p=R(Vi(t,r),2),d=p[0],g=p[1];Al(f,u,d,g)}l!==f.filter(function(m){var x=m.virtual;return x}).length&&ii(t,r,[0,0],[0,0],f)}var h=Yt(t,r,{});return U(t,"onRoundEnd",h),e.borderRadiusState="",h},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);if(!e)return!1;var n=t.moveables,a=t.props.targets,i=jt(t,"roundable",r),o=M({targets:t.props.targets,events:i.map(function(s,u){return M(M({},s),{target:a[u],moveable:n[u],currentTarget:n[u]})})},e);return U(t,"onRoundGroupStart",o),e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);if(!e)return!1;var n=t.moveables,a=t.props.targets,i=jt(t,"roundable",r),o=M({targets:t.props.targets,events:i.map(function(s,u){return M(M(M({},s),{target:a[u],moveable:n[u],currentTarget:n[u]}),At({borderRadius:e.borderRadius},s))})},e);return U(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,r){var e=t.moveables,n=t.props.targets,a=jt(t,"roundable",r);je(t,"onRound",function(s){var u=M({targets:t.props.targets,events:a.map(function(f,l){return M(M(M({},f),{target:n[l],moveable:e[l],currentTarget:e[l]}),At({borderRadius:s.borderRadius},f))})},s);U(t,"onRoundGroup",u)});var i=this.dragControlEnd(t,r);if(!i)return!1;var o=M({targets:t.props.targets,events:a.map(function(s,u){var f;return M(M({},s),{target:n[u],moveable:e[u],currentTarget:e[u],lastEvent:(f=s.datas)===null||f===void 0?void 0:f.lastEvent})})},i);return U(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function Nl(t,r){var e=r?4:3,n=ht(e),a="matrix".concat(r?"3d":"","(").concat(n.join(","),")");return t===a||t==="matrix(1,0,0,1,0,0)"}var Zo={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,r){var e=t.state,n=e.is3d,a=e.targetMatrix,i=e.inlineTransform,o=n?"matrix3d(".concat(a.join(","),")"):"matrix(".concat(Pi(a,!0),")"),s=!i||i==="none"?o:i;r.datas.startTransforms=Nl(s,n)?[]:fr(s)},resetStyle:function(t){var r=t.datas;r.nextStyle={},r.nextTransforms=t.datas.startTransforms,r.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,r){return nt(t,r,{setTransform:function(e){r.datas.startTransforms=Mt(e)?e:fr(e)},isPinch:!!r.isPinch})},fillDragParams:function(t,r){return nt(t,r,{isPinch:!!r.isPinch})},dragStart:function(t,r){this.setTransform(t,r),this.resetStyle(r),U(t,"onBeforeRenderStart",this.fillDragStartParams(t,r))},drag:function(t,r){r.datas.startTransforms||this.setTransform(t,r),this.resetStyle(r),U(t,"onBeforeRender",nt(t,r,{isPinch:!!r.isPinch}))},dragEnd:function(t,r){r.datas.startTransforms||(this.setTransform(t,r),this.resetStyle(r)),U(t,"onBeforeRenderEnd",nt(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag}))},dragGroupStart:function(t,r){var e=this;this.dragStart(t,r);var n=jt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.setTransform(u,o),e.resetStyle(o),e.fillDragStartParams(u,o)});U(t,"onBeforeRenderGroupStart",nt(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,r){var e=this;this.drag(t,r);var n=jt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.resetStyle(o),e.fillDragParams(u,o)});U(t,"onBeforeRenderGroup",nt(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,r){this.dragEnd(t,r),U(t,"onBeforeRenderGroupEnd",nt(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets}))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)}},Ko={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,r){U(t,"onRenderStart",nt(t,r,{isPinch:!!r.isPinch}))},drag:function(t,r){U(t,"onRender",this.fillDragParams(t,r))},dragAfter:function(t,r){return this.drag(t,r)},dragEnd:function(t,r){U(t,"onRenderEnd",this.fillDragEndParams(t,r))},dragGroupStart:function(t,r){U(t,"onRenderGroupStart",nt(t,r,{isPinch:!!r.isPinch,targets:t.props.targets}))},dragGroup:function(t,r){var e=this,n=jt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.fillDragParams(u,o)});U(t,"onRenderGroup",nt(t,r,M(M({isPinch:!!r.isPinch,targets:t.props.targets,transform:me(r),transformObject:{}},At(xe(r))),{events:i})))},dragGroupEnd:function(t,r){var e=this,n=jt(t,"beforeRenderable",r),a=t.moveables,i=n.map(function(o,s){var u=a[s];return e.fillDragEndParams(u,o)});U(t,"onRenderGroupEnd",nt(t,r,M({isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets,events:i,transformObject:{},transform:me(r)},At(xe(r)))))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlAfter:function(t,r){return this.dragAfter(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)},fillDragParams:function(t,r){var e={};return zr(Te(r)||[]).forEach(function(n){e[n.name]=n.functionValue}),nt(t,r,M({isPinch:!!r.isPinch,transformObject:e,transform:me(r)},At(xe(r))))},fillDragEndParams:function(t,r){var e={};return zr(Te(r)||[]).forEach(function(n){e[n.name]=n.functionValue}),nt(t,r,M({isPinch:!!r.isPinch,isDrag:r.isDrag,transformObject:e,transform:me(r)},At(xe(r))))}};function te(t,r,e,n,a,i,o){i.clientDistX=i.distX,i.clientDistY=i.distY;var s=a==="Start",u=a==="End",f=a==="After",l=t.state.target,v=i.isRequest,c=n.indexOf("Control")>-1;if(!l||s&&c&&!v&&t.areaElement===i.inputEvent.target)return!1;var p=N([],R(r),!1);if(v){var d=i.requestAble;p.some(function(O){return O.name===d})||p.push.apply(p,N([],R(t.props.ables.filter(function(O){return O.name===d})),!1))}if(!p.length||p.every(function(O){return O.dragRelation}))return!1;var g=i.inputEvent,h;u&&g&&(h=document.elementFromPoint(i.clientX,i.clientY)||g.target);var m=!1,x=function(){var O;m=!0,(O=i.stop)===null||O===void 0||O.call(i)},S=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());S&&t.updateRect(a,!0,!1);var E=i.datas,y=c?"controlGesto":"targetGesto",D=t[y],C=function(O,T,I){if(!(T in O)||D!==t[y])return!1;var G=O.name,k=E[G]||(E[G]={});if(s&&(k.isEventStart=!I||!O[I]||O[I](t,i)),!k.isEventStart)return!1;var F=O[T](t,M(M({},i),{stop:x,datas:k,originalDatas:E,inputTarget:h}));return t._emitter.off(),s&&F===!1&&(k.isEventStart=!1),F};S&&p.forEach(function(O){O.unset&&O.unset(t)}),C(Zo,"drag".concat(n).concat(a));var b=0,_=0;e.forEach(function(O){if(m)return!1;var T="".concat(O).concat(n).concat(a),I="".concat(O).concat(n,"Condition");a===""&&!v&&pl(t.state,i);var G=p.filter(function(A){return A[T]});G=G.filter(function(A,L){return A.name&&G.indexOf(A)===L});var k=G.filter(function(A){return C(A,T,I)}),F=k.length;m&&++b,F&&++_,!m&&s&&G.length&&!F&&(b+=G.filter(function(A){var L=A.name,Y=E[L];return Y.isEventStart?A.dragRelation!=="strong":!1}).length?1:0)}),(!f||_)&&C(Ko,"drag".concat(n).concat(a));var w=D!==t[y]||b===e.length;if((u||m||w)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(O){O.state.gestos={}}),p.forEach(function(O){O.unset&&O.unset(t)})),s&&!w&&!v&&_&&t.props.preventDefault&&i?.preventDefault(),t.isUnmounted||w)return!1;if(!s&&_&&!o||u){var P=t.props.flushSync||bo;P(function(){t.updateRect(u?a:"",!0,!1),t.forceUpdate()})}return!s&&!u&&!f&&_&&!o&&te(t,r,e,n,a+"After",i),!0}function xa(t,r){return function(e,n){var a;n===void 0&&(n=e.inputEvent.target);var i=n,o=t.areaElement,s=t._dragTarget;return!s||!r&&(!((a=t.controlGesto)===null||a===void 0)&&a.isFlag())?!1:i===s||s.contains(i)||i===o||!t.isMoveableElement(i)&&!t.controlBox.contains(i)||bt(i,"moveable-area")||bt(i,"moveable-padding")||bt(i,"moveable-edgeDraggable")}}function Jo(t,r,e){var n=t.controlBox,a=[],i=t.props,o=i.dragArea,s=t.state.target,u=i.dragTarget;a.push(n),(!o||u)&&a.push(r),!o&&u&&s&&r!==s&&i.dragTargetSelf&&a.push(s);var f=xa(t);return ts(t,a,"targetAbles",e,{dragStart:f,pinchStart:f})}function Qo(t,r){var e=t.controlBox,n=[];n.push(e);var a=xa(t,!0),i=function(o,s){if(s===void 0&&(s=o.inputEvent.target),s===e)return!0;var u=a(o,s);return!u};return ts(t,n,"controlAbles",r,{dragStart:i,pinchStart:i})}function ts(t,r,e,n,a){a===void 0&&(a={});var i=e==="targetAbles",o=t.props,s=o.pinchOutside,u=o.pinchThreshold,f=o.preventClickEventOnDrag,l=o.preventClickDefault,v=o.checkInput,c=o.dragFocusedInput,p=o.preventDefault,d=p===void 0?!0:p,g=o.preventRightClick,h=g===void 0?!0:g,m=o.preventWheelClick,x=m===void 0?!0:m,S=o.dragContainer,E=Kt(S,!0),y={preventDefault:d,preventRightClick:h,preventWheelClick:x,container:E||ur(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:i?f:!1,preventClickEventOnDragStart:i?l:!1,preventClickEventByCondition:i?null:function(b){return t.controlBox.contains(b.target)},checkInput:i?v:!1,dragFocusedInput:c},D=new xu(r,y),C=n==="Control";return["drag","pinch"].forEach(function(b){["Start","","End"].forEach(function(_){D.on("".concat(b).concat(_),function(w){var P,O=w.eventType,T=b==="drag"&&w.isPinch;if(a[O]&&!a[O](w)){w.stop();return}if(!T){var I=b==="drag"?[b]:["drag",b],G=N([],R(t[e]),!1),k=te(t,G,I,n,_,w);k?(t.props.stopPropagation||_==="Start"&&C)&&((P=w?.inputEvent)===null||P===void 0||P.stopPropagation()):w.stop()}})})}),D}var Ll=function(){function t(r,e,n){var a=this;this.target=r,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(i){var o=a.eventName,s=a.moveable;s.state.disableNativeEvent||a.ables.forEach(function(u){u[o](s,{inputEvent:i})})},r.addEventListener(n.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(r){this.ables=r},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Yl(t,r,e,n){var a;e===void 0&&(e=r);var i=Ki(t,r),o=i.matrixes,s=i.is3d,u=i.targetMatrix,f=i.transformOrigin,l=i.targetOrigin,v=i.offsetContainer,c=i.hasFixed,p=i.zoom,d=uf(v,e),g=d.matrixes,h=d.is3d,m=d.offsetContainer,x=d.zoom,S=n,E=4,y=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,D=u,C=ht(E),b=ht(E),_=ht(E),w=ht(E),P=o.length,O=g.map(function(L){return M(M({},L),{matrix:L.matrix?N([],R(L.matrix),!1):void 0})}).reverse();o.reverse(),!s&&S&&(D=Zt(D,3,4),Gn(o)),!h&&S&&Gn(O),O.forEach(function(L){b=pt(b,L.matrix,E)});var T=e||vr(t),I=((a=O[0])===null||a===void 0?void 0:a.target)||ae(T,T,!0).offsetParent,G=O.slice(1).reduce(function(L,Y){return pt(L,Y.matrix,E)},ht(E));o.forEach(function(L,Y){if(P-2===Y&&(_=C.slice()),P-1===Y&&(w=C.slice()),!L.matrix){var z=o[Y+1],V=fl(L,z,I,E,pt(G,C,E));L.matrix=Dr(V,E)}C=pt(C,L.matrix,E)});var k=!y&&s;D||(D=ht(k?4:3));var F=qe(y&&D.length===16?Zt(D,4,3):D,k),A=b;return b=Ti(b,E,E),{hasZoom:p!==1||x!==1,hasFixed:c,matrixes:o,rootMatrix:b,originalRootMatrix:A,beforeMatrix:_,offsetMatrix:w,allMatrix:C,targetMatrix:D,targetTransform:F,inlineTransform:t.style.transform,transformOrigin:f,targetOrigin:l,is3d:S,offsetContainer:v,offsetRootContainer:m}}function rs(t,r,e,n){e===void 0&&(e=r);var a=0,i=0,o=0,s={},u=wo(t);if(t&&(a=u.offsetWidth,i=u.offsetHeight),t){var f=Yl(t,r,e,n),l=Sr(f.allMatrix,f.transformOrigin,a,i);s=M(M({},f),l);var v=Sr(f.allMatrix,[50,50],100,100);o=Ro([v.pos1,v.pos2],v.direction)}var c=4;return M(M(M({hasZoom:!1,width:a,height:i,rotation:o},u),{originalRootMatrix:ht(c),rootMatrix:ht(c),beforeMatrix:ht(c),offsetMatrix:ht(c),allMatrix:ht(c),targetMatrix:ht(c),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}function Wl(t,r,e){return e===void 0&&(e=r),rs(t,r,e,!0)}function kn(t,r,e,n,a,i){i===void 0&&(i=[]);var o=1,s=[0,0],u=Ee(),f=Ee(),l=Ee(),v=Ee(),c=[0,0],p={},d=rs(r,e,a,!0);if(r){var g=Nt(r);i.forEach(function(O){p[O]=g(O)});var h=d.is3d?4:3,m=Sr(d.offsetMatrix,ut(d.transformOrigin,Oi(d.targetMatrix,h)),d.width,d.height);o=m.direction,s=ut(m.origin,[m.left-d.left,m.top-d.top]),v=Qr(d.offsetRootContainer);var x=ae(n,n,!0).offsetParent||d.offsetRootContainer;if(d.hasZoom){var S=Sr(pt(d.originalRootMatrix,d.allMatrix),d.transformOrigin,d.width,d.height),E=Sr(d.originalRootMatrix,ze(Nt(x)("transformOrigin")).map(function(O){return parseFloat(O)}),x.offsetWidth,x.offsetHeight);if(u=ln(S,v),l=ln(E,v,x,!0),t){var y=S.left,D=S.top;f=ln({left:y,top:D,bottom:D,right:D},v)}}else{u=Qr(r),l=sf(x),t&&(f=Qr(t));var C=l.left,b=l.top,_=l.clientLeft,w=l.clientTop,P=[u.left-C,u.top-b];c=Q(Fr(d.rootMatrix,P,4),[_+d.left,w+d.top])}}return M({targetClientRect:u,containerClientRect:l,moveableClientRect:f,rootContainerClientRect:v,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:r,style:p,offsetDelta:c},d)}function si(t){var r=t.pos1,e=t.pos2,n=t.pos3,a=t.pos4;if(!r||!e||!n||!a)return null;var i=yr([r,e,n,a]),o=[i.minX,i.minY],s=Q(t.origin,o);return r=Q(r,o),e=Q(e,o),n=Q(n,o),a=Q(a,o),M(M({},t),{left:t.left,top:t.top,posDelta:o,pos1:r,pos2:e,pos3:n,pos4:a,origin:s,beforeOrigin:s,isPersisted:!0})}var Nr=function(t){Yr(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=M({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},kn(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new Kn,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var n=e.props.parentMoveable;if(n){n.checkUpdateRect();return}Gs(e._observerId),e._observerId=bi(function(){e.isDragging()||e.updateRect()})}},e._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},e}return r.prototype.render=function(){var e=this.props,n=this.getState(),a=e.parentPosition,i=e.className,o=e.target,s=e.zoom,u=e.cspNonce,f=e.translateZ,l=e.cssStyled,v=e.groupable,c=e.linePadding,p=e.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var d=R(a||[0,0],2),g=d[0],h=d[1],m=n.left,x=n.top,S=n.target,E=n.direction,y=n.hasFixed,D=n.offsetDelta,C=e.targets,b=this.isDragging(),_={};this.getEnabledAbles().forEach(function(G){_["data-able-".concat(G.name.toLowerCase())]=!0});var w=this._getAbleClassName(),P=C&&C.length&&(S||v)||o||!this._hasFirstTarget&&this.state.isPersisted,O=this.controlBox||this.props.firstRenderState||this.props.persistData,T=[m-g,x-h];!v&&e.useAccuratePosition&&(T[0]+=D[0],T[1]+=D[1]);var I={position:y?"fixed":"absolute",display:P?"block":"none",visibility:O?"visible":"hidden",transform:"translate3d(".concat(T[0],"px, ").concat(T[1],"px, ").concat(f,")"),"--zoom":s,"--zoompx":"".concat(s,"px")};return c&&(I["--moveable-line-padding"]=c),p&&(I["--moveable-control-padding"]=p),Bt.createElement(l,M({cspNonce:u,ref:xr(this,"controlBox"),className:"".concat(K("control-box",E===-1?"reverse":"",b?"dragging":"")," ").concat(w," ").concat(i)},_,{onClick:this._onPreventClick,style:I}),this.renderAbles(),this._renderLines())},r.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var e=this.props,n=e.parentMoveable,a=e.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!a&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},r.prototype.componentDidUpdate=function(e){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(e)},r.prototype.componentWillUnmount=function(){var e,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(e=this._reiszeObserver)===null||e===void 0||e.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var a=this._viewContainer;a&&this._changeAbleViewClassNames([]),Pr(this,!1),Pr(this,!0);var i=this.events;for(var o in i){var s=i[o];s&&s.destroy()}},r.prototype.getTargets=function(){var e=this.props.target;return e?[e]:[]},r.prototype.getAble=function(e){var n=this.props.ables||[];return Lt(n,function(a){return a.name===e})},r.prototype.getContainer=function(){var e=this.props,n=e.parentMoveable,a=e.wrapperMoveable,i=e.container;return i||a&&a.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},r.prototype.getControlBoxElement=function(){return this.controlBox},r.prototype.getDragElement=function(){return this._dragTarget},r.prototype.isMoveableElement=function(e){var n;return e&&(((n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"class"))||"").indexOf(Qn)>-1},r.prototype.dragStart=function(e,n){n===void 0&&(n=e.target);var a=this.targetGesto,i=this.controlGesto;return a&&xa(this)({inputEvent:e},n)?a.isFlag()||a.triggerDragStart(e):i&&this.isMoveableElement(n)&&(i.isFlag()||i.triggerDragStart(e)),this},r.prototype.hitTest=function(e){var n=this.state,a=n.target,i=n.pos1,o=n.pos2,s=n.pos3,u=n.pos4,f=n.targetClientRect;if(!a)return 0;var l;if(jn(e)){var v=e.getBoundingClientRect();l={left:v.left,top:v.top,width:v.width,height:v.height}}else l=M({width:0,height:0},e);var c=l.left,p=l.top,d=l.width,g=l.height,h=Oa([i,o,u,s],f),m=vu(h,[[c,p],[c+d,p],[c+d,p+g],[c,p+g]]),x=Bi(h);return!m||!x?0:Math.min(100,m/x*100)},r.prototype.isInside=function(e,n){var a=this.state,i=a.target,o=a.pos1,s=a.pos2,u=a.pos3,f=a.pos4,l=a.targetClientRect;return i?Dn([e,n],Oa([o,s,f,u],l)):!1},r.prototype.updateRect=function(e,n,a){a===void 0&&(a=!0);var i=this.props,o=!i.parentPosition&&!i.wrapperMoveable;o&&Ar(!0);var s=i.parentMoveable,u=this.state,f=u.target||i.target,l=this.getContainer(),v=s?s._rootContainer:this._rootContainer,c=kn(this.controlBox,f,l,l,v||l,this._getRequestStyles());if(!f&&this._hasFirstTarget&&i.persistData){var p=si(i.persistData);for(var d in p)c[d]=p[d]}o&&Ar(),this.updateState(c,s?!1:a)},r.prototype.isDragging=function(e){var n,a,i=this.targetGesto,o=this.controlGesto;if(i?.isFlag()){if(!e)return!0;var s=i.getEventData();return!!(!((n=s[e])===null||n===void 0)&&n.isEventStart)}if(o?.isFlag()){if(!e)return!0;var s=o.getEventData();return!!(!((a=s[e])===null||a===void 0)&&a.isEventStart)}return!1},r.prototype.updateTarget=function(e){this.updateRect(e,!0)},r.prototype.getRect=function(){var e=this.state,n=Vt(this.state),a=R(n,4),i=a[0],o=a[1],s=a[2],u=a[3],f=Xt(n),l=e.width,v=e.height,c=f.width,p=f.height,d=f.left,g=f.top,h=[e.left,e.top],m=ut(h,e.origin),x=ut(h,e.beforeOrigin),S=e.transformOrigin;return{width:c,height:p,left:d,top:g,pos1:i,pos2:o,pos3:s,pos4:u,offsetWidth:l,offsetHeight:v,beforeOrigin:x,origin:m,transformOrigin:S,rotation:this.getRotation()}},r.prototype.getManager=function(){return this},r.prototype.stopDrag=function(e){if(!e||e==="target"){var n=this.targetGesto;n?.isIdle()===!1&&zn(this,!1),n?.stop()}if(!e||e==="control"){var n=this.controlGesto;n?.isIdle()===!1&&zn(this,!0),n?.stop()}},r.prototype.getRotation=function(){var e=this.state,n=e.pos1,a=e.pos2,i=e.direction;return hl(n,a,i)},r.prototype.request=function(e,n,a){n===void 0&&(n={});var i=this,o=i.props,s=o.parentMoveable||o.wrapperMoveable||i,u=s.props.ables,f=o.groupable,l=Lt(u,function(m){return m.name===e});if(this.isDragging()||!l||!l.request)return{request:function(){return this},requestEnd:function(){return this}};var v=l.request(i),c=a||n.isInstant,p=v.isControl?"controlAbles":"targetAbles",d="".concat(f?"Group":"").concat(v.isControl?"Control":""),g=N([],R(s[p]),!1),h={request:function(m){return te(i,g,["drag"],d,"",M(M({},v.request(m)),{requestAble:e,isRequest:!0}),c),h},requestEnd:function(){return te(i,g,["drag"],d,"End",M(M({},v.requestEnd()),{requestAble:e,isRequest:!0}),c),h}};return te(i,g,["drag"],d,"Start",M(M({},v.requestStart(n)),{requestAble:e,isRequest:!0}),c),c?h.request(n).requestEnd():h},r.prototype.getMoveables=function(){return[this]},r.prototype.destroy=function(){this.componentWillUnmount()},r.prototype.updateRenderPoses=function(){var e=this.getState(),n=this.props,a=n.padding,i=e.originalBeforeOrigin,o=e.transformOrigin,s=e.allMatrix,u=e.is3d,f=e.pos1,l=e.pos2,v=e.pos3,c=e.pos4,p=e.left,d=e.top,g=e.isPersisted,h=n.zoom||1;if(!a&&h<=1){e.renderPoses=[f,l,v,c],e.renderLines=[[f,l],[l,c],[c,v],[v,f]];return}var m=Fo(a||{}),x=m.left,S=m.top,E=m.bottom,y=m.right,D=u?4:3,C=[];g?C=o:this.controlBox&&n.groupable?C=i:C=ut(i,[p,d]);var b=we(D,Dr(C.map(function(I){return-I}),D),s,Dr(o,D)),_=Wt(b,f,[-x,-S],D),w=Wt(b,l,[y,-S],D),P=Wt(b,v,[-x,E],D),O=Wt(b,c,[y,E],D);e.renderPoses=[_,w,P,O],e.renderLines=[[_,w],[w,O],[O,P],[P,_]];{var T=h/2;e.renderLines=[[Wt(b,f,[-x-T,-S],D),Wt(b,l,[y+T,-S],D)],[Wt(b,l,[y,-S-T],D),Wt(b,c,[y,E+T],D)],[Wt(b,c,[y+T,E],D),Wt(b,v,[-x-T,E],D)],[Wt(b,v,[-x,E+T],D),Wt(b,f,[-x,-S-T],D)]]}},r.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var e=this.props,n=e.target,a=e.container,i=e.parentMoveable,o=this.state,s=o.target,u=o.container;if(!(!s&&!n)){this.updateAbles();var f=!Bn(s,n),l=f||!Bn(u,a);if(l){var v=a||this.controlBox;v&&this.unsetAbles(),this.updateState({target:n,container:a}),!i&&v&&this.updateRect("End",!1,!1),this._isPropTargetChanged=f}}},r.prototype.waitToChangeTarget=function(){return new Promise(function(){})},r.prototype.triggerEvent=function(e,n){var a=this.props;if(this._emitter.trigger(e,n),a.parentMoveable&&n.isRequest&&!n.isRequestChild)return a.parentMoveable.triggerEvent(e,n,!0);var i=a[e];return i&&i(n)},r.prototype.useCSS=function(e,n){var a=this.props.customStyledMap,i=e+n;return a[i]||(a[i]=Fi(e,n)),a[i]},r.prototype.getState=function(){var e,n=this.props;(n.target||!((e=n.targets)===null||e===void 0)&&e.length)&&(this._hasFirstTarget=!0);var a=this.controlBox,i=n.persistData,o=n.firstRenderState;if(o&&!a)return o;if(!this._hasFirstTarget&&i){var s=si(i);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},r.prototype.updateSelectors=function(){},r.prototype.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(e)})},r.prototype.updateAbles=function(e,n){e===void 0&&(e=this.props.ables),n===void 0&&(n="");var a=this.props,i=a.triggerAblesSimultaneously,o=this.getEnabledAbles(e),s="drag".concat(n,"Start"),u="pinch".concat(n,"Start"),f="drag".concat(n,"ControlStart"),l=De(o,[s,u],i),v=De(o,[f],i);this.enabledAbles=o,this.targetAbles=l,this.controlAbles=v},r.prototype.updateState=function(e,n){if(n){if(this.isUnmounted)return;this.setState(e)}else{var a=this.state;for(var i in e)a[i]=e[i]}},r.prototype.getEnabledAbles=function(e){e===void 0&&(e=this.props.ables);var n=this.props;return e.filter(function(a){return a&&(a.always&&n[a.name]!==!1||n[a.name])})},r.prototype.renderAbles=function(){var e=this,n=this.props,a=n.triggerAblesSimultaneously,i={createElement:Bt.createElement};return this.renderState={},vl(zo(De(this.getEnabledAbles(),["render"],a).map(function(o){var s=o.render;return s(e,i)||[]})).filter(function(o){return o}),function(o){var s=o.key;return s}).map(function(o){return o[0]})},r.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},r.prototype._getRequestStyles=function(){var e=this.getEnabledAbles().reduce(function(n,a){var i,o,s=(o=(i=a.requestStyle)===null||i===void 0?void 0:i.call(a))!==null&&o!==void 0?o:[];return N(N([],R(n),!1),R(s),!1)},N([],R(this.props.requestStyles||[]),!1));return e},r.prototype._updateObserver=function(e){this._updateResizeObserver(e),this._updateMutationObserver(e)},r.prototype._updateEvents=function(){var e=this.targetAbles.length,n=this.controlAbles.length,a=this._dragTarget,i=!e&&this.targetGesto||this._isTargetChanged(!0);i&&(Pr(this,!1),this.updateState({gestos:{}})),n||Pr(this,!0),a&&e&&!this.targetGesto&&(this.targetGesto=Jo(this,a,"")),!this.controlGesto&&n&&(this.controlGesto=Qo(this,"Control"))},r.prototype._updateTargets=function(){var e=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=e.dragArea,this._propTarget=e.target,this._originalDragTarget=e.dragTarget||e.target,this._dragTarget=Kt(this._originalDragTarget,!0)},r.prototype._renderLines=function(){var e=this.props,n=e,a=n.zoom,i=n.hideDefaultLines,o=n.hideChildMoveableDefaultLines,s=n.parentMoveable;if(i||s&&o)return[];var u=this.getState(),f={createElement:Bt.createElement};return u.renderLines.map(function(l,v){return ne(f,"",l[0],l[1],a,"render-line-".concat(v))})},r.prototype._isTargetChanged=function(e){var n=this.props,a=n.dragTarget||n.target,i=this._prevOriginalDragTarget,o=this._prevDragArea,s=n.dragArea,u=!s&&i!==a,f=(e||s)&&o!==s;return u||f||this._prevPropTarget!=this._propTarget},r.prototype._updateNativeEvents=function(){var e=this,n=this.props,a=n.dragArea?this.areaElement:this.state.target,i=this.events,o=Lr(i);if(this._isTargetChanged())for(var s in i){var u=i[s];u&&u.destroy(),i[s]=null}if(a){var f=this.enabledAbles;o.forEach(function(l){var v=De(f,[l]),c=v.length>0,p=i[l];if(!c){p&&(p.destroy(),i[l]=null);return}p||(p=new Ll(a,e,l),i[l]=p),p.setAbles(v)})}},r.prototype._checkUpdateRootContainer=function(){var e=this.props.rootContainer;!this._rootContainer&&e&&(this._rootContainer=Kt(e,!0))},r.prototype._checkUpdateViewContainer=function(){var e=this.props.viewContainer;!this._viewContainer&&e&&(this._viewContainer=Kt(e,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(N(N([],R(this._getAbleViewClassNames()),!1),[this.isDragging()?El:""],!1))},r.prototype._changeAbleViewClassNames=function(e){var n=this._viewContainer,a=Go(e.filter(Boolean),function(f){return f}).map(function(f){var l=R(f,1),v=l[0];return v}),i=this._viewClassNames,o=Zn(i,a),s=o.removed,u=o.added;s.forEach(function(f){wi(n,i[f])}),u.forEach(function(f){Mi(n,a[f])}),this._viewClassNames=a},r.prototype._getAbleViewClassNames=function(){var e=this;return(this.getEnabledAbles().map(function(n){var a;return((a=n.viewClassName)===null||a===void 0?void 0:a.call(n,e))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},r.prototype._getAbleClassName=function(e){var n=this;e===void 0&&(e="");var a=this.getEnabledAbles(),i=this.targetGesto,o=this.controlGesto,s=i?.isFlag()?i.getEventData():{},u=o?.isFlag()?o.getEventData():{};return a.map(function(f){var l,v,c,p=f.name,d=((l=f.className)===null||l===void 0?void 0:l.call(f,n))||"";return(!((v=s[p])===null||v===void 0)&&v.isEventStart||!((c=u[p])===null||c===void 0)&&c.isEventStart)&&(d+=" ".concat(K("".concat(p).concat(e,"-dragging")))),d.trim()}).filter(Boolean).join(" ")},r.prototype._updateResizeObserver=function(e){var n,a=this.props,i=a.target,o=ur(this.getControlBoxElement());if(!o.ResizeObserver||!i||!a.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(e.target===i&&this._reiszeObserver)){var s=new o.ResizeObserver(this.checkUpdateRect);s.observe(i,{box:"border-box"}),this._reiszeObserver=s}},r.prototype._updateMutationObserver=function(e){var n=this,a,i=this.props,o=i.target,s=ur(this.getControlBoxElement());if(!s.MutationObserver||!o||!i.useMutationObserver){(a=this._mutationObserver)===null||a===void 0||a.disconnect();return}if(!(e.target===o&&this._mutationObserver)){var u=new s.MutationObserver(function(f){var l,v;try{for(var c=Tu(f),p=c.next();!p.done;p=c.next()){var d=p.value;d.type==="attributes"&&d.attributeName==="style"&&n.checkUpdateRect()}}catch(g){l={error:g}}finally{try{p&&!p.done&&(v=c.return)&&v.call(c)}finally{if(l)throw l.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},r.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:bo,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},r}(Bt.PureComponent),Sa={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,r){var e,n=t.props,a=n.targets||[],i=t.getState(),o=i.left,s=i.top,u=i.isPersisted,f=n.zoom||1,l=t.renderGroupRects,v=((e=n.persistData)===null||e===void 0?void 0:e.children)||[];u?a=v.map(function(){return null}):v=[];var c=Ir(t,"parentPosition",[o,s],function(d){return d.join(",")}),p=Ir(t,"requestStyles",t.getRequestChildStyles(),function(d){return d.join(",")});return t.moveables=t.moveables.slice(0,a.length),N(N([],R(a.map(function(d,g){return r.createElement(Nr,{key:"moveable"+g,ref:Si(t,"moveables",g),target:d,origin:!1,requestStyles:p,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,s],persistData:v[g],zoom:f})})),!1),R(zo(l.map(function(d,g){var h=d.pos1,m=d.pos2,x=d.pos3,S=d.pos4,E=[h,m,x,S];return[[0,1],[1,3],[3,2],[2,0]].map(function(y,D){var C=R(y,2),b=C[0],_=C[1];return ne(r,"",Q(E[b],c),Q(E[_],c),f,"group-rect-".concat(g,"-").concat(D))})}))),!1)}},Xl=Wr("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,r){r.datas.inputTarget=r.inputEvent&&r.inputEvent.target},dragEnd:function(t,r){var e=t.props.target,n=r.inputEvent,a=r.inputTarget,i=t.isMoveableElement(a),o=!i&&t.controlBox.contains(a);if(!(!n||!a||r.isDrag||t.isMoveableElement(a)||o)){var s=e.contains(a);U(t,"onClick",nt(t,r,{isDouble:r.isDouble,inputTarget:a,isTarget:e===a,moveableTarget:t.props.target,containsTarget:s}))}},dragGroupEnd:function(t,r){var e=r.inputEvent,n=r.inputTarget;if(!(!e||!n||r.isDrag||t.isMoveableElement(n)||r.datas.inputTarget===n)){var a=t.props.targets,i=a.indexOf(n),o=i>-1,s=!1;i===-1&&(i=rr(a,function(u){return u.contains(n)}),s=i>-1),U(t,"onClickGroup",nt(t,r,{isDouble:r.isDouble,targets:a,inputTarget:n,targetIndex:i,isTarget:o,containsTarget:s,moveableTarget:a[i]}))}},dragControlEnd:function(t,r){this.dragEnd(t,r)},dragGroupControlEnd:function(t,r){this.dragEnd(t,r)}});function Mr(t){var r=t.originalDatas.draggable;return r||(t.originalDatas.draggable={},r=t.originalDatas.draggable),M(M({},t),{datas:r})}var es=Wr("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,r){var e=t.props,n=e.edgeDraggable;return n?to(r,"edgeDraggable",n,t.getState().renderPoses,e.zoom):[]},dragCondition:function(t,r){var e,n=t.props,a=(e=r.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!a?!1:!n.draggable&&bt(a,K("direction"))&&bt(a,K("edge"))&&bt(a,K("edgeDraggable"))},dragStart:function(t,r){return Ot.dragStart(t,Mr(r))},drag:function(t,r){return Ot.drag(t,Mr(r))},dragEnd:function(t,r){return Ot.dragEnd(t,Mr(r))},dragGroupCondition:function(t,r){var e,n=t.props,a=(e=r.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!a?!1:!n.draggable&&bt(a,K("direction"))&&bt(a,K("line"))},dragGroupStart:function(t,r){return Ot.dragGroupStart(t,Mr(r))},dragGroup:function(t,r){return Ot.dragGroup(t,Mr(r))},dragGroupEnd:function(t,r){return Ot.dragGroupEnd(t,Mr(r))},unset:function(t){return Ot.unset(t)}}),ns={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Ue=[Zo,Ho,yo,No,Ot,es,Ge,Lo,Yo,mo,bl,Cl,Dl,Bl,Uo,$o,Sa,ns,Xl,Xo,Ko],Hl=Ue.reduce(function(t,r){return(r.events||[]).forEach(function(e){_i(t,e)}),t},[]),Vl=Ue.reduce(function(t,r){return(r.props||[]).forEach(function(e){_i(t,e)}),t},[]);function ui(t,r){var e=R(t,3),n=e[0],a=e[1],i=e[2];return(n*r[0]+a*r[1]+i)/Math.sqrt(n*n+a*a)}function Ce(t,r){var e=R(t,2),n=e[0],a=e[1];return-n*r[0]-a*r[1]}function fi(t,r){return Math.max.apply(Math,N([],R(t.map(function(e){var n=R(e,4),a=n[0],i=n[1],o=n[2],s=n[3];return Math.max(a[r],i[r],o[r],s[r])})),!1))}function li(t,r){return Math.min.apply(Math,N([],R(t.map(function(e){var n=R(e,4),a=n[0],i=n[1],o=n[2],s=n[3];return Math.min(a[r],i[r],o[r],s[r])})),!1))}function ql(t,r){var e,n,a,i=[0,0],o=[0,0],s=[0,0],u=[0,0],f=0,l=0;if(!t.length)return{pos1:i,pos2:o,pos3:s,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:f,height:l,rotation:r};var v=tt(r,kt);if(v%90){var c=v/180*Math.PI,p=Math.tan(c),d=-1/p,g=[wn,Ga],h=[[0,0],[0,0]],m=[wn,Ga],x=[[0,0],[0,0]];t.forEach(function(q){q.forEach(function(W){var j=ui([-p,1,0],W),X=ui([-d,1,0],W);g[0]>j&&(h[0]=W,g[0]=j),g[1]<j&&(h[1]=W,g[1]=j),m[0]>X&&(x[0]=W,m[0]=X),m[1]<X&&(x[1]=W,m[1]=X)})});var S=R(h,2),E=S[0],y=S[1],D=R(x,2),C=D[0],b=D[1],_=[-p,1,Ce([-p,1],E)],w=[-p,1,Ce([-p,1],y)],P=[-d,1,Ce([-d,1],C)],O=[-d,1,Ce([-d,1],b)];e=R([[_,P],[_,O],[w,P],[w,O]].map(function(q){var W=R(q,2),j=W[0],X=W[1];return Jn(j,X)[0]}),4),i=e[0],o=e[1],s=e[2],u=e[3],f=m[1]-m[0],l=g[1]-g[0]}else{var T=li(t,0),I=li(t,1),G=fi(t,0),k=fi(t,1);if(i=[T,I],o=[G,I],s=[T,k],u=[G,k],f=G-T,l=k-I,v%180){var F=[s,i,u,o];n=R(F,4),i=n[0],o=n[1],s=n[2],u=n[3],f=k-I,l=G-T}}if(v%360>180){var F=[u,s,o,i];a=R(F,4),i=a[0],o=a[1],s=a[2],u=a[3]}var A=yr([i,o,s,u]),L=A.minX,Y=A.minY,z=A.maxX,V=A.maxY;return{pos1:i,pos2:o,pos3:s,pos4:u,width:f,height:l,minX:L,minY:Y,maxX:z,maxY:V,rotation:r}}function as(t,r){var e=r.map(function(n){if(Mt(n)){var a=as(t,n),i=a.length;return i>1?a:i===1?a[0]:null}else{var o=Lt(t,function(s){var u=s.manager;return u.props.target===n});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return e.length===1&&Mt(e[0])?e[0]:e}var jl=function(t){Yr(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.differ=new zi,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return r.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},r.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},r.prototype.getTargets=function(){return this.props.targets},r.prototype.updateRect=function(e,n,a){var i;a===void 0&&(a=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;Ar(!0),this.moveables.forEach(function(J){J.updateRect(e,!1,!1)});var s=this.props,u=this.moveables,f=o.target||s.target,l=u.map(function(J){return{finded:!1,manager:J}}),v=this.props.targetGroups||[],c=as(l,v),p=s.useDefaultGroupRotate;c.push.apply(c,N([],R(l.filter(function(J){var at=J.finded;return!at}).map(function(J){var at=J.manager;return at})),!1));var d=[],g=!n||e!==""&&s.updateGroup,h=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(i=s.persistData)===null||i===void 0?void 0:i.rotation;m!=null&&(h=m)}function x(J,at,st){var H=J.map(function(dt){if(Mt(dt)){var it=x(dt,at),lt=[it.pos1,it.pos2,it.pos3,it.pos4];return d.push(it),{poses:lt,rotation:it.rotation}}else return{poses:Vt(dt.state),rotation:dt.getRotation()}}),Z=H.map(function(dt){var it=dt.rotation;return it}),ft=0,rt=Z[0],et=Z.every(function(dt){return Math.abs(rt-dt)<.1});g?ft=!p&&et?rt:h:ft=!p&&!st&&et?rt:at;var ot=H.map(function(dt){var it=dt.poses;return it}),ct=ql(ot,ft);return ct}var S=x(c,this.rotation,!0);g&&(this.rotation=S.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=v,this.renderGroupRects=d;var E=this.transformOrigin,y=this.rotation,D=this.scale,C=S.width,b=S.height,_=S.minX,w=S.minY,P=ml([[0,0],[C,0],[0,b],[C,b]],ga(E,C,b),this.rotation/180*Math.PI),O=yr(P.result),T=O.minX,I=O.minY,G=" rotate(".concat(y,"deg)")+" scale(".concat(zt(D[0]),", ").concat(zt(D[1]),")"),k="translate(".concat(-T,"px, ").concat(-I,"px)").concat(G);this.controlBox.style.transform="translate3d(".concat(_,"px, ").concat(w,"px, ").concat(this.props.translateZ||0,")"),f.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(E,";")+"width:".concat(C,"px;height:").concat(b,"px;")+"transform: ".concat(k),o.width=C,o.height=b;var F=this.getContainer(),A=kn(this.controlBox,f,this.controlBox,this.getContainer(),this._rootContainer||F,[]),L=[A.left,A.top],Y=R(Vt(A),4),z=Y[0],V=Y[1],q=Y[2],W=Y[3],j=yr([z,V,q,W]),X=[j.minX,j.minY],$=zt(D[0]*D[1]);A.pos1=Q(z,X),A.pos2=Q(V,X),A.pos3=Q(q,X),A.pos4=Q(W,X),A.left=_-A.left+X[0],A.top=w-A.top+X[1],A.origin=Q(ut(L,A.origin),X),A.beforeOrigin=Q(ut(L,A.beforeOrigin),X),A.originalBeforeOrigin=ut(L,A.originalBeforeOrigin),A.transformOrigin=Q(ut(L,A.transformOrigin),X),f.style.transform="translate(".concat(-T-X[0],"px, ").concat(-I-X[1],"px)")+G,Ar(),this.updateState(M(M({},A),{posDelta:X,direction:$,beforeDirection:$}),a)},r.prototype.getRect=function(){return M(M({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},r.prototype.triggerEvent=function(e,n,a){if(a||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},r.prototype.getRequestChildStyles=function(){var e=this.getEnabledAbles().reduce(function(n,a){var i,o,s=(o=(i=a.requestChildStyle)===null||i===void 0?void 0:i.call(a))!==null&&o!==void 0?o:[];return N(N([],R(n),!1),R(s),!1)},[]);return e},r.prototype.getMoveables=function(){return N([],R(this.moveables),!1)},r.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,N(N([],R(this.props.ables),!1),[Sa],!1),"Group")},r.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Kt(this._originalDragTarget,!0)},r.prototype._updateEvents=function(){var e=this.state,n=this.props,a=this._prevDragTarget,i=n.dragTarget||this.areaElement,o=n.targets,s=this.differ.update(o),u=s.added,f=s.changed,l=s.removed,v=u.length||l.length;(v||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Pr(this,!1),Pr(this,!0),this.updateState({gestos:{}})),a!==i&&(e.target=null),e.target||(e.target=this.areaElement,this.controlBox.style.display="block"),e.target&&(this.targetGesto||(this.targetGesto=Jo(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Qo(this,"GroupControl")));var c=!Bn(e.container,n.container);c&&(e.container=n.container),(c||v||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||f.length||o.length&&!ko(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!v},r.prototype._updateObserver=function(){},r.defaultProps=M(M({},Nr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),r}(Nr),Ul=function(t){Yr(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.moveables=[],e}return r.prototype.render=function(){var e=this,n,a=this.props,i=a.cspNonce,o=a.cssStyled,s=a.persistData,u=a.targets||[],f=u.length,l=this.isUnmounted||!f,v=(n=s?.children)!==null&&n!==void 0?n:[];return l&&!f&&v.length?u=v.map(function(){return null}):l||(v=[]),Bt.createElement(o,{cspNonce:i,ref:xr(this,"controlBox"),className:K("control-box")},u.map(function(c,p){var d,g,h=(g=(d=a.individualGroupableProps)===null||d===void 0?void 0:d.call(a,c,p))!==null&&g!==void 0?g:{};return Bt.createElement(Nr,M({key:"moveable"+p,ref:Si(e,"moveables",p)},a,h,{target:c,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:v[p]}))}))},r.prototype.componentDidMount=function(){},r.prototype.componentDidUpdate=function(){},r.prototype.getTargets=function(){return this.props.targets},r.prototype.updateRect=function(e,n,a){a===void 0&&(a=!0),Ar(!0),this.moveables.forEach(function(i){i.updateRect(e,n,a)}),Ar()},r.prototype.getRect=function(){return M(M({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},r.prototype.request=function(e,n,a){n===void 0&&(n={});var i=this.moveables.map(function(u){return u.request(e,M(M({},n),{isInstant:!1}),!1)}),o=a||n.isInstant,s={request:function(u){return i.forEach(function(f){return f.request(u)}),this},requestEnd:function(){return i.forEach(function(u){return u.requestEnd()}),this}};return o?s.request(n).requestEnd():s},r.prototype.dragStart=function(e,n){n===void 0&&(n=e.target);var a=n,i=Lt(this.moveables,function(o){var s=o.getTargets()[0],u=o.getControlBoxElement(),f=o.getDragElement();return!s||!f?!1:f===a||f.contains(a)||f!==s&&s===a||s.contains(a)||u===a||u.contains(a)});return i&&i.dragStart(e,n),this},r.prototype.hitTest=function(){return 0},r.prototype.isInside=function(){return!1},r.prototype.isDragging=function(){return!1},r.prototype.getDragElement=function(){return null},r.prototype.getMoveables=function(){return N([],R(this.moveables),!1)},r.prototype.updateRenderPoses=function(){},r.prototype.checkUpdate=function(){},r.prototype.triggerEvent=function(){},r.prototype.updateAbles=function(){},r.prototype._updateEvents=function(){},r.prototype._updateObserver=function(){},r}(Nr);function is(t,r){var e=[];return t.forEach(function(n){if(n){if(er(n)){r[n]&&e.push.apply(e,N([],R(r[n]),!1));return}Mt(n)?e.push.apply(e,N([],R(is(n,r)),!1)):e.push(n)}}),e}function os(t,r){var e=[];return t.forEach(function(n){if(n){if(er(n)){r[n]&&e.push.apply(e,N([],R(r[n]),!1));return}Mt(n)?e.push(os(n,r)):e.push(n)}}),e}function ss(t,r){return t.length!==r.length||t.some(function(e,n){var a=r[n];return!e&&!a?!1:e!=a?Mt(e)&&Mt(a)?ss(e,a):!0:!1})}var Ea=function(t){Yr(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new zi,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}return r.makeStyled=function(){var e={},n=this.getTotalAbles();n.forEach(function(i){var o=i.css;o&&o.forEach(function(s){e[s]=!0})});var a=Lr(e).join(`
`);this.defaultStyled=Fi("div",Es(Qn,Lu+a))},r.getTotalAbles=function(){return N([Ho,Sa,ns,Xo],R(this.defaultAbles),!1)},r.prototype.render=function(){var e,n=this.constructor;n.defaultStyled||n.makeStyled();var a=this.props,i=a.ables,o=a.props,s=wu(a,["ables","props"]),u=R(this._updateRefs(!0),2),f=u[0],l=u[1],v=is(f,l),c=v.length>1,p=n.getTotalAbles(),d=N(N([],R(p),!1),R(i||[]),!1),g=M(M(M({},s),o||{}),{ables:d,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=v;var h=null,m=this.moveable,x=s.persistData;if(x?.children&&(c=!0),s.individualGroupable)return Bt.createElement(Ul,M({key:"individual-group",ref:xr(this,"moveable")},g,{target:null,targets:v}));if(c){var S=os(f,l);if(m&&!m.props.groupable&&!m.props.individualGroupable){var E=m.props.target;E&&v.indexOf(E)>-1&&(h=M({},m.state))}return Bt.createElement(jl,M({key:"group",ref:xr(this,"moveable")},g,(e=s.groupableProps)!==null&&e!==void 0?e:{},{target:null,targets:v,targetGroups:S,firstRenderState:h}))}else{var y=v[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var D=m.moveables||[],C=Lt(D,function(b){return b.props.target===y});C&&(h=M({},C.state))}return Bt.createElement(Nr,M({key:"single",ref:xr(this,"moveable")},g,{target:y,firstRenderState:h}))}},r.prototype.componentDidMount=function(){this._checkChangeTargets()},r.prototype.componentDidUpdate=function(){this._checkChangeTargets()},r.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},r.prototype.getTargets=function(){var e,n;return(n=(e=this.moveable)===null||e===void 0?void 0:e.getTargets())!==null&&n!==void 0?n:[]},r.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},r.prototype.waitToChangeTarget=function(){var e=this,n;return this._onChangeTargets=function(){e._onChangeTargets=null,n()},new Promise(function(a){n=a})},r.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},r.prototype.getManager=function(){return this.moveable},r.prototype.getMoveables=function(){return this.moveable.getMoveables()},r.prototype.getDragElement=function(){return this.moveable.getDragElement()},r.prototype._updateRefs=function(e){var n=this.refTargets,a=da(this.props.target||this.props.targets),i=typeof document<"u",o=ss(n,a),s=this.selectorMap,u={};return this.refTargets.forEach(function f(l){if(er(l)){var v=s[l];v?u[l]=s[l]:i&&(o=!0,u[l]=[].slice.call(document.querySelectorAll(l)))}else Mt(l)&&l.forEach(f)}),this._tmpRefTargets=a,this._tmpSelectorMap=u,[a,u,!e&&o]},r.prototype._checkChangeTargets=function(){var e,n,a;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var i=this._differ.update(this._elementTargets),o=i.added,s=i.removed,u=o.length||s.length;u&&((n=(e=this.props).onChangeTargets)===null||n===void 0||n.call(e,{moveable:this.moveable,targets:this._elementTargets}),(a=this._onChangeTargets)===null||a===void 0||a.call(this));var f=R(this._updateRefs(),3),l=f[0],v=f[1],c=f[2];this.refTargets=l,this.selectorMap=v,c&&this.forceUpdate()},r.defaultAbles=[],r.customStyledMap={},r.defaultStyled=null,Ru([Ds(Hi)],r.prototype,"moveable",void 0),r}(Bt.PureComponent),$l=function(t){Yr(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.defaultAbles=Ue,r}(Ea);function Zl(t){var r;return r=function(e){Yr(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n}(Ea),r.defaultAbles=t,r}const ec=Object.freeze(Object.defineProperty({__proto__:null,Clippable:Uo,DIRECTIONS:Fe,Draggable:Ot,EdgeDraggable:es,InitialMoveable:Ea,MOVEABLE_ABLES:Ue,MOVEABLE_EVENTS:Hl,MOVEABLE_METHODS:Hi,MOVEABLE_PROPS:Vl,Pinchable:No,Resizable:Ge,Rotatable:mo,Roundable:$o,Scalable:Lo,Snappable:yo,Warpable:Yo,calculateElementPosition:Sr,default:$l,getElementInfo:Wl,makeAble:Wr,makeMoveable:Zl},Symbol.toStringTag,{value:"Module"}));export{ec as A,ou as D,Kn as E,xu as G,$l as M,Jl as P,Si as a,js as b,vt as c,Mi as d,wi as e,tc as f,rc as g,bt as h,Es as i,_u as j,xs as k,jn as l,wt as m,Ut as n,gn as o,Ss as p,Vn as q,xr as r,Fi as s,ur as t,er as u,Tt as v,Mt as w,tt as x,Ql as y,Ds as z};
