const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./actionsOptions-DGLfDXwS.js","./index-CaqiBWD3.js","./index-D8FflOyX.css","./confirm-Bux8TUvH.js","./editorApp-DZMui-50.js","./editorApp-DB0Q8XAf.css","./index-9gNDCDRB.js","./renderActionTag-AacAROej.js","./index-BzblAUWm.js","./index-CGwTHGaq.js","./getLocalUrlFromString-MtGJfgQO.js","./datasourceTools-BSEF0Knj.js","./variablesAPI-C9KILpk_.js","./localActiveAPI-BM1IHP6l.js","./___vite-browser-external_commonjs-proxy-BovDvJPF.js","./calcMediaUrl-BnxoRVw_.js","./index-CTNiVJ3s.css","./index-DwV6AUp4.js","./EditableCell-BYILAC5w.js","./index-vWj0pZVz.js","./formItemPropsWrapper-sw6ticMr.js","./PlusCircleOutlined-Urd2TsKl.js","./index-_8W0n6rO.js"])))=>i.map(i=>d[i]);
import{R as S,j as e,r as s,aa as I,T as P,a as _,an as R}from"./index-CaqiBWD3.js";import{E as x}from"./EditableCell-BYILAC5w.js";import{D as k,f as A,a as w,j as E}from"./confirm-Bux8TUvH.js";import{f as F,J as D,u as L,z as B,B as g,K as $}from"./editorApp-DZMui-50.js";import{c as O}from"./variablesAPI-C9KILpk_.js";import{R as j}from"./renderActionTag-AacAROej.js";import{T as N}from"./tableFieldSearchInput-CUkkEkpG.js";import{T as z}from"./index-9gNDCDRB.js";import{R as m}from"./PlusCircleOutlined-Urd2TsKl.js";import{P as J}from"./index-DwV6AUp4.js";import"./index-BzblAUWm.js";import"./index-vWj0pZVz.js";import"./localActiveAPI-BM1IHP6l.js";const K=s.lazy(()=>R(()=>import("./actionsOptions-DGLfDXwS.js").then(o=>o.v),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url)),{Title:M}=z,U={project:{title:"Project Variables",buttonText:e.jsxs(e.Fragment,{children:[e.jsx(m,{})," Add Project Variable"]})},page:{title:"Page Parameters",buttonText:e.jsxs(e.Fragment,{children:[e.jsx(m,{})," Add Page Parameter"]})},subpage:{title:"Subpage Parameters",buttonText:e.jsxs(e.Fragment,{children:[e.jsx(m,{})," Add Subpage Parameter"]})}},se=S.memo(({tableFor:o})=>{const{projectId:d,pageId:l}=F(),{setNewVariableModalVisible:p}=D(),{title:b,buttonText:f}=U[o],u=L(r=>{const a=r.workingProject?.attributes;return a?o==="project"?a.variables??[]:a.pages.data?.find(t=>t.id===l)?.attributes.parameters??[]:[]}),[h,y]=s.useState(null),[i,V]=s.useState(),v=s.useCallback((r,a)=>{const t=r.name.toLowerCase(),n=a.name.toLowerCase();return t<n?-1:t>n?1:0},[]),T=[{title:e.jsx(N,{setValue:V,value:i}),dataIndex:"name",sorter:v,defaultSortOrder:"ascend"},{title:"Type",dataIndex:"type"},{title:"Default Value",dataIndex:"defaultValue"},{title:"Signal FB Setter",dataIndex:"joinValueSetter_signal_fb"},{title:e.jsxs(e.Fragment,{children:["Side Effect Actions",e.jsx(J,{placement:"top",title:"Reactivity",content:e.jsx("div",{style:{width:"250px"},children:"Run actions when value has been changed."}),trigger:"hover",children:e.jsx($,{style:{marginLeft:7}})})]}),dataIndex:"sideEffects",className:"sideEffectsCell"},{title:"Controls",dataIndex:"controls",width:100}],c=s.useCallback((r,a)=>O({projectId:d,pageId:l,variableData:r,actionType:a}),[l,d]);return s.useEffect(()=>{const r=[],a=i?u.filter(t=>t.name.toLowerCase().includes(i.toLowerCase().trim())):u;for(const t of a)r.push({key:`variable_${t.name}`,name:t.name,type:e.jsx(e.Fragment,{children:e.jsx(j,{crestronLikeTypesNaming:!1,style:{margin:1},type:t.type,sub:t.type==="boolean"&&t?.waitForLoadingUi?" ui loader":""})}),defaultValue:e.jsx(x,{onChange:n=>c({...t,defaultValue:n},"update"),initialValue:t.defaultValue,value:t.defaultValue}),joinValueSetter_signal_fb:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(j,{style:{margin:1},type:t.type,sub:"FB"}),e.jsx(x,{style:{marginLeft:".5em"},onChange:n=>c({...t,joinValueSetter_signal_fb:n},"update"),initialValue:t.joinValueSetter_signal_fb??"",value:t.joinValueSetter_signal_fb??"",validators:[n=>B(n).catch(C=>(_.error(C.message),Promise.reject()))]})]}),sideEffects:e.jsx(s.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(K,{actionsArr:t?.actions??[],elementType:"variable",variableActionFor:t})}),controls:e.jsx(k.Button,{menu:{items:[{key:"removeVariable",danger:!0,icon:e.jsx(w,{}),label:"Delete",onClick:()=>A({title:`Delete ${t.name}?`,icon:e.jsx(I,{}),content:"Are you sure? It cannot be undone.",okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},onOk:()=>c(t,"delete"),onCancel:()=>console.log("cancel variable delete")})}]}})});y(r)},[d,i,u,l,c]),e.jsxs(e.Fragment,{children:[e.jsx(M,{id:"Variables",style:{margin:"15px 0"},level:5,children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:b}),e.jsx(g,{onClick:()=>p(l?"parameter":"project"),children:f})]})}),e.jsxs(e.Fragment,{children:[e.jsx(E,{columns:T,dataSource:h||[],pagination:!1}),e.jsx(g,{style:{marginTop:15},type:"primary",onClick:()=>p(l?"parameter":"project"),children:f},"submit")]})]})});export{se as default};
