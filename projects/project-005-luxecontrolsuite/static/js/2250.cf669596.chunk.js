"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[2250],{68513:(e,n,t)=>{t.d(n,{A:()=>a});var l=t(44719);const a=e=>l.A.confirm({zIndex:3e3,...e})},83063:(e,n,t)=>{t.d(n,{A:()=>p});var l=t(84649),a=t(48538),i=t(77645),o=t(56952),s=t(92759),r=t(12916),c=t(9950),d=t(2260),u=t(41967),h=t(57560),f=t(24513),v=t(44414);const g=e=>{let{initialValue:n,saveInProgress:t,setIsEditing:s,setSaveInProgress:r,save:f,style:g}=e;const[p,b]=(0,c.useState)(n);switch(typeof n){case"boolean":return(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1em",...g},children:[t&&(0,v.jsx)(d.A,{}),(0,v.jsx)(l.A,{onChange:e=>{b("true"===e)},value:p?"true":"false",options:["true","false"]}),(0,v.jsxs)("div",{style:{display:"flex"},children:[(0,v.jsx)(a.A,{style:{marginRight:2},type:"dashed",children:(0,v.jsx)(u.A,{onClick:()=>f(p),style:{color:"var(--ant-primary-5)"}})}),(0,v.jsx)(a.A,{onClick:()=>{s(!1),r(!1)},type:"dashed",children:(0,v.jsx)(h.A,{style:{color:"gray"}})})]})]});case"string":return(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1em",...g},children:[t&&(0,v.jsx)(d.A,{}),(0,v.jsx)(i.A,{spellCheck:!1,autoFocus:!0,onPressEnter:()=>f(p),onBlur:()=>f(p),onChange:e=>{e.stopPropagation(),b(e.target.value)},value:p})]});case"number":case"object":return(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1em",...g},children:[t&&(0,v.jsx)(d.A,{}),(0,v.jsx)(o.A,{style:{width:"100%"},autoFocus:!0,onPressEnter:()=>f(p),onBlur:()=>f(p),onChange:e=>b(e),value:p})]});default:return null}},p=e=>{let{value:n,onChange:t,initialValue:l,validators:a,style:i}=e;const[o,d]=(0,c.useState)(!1),[u,h]=(0,c.useState)(!1);function p(e){h(!0),t(e).then((()=>{d(!1),h(!1)}))}return(0,c.useEffect)((()=>{const e=e=>{27===e.keyCode&&d(!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[l]),o?(0,v.jsx)(g,{initialValue:l,saveInProgress:u,setIsEditing:d,setSaveInProgress:h,save:function(e){if(e===l)return d(!1),void h(!1);if(null!==a&&void 0!==a&&a.length){let n=[];return a.forEach((t=>{n.push(t(e))})),Promise.all(n).then((()=>{p(e)})).catch((e=>{s.Ay.error(e.message)}))}p(e)},style:i}):(0,v.jsxs)("div",{style:{...i},children:["boolean"===typeof n?(0,v.jsx)(r.A,{style:{padding:"3px",lineHeight:"1em"},color:n?"green":"red",children:n?"true":"false"}):n,(0,v.jsx)(f.A,{style:{marginLeft:"0.3em",color:"var(--ant-primary-5)"},onClick:()=>{d(!0)}})]})}},62250:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var l=t(22718),a=t(1578),i=t(72429),o=t(35492),s=t(48538),r=t(68513),c=t(9950),d=t(1877),u=t(48362),h=t(28429),f=t(83063),v=t(27379),g=t(25933),p=t(44414);const b=e=>{let{onChange:n,checked:t}=e;const[l,a]=(0,c.useState)(!1);return(0,p.jsx)(g.A,{loading:l,onChange:e=>{a(!0),n(e).then((()=>a(!1)))},checked:t})};var m=t(64983);const{Title:x}=l.A,y=[{title:"Name",dataIndex:"name"},{title:"Position",dataIndex:"position"},{title:"Visible on Pages",dataIndex:"visibleOnPages"},{title:"Hidden on Pages",dataIndex:"hiddenOnPages"},{title:"Visible by default",dataIndex:"visibleByDefault"},{title:"Actions",width:"100px",dataIndex:"globalContainerActions"}],C=()=>{const{projectId:e}=(0,h.g)(),n=(0,m.f)((e=>e.workingProject)),t=null===n||void 0===n?void 0:n.attributes.globalContainers,{setNewGlobalContainerVisible:l}=(0,h.KC)(),[g,C]=(0,c.useState)();return(0,c.useEffect)((()=>{var l;async function o(n,l){return new Promise(((a,i)=>{if(!t)return null;const o=structuredClone(t);o[n]={...o[n],...l},e?(0,u.Qx)({projectId:e,inputData:{globalContainers:o}}).then((()=>{a("Ok")})).catch((e=>i(e))):i("No projectId")}))}const s=(null===n||void 0===n||null===(l=n.attributes.pages.data)||void 0===l?void 0:l.filter((e=>!e.attributes.isSubpage)))||[];function c(){const e=[];if(null!==s&&void 0!==s&&s.length)for(const n of s)e.push({value:n.id,label:n.attributes.name||"noName"});return e}function h(e){if(!t)return null;const n=t[e];return(0,p.jsx)(a.A,{disabled:!!n.visibleByDefault,value:n.visibleOnPages,onChange:n=>{o(e,{visibleOnPages:[...n]})},placeholder:n.visibleByDefault?"Visible by default":"Add pages...",style:{width:200},mode:"multiple",allowClear:!0,options:c()})}function g(e){if(!t)return null;const n=t[e];return(0,p.jsx)(a.A,{disabled:!n.visibleByDefault,value:n.hiddenOnPages,onChange:n=>{o(e,{hiddenOnPages:[...n]})},placeholder:n.visibleByDefault?"Add pages...":"Hidden by default",style:{width:200},mode:"multiple",allowClear:!0,options:c()})}if(null!==t&&void 0!==t&&t.length){const n=[];t.forEach(((l,s)=>{n.push({key:"globalContainer_".concat(s),order:s+1,name:(0,p.jsx)(f.A,{onChange:e=>e&&o(s,{name:e}),initialValue:l.name,value:l.name}),position:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.A,{value:l.portraitPosition,onChange:e=>o(s,{portraitPosition:e}),style:{width:100,marginRight:10},suffixIcon:(0,p.jsx)(d.A,{}),options:[{value:"top",label:"Top"},{value:"right",label:"Right"},{value:"bottom",label:"Bottom"},{value:"left",label:"Left"},{value:"null",label:"Hidden"}]}),(0,p.jsx)(a.A,{value:l.landscapePosition,onChange:e=>o(s,{landscapePosition:e}),style:{width:100},suffixIcon:(0,p.jsx)(d.A,{rotate:90}),options:[{value:"top",label:"Top"},{value:"right",label:"Right"},{value:"bottom",label:"Bottom"},{value:"left",label:"Left"},{value:"null",label:"Hidden"}]})]}),visibleByDefault:(0,p.jsx)(b,{onChange:()=>o(s,{visibleByDefault:!l.visibleByDefault}),checked:l.visibleByDefault}),visibleOnPages:h(s),hiddenOnPages:g(s),globalContainerActions:(0,p.jsx)(i.A.Button,{menu:{items:[{key:"remove",label:"Remove",onClick:()=>(0,r.A)({title:"Delete Container?",icon:(0,p.jsx)(v.A,{}),content:"Are you sure to delete Global Container with all elements inside? It cannot be undone.",okText:"Delete container",cancelText:"Cancel",okButtonProps:{danger:!0},onOk:()=>function(n,l){if(!t)return null;const a=structuredClone(t);a.splice(n,1),e&&(0,u.Qx)({projectId:e,inputData:{globalContainers:a}})}(s,l.name),onCancel:()=>console.log("cancel global container delete")})}]}})})})),C(n)}else C([])}),[t,e,n]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(x,{id:"Global Containers",style:{margin:"15px 0"},level:5,children:"Global Containers (".concat((null===t||void 0===t?void 0:t.length)||0,")")}),(0,p.jsx)(o.A,{columns:y,dataSource:g,pagination:!1}),(0,p.jsx)(s.A,{style:{marginTop:15},type:"primary",onClick:()=>l(!0),children:"Create Global Container"},"submit")]})}},1877:(e,n,t)=>{t.d(n,{A:()=>r});var l=t(89379),a=t(9950);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"};var o=t(25085),s=function(e,n){return a.createElement(o.A,(0,l.A)((0,l.A)({},e),{},{ref:n,icon:i}))};const r=a.forwardRef(s)},25933:(e,n,t)=>{t.d(n,{A:()=>C});var l=t(58168),a=t(64467),i=t(2260),o=t(48738),s=t.n(o),r=t(5544),c=t(53986),d=t(9950),u=t(71207),h=t(91478),f=d.forwardRef((function(e,n){var t,l=e.prefixCls,i=void 0===l?"rc-switch":l,o=e.className,f=e.checked,v=e.defaultChecked,g=e.disabled,p=e.loadingIcon,b=e.checkedChildren,m=e.unCheckedChildren,x=e.onClick,y=e.onChange,C=e.onKeyDown,A=(0,c.A)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),j=(0,u.A)(!1,{value:f,defaultValue:v}),w=(0,r.A)(j,2),k=w[0],P=w[1];function I(e,n){var t=k;return g||(P(t=e),null===y||void 0===y||y(t,n)),t}var O=s()(i,o,(t={},(0,a.A)(t,"".concat(i,"-checked"),k),(0,a.A)(t,"".concat(i,"-disabled"),g),t));return d.createElement("button",Object.assign({},A,{type:"button",role:"switch","aria-checked":k,disabled:g,className:O,ref:n,onKeyDown:function(e){e.which===h.A.LEFT?I(!1,e):e.which===h.A.RIGHT&&I(!0,e),null===C||void 0===C||C(e)},onClick:function(e){var n=I(!k,e);null===x||void 0===x||x(n,e)}}),p,d.createElement("span",{className:"".concat(i,"-inner")},k?b:m))}));f.displayName="Switch";const v=f;var g=t(5741),p=t(19389),b=t(87126),m=t(52370),x=function(e,n){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)n.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(t[l[a]]=e[l[a]])}return t},y=d.forwardRef((function(e,n){var t=e.prefixCls,o=e.size,r=e.disabled,c=e.loading,u=e.className,h=void 0===u?"":u,f=x(e,["prefixCls","size","disabled","loading","className"]),y=d.useContext(g.QO),C=y.getPrefixCls,A=y.direction,j=d.useContext(b.A),w=d.useContext(p.A),k=(null!==r&&void 0!==r?r:w)||c,P=C("switch",t),I=d.createElement("div",{className:"".concat(P,"-handle")},c&&d.createElement(i.A,{className:"".concat(P,"-loading-icon")})),O=s()((0,a.A)((0,a.A)((0,a.A)({},"".concat(P,"-small"),"small"===(o||j)),"".concat(P,"-loading"),c),"".concat(P,"-rtl"),"rtl"===A),h);return d.createElement(m.A,{insertExtraNode:!0},d.createElement(v,(0,l.A)({},f,{prefixCls:P,className:O,disabled:k,ref:n,loadingIcon:I})))}));y.__ANT_SWITCH=!0;const C=y}}]);