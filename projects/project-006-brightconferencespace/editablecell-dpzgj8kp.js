import{r as u,j as e,U as m,ad as y,ac as j,a as E}from"./index-CR7MAnCp.js";import{T as I}from"./index-CGbxNHJV.js";import{R as v}from"./index-DZHBlNgy.js";import{I as C,S as w}from"./index-hYgSyGbc.js";import{I as R,B as g}from"./editorApp-DLWlunXz.js";const k=({initialValue:a,saveInProgress:o,setIsEditing:l,setSaveInProgress:d,save:n,style:i})=>{const[s,c]=u.useState(a);switch(typeof a){case"boolean":return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1em",...i},children:[o&&e.jsx(m,{}),e.jsx(w,{onChange:t=>{c(t==="true")},value:s?"true":"false",options:["true","false"]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(g,{style:{marginRight:2},type:"dashed",children:e.jsx(y,{onClick:()=>n(s),style:{color:"var(--ant-primary-5)"}})}),e.jsx(g,{onClick:()=>{l(!1),d(!1)},type:"dashed",children:e.jsx(j,{style:{color:"gray"}})})]})]});case"string":return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1em",...i},children:[o&&e.jsx(m,{}),e.jsx(R,{spellCheck:!1,autoFocus:!0,onPressEnter:()=>n(s),onBlur:()=>n(s),onChange:t=>{t.stopPropagation(),c(t.target.value)},value:s})]});case"number":case"object":return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1em",...i},children:[o&&e.jsx(m,{}),e.jsx(C,{style:{width:"100%"},autoFocus:!0,onPressEnter:()=>n(s),onBlur:()=>n(s),onChange:t=>c(t),value:s})]});default:return null}},T=({value:a,onChange:o,initialValue:l,validators:d,style:n})=>{const[i,s]=u.useState(!1),[c,t]=u.useState(!1);function x(r){t(!0),o(r).then(()=>{s(!1),t(!1)})}function h(r){if(r===l){s(!1),t(!1);return}if(d?.length){let f=[];return d.forEach(p=>{f.push(p(r))}),Promise.all(f).then(()=>{x(r)}).catch(p=>{E.error(p.message)})}else x(r)}return u.useEffect(()=>{const r=f=>{f.keyCode===27&&s(!1)};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[l]),i?e.jsx(k,{initialValue:l,saveInProgress:c,setIsEditing:s,setSaveInProgress:t,save:h,style:n}):e.jsxs("div",{style:{...n},children:[typeof a=="boolean"?e.jsx(I,{style:{padding:"3px",lineHeight:"1em"},color:a?"green":"red",children:a?"true":"false"}):a,e.jsx(v,{style:{marginLeft:"0.3em",color:"var(--ant-primary-5)"},onClick:()=>{s(!0)}})]})};export{T as E};
