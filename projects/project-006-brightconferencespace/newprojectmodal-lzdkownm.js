import{r as x,j as r,a as b}from"./index-CR7MAnCp.js";import{g as n,F as s,M as P,I as q,B as l,b1 as y}from"./editorApp-DLWlunXz.js";import{u as C}from"./mainLayout-Bh5Jv07c.js";import{h as k}from"./moment-G82_0lEo.js";import{S as p}from"./confirm-D0g1-wZ1.js";import"./SettingOutlined-CpvU3kuL.js";import"./index-DZHBlNgy.js";import"./pageAPI-DIRfwgbE.js";import"./localActiveAPI-BcvpvDpS.js";import"./___vite-browser-external_commonjs-proxy-BMVqCDge.js";import"./useAddNavigateToWindow-CDeW-InD.js";import"./getLocalUrlFromString-DptiwCQQ.js";import"./shared-worker-manager-DgZGRETL.js";import"./variablesAPI-BLoTBpai.js";import"./datasourceTools-eZTvAFyf.js";import"./index-D975UveC.js";import"./details-y3kaUJCc.js";import"./index-KEOervAl.js";import"./index-CGbxNHJV.js";import"./index-hYgSyGbc.js";import"./PlusCircleOutlined-sa3sGDZG.js";import"./formItemPropsWrapper-Bn4cpF3y.js";import"./Styles-B69OPKJM.js";import"./useCustomFonts-ltbbC3EP.js";import"./calcMediaUrl-BdU63MXS.js";import"./modificatorAPI-C5vALgNO.js";import"./renderActionTag-DHoH5FTV.js";const{Option:T}=p,Y=({setOpenNewProjectModal:o})=>{const i=C(e=>e.themesList),c=n(e=>e.myProjects??[]),u=n(e=>e.myTemplates??[]),[a]=s.useForm(),m=()=>{a.submit()};function d(e){return![...c,...u].some(t=>t.attributes.name===e)}const f=({name:e,theme:t})=>{j(!0),y({inputData:{name:e,theme:t}}).then(()=>{o(!1),b.success("Project created")})},[h,j]=x.useState(!1);return r.jsx("div",{onKeyUp:e=>{e.key==="Enter"&&m()},children:r.jsx(P,{maskClosable:!1,title:"Create New Project",open:!0,onCancel:()=>o(!1),footer:[r.jsx(l,{onClick:()=>o(!1),children:"Cancel"},"back"),r.jsx(l,{loading:h,type:"primary",onClick:m,children:"Add new project"},"submit")],children:r.jsxs(s,{labelCol:{xs:{span:9}},wrapperCol:{xs:{span:12}},form:a,initialValues:{name:`New project (${k(new Date).format("MMM Do, h:mm a")})`,theme:i?.[0]?.id,defaultOrientation:"portrait"},onFinish:f,scrollToFirstError:!0,children:[r.jsx(s.Item,{colon:!1,required:!1,name:"name",label:"Name",rules:[{required:!0,message:"This field is required."},()=>({validator(e,t){return t&&d(t)?Promise.resolve():Promise.reject(new Error("Project name must be unique"))}})],children:r.jsx(q,{})}),r.jsx(s.Item,{colon:!1,required:!1,name:"theme",label:"Theme",rules:[{required:!0,message:"This field is required."}],children:r.jsx(p,{children:i?.map(e=>r.jsx(T,{value:e.id,children:e.attributes.name},e.id))})})]})})})};export{Y as default};
