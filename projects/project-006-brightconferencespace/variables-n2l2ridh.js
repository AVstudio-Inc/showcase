const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./actionsOptions-CGfN254I.js","./index-CR7MAnCp.js","./index-D8FflOyX.css","./confirm-D0g1-wZ1.js","./editorApp-DLWlunXz.js","./editorApp-DB0Q8XAf.css","./index-DZHBlNgy.js","./renderActionTag-DHoH5FTV.js","./index-CGbxNHJV.js","./index-DN-vgocH.js","./getLocalUrlFromString-DptiwCQQ.js","./datasourceTools-eZTvAFyf.js","./variablesAPI-BLoTBpai.js","./localActiveAPI-BcvpvDpS.js","./___vite-browser-external_commonjs-proxy-BMVqCDge.js","./calcMediaUrl-BdU63MXS.js","./index-CTNiVJ3s.css","./index-D975UveC.js","./EditableCell-DPZgJ8kP.js","./index-hYgSyGbc.js","./formItemPropsWrapper-Bn4cpF3y.js","./PlusCircleOutlined-sa3sGDZG.js","./index-KEOervAl.js"])))=>i.map(i=>d[i]);
import{R as T,j as e,r as s,ab as I,U as P,a as _,an as R}from"./index-CR7MAnCp.js";import{E as x}from"./EditableCell-DPZgJ8kP.js";import{D as k,f as A,a as w,j as E}from"./confirm-D0g1-wZ1.js";import{f as F,J as D,u as L,z as B,B as g,K as $}from"./editorApp-DLWlunXz.js";import{c as O}from"./variablesAPI-BLoTBpai.js";import{R as b}from"./renderActionTag-DHoH5FTV.js";import{T as N}from"./tableFieldSearchInput-DHhK29EX.js";import{T as z}from"./index-DZHBlNgy.js";import{R as m}from"./PlusCircleOutlined-sa3sGDZG.js";import{P as U}from"./index-D975UveC.js";import"./index-CGbxNHJV.js";import"./index-hYgSyGbc.js";import"./localActiveAPI-BcvpvDpS.js";const J=s.lazy(()=>R(()=>import("./actionsOptions-CGfN254I.js").then(o=>o.v),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url)),{Title:K}=z,M={project:{title:"Project Variables",buttonText:e.jsxs(e.Fragment,{children:[e.jsx(m,{})," Add Project Variable"]})},page:{title:"Page Parameters",buttonText:e.jsxs(e.Fragment,{children:[e.jsx(m,{})," Add Page Parameter"]})},subpage:{title:"Subpage Parameters",buttonText:e.jsxs(e.Fragment,{children:[e.jsx(m,{})," Add Subpage Parameter"]})}},se=T.memo(({tableFor:o})=>{const{projectId:d,pageId:l}=F(),{setNewVariableModalVisible:p}=D(),{title:j,buttonText:f}=M[o],u=L(r=>{const a=r.workingProject?.attributes;return a?o==="project"?a.variables??[]:a.pages.data?.find(t=>t.id===l)?.attributes.parameters??[]:[]}),[h,y]=s.useState(null),[i,V]=s.useState(),v=s.useCallback((r,a)=>{const t=r.name.toLowerCase(),n=a.name.toLowerCase();return t<n?-1:t>n?1:0},[]),C=[{title:e.jsx(N,{setValue:V,value:i}),dataIndex:"name",sorter:v,defaultSortOrder:"ascend"},{title:"Type",dataIndex:"type"},{title:"Default Value",dataIndex:"defaultValue"},{title:"Signal FB Setter",dataIndex:"joinValueSetter_signal_fb"},{title:e.jsxs(e.Fragment,{children:["Side Effect Actions",e.jsx(U,{placement:"top",title:"Reactivity",content:e.jsx("div",{style:{width:"250px"},children:"Run actions when value has been changed."}),trigger:"hover",children:e.jsx($,{style:{marginLeft:7}})})]}),dataIndex:"sideEffects",className:"sideEffectsCell"},{title:"Controls",dataIndex:"controls",width:100}],c=s.useCallback((r,a)=>O({projectId:d,pageId:l,variableData:r,actionType:a}),[l,d]);return s.useEffect(()=>{const r=[],a=i?u.filter(t=>t.name.toLowerCase().includes(i.toLowerCase().trim())):u;for(const t of a)r.push({key:`variable_${t.name}`,name:t.name,type:e.jsx(e.Fragment,{children:e.jsx(b,{crestronLikeTypesNaming:!1,style:{margin:1},type:t.type,sub:t.type==="boolean"&&t?.waitForLoadingUi?" ui loader":""})}),defaultValue:e.jsx(x,{onChange:n=>c({...t,defaultValue:n},"update"),initialValue:t.defaultValue,value:t.defaultValue}),joinValueSetter_signal_fb:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(b,{style:{margin:1},type:t.type,sub:"FB"}),e.jsx(x,{style:{marginLeft:".5em"},onChange:n=>c({...t,joinValueSetter_signal_fb:n},"update"),initialValue:t.joinValueSetter_signal_fb??"",value:t.joinValueSetter_signal_fb??"",validators:[n=>B(n).catch(S=>(_.error(S.message),Promise.reject()))]})]}),sideEffects:e.jsx(s.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(J,{actionsArr:t?.actions??[],elementType:"variable",variableActionFor:t})}),controls:e.jsx(k.Button,{menu:{items:[{key:"removeVariable",danger:!0,icon:e.jsx(w,{}),label:"Delete",onClick:()=>A({title:`Delete ${t.name}?`,icon:e.jsx(I,{}),content:"Are you sure? It cannot be undone.",okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},onOk:()=>c(t,"delete"),onCancel:()=>console.log("cancel variable delete")})}]}})});y(r)},[d,i,u,l,c]),e.jsxs(e.Fragment,{children:[e.jsx(K,{id:"Variables",style:{margin:"15px 0"},level:5,children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:j}),e.jsx(g,{onClick:()=>p(l?"parameter":"project"),children:f})]})}),e.jsxs(e.Fragment,{children:[e.jsx(E,{columns:C,dataSource:h||[],pagination:!1}),e.jsx(g,{style:{marginTop:15},type:"primary",onClick:()=>p(l?"parameter":"project"),children:f},"submit")]})]})});export{se as default};
