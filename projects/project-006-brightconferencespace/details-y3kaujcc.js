import{r as a,v as et,l as ee,f as J,w as Se,F as Q,o as Y,H as oe,k as tt,B as yt,x as Ve,M as Ct,j as fe,ab as St,a as xt,R as Et}from"./index-CR7MAnCp.js";import{s as Mt,f as kt,e as Rt,d as Dt}from"./confirm-D0g1-wZ1.js";import{S as ne,U as wt,T as Tt,a as $e,u as Fe,y as rt,x as _t,h as Ne,s as je,r as Pt,t as pt}from"./editorApp-DLWlunXz.js";import{g as $t}from"./useAddNavigateToWindow-CDeW-InD.js";var me=a.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0});function Oe(e,n,r){return(e-n)/(r-n)}function Le(e,n,r,t){var o=Oe(n,r,t),i={};switch(e){case"rtl":i.right="".concat(o*100,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(o*100,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(o*100,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(o*100,"%"),i.transform="translateX(-50%)";break}return i}function Ce(e,n){return Array.isArray(e)?e[n]:e}var Ot=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],Ft=a.forwardRef(function(e,n){var r,t,o=e.prefixCls,i=e.value,v=e.valueIndex,g=e.onStartMove,S=e.style,x=e.render,y=e.dragging,l=e.onOffsetChange,f=et(e,Ot),s=a.useContext(me),u=s.min,m=s.max,d=s.direction,h=s.disabled,c=s.range,C=s.tabIndex,p=s.ariaLabelForHandle,w=s.ariaLabelledByForHandle,N=s.ariaValueTextFormatterForHandle,k="".concat(o,"-handle"),R=function(B){h||g(B,v)},D=function(B){if(!h){var _=null;switch(B.which||B.keyCode){case ne.LEFT:_=d==="ltr"||d==="btt"?-1:1;break;case ne.RIGHT:_=d==="ltr"||d==="btt"?1:-1;break;case ne.UP:_=d!=="ttb"?1:-1;break;case ne.DOWN:_=d!=="ttb"?-1:1;break;case ne.HOME:_="min";break;case ne.END:_="max";break;case ne.PAGE_UP:_=2;break;case ne.PAGE_DOWN:_=-2;break}_!==null&&(B.preventDefault(),l(_,v))}},E=Le(d,i,u,m),$=a.createElement("div",ee({ref:n,className:Se(k,(r={},Q(r,"".concat(k,"-").concat(v+1),c),Q(r,"".concat(k,"-dragging"),y),r)),style:J(J({},E),S),onMouseDown:R,onTouchStart:R,onKeyDown:D,tabIndex:h?null:Ce(C,v),role:"slider","aria-valuemin":u,"aria-valuemax":m,"aria-valuenow":i,"aria-disabled":h,"aria-label":Ce(p,v),"aria-labelledby":Ce(w,v),"aria-valuetext":(t=Ce(N,v))===null||t===void 0?void 0:t(i)},f));return x&&($=x($,{index:v,prefixCls:o,value:i,dragging:y})),$}),Nt=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],jt=a.forwardRef(function(e,n){var r=e.prefixCls,t=e.style,o=e.onStartMove,i=e.onOffsetChange,v=e.values,g=e.handleRender,S=e.draggingIndex,x=et(e,Nt),y=a.useRef({});return a.useImperativeHandle(n,function(){return{focus:function(f){var s;(s=y.current[f])===null||s===void 0||s.focus()}}}),a.createElement(a.Fragment,null,v.map(function(l,f){return a.createElement(Ft,ee({ref:function(u){u?y.current[f]=u:delete y.current[f]},dragging:S===f,prefixCls:r,style:Ce(t,f),key:f,value:l,valueIndex:f,onStartMove:o,onOffsetChange:i,render:g},x))}))});function Ze(e){var n="touches"in e?e.touches[0]:e;return{pageX:n.pageX,pageY:n.pageY}}function Lt(e,n,r,t,o,i,v,g,S){var x=a.useState(null),y=Y(x,2),l=y[0],f=y[1],s=a.useState(-1),u=Y(s,2),m=u[0],d=u[1],h=a.useState(r),c=Y(h,2),C=c[0],p=c[1],w=a.useState(r),N=Y(w,2),k=N[0],R=N[1],D=a.useRef(null),E=a.useRef(null);a.useEffect(function(){m===-1&&p(r)},[r,m]),a.useEffect(function(){return function(){document.removeEventListener("mousemove",D.current),document.removeEventListener("mouseup",E.current),document.removeEventListener("touchmove",D.current),document.removeEventListener("touchend",E.current)}},[]);var $=function(T,O){C.some(function(I,W){return I!==T[W]})&&(O!==void 0&&f(O),p(T),v(T))},j=function(T,O){if(T===-1){var I=k[0],W=k[k.length-1],ie=t-I,V=o-W,z=O*(o-t);z=Math.max(z,ie),z=Math.min(z,V);var U=i(I+z);z=U-I;var Z=k.map(function(ge){return ge+z});$(Z)}else{var K=(o-t)*O,G=oe(C);G[T]=k[T];var se=S(G,K,T,"dist");$(se.values,se.value)}},B=a.useRef(j);B.current=j;var _=function(T,O){T.stopPropagation();var I=r[O];d(O),f(I),R(r);var W=Ze(T),ie=W.pageX,V=W.pageY,z=function(K){K.preventDefault();var G=Ze(K),se=G.pageX,ge=G.pageY,xe=se-ie,Ee=ge-V,te=e.current.getBoundingClientRect(),ue=te.width,ce=te.height,L;switch(n){case"btt":L=-Ee/ce;break;case"ttb":L=Ee/ce;break;case"rtl":L=-xe/ue;break;default:L=xe/ue}B.current(O,L)},U=function Z(K){K.preventDefault(),document.removeEventListener("mouseup",Z),document.removeEventListener("mousemove",z),document.removeEventListener("touchend",Z),document.removeEventListener("touchmove",z),D.current=null,E.current=null,d(-1),g()};document.addEventListener("mouseup",U),document.addEventListener("mousemove",z),document.addEventListener("touchend",U),document.addEventListener("touchmove",z),D.current=z,E.current=U},A=a.useMemo(function(){var X=oe(r).sort(function(O,I){return O-I}),T=oe(C).sort(function(O,I){return O-I});return X.every(function(O,I){return O===T[I]})?C:r},[r,C]);return[m,l,A,_]}function Ht(e){var n=e.prefixCls,r=e.style,t=e.start,o=e.end,i=e.index,v=e.onStartMove,g=a.useContext(me),S=g.direction,x=g.min,y=g.max,l=g.disabled,f=g.range,s="".concat(n,"-track"),u=Oe(t,x,y),m=Oe(o,x,y),d=function(C){!l&&v&&v(C,-1)},h={};switch(S){case"rtl":h.right="".concat(u*100,"%"),h.width="".concat(m*100-u*100,"%");break;case"btt":h.bottom="".concat(u*100,"%"),h.height="".concat(m*100-u*100,"%");break;case"ttb":h.top="".concat(u*100,"%"),h.height="".concat(m*100-u*100,"%");break;default:h.left="".concat(u*100,"%"),h.width="".concat(m*100-u*100,"%")}return a.createElement("div",{className:Se(s,f&&"".concat(s,"-").concat(i+1)),style:J(J({},h),r),onMouseDown:d,onTouchStart:d})}function Bt(e){var n=e.prefixCls,r=e.style,t=e.values,o=e.startPoint,i=e.onStartMove,v=a.useContext(me),g=v.included,S=v.range,x=v.min,y=a.useMemo(function(){if(!S){if(t.length===0)return[];var l=o??x,f=t[0];return[{start:Math.min(l,f),end:Math.max(l,f)}]}for(var s=[],u=0;u<t.length-1;u+=1)s.push({start:t[u],end:t[u+1]});return s},[t,S,o,x]);return g?y.map(function(l,f){var s=l.start,u=l.end;return a.createElement(Ht,{index:f,prefixCls:n,style:Ce(r,f),start:s,end:u,key:f,onStartMove:i})}):null}function It(e){var n=e.prefixCls,r=e.style,t=e.children,o=e.value,i=e.onClick,v=a.useContext(me),g=v.min,S=v.max,x=v.direction,y=v.includedStart,l=v.includedEnd,f=v.included,s="".concat(n,"-text"),u=Le(x,o,g,S);return a.createElement("span",{className:Se(s,Q({},"".concat(s,"-active"),f&&y<=o&&o<=l)),style:J(J({},u),r),onMouseDown:function(d){d.stopPropagation()},onClick:function(){i(o)}},t)}function zt(e){var n=e.prefixCls,r=e.marks,t=e.onClick,o="".concat(n,"-mark");return r.length?a.createElement("div",{className:o},r.map(function(i){var v=i.value,g=i.style,S=i.label;return a.createElement(It,{key:v,prefixCls:o,style:g,value:v,onClick:t},S)})):null}function At(e){var n=e.prefixCls,r=e.value,t=e.style,o=e.activeStyle,i=a.useContext(me),v=i.min,g=i.max,S=i.direction,x=i.included,y=i.includedStart,l=i.includedEnd,f="".concat(n,"-dot"),s=x&&y<=r&&r<=l,u=J(J({},Le(S,r,v,g)),typeof t=="function"?t(r):t);return s&&(u=J(J({},u),typeof o=="function"?o(r):o)),a.createElement("span",{className:Se(f,Q({},"".concat(f,"-active"),s)),style:u})}function Gt(e){var n=e.prefixCls,r=e.marks,t=e.dots,o=e.style,i=e.activeStyle,v=a.useContext(me),g=v.min,S=v.max,x=v.step,y=a.useMemo(function(){var l=new Set;if(r.forEach(function(s){l.add(s.value)}),t&&x!==null)for(var f=g;f<=S;)l.add(f),f+=x;return Array.from(l)},[g,S,x,t,r]);return a.createElement("div",{className:"".concat(n,"-step")},y.map(function(l){return a.createElement(At,{prefixCls:n,key:l,value:l,style:o,activeStyle:i})}))}function Xt(e,n,r,t,o,i){var v=a.useCallback(function(s){var u=isFinite(s)?s:e;return u=Math.min(n,s),u=Math.max(e,u),u},[e,n]),g=a.useCallback(function(s){if(r!==null){var u=e+Math.round((v(s)-e)/r)*r,m=function(C){return(String(C).split(".")[1]||"").length},d=Math.max(m(r),m(n),m(e)),h=Number(u.toFixed(d));return e<=h&&h<=n?h:null}return null},[r,e,n,v]),S=a.useCallback(function(s){var u=v(s),m=t.map(function(c){return c.value});r!==null&&m.push(g(s)),m.push(e,n);var d=m[0],h=n-e;return m.forEach(function(c){var C=Math.abs(u-c);C<=h&&(d=c,h=C)}),d},[e,n,t,r,v,g]),x=function s(u,m,d){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof m=="number"){var c,C=u[d],p=C+m,w=[];t.forEach(function(E){w.push(E.value)}),w.push(e,n),w.push(g(C));var N=m>0?1:-1;h==="unit"?w.push(g(C+N*r)):w.push(g(p)),w=w.filter(function(E){return E!==null}).filter(function(E){return m<0?E<=C:E>=C}),h==="unit"&&(w=w.filter(function(E){return E!==C}));var k=h==="unit"?C:p;c=w[0];var R=Math.abs(c-k);if(w.forEach(function(E){var $=Math.abs(E-k);$<R&&(c=E,R=$)}),c===void 0)return m<0?e:n;if(h==="dist")return c;if(Math.abs(m)>1){var D=oe(u);return D[d]=c,s(D,m-N,d,h)}return c}else{if(m==="min")return e;if(m==="max")return n}},y=function(u,m,d){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",c=u[d],C=x(u,m,d,h);return{value:C,changed:C!==c}},l=function(u){return i===null&&u===0||typeof i=="number"&&u<i},f=function(u,m,d){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",c=u.map(S),C=c[d],p=x(c,m,d,h);if(c[d]=p,o===!1){var w=i||0;d>0&&c[d-1]!==C&&(c[d]=Math.max(c[d],c[d-1]+w)),d<c.length-1&&c[d+1]!==C&&(c[d]=Math.min(c[d],c[d+1]-w))}else if(typeof i=="number"||i===null){for(var N=d+1;N<c.length;N+=1)for(var k=!0;l(c[N]-c[N-1])&&k;){var R=y(c,1,N);c[N]=R.value,k=R.changed}for(var D=d;D>0;D-=1)for(var E=!0;l(c[D]-c[D-1])&&E;){var $=y(c,-1,D-1);c[D-1]=$.value,E=$.changed}for(var j=c.length-1;j>0;j-=1)for(var B=!0;l(c[j]-c[j-1])&&B;){var _=y(c,-1,j-1);c[j-1]=_.value,B=_.changed}for(var A=0;A<c.length-1;A+=1)for(var X=!0;l(c[A+1]-c[A])&&X;){var T=y(c,1,A+1);c[A+1]=T.value,X=T.changed}}return{value:c[d],values:c}};return[S,f]}var Yt=a.forwardRef(function(e,n){var r,t=e.prefixCls,o=t===void 0?"rc-slider":t,i=e.className,v=e.style,g=e.disabled,S=g===void 0?!1:g,x=e.autoFocus,y=e.onFocus,l=e.onBlur,f=e.min,s=f===void 0?0:f,u=e.max,m=u===void 0?100:u,d=e.step,h=d===void 0?1:d,c=e.value,C=e.defaultValue,p=e.range,w=e.count,N=e.onChange,k=e.onBeforeChange,R=e.onAfterChange,D=e.allowCross,E=D===void 0?!0:D,$=e.pushable,j=$===void 0?!1:$,B=e.draggableTrack,_=e.reverse,A=e.vertical,X=e.included,T=X===void 0?!0:X,O=e.startPoint,I=e.trackStyle,W=e.handleStyle,ie=e.railStyle,V=e.dotStyle,z=e.activeDotStyle,U=e.marks,Z=e.dots,K=e.handleRender,G=e.tabIndex,se=G===void 0?0:G,ge=e.ariaLabelForHandle,xe=e.ariaLabelledByForHandle,Ee=e.ariaValueTextFormatterForHandle,te=a.useRef(),ue=a.useRef(),ce=a.useMemo(function(){return A?_?"ttb":"btt":_?"rtl":"ltr"},[_,A]),L=a.useMemo(function(){return isFinite(s)?s:0},[s]),he=a.useMemo(function(){return isFinite(m)?m:100},[m]),le=a.useMemo(function(){return h!==null&&h<=0?1:h},[h]),at=a.useMemo(function(){return j===!0?le:j>=0?j:!1},[j,le]),Re=a.useMemo(function(){var F=Object.keys(U||{});return F.map(function(M){var b=U[M],H={value:Number(M)};return b&&tt(b)==="object"&&!a.isValidElement(b)&&("label"in b||"style"in b)?(H.style=b.style,H.label=b.label):H.label=b,H}).filter(function(M){var b=M.label;return b||typeof b=="number"}).sort(function(M,b){return M.value-b.value})},[U]),nt=Xt(L,he,le,Re,E,at),He=Y(nt,2),De=He[0],Be=He[1],ot=wt(C,{value:c}),Ie=Y(ot,2),re=Ie[0],it=Ie[1],q=a.useMemo(function(){var F=re==null?[]:Array.isArray(re)?re:[re],M=Y(F,1),b=M[0],H=b===void 0?L:b,P=re===null?[]:[H];if(p){if(P=oe(F),w||re===void 0){var ye=w>=0?w+1:2;for(P=P.slice(0,ye);P.length<ye;){var ve;P.push((ve=P[P.length-1])!==null&&ve!==void 0?ve:L)}}P.sort(function(ae,Me){return ae-Me})}return P.forEach(function(ae,Me){P[Me]=De(ae)}),P},[re,p,L,w,De]),we=a.useRef(q);we.current=q;var de=function(M){return p?M:M[0]},_e=function(M){var b=oe(M).sort(function(H,P){return H-P});N&&!Mt(b,we.current)&&N(de(b)),it(b)},ze=function(M){if(!S){var b=0,H=he-L;q.forEach(function(ye,ve){var ae=Math.abs(M-ye);ae<=H&&(H=ae,b=ve)});var P=oe(q);P[b]=M,p&&!q.length&&w===void 0&&P.push(M),k?.(de(P)),_e(P),R?.(de(P))}},st=function(M){M.preventDefault();var b=ue.current.getBoundingClientRect(),H=b.width,P=b.height,ye=b.left,ve=b.top,ae=b.bottom,Me=b.right,Je=M.clientX,Qe=M.clientY,ke;switch(ce){case"btt":ke=(ae-Qe)/P;break;case"ttb":ke=(Qe-ve)/P;break;case"rtl":ke=(Me-Je)/H;break;default:ke=(Je-ye)/H}var bt=L+ke*(he-L);ze(De(bt))},ut=a.useState(null),Ae=Y(ut,2),Pe=Ae[0],Ge=Ae[1],ct=function(M,b){if(!S){var H=Be(q,M,b);k?.(de(q)),_e(H.values),R?.(de(H.values)),Ge(H.value)}};a.useEffect(function(){if(Pe!==null){var F=q.indexOf(Pe);F>=0&&te.current.focus(F)}Ge(null)},[Pe]);var lt=a.useMemo(function(){return B&&le===null?!1:B},[B,le]),dt=function(){R?.(de(we.current))},vt=Lt(ue,ce,q,L,he,De,_e,dt,Be),Te=Y(vt,4),Xe=Te[0],ft=Te[1],pe=Te[2],mt=Te[3],Ye=function(M,b){mt(M,b),k?.(de(we.current))},Ue=Xe!==-1;a.useEffect(function(){if(!Ue){var F=q.lastIndexOf(ft);te.current.focus(F)}},[Ue]);var be=a.useMemo(function(){return oe(pe).sort(function(F,M){return F-M})},[pe]),gt=a.useMemo(function(){return p?[be[0],be[be.length-1]]:[L,be[0]]},[be,p,L]),We=Y(gt,2),Ke=We[0],qe=We[1];a.useImperativeHandle(n,function(){return{focus:function(){te.current.focus(0)},blur:function(){var M=document,b=M.activeElement;ue.current.contains(b)&&b?.blur()}}}),a.useEffect(function(){x&&te.current.focus(0)},[]);var ht=a.useMemo(function(){return{min:L,max:he,direction:ce,disabled:S,step:le,included:T,includedStart:Ke,includedEnd:qe,range:p,tabIndex:se,ariaLabelForHandle:ge,ariaLabelledByForHandle:xe,ariaValueTextFormatterForHandle:Ee}},[L,he,ce,S,le,T,Ke,qe,p,se,ge,xe,Ee]);return a.createElement(me.Provider,{value:ht},a.createElement("div",{ref:ue,className:Se(o,i,(r={},Q(r,"".concat(o,"-disabled"),S),Q(r,"".concat(o,"-vertical"),A),Q(r,"".concat(o,"-horizontal"),!A),Q(r,"".concat(o,"-with-marks"),Re.length),r)),style:v,onMouseDown:st},a.createElement("div",{className:"".concat(o,"-rail"),style:ie}),a.createElement(Bt,{prefixCls:o,style:I,values:be,startPoint:O,onStartMove:lt?Ye:null}),a.createElement(Gt,{prefixCls:o,marks:Re,dots:Z,style:V,activeStyle:z}),a.createElement(jt,{ref:te,prefixCls:o,style:W,values:pe,draggingIndex:Xe,onStartMove:Ye,onOffsetChange:ct,onFocus:y,onBlur:l,handleRender:K}),a.createElement(zt,{prefixCls:o,marks:Re,onClick:ze})))}),Ut=a.forwardRef(function(e,n){var r=e.open,t=a.useRef(null),o=a.useRef(null);function i(){Ve.cancel(o.current),o.current=null}function v(){o.current=Ve(function(){var g;(g=t.current)===null||g===void 0||g.forcePopupAlign(),o.current=null})}return a.useEffect(function(){return r?v():i(),i},[r,e.title]),a.createElement(Tt,ee({ref:yt(t,n)},e))}),Wt=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r},ur=a.forwardRef(function(e,n){var r=a.useContext(Ct),t=r.getPrefixCls,o=r.direction,i=r.getPopupContainer,v=a.useState({}),g=Y(v,2),S=g[0],x=g[1],y=function(R,D){x(function(E){return ee(ee({},E),Q({},R,D))})},l=function(R,D){return R||(D?o==="rtl"?"left":"right":"top")},f=e.prefixCls,s=e.range,u=e.className,m=Wt(e,["prefixCls","range","className"]),d=t("slider",f),h=Se(u,Q({},"".concat(d,"-rtl"),o==="rtl"));o==="rtl"&&!m.vertical&&(m.reverse=!m.reverse);var c=a.useMemo(function(){return s?tt(s)==="object"?[!0,s.draggableTrack]:[!0,!1]:[!1]},[s]),C=Y(c,2),p=C[0],w=C[1],N=function(R,D){var E,$=D.index,j=D.dragging,B=t(),_=e.tooltip,A=_===void 0?{}:_,X=e.vertical,T=ee({formatter:(E=e.tipFormatter)!==null&&E!==void 0?E:function(G){return typeof G=="number"?G.toString():""},open:e.tooltipVisible,placement:e.tooltipPlacement,getPopupContainer:e.getTooltipPopupContainer},A),O=T.open,I=T.placement,W=T.getPopupContainer,ie=T.prefixCls,V=T.formatter,z=V?S[$]||j:!1,U=O||O===void 0&&z,Z=ee(ee({},R.props),{onMouseEnter:function(){return y($,!0)},onMouseLeave:function(){return y($,!1)}}),K=t("tooltip",ie);return a.createElement(Ut,{prefixCls:K,title:V?V(D.value):"",open:U,placement:l(I,X),transitionName:"".concat(B,"-zoom-down"),key:$,overlayClassName:"".concat(d,"-tooltip"),getPopupContainer:W||i},a.cloneElement(R,Z))};return a.createElement(Yt,ee({},m,{step:m.step,range:p,draggableTrack:w,className:h,ref:n,prefixCls:d,handleRender:N}))});const cr=({type:e,updatedGuides:n})=>{const r=Fe.getState().workingProject,t=r?.id,o=r?.attributes.guides??{};if(!t)throw new Error("No project id found");return rt({projectId:t,inputData:{guides:{...o,[e]:n}}})},lr=()=>{const e=()=>{const n=Fe.getState().workingProject?.id;if(!n)throw new Error("No project id found");return rt({projectId:n,inputData:{guides:{vertical:[],horizontal:[]}}})};return kt({icon:fe.jsx(St,{}),title:"Remove all guides?",content:"Please confirm deleting all guides",okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},onOk:()=>e(),onCancel:()=>{}})},dr=({editorRenderFrameRef:e})=>{const[n,r]=a.useState(null),[t,o]=a.useState(null),i=$e(l=>l.guiFrameWidth),v=$e(l=>l.guiFrameHeight),[g,S]=a.useState({left:0,top:0}),x=Fe(l=>l.workingProject?.attributes.guides);a.useEffect(()=>{if(!n||!t)return;const{horizontal:l=[],vertical:f=[]}=x??{};n.loadGuides(f),t.loadGuides(l)},[n,t,x]),a.useEffect(()=>{const l=()=>{let{left:s,top:u}=$t({targetHtmlElement:e.current});s=s*-1,u=u*-1,S({left:s,top:u})};window.addEventListener("resize",l);const f=new ResizeObserver(l);return e.current&&f.observe(e.current),()=>{window.removeEventListener("resize",l),f.disconnect()}},[e]),a.useEffect(()=>{n?.resize(),t?.resize()},[i,v,n,t]);const y=a.useCallback(({left:l,top:f})=>{!t||!n||(t.scroll(l),n.scrollGuides(l),n.scroll(f),t.scrollGuides(f),n.resize(),t.resize())},[n,t]);return a.useEffect(()=>{const{top:l,left:f}=g;y({top:l,left:f})},[g,y]),{setRulerLeftInstance:r,setRulerTopInstance:o,handleScrollGuides:y}},Kt=async()=>{const e=await Ne.get("/api/gettestdevices",{headers:je()}).then(t=>t?.data?.data?t.data.data:null).catch(t=>{console.log("Get test devices error occurred:",t)}),{attributes:{userDefinedTestDevices:n=[],predefinedTestDevices:r=[]}}=e??{};return{userDefinedTestDevices:n,predefinedTestDevices:r}},qt=async e=>{const r=Qt.getState().userDefinedTestDevices.find(t=>t.uid===e)?.id;if(!r)throw new Error("Test device to delete not found");return Ne.delete(`/api/test-devices/${r}`,{headers:je()})},Jt=async e=>{const n=_t(),r=await Ne.post("/api/test-devices/?populate=device",{data:{device:{...e,uid:n}}},{headers:je()}).then(i=>i.data.data).catch(i=>{console.log("Add test device error occurred:",i)}),{device:t,...o}=r.attributes;return{...t,...o}},Qt=Pt()((e,n)=>({userDefinedTestDevices:[],predefinedTestDevices:[],fetchTestDevices:async()=>{const{userDefinedTestDevices:r,predefinedTestDevices:t}=await Kt();e({userDefinedTestDevices:r,predefinedTestDevices:t})},removeUserTestDevice:async r=>{await qt(r).then(()=>{const o=n().userDefinedTestDevices.filter(i=>i.uid!==r);e({userDefinedTestDevices:o})}).catch(t=>{console.log(t),xt.error("Error while deleting test device")})},createUserTestDevice:async r=>{const t=await Jt(r);e(i=>({userDefinedTestDevices:[...i.userDefinedTestDevices,t]}));const o=$e.getState().updateEnvStore;o({selectedTestDevice:t})}}),pt.isEqual);var Vt="details_detailsBox__1xcwu3l0",Zt="details_summaryBox__1xcwu3l1",er="details_summaryIconHolder__1xcwu3l2",tr="details_openStateIcon__1xcwu3l3",rr="details_closedStateIcon__1xcwu3l4",ar="details_contentBox__1xcwu3l5";const vr=Et.memo(({children:e,summary:n,initialOpen:r=!1})=>fe.jsxs("details",{open:r,className:Vt,children:[fe.jsxs("summary",{className:Zt,children:[fe.jsxs("div",{className:er,children:[fe.jsx(Rt,{className:rr}),fe.jsx(Dt,{className:tr})]}),n]}),fe.jsx("div",{className:ar,children:e})]}));export{vr as D,ur as S,cr as a,dr as b,lr as h,Qt as u};
