/*! For license information please see 7578.02bcdcb4.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[7578],{77578:(t,e,n)=>{function r(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function i(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function o(t){var e=t;if("undefined"===typeof e){if("undefined"===typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function a(t,e){try{return new RegExp(t,"g").exec(e)}catch(n){return null}}function s(){if("undefined"===typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}function u(t){return t.replace(/_/g,".")}function l(t,e){var n=null,i="-1";return r(t,(function(t){var r=a("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!r||t.brand)&&(n=t,i=r[3]||"-1",t.versionAlias?i=t.versionAlias:t.versionTest&&(i=function(t,e){var n=a("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}(t.versionTest.toLowerCase(),e)||i),i=u(i),!0)})),{preset:n,version:i}}function c(t,e){var n={brand:"",version:"-1"};return r(t,(function(t){var r=f(e,t);return!!r&&(n.brand=t.id,n.version=t.versionAlias||r.version,"-1"!==n.version)})),n}function f(t,e){return i(t,(function(t){var n=t.brand;return a(""+e.test,n.toLowerCase())}))}n.r(e),n.d(e,{Clippable:()=>Aa,DIRECTIONS:()=>tn,Draggable:()=>si,EdgeDraggable:()=>as,InitialMoveable:()=>Es,MOVEABLE_ABLES:()=>us,MOVEABLE_EVENTS:()=>ls,MOVEABLE_METHODS:()=>wn,MOVEABLE_PROPS:()=>cs,Pinchable:()=>na,Resizable:()=>fi,Rotatable:()=>bi,Roundable:()=>Xa,Scalable:()=>ia,Snappable:()=>Yi,Warpable:()=>sa,calculateElementPosition:()=>On,default:()=>Ss,getElementInfo:()=>Qa,makeAble:()=>Je,makeMoveable:()=>Ds});var p=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],d=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],h=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],v=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],g=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function m(t){return!!l(v,t).preset}function b(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),a=t&&t.fullVersionList,s=e.mobile||!1,l=n[0],b=(t&&t.platform||e.platform||navigator.platform).toLowerCase(),x={name:l.brand,version:l.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!c(v,n).brand||m(o())},y={name:"unknown",version:"-1",majorVersion:-1};x.webkit=!x.chromium&&r(h,(function(t){return f(n,t)}));var E=c(d,n);if(x.chromium=!!E.brand,x.chromiumVersion=E.version,!x.chromium){var S=c(h,n);x.webkit=!!S.brand,x.webkitVersion=S.version}var D=i(g,(function(t){return new RegExp(""+t.test,"g").exec(b)}));if(y.name=D?D.id:"",t&&(y.version=t.platformVersion),a&&a.length){var C=c(p,a);x.name=C.brand||x.name,x.version=C.version||x.version}else{var w=c(p,n);x.name=w.brand||x.name,x.version=w.brand&&t?t.uaFullVersion:w.version}return x.webkit&&(y.name=s?"ios":"mac"),"ios"===y.name&&x.webview&&(x.version="-1"),y.version=u(y.version),x.version=u(x.version),y.majorVersion=parseInt(y.version,10),x.majorVersion=parseInt(x.version,10),{browser:x,os:y,isMobile:s,isHints:!0}}function x(t){return"undefined"===typeof t&&s()?b():function(t){var e=o(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:m(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=l(p,e),s=a.preset,u=a.version,c=l(g,e),f=c.preset,v=c.version,b=l(d,e);if(r.chromium=!!b.preset,r.chromiumVersion=b.version,!r.chromium){var x=l(h,e);r.webkit=!!x.preset,r.webkitVersion=x.version}return f&&(i.name=f.id,i.version=v,i.majorVersion=parseInt(v,10)),s&&(r.name=s.id,r.version=u,r.webview&&"ios"===i.name&&"safari"!==r.name&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}(t)}const y=x;function E(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function S(t,e){return function(n){n&&(t[e]=n)}}function D(t,e,n){return function(r){r&&(t[e][n]=r)}}var C="function",w="object",M="string",R="number",O="undefined",_=typeof window!==O,T=typeof document!==O&&document,P=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],z=1e-7,G={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function k(t,e,n,r){return(t*r+e*n)/(n+r)}function B(t){return typeof t===O}function I(t){return t&&typeof t===w}function A(t){return Array.isArray(t)}function F(t){return typeof t===M}function N(t){return typeof t===R}function Y(t){return typeof t===C}function q(t,e,n,r,i){return X(t,e,n)?n:function(t,e,n,r,i){for(var o,a=function(n){var a=e[n].trim();if(a===t.close&&!X(t,e,n))return{value:n};var s=n,u=K(i,(function(t){return t.open===a}));if(u&&(s=q(u,e,n,r,i)),-1===s)return o=n,"break";o=n=s},s=n;s<r;++s){var u=a(s);if(s=o,"object"===typeof u)return u.value;if("break"===u)break}return-1}(t,e,n+1,r,i)}function X(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function W(t,e){var n=F(e)?{separator:e}:e,r=n.separator,i=void 0===r?",":r,o=n.isSeparateFirst,a=n.isSeparateOnlyOpenClose,s=n.isSeparateOpenClose,u=void 0===s?a:s,l=n.openCloseCharacters,c=void 0===l?P:l,f=c.map((function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n})).join("|"),p=new RegExp("(\\s*"+i+"\\s*|"+f+"|\\s+)","g"),d=t.split(p).filter((function(t){return t&&"undefined"!==t})),h=d.length,v=[],g=[];function m(){return!!g.length&&(v.push(g.join("")),g=[],!0)}for(var b,x=function(e){var n=d[e].trim(),r=e,s=K(c,(function(t){return t.open===n})),l=K(c,(function(t){return t.close===n}));if(s){if(-1!==(r=q(s,d,e,h,c))&&u)return m()&&o?(b=e,"break"):(v.push(d.slice(e,r+1).join("")),e=r,o?(b=e,"break"):(b=e,"continue"))}else{if(l&&!X(l,d,e)){var f=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(c);return f.splice(c.indexOf(l),1),{value:W(t,{separator:i,isSeparateFirst:o,isSeparateOnlyOpenClose:a,isSeparateOpenClose:u,openCloseCharacters:f})}}if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(n,i)&&!a)return m(),o?(b=e,"break"):(b=e,"continue")}-1===r&&(r=h-1),g.push(d.slice(e,r+1).join("")),b=e=r},y=0;y<h;++y){var E=x(y);if(y=b,"object"===typeof E)return E.value;if("break"===E)break}return g.length&&v.push(g.join("")),v}function H(t){return W(t,"")}function L(t){return W(t,",")}function j(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function V(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function U(){return Date.now?Date.now():(new Date).getTime()}function Z(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function K(t,e,n){var r=Z(t,e);return r>-1?t[r]:n}var $=function(){var t=U(),e=_&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var n=U();return setTimeout((function(){e(n-t)}),1e3/60)}}(),J=function(){var t=_&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function Q(t){return Object.keys(t)}function tt(t,e){var n=V(t),r=n.value,i=n.unit;if(I(e)){var o=e[i];if(o){if(Y(o))return o(r);if(G[i])return G[i](r,o)}}else if("%"===i)return r*e/100;return G[i]?G[i](r):r}function et(t,e,n){return Math.max(e,Math.min(t,n))}function nt(t,e,n,r){return void 0===r&&(r=t[0]/t[1]),[[ut(e[0],z),ut(e[0]/r,z)],[ut(e[1]*r,z),ut(e[1],z)]].filter((function(t){return t.every((function(t,r){var i=e[r],o=ut(i,z);return n?t<=i||t<=o:t>=i||t>=o}))}))[0]||t}function rt(t,e,n,r){if(!r)return t.map((function(t,r){return et(t,e[r],n[r])}));var i=t[0],o=t[1],a=!0===r?i/o:r,s=nt(t,e,!1,a),u=s[0],l=s[1],c=nt(t,n,!0,a),f=c[0],p=c[1];return i<u||o<l?(i=u,o=l):(i>f||o>p)&&(i=f,o=p),[i,o]}function it(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function ot(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+2*Math.PI}function at(t){var e=function(t){return[0,1].map((function(e){return it(t.map((function(t){return t[e]})))}))}(t),n=ot(e,t[0]),r=ot(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function st(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function ut(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function lt(t,e){return t.forEach((function(n,r){t[r]=ut(t[r],e)})),t}function ct(t,e){-1===t.indexOf(e)&&t.push(e)}function ft(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function pt(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function dt(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function ht(t,e,n,r){t.addEventListener(e,n,r)}function vt(t,e,n,r){t.removeEventListener(e,n,r)}function gt(t){return(null===t||void 0===t?void 0:t.ownerDocument)||T}function mt(t){return gt(t).documentElement}function bt(t){return gt(t).body}function xt(t){var e;return(null===(e=null===t||void 0===t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView)||window}function yt(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Et(t){return I(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}function St(t,e,n,r,i,o){for(var a=0;a<i;++a){var s=n+a*i,u=r+a*i;t[s]+=t[u]*o,e[s]+=e[u]*o}}function Dt(t,e,n,r,i){for(var o=0;o<i;++o){var a=n+o*i,s=r+o*i,u=t[a],l=e[a];t[a]=t[s],t[s]=u,e[a]=e[s],e[s]=l}}function Ct(t,e,n,r,i){for(var o=0;o<r;++o){var a=n+o*r;t[a]/=i,e[a]/=i}}function wt(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function Mt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Ht(e),i=0;i<e;++i){var o=e*i+i;if(!ut(n[o],z))for(var a=i+1;a<e;++a)if(n[e*i+a]){Dt(n,r,i,a,e);break}if(!ut(n[o],z))return[];Ct(n,r,i,e,n[o]);for(a=0;a<e;++a){var s=a,u=n[a+i*e];ut(u,z)&&i!==a&&St(n,r,s,i,e,-u)}}return r}function Rt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function Ot(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function _t(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Ht(n),i=Math.min(e,n),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)r[o*n+a]=t[o*e+a];r[(o+1)*n-1]=t[(o+1)*e-1],r[(n-1)*n+o]=t[(e-1)*e+o]}return r[n*n-1]=t[e*e-1],r}function Tt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Ht(t);return e.forEach((function(e){r=Pt(r,e,t)})),r}function Pt(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,o=e.length/i;if(!i)return e;if(!o)return t;for(var a=0;a<n;++a)for(var s=0;s<o;++s){r[s*n+a]=0;for(var u=0;u<i;++u)r[s*n+a]+=t[u*n+a]*e[s*i+u]}return r}function zt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Gt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function kt(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Bt(t,e,n){void 0===n&&(n=e.length);var r=Pt(t,e,n),i=r[n-1];return r.map((function(t){return t/i}))}function It(t,e){return Pt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function At(t,e){return Pt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Ft(t,e){return Pt(t,Wt(e,4))}function Nt(t,e){var n=e[0],r=void 0===n?1:n,i=e[1],o=void 0===i?1:i,a=e[2];return Pt(t,[r,0,0,0,0,o,0,0,0,0,void 0===a?1:a,0,0,0,0,1],4)}function Yt(t,e){return Bt(Wt(e,3),Ot(t,3))}function qt(t,e){var n=e[0],r=void 0===n?0:n,i=e[1],o=void 0===i?0:i,a=e[2];return Pt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,void 0===a?0:a,1],4)}function Xt(t,e){return Pt(t,e,4)}function Wt(t,e){var n=Math.cos(t),r=Math.sin(t),i=Ht(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function Ht(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Lt(t,e){for(var n=Ht(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function jt(t,e){for(var n=Ht(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function Vt(t,e,n,r,i,o,a,s){var u=t[0],l=t[1],c=e[0],f=e[1],p=n[0],d=n[1],h=r[0],v=r[1],g=i[0],m=i[1],b=o[0],x=o[1],y=a[0],E=a[1],S=s[0],D=s[1],C=Mt([u,0,c,0,p,0,h,0,l,0,f,0,d,0,v,0,1,0,1,0,1,0,1,0,0,u,0,c,0,p,0,h,0,l,0,f,0,d,0,v,0,1,0,1,0,1,0,1,-g*u,-m*u,-b*c,-x*c,-y*p,-E*p,-S*h,-D*h,-g*l,-m*l,-b*f,-x*f,-y*d,-E*d,-S*v,-D*v],8);if(!C.length)return[];var w=Pt(C,[g,m,b,x,y,E,S,D],8);return w[8]=1,_t(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}(w),3,4)}var Ut=function(){return Ut=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ut.apply(this,arguments)};function Zt(t,e){return void 0===e&&(e=0),Kt($t(t,e))}function Kt(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var n=t.matrixFunction,r=t.functionValue;n&&(e=n(e,r))})),e}function $t(t,e){return void 0===e&&(e=0),(A(t)?t:H(t)).map((function(t){var n=j(t),r=n.prefix,i=n.value,o=null,a=r,s="";if("translate"===r||"translateX"===r||"translate3d"===r){var u=I(e)?Ut(Ut({},e),{"o%":e["%"]}):{"%":e,"o%":e},l=L(i).map((function(t,n){return u["%"]=0===n&&"x%"in u?e["x%"]:1===n&&"y%"in u?e["y%"]:e["o%"],tt(t,u)})),c=l[0],f=l[1],p=void 0===f?0:f,d=l[2];o=qt,s=[c,p,void 0===d?0:d]}else if("translateY"===r){o=qt,s=[0,p=tt(i,I(e)?Ut({"%":e["y%"]},e):{"%":e}),0]}else if("translateZ"===r){o=qt,s=[0,0,parseFloat(i)]}else if("scale"===r||"scale3d"===r){var h=L(i).map((function(t){return parseFloat(t)})),v=h[0],g=h[1],m=void 0===g?v:g,b=h[2];o=Nt,s=[v,m,void 0===b?1:b]}else if("scaleX"===r){o=Nt,s=[v=parseFloat(i),1,1]}else if("scaleY"===r){o=Nt,s=[1,m=parseFloat(i),1]}else if("scaleZ"===r){o=Nt,s=[1,1,parseFloat(i)]}else if("rotate"===r||"rotateZ"===r||"rotateX"===r||"rotateY"===r){var x=V(i),y=x.unit,E=x.value;"rotate"===r||"rotateZ"===r?(a="rotateZ",o=Ft):"rotateX"===r?o=It:"rotateY"===r&&(o=At),s="rad"===y?E:E*Math.PI/180}else if("matrix3d"===r)o=Xt,s=L(i).map((function(t){return parseFloat(t)}));else if("matrix"===r){var S=L(i).map((function(t){return parseFloat(t)}));o=Xt,s=[S[0],S[1],0,0,S[2],S[3],0,0,0,0,1,0,S[4],S[5],0,1]}else a="";return{name:r,functionName:a,value:i,matrixFunction:o,functionValue:s}}))}var Jt=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,i=n.indexOf(t),o=-1===i?n.length:i;n[o]=t,r[o]=e},t}(),Qt=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),te="function"===typeof Map,ee=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var ne=function(){function t(t,e,n,r,i,o,a,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var n=[],r=[];return t.forEach((function(t){var e=t[0],i=t[1],o=new ee;n[e]=o,r[i]=o})),n.forEach((function(t,e){t.connect(n[e-1])})),t.filter((function(t,n){return!e[n]})).map((function(t,e){var i=t[0],o=t[1];if(i===o)return[0,0];var a=n[i],s=r[o-1],u=a.getIndex();return a.disconnect(),s?a.connect(s,s.next):a.connect(void 0,n[0]),[u,a.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,n=[];this.cacheOrdered=t.filter((function(t,r){var i=t[0],o=t[1],a=e[r],s=a[0],u=a[1];if(i!==o)return n.push([s,u]),!0})),this.cachePureChanged=n},t}();function re(t,e,n){var r=te?Map:n?Qt:Jt,i=n||function(t){return t},o=[],a=[],s=[],u=t.map(i),l=e.map(i),c=new r,f=new r,p=[],d=[],h={},v=[],g=0,m=0;return u.forEach((function(t,e){c.set(t,e)})),l.forEach((function(t,e){f.set(t,e)})),u.forEach((function(t,e){var n=f.get(t);"undefined"===typeof n?(++m,a.push(e)):h[n]=m})),l.forEach((function(t,e){var n=c.get(t);"undefined"===typeof n?(o.push(e),++g):(s.push([n,e]),m=h[e]||0,p.push([n-m,e-g]),d.push(e===n),n!==e&&v.push([n,e]))})),a.reverse(),new ne(t,e,o,a,v,s,p,d)}var ie=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=re(this.list,e,this.findKeyCallback);return this.list=e,n},t}();const oe=ie;var ae=function(t,e){return ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ae(t,e)};var se="function"===typeof Map?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}();const ue=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,se)||this}return function(t,e){function n(){this.constructor=t}ae(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(oe);var le=function(){return le=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},le.apply(this,arguments)};const ce=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(I(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(I(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var i=Z(r,(function(t){return t.listener===e}));i>-1&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){n._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var n=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var i=!1;return e.eventType=t,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(r).forEach((function(r){r.listener(e),r.once&&n.off(t,r.listener)})),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(le({listener:e},n))},t}();var fe=function(t,e){return fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},fe(t,e)};var pe=function(){return pe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pe.apply(this,arguments)};function de(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function he(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function ve(t){return t?F(t)?document.querySelector(t):Y(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}const ge=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._startRect=null,e._startPos=[],e._prevTime=0,e._timer=0,e._prevScrollPos=[0,0],e._isWait=!1,e._flag=!1,e._currentOptions=null,e._lock=!1,e._unregister=null,e._onScroll=function(){var t=e._currentOptions;!e._lock&&t&&e.emit("scrollDrag",{next:function(n){e.checkScroll({container:t.container,inputEvent:n})}})},e}!function(t,e){function n(){this.constructor=t}fe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.dragStart=function(t,e){var n=ve(e.container);if(n){var r=0,i=0,o=0,a=0;if(n===document.body)o=window.innerWidth,a=window.innerHeight;else{var s=n.getBoundingClientRect();r=s.top,i=s.left,o=s.width,a=s.height}this._flag=!0,this._startPos=[t.clientX,t.clientY],this._startRect={top:r,left:i,width:o,height:a},this._prevScrollPos=this._getScrollPosition([0,0],e),this._currentOptions=e,this._registerScrollEvent(e)}else this._flag=!1},n.drag=function(t,e){if(clearTimeout(this._timer),this._flag){var n=t.clientX,r=t.clientY,i=e.threshold,o=void 0===i?0:i,a=this._startRect,s=this._startPos;this._currentOptions=e;var u=[0,0];return a.top>r-o?(s[1]>a.top||r<s[1])&&(u[1]=-1):a.top+a.height<r+o&&(s[1]<a.top+a.height||r>s[1])&&(u[1]=1),a.left>n-o?(s[0]>a.left||n<s[0])&&(u[0]=-1):a.left+a.width<n+o&&(s[0]<a.left+a.width||n>s[0])&&(u[0]=1),!(!u[0]&&!u[1])&&this._continueDrag(pe(pe({},e),{direction:u,inputEvent:t,isDrag:!0}))}},n.checkScroll=function(t){var e=this;if(this._isWait)return!1;var n=t.prevScrollPos,r=void 0===n?this._prevScrollPos:n,i=t.direction,o=t.throttleTime,a=void 0===o?0:o,s=t.inputEvent,u=t.isDrag,l=this._getScrollPosition(i||[0,0],t),c=l[0]-r[0],f=l[1]-r[1],p=i||[c?Math.abs(c)/c:0,f?Math.abs(f)/f:0];return this._prevScrollPos=l,this._lock=!1,!(!c&&!f)&&(this.emit("move",{offsetX:p[0]?c:0,offsetY:p[1]?f:0,inputEvent:s}),a&&u&&(clearTimeout(this._timer),this._timer=window.setTimeout((function(){e._continueDrag(t)}),a)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(t,e){var n=e.container,r=e.getScrollPosition;return(void 0===r?de:r)({container:ve(n),direction:t})},n._continueDrag=function(t){var e,n=this,r=t.container,i=t.direction,o=t.throttleTime,a=t.useScroll,s=t.isDrag,u=t.inputEvent;if(!(!this._flag||s&&this._isWait)){var l=U(),c=Math.max(o+this._prevTime-l,0);if(c>0)return clearTimeout(this._timer),this._timer=window.setTimeout((function(){n._continueDrag(t)}),c),!1;this._prevTime=l;var f=this._getScrollPosition(i,t);this._prevScrollPos=f,s&&(this._isWait=!0),a||(this._lock=!0);var p={container:ve(r),direction:i,inputEvent:u};return null===(e=t.requestScroll)||void 0===e||e.call(t,p),this.emit("scroll",p),this._isWait=!1,a||this.checkScroll(pe(pe({},t),{prevScrollPos:f,direction:i,inputEvent:u}))}},n._registerScrollEvent=function(t){this._unregisterScrollEvent();var e=t.checkScrollEvent;if(e){var n=!0===e?he:e,r=ve(t.container);!0!==e||r!==document.body&&r!==document.documentElement?this._unregister=n(r,this._onScroll):this._unregister=he(window,this._onScroll)}},n._unregisterScrollEvent=function(){var t;null===(t=this._unregister)||void 0===t||t.call(this),this._unregister=null},e}(ce);function me(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function be(t){return ut(t,z)}function xe(t){return t.length<3?0:Math.abs(function(t){for(var e=0,n=t.length-1;n>=0;--n)e+=t[n];return e}(t.map((function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]}))))/2}function ye(t,e){var n=e.width,r=e.height,i=e.left,o=e.top,a=Ee(t),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY,f=n/(l-s),p=r/(c-u);return t.map((function(t){return[i+(t[0]-s)*f,o+(t[1]-u)*p]}))}function Ee(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Se(t,e,n){var r=t[0],i=t[1],o=Ee(e),a=o.minX,s=o.maxX,u=[[a,i],[s,i]],l=De(u[0],u[1]),c=Me(e),f=[];if(c.forEach((function(e){var n,r=De(e[0],e[1]),o=e[0];(n=r,l.every((function(t,e){return 0===be(t-n[e])})))?f.push({pos:t,line:e,type:"line"}):we(Ce(l,r),[u,e]).forEach((function(t){e.some((function(e){return r=t,!be((n=e)[0]-r[0])&&!be(n[1]-r[1]);var n,r}))?f.push({pos:t,line:e,type:"point"}):0!==be(o[1]-i)&&f.push({pos:t,line:e,type:"intersection"})}))})),!n&&K(f,(function(t){return t[0]===r})))return!0;var p=0,d={};return f.forEach((function(t){var e=t.pos,n=t.type,o=t.line;if(!(e[0]>r))if("intersection"===n)++p;else{if("line"===n)return;if("point"===n){var a=K(o,(function(t){return t[1]!==i})),s=d[e[0]],u=a[1]>i?1:-1;s?s!==u&&++p:d[e[0]]=u}}})),p%2===1}function De(t,e){var n=t[0],r=t[1],i=e[0]-n,o=e[1]-r;Math.abs(i)<z&&(i=0),Math.abs(o)<z&&(o=0);var a=0,s=0,u=0;return i?o?(s=1,u=-(a=-o/i)*n-r):(s=1,u=-r):o&&(a=-1,u=n),[a,s,u]}function Ce(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=0===n&&0===o,l=0===r&&0===a,c=[];if(u&&l)return[];if(u){var f=-i/r;return f!==-s/a?[]:[[-1/0,f],[1/0,f]]}if(l){var p=-i/n;return p!==-s/o?[]:[[p,-1/0],[p,1/0]]}if(0===n)c=[[d=-(a*(h=-i/r)+s)/o,h]];else if(0===o){c=[[d=-(r*(h=-s/a)+i)/n,h]]}else if(0===r){c=[[d=-i/n,h=-(o*d+s)/a]]}else if(0===a){c=[[d=-s/o,h=-(n*d+i)/r]]}else{var d,h;c=[[d=(r*s-a*i)/(a*n-r*o),h=-(n*d+i)/r]]}return c.map((function(t){return[t[0],t[1]]}))}function we(t,e){var n=e.map((function(t){return[0,1].map((function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]}))})),r=[];if(2===t.length){var i=t[0],o=i[0],a=i[1];if(be(o-t[1][0])){if(!be(a-t[1][1])){var s=Math.max.apply(Math,n.map((function(t){return t[0][0]}))),u=Math.min.apply(Math,n.map((function(t){return t[0][1]})));if(be(s-u)>0)return[];r=[[s,a],[u,a]]}}else{var l=Math.max.apply(Math,n.map((function(t){return t[1][0]}))),c=Math.min.apply(Math,n.map((function(t){return t[1][1]})));if(be(l-c)>0)return[];r=[[o,l],[o,c]]}}return r.length||(r=t.filter((function(t){var e=t[0],r=t[1];return n.every((function(t){return 0<=be(e-t[0][0])&&0<=be(t[0][1]-e)&&0<=be(r-t[1][0])&&0<=be(t[1][1]-r)}))}))),r.map((function(t){return[be(t[0]),be(t[1])]}))}function Me(t){return me(t.slice(1),[t[0]]).map((function(e,n){return[t[n],e]}))}function Re(t,e){var n=t.slice(),r=e.slice();-1===at(n)&&n.reverse(),-1===at(r)&&r.reverse();var i=Me(n),o=Me(r),a=i.map((function(t){return De(t[0],t[1])})),s=o.map((function(t){return De(t[0],t[1])})),u=[];a.forEach((function(t,e){var n=i[e],a=[];s.forEach((function(r,i){var s=we(Ce(t,r),[n,o[i]]);a.push.apply(a,s.map((function(t){return{index1:e,index2:i,pos:t,type:"intersection"}})))})),a.sort((function(t,e){return st(n[0],t.pos)-st(n[0],e.pos)})),u.push.apply(u,a),Se(n[1],r)&&u.push({index1:e,index2:-1,pos:n[1],type:"inside"})})),o.forEach((function(t,e){if(Se(t[1],n)){var r=!1,i=Z(u,(function(t){return t.index2===e?(r=!0,!1):!!r}));-1===i&&(r=!1,i=Z(u,(function(t){var n=t.index1,i=t.index2;return-1===n&&i+1===e?(r=!0,!1):!!r}))),-1===i?u.push({index1:-1,index2:e,pos:t[1],type:"inside"}):u.splice(i,0,{index1:-1,index2:e,pos:t[1],type:"inside"})}}));var l={};return u.filter((function(t){var e=t.pos,n=e[0]+"x"+e[1];return!l[n]&&(l[n]=!0,!0)}))}function Oe(t,e){var n=function(t,e){return Re(t,e).map((function(t){return t.pos}))}(t,e);return xe(n)}var _e=n(9950),Te=function(t,e){return Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Te(t,e)};var Pe=function(){return Pe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Pe.apply(this,arguments)};function ze(t){return function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+2*Math.PI}([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Ge(t){return t?t.touches?function(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(Ie(t[r]));return n}(t.touches):[Ie(t)]:[]}function ke(t,e,n){var r=n.length,i=Ae(t,r),o=i.clientX,a=i.clientY,s=i.originalClientX,u=i.originalClientY,l=Ae(e,r),c=l.clientX,f=l.clientY,p=Ae(n,r);return{clientX:s,clientY:u,deltaX:o-c,deltaY:a-f,distX:o-p.clientX,distY:a-p.clientY}}function Be(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Ie(t){return{clientX:t.clientX,clientY:t.clientY}}function Ae(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var o=t[i];n.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,n.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,n.clientX+=o.clientX,n.clientY+=o.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var Fe=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return t.prototype.getAngle=function(t){return void 0===t&&(t=this.prevClients),ze(t)},t.prototype.getRotation=function(t){return void 0===t&&(t=this.prevClients),ze(t)-ze(this.startClients)},t.prototype.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var n=ke(t||this.prevClients,this.prevClients,this.startClients),r=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(r*r+i*i),this.prevClients=t,n},t.prototype.getPositions=function(t){void 0===t&&(t=this.prevClients);for(var e=this.prevClients,n=this.startClients,r=Math.min(this.length,e.length),i=[],o=0;o<r;++o)i[o]=ke([t[o]],[e[o]],[n[o]]);return i},t.prototype.getMovement=function(t){var e=this.movement;if(!t)return e;var n=Ae(t,this.length),r=Ae(this.prevClients,this.length),i=n.clientX-r.clientX,o=n.clientY-r.clientY;return Math.sqrt(i*i+o*o)+e},t.prototype.getDistance=function(t){return void 0===t&&(t=this.prevClients),Be(t)},t.prototype.getScale=function(t){return void 0===t&&(t=this.prevClients),Be(t)/Be(this.startClients)},t.prototype.move=function(t,e){this.startClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),this.prevClients.forEach((function(n){n.clientX-=t,n.clientY-=e}))},t}(),Ne=["textarea","input"],Ye=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;r.options={},r.flag=!1,r.pinchFlag=!1,r.data={},r.isDrag=!1,r.isPinch=!1,r.clientStores=[],r.targets=[],r.prevTime=0,r.doubleFlag=!1,r._useMouse=!1,r._useTouch=!1,r._useDrag=!1,r._dragFlag=!1,r._isTrusted=!1,r._isMouseEvent=!1,r._isSecondaryButton=!1,r._preventMouseEvent=!1,r._prevInputEvent=null,r._isDragAPI=!1,r._isIdle=!0,r._preventMouseEventId=0,r._window=window,r.onDragStart=function(t,e){if(void 0===e&&(e=!0),r.flag||!1!==t.cancelable){var n=t.type.indexOf("drag")>=-1;if(!r.flag||!n){r._isDragAPI=!0;var i=r.options,o=i.container,a=i.pinchOutside,s=i.preventWheelClick,u=i.preventRightClick,l=i.preventDefault,c=i.checkInput,f=i.dragFocusedInput,p=i.preventClickEventOnDragStart,d=i.preventClickEventOnDrag,h=i.preventClickEventByCondition,v=r._useTouch,g=!r.flag;if(r._isSecondaryButton=3===t.which||2===t.button,s&&(2===t.which||1===t.button)||u&&(3===t.which||2===t.button))return r.stop(),!1;if(g){var m=r._window.document.activeElement,b=t.target;if(b){var x=b.tagName.toLowerCase(),y=Ne.indexOf(x)>-1,E=b.isContentEditable;if(y||E){if(c||!f&&m===b)return!1;if(m&&(m===b||E&&m.isContentEditable&&m.contains(b))){if(!f)return!1;b.blur()}}else if((l||"touchstart"===t.type)&&m){var S=m.tagName.toLowerCase();(m.isContentEditable||Ne.indexOf(S)>-1)&&m.blur()}(p||d||h)&&ht(r._window,"click",r._onClick,!0)}r.clientStores=[new Fe(Ge(t))],r._isIdle=!1,r.flag=!0,r.isDrag=!1,r._isTrusted=e,r._dragFlag=!0,r._prevInputEvent=t,r.data={},r.doubleFlag=U()-r.prevTime<200,r._isMouseEvent=function(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}(t),!r._isMouseEvent&&r._preventMouseEvent&&r._allowMouseEvent(),!1===(r._preventMouseEvent||r.emit("dragStart",Pe(Pe({data:r.data,datas:r.data,inputEvent:t,isMouseEvent:r._isMouseEvent,isSecondaryButton:r._isSecondaryButton,isTrusted:e,isDouble:r.doubleFlag},r.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){r._dragFlag=!1}})))&&r.stop(),r._isMouseEvent&&r.flag&&l&&t.preventDefault()}if(!r.flag)return!1;var D=0;if(g?(r._attchDragEvent(),v&&a&&(D=setTimeout((function(){ht(o,"touchstart",r.onDragStart,{passive:!1})})))):v&&a&&vt(o,"touchstart",r.onDragStart),r.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(D),g&&t.touches.length!==t.changedTouches.length)return;r.pinchFlag||r.onPinchStart(t)}}}},r.onDrag=function(t,e){if(r.flag){var n=r.options.preventDefault;!r._isMouseEvent&&n&&t.preventDefault(),r._prevInputEvent=t;var i=Ge(t),o=r.moveClients(i,t,!1);if(r._dragFlag){if(r.pinchFlag||o.deltaX||o.deltaY)if(!1===(r._preventMouseEvent||r.emit("drag",Pe(Pe({},o),{isScroll:!!e,inputEvent:t}))))return void r.stop();r.pinchFlag&&r.onPinch(t,i)}r.getCurrentStore().getPosition(i,!0)}},r.onDragEnd=function(t){if(r.flag){var e=r.options,n=e.pinchOutside,i=e.container,o=e.preventClickEventOnDrag,a=e.preventClickEventOnDragStart,s=e.preventClickEventByCondition,u=r.isDrag;(o||a||s)&&requestAnimationFrame((function(){r._allowClickEvent()})),s||a||!o||u||r._allowClickEvent(),r._useTouch&&n&&vt(i,"touchstart",r.onDragStart),r.pinchFlag&&r.onPinchEnd(t);var l=(null===t||void 0===t?void 0:t.touches)?Ge(t):[];0!==l.length&&r.options.keepDragging?r._addStore(new Fe(l)):r.flag=!1;var c=r._getPosition(),f=U(),p=!u&&r.doubleFlag;r._prevInputEvent=null,r.prevTime=u||p?0:f,r.flag||(r._dettachDragEvent(),r._preventMouseEvent||r.emit("dragEnd",Pe({data:r.data,datas:r.data,isDouble:p,isDrag:u,isClick:!u,isMouseEvent:r._isMouseEvent,isSecondaryButton:r._isSecondaryButton,inputEvent:t,isTrusted:r._isTrusted},c)),r.clientStores=[],r._isMouseEvent||(r._preventMouseEvent=!0,clearTimeout(r._preventMouseEventId),r._preventMouseEventId=setTimeout((function(){r._preventMouseEvent=!1}),200)),r._isIdle=!0)}},r.onBlur=function(){r.onDragEnd()},r._allowClickEvent=function(){vt(r._window,"click",r._onClick,!0)},r._onClick=function(t){r._allowClickEvent(),r._allowMouseEvent();var e=r.options.preventClickEventByCondition;(null===e||void 0===e?void 0:e(t))||(t.stopPropagation(),t.preventDefault())},r._onContextMenu=function(t){r.options.preventRightClick?r.onDragEnd(t):t.preventDefault()},r._passCallback=function(){};var i=[].concat(e),o=i[0];r._window=yt(o)?o:xt(o),r.options=Pe({checkInput:!1,container:o&&!("document"in o)?xt(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var a=r.options,s=a.container,u=a.events,l=a.checkWindowBlur;if(r._useDrag=u.indexOf("drag")>-1,r._useTouch=u.indexOf("touch")>-1,r._useMouse=u.indexOf("mouse")>-1,r.targets=i,r._useDrag&&i.forEach((function(t){ht(t,"dragstart",r.onDragStart)})),r._useMouse&&(i.forEach((function(t){ht(t,"mousedown",r.onDragStart),ht(t,"mousemove",r._passCallback)})),ht(s,"contextmenu",r._onContextMenu)),l&&ht(xt(),"blur",r.onBlur),r._useTouch){var c={passive:!1};i.forEach((function(t){ht(t,"touchstart",r.onDragStart,c),ht(t,"touchmove",r._passCallback,c)}))}return r}return function(t,e){function n(){this.constructor=t}Te(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,e){return t+e.movement}),0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(t,e,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r&&this.onDrag(n,!0))},e.prototype.move=function(t,e){var n=t[0],r=t[1],i=this.getCurrentStore().prevClients;return this.moveClients(i.map((function(t){var e=t.clientX,i=t.clientY;return{clientX:e+n,clientY:i+r,originalClientX:e,originalClientY:i}})),e,!0)},e.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},e.prototype.setEventData=function(t){var e=this.data;for(var n in t)e[n]=t[n];return this},e.prototype.setEventDatas=function(t){return this.setEventData(t)},e.prototype.getCurrentEvent=function(t){return void 0===t&&(t=this._prevInputEvent),Pe(Pe({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var t=this,e=this.targets,n=this.options.container;this.off(),vt(this._window,"blur",this.onBlur),this._useDrag&&e.forEach((function(e){vt(e,"dragstart",t.onDragStart)})),this._useMouse&&(e.forEach((function(e){vt(e,"mousedown",t.onDragStart)})),vt(n,"contextmenu",this._onContextMenu)),this._useTouch&&(e.forEach((function(e){vt(e,"touchstart",t.onDragStart)})),vt(n,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(t){var e=this,n=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>n)){var r=new Fe(Ge(t));this.pinchFlag=!0,this._addStore(r),!1===this.emit("pinchStart",Pe(Pe({data:this.data,datas:this.data,angle:r.getAngle(),touches:this.getCurrentStore().getPositions()},r.getPosition()),{inputEvent:t,isTrusted:this._isTrusted,preventDefault:function(){t.preventDefault()},preventDrag:function(){e._dragFlag=!1}}))&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Pe(Pe({data:this.data,datas:this.data,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e)),{inputEvent:t,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",Pe(Pe({data:this.data,datas:this.data,isPinch:e,touches:n.getPositions()},n.getPosition()),{inputEvent:t}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(t,e,n){var r=this._getPosition(t,n),i=this.isDrag;(r.deltaX||r.deltaY)&&(this.isDrag=!0);var o=!1;return!i&&this.isDrag&&(o=!0),Pe(Pe({data:this.data,datas:this.data},r),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},e.prototype._getPosition=function(t,e){var n=this.getCurrentStore().getPosition(t,e),r=this.clientStores.slice(1).reduce((function(t,e){var n=e.getPosition();return t.distX+=n.distX,t.distY+=n.distY,t}),n),i=r.distX,o=r.distY;return Pe(Pe({},n),{distX:i,distY:o})},e.prototype._attchDragEvent=function(){var t=this._window,e=this.options.container,n={passive:!1};this._isDragAPI&&(ht(e,"dragover",this.onDrag,n),ht(t,"dragend",this.onDragEnd)),this._useMouse&&(ht(e,"mousemove",this.onDrag),ht(t,"mouseup",this.onDragEnd)),this._useTouch&&(ht(e,"touchmove",this.onDrag,n),ht(t,"touchend",this.onDragEnd,n),ht(t,"touchcancel",this.onDragEnd,n))},e.prototype._dettachDragEvent=function(){var t=this._window,e=this.options.container;this._isDragAPI&&(vt(e,"dragover",this.onDrag),vt(t,"dragend",this.onDragEnd)),this._useMouse&&(vt(e,"mousemove",this.onDrag),vt(t,"mouseup",this.onDragEnd)),this._useTouch&&(vt(e,"touchstart",this.onDragStart),vt(e,"touchmove",this.onDrag),vt(t,"touchend",this.onDragEnd),vt(t,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(ce);var qe=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function Xe(t,e,n,r,i){var o=gt(r),a=o.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",t),a.setAttribute("data-styled-count","1"),n.nonce&&a.setAttribute("nonce",n.nonce),a.innerHTML=function(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,n){var r=n.trim();return(r?L(r):[""]).map((function(e){var n=e.trim();return 0===n.indexOf("@")?n:n.indexOf(":global")>-1?n.replace(/\:global/g,""):n.indexOf(":host")>-1?"".concat(n.replace(/\:host/g,".".concat(t))):n?".".concat(t," ").concat(n):".".concat(t)})).join(", ")+" {"}))}(t,e,n),(i||o.head||o.body).appendChild(a),a}const We=function(t){var e="rCS"+qe(t).toString(36);return{className:e,inject:function(n,r){void 0===r&&(r={});var i=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(n),o=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(o){var a=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(a+1))}else o=Xe(e,t,r,n,i);return{destroy:function(){var t,e=parseFloat(o.getAttribute("data-styled-count"))||0;e<=1?(o.remove?o.remove():null===(t=o.parentNode)||void 0===t||t.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(e-1))}}}}};var He=function(){return He=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},He.apply(this,arguments)};function Le(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function je(t,e){var n=We(e),r=n.className;return(0,_e.forwardRef)((function(e,i){var o=e.className,a=void 0===o?"":o,s=(e.cspNonce,Le(e,["className","cspNonce"])),u=(0,_e.useRef)();return(0,_e.useImperativeHandle)(i,(function(){return u.current}),[]),(0,_e.useEffect)((function(){var t=n.inject(u.current,{nonce:e.cspNonce});return function(){t.destroy()}}),[]),(0,_e.createElement)(t,He({ref:u,"data-styled-id":r,className:"".concat(a," ").concat(r)},s))}))}var Ve=function(t,e){return Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Ve(t,e)};function Ue(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ve(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ze=function(){return Ze=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ze.apply(this,arguments)};function Ke(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function $e(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function Je(t,e){return Ze({events:[],props:[],name:t},e)}var Qe=["n","w","s","e"],tn=["n","w","s","e","nw","ne","sw","se"];var en=y(),nn=en.browser.webkit,rn=nn&&function(){var t="undefined"===typeof window?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return!!e&&parseFloat(e[1])<605}(),on=en.browser.name,an=parseInt(en.browser.version,10),sn="chrome"===on,un=en.browser.chromium,ln=parseInt(en.browser.chromiumVersion,10)||0,cn=sn&&an>=109||un&&ln>=109,fn="firefox"===on,pn=parseInt(en.browser.webkitVersion,10)>=612||an>=15,dn="moveable-",hn=tn.map((function(t){var e="",n="",r="center",i="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(o,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(o,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(n).concat(e,"\n        transform-origin: ").concat(r," ").concat(i,";\n    }")})).join("\n"),vn="\n{\nposition: absolute;\nwidth: 1px;\nheight: 1px;\nleft: 0;\ntop: 0;\nz-index: 3000;\n--moveable-color: #4af;\n--zoom: 1;\n--zoompx: 1px;\n--moveable-line-padding: 0;\n--moveable-control-padding: 0;\nwill-change: transform;\noutline: 1px solid transparent;\n}\n.control-box {\nz-index: 0;\n}\n.line, .control {\nposition: absolute;\nleft: 0;\ntop: 0;\nwill-change: transform;\n}\n.control {\nwidth: 14px;\nheight: 14px;\nborder-radius: 50%;\nborder: 2px solid #fff;\nbox-sizing: border-box;\nbackground: #4af;\nbackground: var(--moveable-color);\nmargin-top: -7px;\nmargin-left: -7px;\nborder: 2px solid #fff;\nz-index: 10;\n}\n.around-control {\nposition: absolute;\nwill-change: transform;\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\nheight: calc(var(--moveable-control-padding, 20) * 1px);\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\nbox-sizing: border-box;\nbackground: transparent;\nz-index: 8;\ncursor: alias;\ntransform-origin: center center;\n}\n".concat(hn,"\n.padding {\nposition: absolute;\ntop: 0px;\nleft: 0px;\nwidth: 100px;\nheight: 100px;\ntransform-origin: 0 0;\n}\n.line {\nwidth: 1px;\nheight: 1px;\nbackground: #4af;\nbackground: var(--moveable-color);\ntransform-origin: 0px 50%;\n}\n.line.edge {\nz-index: 1;\nbackground: transparent;\n}\n.line.dashed {\nbox-sizing: border-box;\nbackground: transparent;\n}\n.line.dashed.horizontal {\nborder-top: 1px dashed #4af;\nborder-top-color: #4af;\nborder-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\nborder-left: 1px dashed #4af;\nborder-left-color: #4af;\nborder-left-color: var(--moveable-color);\n}\n.line.vertical {\ntransform: translateX(-50%);\n}\n.line.horizontal {\ntransform: translateY(-50%);\n}\n.line.vertical.bold {\nwidth: 2px;\n}\n.line.horizontal.bold {\nheight: 2px;\n}\n\n.control.origin {\nborder-color: #f55;\nbackground: #fff;\nwidth: 12px;\nheight: 12px;\nmargin-top: -6px;\nmargin-left: -6px;\npointer-events: none;\n}\n").concat([0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'.concat(t,'"], :global .view-control-rotation').concat(t," {\n").concat(function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}(1,t),n=45*Math.round(t/45)%180,r="ns-resize";return 135===n?r="nwse-resize":45===n?r="nesw-resize":90===n&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}(t),"\n}\n")})).join("\n"),'\n\n.line.direction:before {\ncontent: "";\nposition: absolute;\nwidth: 100%;\nheight: calc(var(--moveable-line-padding, 0) * 1px);\nbottom: 0;\nleft: 0;\n}\n.group {\nz-index: -1;\n}\n.area {\nposition: absolute;\n}\n.area-pieces {\nposition: absolute;\ntop: 0;\nleft: 0;\ndisplay: none;\n}\n.area.avoid, .area.pass {\npointer-events: none;\n}\n.area.avoid+.area-pieces {\ndisplay: block;\n}\n.area-piece {\nposition: absolute;\n}\n\n').concat(rn?':global svg *:before {\ncontent:"";\ntransform-origin: inherit;\n}':"","\n"),gn=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],mn=1e-4,bn=1e-7,xn=1e-9,yn=Math.pow(10,10),En=-yn,Sn={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Dn={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Cn={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},wn=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Mn(t,e,n,r,i,o){var a,s;void 0===o&&(o="draggable");var u=null!==(s=null===(a=e.gestos[o])||void 0===a?void 0:a.move(n,t.inputEvent))&&void 0!==s?s:{},l=u.originalDatas||u.datas,c=l[o]||(l[o]={});return Ze(Ze({},i?Ao(e,u):u),{isPinch:!!r,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var Rn=function(){function t(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}return t.prototype.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),Ze(Ze({},this.move(t,e.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},t.prototype.move=function(t,e){var n,r,i=!1;if(this.isFlag){var o=this.isDrag;n=this.prevX+t[0],r=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!o&&this.isDrag&&(i=!0)}else this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0;return this.prevX=n,this.prevY=r,{type:"drag",clientX:n,clientY:r,inputEvent:e,isFirstDrag:i,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function On(t,e,n,r){var i=16===t.length?4:3,o=Ke(ro(t,n,r,i),4),a=Ke(o[0],2),s=a[0],u=a[1],l=Ke(o[1],2),c=l[0],f=l[1],p=Ke(o[2],2),d=p[0],h=p[1],v=Ke(o[3],2),g=v[0],m=v[1],b=Ke(no(t,e,i),2),x=b[0],y=b[1],E=Math.min(s,c,d,g),S=Math.min(u,f,h,m),D=Math.max(s,c,d,g);return s=s-E||0,{left:E,top:S,right:D,bottom:Math.max(u,f,h,m),origin:[x=x-E||0,y=y-S||0],pos1:[s,u=u-S||0],pos2:[c=c-E||0,f=f-S||0],pos3:[d=d-E||0,h=h-S||0],pos4:[g=g-E||0,m=m-S||0],direction:Jo(t[0]*t[i+1])}}function _n(t,e){var n=e.clientX,r=e.clientY,i=e.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=Ke(Gt(Io(s,[n-a.left,r-a.top],u?4:3),l),2),f=Ke(In({datas:i,distX:c[0],distY:c[1]}),2);return[f[0],f[1]]}function Tn(t,e){var n=e.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,a=r.is3d,s=r.left,u=r.top,l=r.origin,c=r.offsetMatrix,f=r.targetMatrix,p=r.transformOrigin,d=a?4:3;n.is3d=a,n.matrix=i,n.targetMatrix=f,n.beforeMatrix=o,n.offsetMatrix=c,n.transformOrigin=p,n.inverseMatrix=Mt(i,d),n.inverseBeforeMatrix=Mt(o,d),n.absoluteOrigin=Ot(zt([s,u],l),d),n.startDragBeforeDist=Bt(n.inverseBeforeMatrix,n.absoluteOrigin,d),n.startDragDist=Bt(n.inverseMatrix,n.absoluteOrigin,d)}function Pn(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,o=r.transformIndex,a=i.nextTransforms,s=a.length,u=i.nextTransformAppendedIndexes,l=-1;-1===o?("translate"===n?l=0:"rotate"===n&&(l=Z(a,(function(t){return t.match(/scale\(/g)}))),-1===l&&(l=a.length),r.transformIndex=l):l=K(u,(function(t){return t.index===o&&t.functionName===n}))?o:o+u.filter((function(t){return t.index<o})).length;var c=function(t,e,n){var r,i=$t(t,{"x%":function(t){return t/100*e.offsetWidth},"y%":function(t){return t/100*e.offsetHeight}}),o=t.slice(0,n<0?void 0:n),a=t.slice(0,n<0?void 0:n+1),s=t[n]||"",u=n<0?[]:t.slice(n),l=n<0?[]:t.slice(n+1),c=i.slice(0,n<0?void 0:n),f=i.slice(0,n<0?void 0:n+1),p=null!==(r=i[n])&&void 0!==r?r:$t([""])[0],d=n<0?[]:i.slice(n),h=n<0?[]:i.slice(n+1),v=p?[p]:[],g=Kt(c),m=Kt(f),b=Kt(d),x=Kt(h),y=Pt(g,b,4);return{transforms:t,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:Kt(v),afterFunctionMatrix:b,afterFunctionMatrix2:x,allFunctionMatrix:y,beforeFunctions:c,beforeFunctions2:f,targetFunction:v[0],afterFunctions:d,afterFunctions2:h,beforeFunctionTexts:o,beforeFunctionTexts2:a,targetFunctionText:s,afterFunctionTexts:u,afterFunctionTexts2:l}}(a,t.state,l),f=c.targetFunction,p="rotate"===n?"rotateZ":n;r.beforeFunctionTexts=c.beforeFunctionTexts,r.afterFunctionTexts=c.afterFunctionTexts,r.beforeTransform=c.beforeFunctionMatrix,r.beforeTransform2=c.beforeFunctionMatrix2,r.targetTansform=c.targetFunctionMatrix,r.afterTransform=c.afterFunctionMatrix,r.afterTransform2=c.afterFunctionMatrix2,r.targetAllTransform=c.allFunctionMatrix,f.functionName===p?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):s>l&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=$e($e([],Ke(u),!1),[{functionName:n,index:l,isAppend:!0}],!1))}function zn(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Gn(t){var e=t.datas,n=Ke(Bn({datas:e,distX:t.distX,distY:t.distY}),2);return Bt(kn(e,function(t,e){for(var n=Ht(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}([n[0],n[1]],4)),Ot([0,0,0],4),4)}function kn(t,e,n){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=n?Pt(s,e,4):Pt(e,s,4),l=Pt(Mt(n?o:r,4),u,4);return Pt(l,Mt(n?a:i,4),4)}function Bn(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,o=e.is3d,a=e.startDragBeforeDist,s=o?4:3;return Gt(Bt(i,zt(e.absoluteOrigin,[n,r]),s),a)}function In(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.inverseBeforeMatrix,a=n.inverseMatrix,s=n.is3d,u=n.startDragBeforeDist,l=n.startDragDist,c=s?4:3;return Gt(Bt(e?o:a,zt(n.absoluteOrigin,[r,i]),c),e?u:l)}function An(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Fn(t,e){var n=(e+1)/2;return[k(t[0][0],t[1][0],n,1-n),k(t[0][1],t[1][1],n,1-n)]}function Nn(t,e){var n=Fn([t[0],t[1]],e[0]),r=Fn([t[2],t[3]],e[0]);return Fn([n,r],e[1])}function Yn(t,e,n,r){return Pt(t,Hi(e,r,n),r)}function qn(t,e){var n=Ln(e);return{setTransform:function(r,i){void 0===i&&(i=-1),n.startTransforms=A(r)?r:H(r),Wn(t,e,i)},setTransformIndex:function(n){Wn(t,e,n)}}}function Xn(t,e,n){Wn(t,e,Z(Ln(e).startTransforms,(function(t){return 0===t.indexOf("".concat(n,"("))})))}function Wn(t,e,n){var r=Ln(e),i=e.datas;if(i.transformIndex=n,-1!==n){var o=r.startTransforms[n];if(o){var a=t.state,s=$t([o],{"x%":function(t){return t/100*a.offsetWidth},"y%":function(t){return t/100*a.offsetHeight}});i.startValue=s[0].functionValue}}}function Hn(t,e){Ln(t).nextTransforms=H(e)}function Ln(t){return t.originalDatas.beforeRenderable}function jn(t){return t.originalDatas.beforeRenderable.nextTransforms}function Vn(t){return(jn(t)||[]).join(" ")}function Un(t){return Ln(t).nextStyle}function Zn(t,e,n,r,i){Hn(i,e);var o=si.drag(t,Mn(i,t.state,n,r,!1)),a=o?o.transform:e;return Ze(Ze({transform:e,drag:o},Do({transform:a},i)),{afterTransform:a})}function Kn(t,e,n,r,i,o){var a=function(t,e,n,r){var i,o=t.transformOrigin,a=t.offsetMatrix,s=t.is3d?4:3;if(F(n)){var u=e.beforeTransform,l=e.afterTransform;i=_t(r?Zt(n):Pt(Pt(u,Zt([n]),4),l,4),4,s)}else i=n;return Yn(a,i,o,s)}(t.state,i,e,o),s=function(t,e,n,r){void 0===r&&(r=t.state.allMatrix);var i=t.state,o=i.width,a=i.height,s=i.is3d?4:3,u=[o/2*(1+e[0])+n[0],a/2*(1+e[1])+n[1]];return no(r,u,s)}(t,n,r,a);return s}function $n(t,e,n,r,i,o,a){var s=Kn(t,e,n,i,o,a),u=t.state,l=u.left,c=u.top,f=t.props.groupable,p=f?l:0,d=f?c:0,h=Gt(r,s);return Gt(h,[p,d])}function Jn(t,e,n,r,i,o){var a=t.props.groupable,s=t.state,u=s.transformOrigin,l=s.offsetMatrix,c=s.is3d,f=s.width,p=s.height,d=s.left,h=s.top,v=o.fixedDirection,g=o.nextTargetMatrix||s.targetMatrix,m=c?4:3,b=function(t,e,n,r,i,o){return void 0===r&&(r=e),void 0===i&&(i=n),void 0===o&&(o=[0,0]),t?t.map((function(t,a){var s=V(t),u=s.value,l=s.unit,c=a?i:r,f=a?n:e;return"%"===t||isNaN(u)?f*(c?o[a]/c:0):"%"!==l?u:f*u/100})):o}(i,e,n,f,p,u),x=a?d:0,y=a?h:0,E=function(t,e,n,r,i,o){var a=Nn(ro(e,n,r,i),o);return[t[0]-a[0],t[1]-a[1]]}(r,Yn(l,g,b,m),e,n,m,v);return Gt(E,[x,y])}function Qn(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}function tr(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&"0px"!==r&&"none"!==r&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&"1"!==n&&"none"!==n&&i.push("rotate(".concat(n,")")),e&&"1"!==e&&"none"!==e&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function er(t,e,n){for(var r,i,o,a,s,u=t,l=[],c=mt(t)||bt(t),f=!n&&t===e||t===c,p=f,d=!1,h=3,v=!1,g=Ui(e,e,!0).offsetParent,m=1;u&&!p;){p=f;var b=ar(u),x=b("position"),y=Vi(u),E="fixed"===x,S=tr(b),D=(a=Wi(y),void 0===(s=void 0)&&(s=6===a.length),s?[a[0],a[1],0,a[2],a[3],0,a[4],a[5],1]:a),C=void 0,w=!1,M=!1,R=0,O=0,_=0,T=0,P={hasTransform:!1,fixedContainer:null};E&&(v=!0,g=(P=Ji(u)).fixedContainer);var z=D.length;d||16!==z&&!S.length||(d=!0,h=4,$i(l),o&&(o=_t(o,3,4))),d&&9===z&&(D=_t(D,3,4));var G=Zi(u,t),k=G.tagName,B=G.hasOffset,I=G.isSVG,A=G.origin,F=G.targetOrigin,N=Ke(G.offset,2),Y=N[0],q=N[1];"svg"===k&&!u.ownerSVGElement&&o&&(l.push({type:"target",target:u,matrix:eo(u,h)}),l.push({type:"offset",target:u,matrix:Ht(h)}));var X=parseFloat(b("zoom"))||1;if(E)C=P.fixedContainer,w=!0;else{var W=Ui(u,e,!1,!0,b),H=W.offsetZoom;if(C=W.offsetParent,w=W.isEnd,M=W.isStatic,m*=H,(W.isCustomElement||1!==H)&&M)Y-=C.offsetLeft,q-=C.offsetTop;else if(fn||cn){if(W.parentSlotElement){for(var L=C,j=0,V=0;L&&Qn(L);)j+=L.offsetLeft,V+=L.offsetTop,L=L.offsetParent;Y-=j,q-=V}}}if(!nn||pn||!B||I||!M||"relative"!==x&&"static"!==x||(Y-=C.offsetLeft,q-=C.offsetTop,f=f||w),E)B&&P.hasTransform&&(_=C.clientLeft,T=C.clientTop);else if(B&&g!==C&&(R=C.clientLeft,O=C.clientTop),B&&C===c){var U=Ki(u,!1);Y+=U[0],q+=U[1]}if(l.push({type:"target",target:u,matrix:Hi(D,h,A)}),S.length&&(l.push({type:"offset",target:u,matrix:Ht(h)}),l.push({type:"target",target:u,matrix:Hi(Zt(S),h,A)})),B){var Z=u===t,K=Z?0:u.scrollLeft,$=Z?0:u.scrollTop;l.push({type:"offset",target:u,matrix:jt([Y-K+R-_,q-$+O-T],h)})}else l.push({type:"offset",target:u,origin:A});if(1!==X&&l.push({type:"zoom",target:u,matrix:Hi(Lt([X,X],h),h,[0,0])}),o||(o=D),r||(r=A),i||(i=F),p||E)break;u=C,f=w,n&&u!==c||(p=f)}return o||(o=Ht(h)),r||(r=[0,0]),i||(i=[0,0]),{zoom:m,offsetContainer:g,matrixes:l,targetMatrix:o,transformOrigin:r,targetOrigin:i,is3d:d,hasFixed:v}}var nr=null,rr=null,ir=null;function or(t){t?(window.Map&&(nr=new Map,rr=new Map),ir=[]):(nr=null,ir=null,rr=null)}function ar(t){var e=null===nr||void 0===nr?void 0:nr.get(t);if(!e){var n=xt(t).getComputedStyle(t);if(!nr)return function(t){return n[t]};e={style:n,cached:{}},nr.set(t,e)}var r=e.cached,i=e.style;return function(t){return t in r||(r[t]=i[t]),r[t]}}function sr(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map((function(t,r){return o[r]=o[r]||{},o[r][e]=o[r][e]||{},Ze(Ze({},n),{isRequestChild:!0,datas:o[r][e],originalDatas:o[r]})}))}function ur(t,e,n,r,i,o,a){var s=!!n.match(/Start$/g),u=!!n.match(/End$/g),l=i.isPinch,c=i.datas,f=sr(t,e.name,i),p=t.moveables,d=[],h=f.map((function(t,i){var f=p[i],h=f.state,v=h.gestos,g=t;if(s)g=new Rn(a).dragStart(r,t),d.push(g);else{if(v[a]||(v[a]=c.childGestos[i]),!v[a])return;g=Mn(t,h,r,l,o,a),d.push(g)}var m=e[n](f,Ze(Ze({},g),{parentFlag:!0}));return u&&(v[a]=null),m}));return s&&(c.childGestos=p.map((function(t){return t.state.gestos[a]}))),{eventParams:h,childEvents:d}}function lr(t,e,n,r,i,o){void 0===i&&(i=function(t,e){return e});var a=!!n.match(/End$/g),s=sr(t,e.name,r),u=t.moveables;return s.map((function(t,r){var s,l=u[r];s=i(l,t);var c=e[n](l,Ze(Ze({},s),{parentFlag:!0}));return c&&o&&o(l,t,c,r),a&&(l.state.gestos={}),c}))}function cr(t,e,n,r){var i=n.fixedDirection,o=n.fixedPosition,a=Nn(r.datas.startPositions||yo(e.state),i),s=Ke(Bt(Wt(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),2),u=s[0],l=s[1];return r.datas.originalX=u,r.datas.originalY=l,r}function fr(t,e,n,r){var i=t.getState(),o=i.renderPoses,a=i.rotation,s=i.direction,u=co(t.props,e).zoom,l=Gi(a/Math.PI*180),c={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var p=f.renderDirectionMap;n.forEach((function(t){var e=t.dir;c[e]=!0}));var d=Jo(s);return n.map((function(t){var n=t.data,i=t.classNames,s=t.dir,f=Dn[s];if(!f||!c[s])return null;p[s]=!0;var h=(ut(l,15)+d*Cn[s]+720)%180,v={};return Q(n).forEach((function(t){v["data-".concat(t)]=n[t]})),r.createElement("div",Ze({className:qi.apply(void 0,$e(["control","direction",s,e],Ke(i),!1)),"data-rotation":h,"data-direction":s},v,{key:"direction-".concat(s),style:lo.apply(void 0,$e([a,u],Ke(f.map((function(t){return o[t]}))),!1))}))}))}function pr(t,e,n,r){var i=co(t.props,n),o=i.renderDirections,a=void 0===o?e:o,s=i.displayAroundControls;if(!a)return[];var u=!0===a?tn:a;return $e($e([],Ke(s?mr(t,r,n,u):[]),!1),Ke(fr(t,n,u.map((function(t){return{data:{},classNames:[],dir:t}})),r)),!1)}function dr(t,e,n,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=ot(n,r),l=e?ut(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(o),className:qi.apply(void 0,$e(["line","direction",e?"edge":"",e],Ke(a),!1)),"data-rotation":l,"data-line-key":o,"data-direction":e,style:uo(n,r,i,u)})}function hr(t,e,n,r,i){return(!0===n?Qe:n).map((function(n,o){var a=Ke(Dn[n],2),s=a[0],u=a[1];if(null!=u)return dr(t,n,r[s],r[u],i,"".concat(e,"Edge").concat(o),e)})).filter(Boolean)}function vr(t){return function(e,n){var r=co(e.props,t).edge;return r&&(!0===r||r.length)?$e($e([],Ke(hr(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),Ke(function(t,e,n){return pr(t,["nw","ne","sw","se"],e,n)}(e,t,n)),!1):gr(e,t,n)}}function gr(t,e,n){return pr(t,tn,e,n)}function mr(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var o=t.getState(),a=o.renderPoses,s=o.rotation,u=o.direction,l=i.renderDirectionMap,c=t.props.zoom,f=Jo(u),p=s/Math.PI*180;return(r||Q(l)).map((function(t){var r=Dn[t];if(!r)return null;var i=(ut(p,15)+f*Cn[t]+720)%180,o=["around-control"];return n&&o.push("direction",n),e.createElement("div",{className:qi.apply(void 0,$e([],Ke(o),!1)),"data-rotation":i,"data-direction":t,key:"direction-around-".concat(t),style:lo.apply(void 0,$e([s,c],Ke(r.map((function(t){return a[t]}))),!1))})}))}function br(t,e,n){var r=t||{},i=r.position,o=void 0===i?"client":i,a=r.left,s=void 0===a?-1/0:a,u=r.top,l=void 0===u?-1/0:u,c=r.right,f=void 0===c?1/0:c,p=r.bottom,d={position:o,left:s,top:l,right:f,bottom:void 0===p?1/0:p};return{vertical:yr(d,e,!0),horizontal:yr(d,n,!1)}}function xr(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,s=r.clientTop,u=n.snapOffset,l=u.left,c=u.top,f=u.right,p=u.bottom,d=e||t.props.bounds||{},h="css"===(d.position||"client"),v=d.left,g=void 0===v?-1/0:v,m=d.top,b=void 0===m?-1/0:m,x=d.right,y=void 0===x?h?-1/0:1/0:x,E=d.bottom,S=void 0===E?h?-1/0:1/0:E;return h&&(y=o+f-l-y,S=i+p-c-S),{left:g+l-a,right:y+l-a,top:b+c-s,bottom:S+c-s}}function yr(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],o=Math.min.apply(Math,$e([],Ke(e),!1)),a=Math.max.apply(Math,$e([],Ke(e),!1)),s=[];return r+1>o&&s.push({direction:"start",isBound:!0,offset:o-r,pos:r}),i-1<a&&s.push({direction:"end",isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort((function(t,e){return Qo(e.offset)-Qo(t.offset)}))}function Er(t,e,n){return(n?t.map((function(t){return Yt(t,n)})):t).some((function(t){return t[0]<e.left&&Qo(t[0]-e.left)>.1||t[0]>e.right&&Qo(t[0]-e.right)>.1||t[1]<e.top&&Qo(t[1]-e.top)>.1||t[1]>e.bottom&&Qo(t[1]-e.bottom)>.1}))}function Sr(t,e,n,r,i){if(!t.props.bounds)return[];var o=i*Math.PI/180,a=xr(t),s=a.left,u=a.top,l=a.right,c=a.bottom,f=s-r[0],p=l-r[0],d=u-r[1],h=c-r[1],v={left:f,top:d,right:p,bottom:h};if(!Er(n,v,0))return[];var g=[];return[[f,0],[p,0],[d,1],[h,1]].forEach((function(t){var r=Ke(t,2),i=r[0],a=r[1];n.forEach((function(t){var n=ot([0,0],t);g.push.apply(g,$e([],Ke(function(t,e,n){var r=ao(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort((function(e,r){return Qo(e-t[n?0:1])-Qo(r-t[n?0:1])})).map((function(t){return ot([0,0],n?[t,e]:[e,t])}))}(t,i,a).map((function(t){return o+t-n})).filter((function(t){return!Er(e,v,t)})).map((function(t){return ut(180*t/Math.PI,bn)}))),!1))}))})),g}var Dr=["left","right","center"],Cr=["top","bottom","middle"],wr={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Mr={start:"left",end:"right",center:"center"},Rr={start:"top",end:"bottom",center:"middle"};function Or(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,u=n.snapGridWidth,l=n.snapGridHeight,c=t.state,f=c.guidelines,p=c.enableSnap;return!(!r||!p||e&&!0!==r&&r.indexOf(e)<0)&&!!(u||l||i||o||f&&f.length||a&&a.length||s&&s.length)}function _r(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function Tr(t,e){var n=function(t,e){var n=_r(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}(t,e),r=Cr.filter((function(t){return t in n})),i=Dr.filter((function(t){return t in n}));return{horizontalNames:r,verticalNames:i,horizontal:r.map((function(t){return n[t]})),vertical:i.map((function(t){return n[t]}))}}var Pr="snapRotationThreshold",zr="snapRotationDegrees",Gr="snapHorizontalThreshold",kr="snapVerticalThreshold";function Br(t,e,n,r,i,o,a){var s;void 0===r&&(r=[]),void 0===i&&(i=[]);var u=t.props,l=(null===(s=t.state.snapThresholdInfo)||void 0===s?void 0:s.multiples)||[1,1],c=zo(a,u[Gr],5),f=zo(o,u[kr],5);return Ir(t.state.guidelines,e,n,r,i,c,f,l)}function Ir(t,e,n,r,i,o,a,s){return{vertical:Yr(t,"vertical",e,a*s[0],r),horizontal:Yr(t,"horizontal",n,o*s[1],i)}}function Ar(t){var e="";return-1===t||"top"===t||"left"===t?e="start":0===t||"center"===t||"middle"===t?e="center":1!==t&&"right"!==t&&"bottom"!==t||(e="end"),e}function Fr(t,e,n,r){var i=Tr(t.props.snapDirections,e),o=Br(t,i.vertical,i.horizontal,i.verticalNames.map((function(t){return Ar(t)})),i.horizontalNames.map((function(t){return Ar(t)})),n,r),a=Ar(i.horizontalNames[o.horizontal.index]),s=Ar(i.verticalNames[o.vertical.index]);return{vertical:Ze(Ze({},o.vertical),{direction:s}),horizontal:Ze(Ze({},o.horizontal),{direction:a})}}function Nr(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,o=r.dist,a=r.guideline;return{isSnap:e,offset:i,dist:o,pos:n.pos,guideline:a}}function Yr(t,e,n,r,i){var o,a;if(void 0===i&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s="vertical"===e?0:1,u=n.map((function(n,o){var a=i[o]||"",u=t.map((function(t){var e=t.pos,r=n-e[s];return{offset:r,dist:Qo(r),guideline:t,direction:a}})).filter((function(t){var n=t.guideline,i=t.dist;return!(n.type!==e||i>r)})).sort((function(t,e){return t.dist-e.dist}));return{pos:n,index:o,guidelineInfos:u,direction:a}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),l=u.length>0;return{isSnap:l,index:l?u[0].index:-1,direction:null!==(a=null===(o=u[0])||void 0===o?void 0:o.direction)&&void 0!==a?a:"",posInfos:u}}function qr(t,e,n,r,i){var o=[];n[0]&&n[1]?o=[n,[-n[0],n[1]],[n[0],-n[1]]]:n[0]||n[1]?t.props.keepRatio?o.push([-1,-1],[-1,1],[1,-1],[1,1],n):(o.push.apply(o,$e([],Ke(function(t,e){return An(e).map((function(e){return t[e]}))}([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),o.length>1&&o.push([(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2])):[[-1,-1],[1,-1],[1,1],[-1,1]].forEach((function(t,e,n){var r=n[e+1]||n[0];o.push(t),o.push([(t[0]+r[0])/2,(t[1]+r[1])/2])}));var a=o.map((function(t){return Nn(e,t)})),s=Br(t,a.map((function(t){return t[0]})),a.map((function(t){return t[1]})),o.map((function(t){return Ar(t[0])})),o.map((function(t){return Ar(t[1])})),r,i),u=Ar(o.map((function(t){return t[0]}))[s.vertical.index]),l=Ar(o.map((function(t){return t[1]}))[s.horizontal.index]);return{vertical:Ze(Ze({},s.vertical),{direction:u}),horizontal:Ze(Ze({},s.horizontal),{direction:l})}}function Xr(t,e){var n=Qo(t.offset),r=Qo(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<bn?1:r<bn?-1:n-r}function Wr(t,e){return t.slice().sort((function(t,n){var r=t.sign[e],i=n.sign[e],o=t.offset[e],a=n.offset[e];return r?i?Xr({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:a}):-1:1}))[0]}function Hr(t,e){var n=it([e[0][0],e[1][0]]),r=it([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function Lr(t,e){var n,r,i=Ke(e,2),o=i[0],a=i[1],s=a[0]-o[0],u=a[1]-o[1];if(Qo(s)<bn&&(s=0),Qo(u)<bn&&(u=0),s)if(u){n=u/s*(t[0]-o[0])+o[1],r=t[1]}else n=o[1],r=t[1];else n=o[0],r=t[0];return n-r}function jr(t,e,n,r){return void 0===r&&(r=bn),t.every((function(t){var i=Lr(t,e);return i<=0===n||Qo(i)<=r}))}function Vr(t,e,n,r,i){return void 0===i&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Ur(t,e,n,r,i,o){var a,s,u=Ke(e,2),l=u[0],c=u[1],f=t[0],p=n[0],d=n[1],h=Yo(d[1]-p[1]),v=c,g=l,m=-l/c;return Yo(d[0]-p[0])?h||o&&!v?{isBound:!1,offset:0}:g?Vr((p[1]-f[1])/m+f[0],p[0],d[0],r,i):{isBound:s=Qo(a=p[1]-f[1])<=(i||0),offset:s?a:0}:o&&!g?{isBound:!1,offset:0}:v?Vr(m*(p[0]-f[0])+f[1],p[1],d[1],r,i):{isBound:s=Qo(a=p[0]-f[0])<=(i||0),offset:s?a:0}}function Zr(t,e,n){return e.map((function(e){var r=function(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,o=e.horizontalSign,a=e.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,l=s.top,c=s.width,f=s.height,p=[[u,l],[u,l+f]],d=[[u,l],[u+c,l]],h=[[u+c,l],[u+c,l+f]],v=[[u,l+f],[u+c,l+f]];if(jr([[u,l],[u+c,l],[u,l+f],[u+c,l+f]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Ur(n,a,d,i),m=Ur(n,a,v,i),b=Ur(n,a,p,o),x=Ur(n,a,h,o),y=g.isBound&&m.isBound,E=g.isBound||m.isBound,S=b.isBound&&x.isBound,D=b.isBound||x.isBound,C=Bo(g.offset,m.offset),w=Bo(b.offset,x.offset),M=[0,0],R=!1,O=!1;return Qo(w)<Qo(C)?(M=[C,0],R=E,O=y):(M=[0,w],R=D,O=S),{isAllBound:O,isVerticalBound:E,isHorizontalBound:D,isBound:R,offset:M}}(t,e),i=r.isBound,o=r.offset,a=r.isVerticalBound,s=r.isHorizontalBound,u=e.multiple,l=In({datas:n,distX:o[0],distY:o[1]}).map((function(t,e){return t*(u[e]?2/u[e]:0)}));return{sign:u,isBound:i,isVerticalBound:a,isHorizontalBound:s,isSnap:!1,offset:l}}))}function Kr(t,e,n){var r,i=Zr(t,$r(t,e,[0,0],!1).map((function(t){return Ze(Ze({},t),{multiple:t.multiple.map((function(t){return 2*Qo(t)}))})})),n),o=Wr(i,0),a=Wr(i,1),s=0,u=0,l=o.isVerticalBound||a.isVerticalBound,c=o.isHorizontalBound||a.isHorizontalBound;return(l||c)&&(r=Ke(function(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.beforeMatrix,a=n.matrix,s=n.is3d,u=n.startDragBeforeDist,l=n.startDragDist,c=n.absoluteOrigin,f=s?4:3;return Gt(Bt(e?o:a,zt(e?u:l,[r,i]),f),c)}({datas:n,distX:-o.offset[0],distY:-a.offset[1]}),2),s=r[0],u=r[1]),{vertical:{isBound:l,offset:s},horizontal:{isBound:c,offset:u}}}function $r(t,e,n,r){var i=t.state,o=ro(i.allMatrix,100,100,i.is3d?4:3),a=Nn(o,[0,0]);return function(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,2*i],t,[-r,i]],[[2*r,0],t,[r,-i]]):r?(n.push([[2*r,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,2*i],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}(n,r).map((function(t){var n=Ke(t,3),r=n[0],i=n[1],s=n[2],u=[Nn(o,i),Nn(o,s)],l=function(t){var e=Ke(t,2),n=e[0],r=e[1],i=r[0]-n[0],o=r[1]-n[1];Math.abs(i)<z&&(i=0),Math.abs(o)<z&&(o=0);var a=0,s=0,u=0;return i?o?(s=1,u=(a=-o/i)*n[0]-n[1]):(s=1,u=-n[1]):(a=-1,u=n[0]),[a,s,u].map((function(t){return ut(t,z)}))}(u),c=Hr(a,u),f=c.vertical,p=c.horizontal;return{multiple:r,centerSign:Lr(a,u)<=0,verticalSign:f,horizontalSign:p,lineConstants:l,line:[Nn(e,i),Nn(e,s)]}}))}function Jr(t,e,n,r){var i=r?t.map((function(t){return Yt(t,r)})):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some((function(t){var r=Lr(n,t)<=0;return!jr(e,t,r)}))}function Qr(t,e,n,r,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,f=s-r[0],p=s+l-r[0],d=u-r[1],h=u+c-r[1],v=[[f,d],[p,d],[f,h],[p,h]],g=Nn(n,[0,0]);if(!Jr(n,v,g,0))return[];var m=[],b=v.map((function(t){return[ao(t),ot([0,0],t)]}));return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach((function(t){var n=ot([0,0],function(t){var e=Ke(t,2),n=e[0],r=e[1],i=r[0]-n[0],o=r[1]-n[1];if(!i)return[n[0],0];if(!o)return[0,n[1]];var a=o/i,s=-a*n[0]+n[1];return[-s/(a+1/a),s/(a*a+1)]}(t)),r=function(t){var e=Ke(t,2),n=e[0],r=e[1],i=r[0]-n[0],o=r[1]-n[1];if(!i)return Qo(n[0]);if(!o)return Qo(n[1]);var a=o/i;return Qo((-a*n[0]+n[1])/Math.sqrt(Math.pow(a,2)+1))}(t);m.push.apply(m,$e([],Ke(b.filter((function(t){var e=Ke(t,1)[0];return e&&r<=e})).map((function(t){var e=Ke(t,2),i=e[0],o=e[1],s=Math.acos(i?r/i:0);return[a+(o+s)-n,a+(o-s)-n]})).reduce((function(t,e){return t.push.apply(t,$e([],Ke(e),!1)),t}),[]).filter((function(t){return!Jr(e,v,g,t)})).map((function(t){return ut(180*t/Math.PI,bn)}))),!1))})),m}function ti(t,e,n,r,i){var o=function(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];if(Qo(i)<z&&(i=0),Qo(o)<z&&(o=0),!i)return r?[0,0]:[0,n];if(!o)return r?[n,0]:[0,0];var a=o/i,s=t[1]-a*t[0];return r?[n,a*(e[0]+n)+s-e[1]]:[(e[1]+n-s)/a-e[0],n]}(t,e,n,r);if(!o)return{isOutside:!1,offset:[0,0]};var a=st(t,e),s=st(o,t),u=st(o,e),l=s>a||u>a,c=Ke(In({datas:i,distX:o[0],distY:o[1]}),2);return{offset:[c[0],c[1]],isOutside:l}}function ei(t,e){return t.isBound?t.offset:e.isSnap?Nr(e).offset:0}function ni(t,e,n,r,i,o){if(!Or(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=xo(o.absolutePoses,[e,n]),s=io(a),u=s.left,l=s.right,c=s.top,f=s.bottom,p={horizontal:a.map((function(t){return t[1]})),vertical:a.map((function(t){return t[0]}))},d=ri(t,i,Tr(_r(t.props.snapDirections),{left:u,right:l,top:c,bottom:f,center:(u+l)/2,middle:(c+f)/2}),p),h=d.vertical,v=d.horizontal,g=Kr(t,a,o),m=g.vertical,b=g.horizontal,x=h.isSnap,y=v.isSnap,E=h.isBound||m.isBound,S=v.isBound||b.isBound,D=Ke(function(t,e,n,r,i){var o=Ke(e,2),a=o[0],s=o[1],u=Ke(n,2),l=u[0],c=u[1],f=Ke(r,2),p=f[0],d=f[1],h=Ke(i,2),v=h[0],g=h[1],m=-v,b=-g;if(t&&a&&s){m=0,b=0;var x=[];if(l&&c?x.push([0,g],[v,0]):l?x.push([v,0]):c?x.push([0,g]):p&&d?x.push([0,g],[v,0]):p?x.push([v,0]):d&&x.push([0,g]),x.length){x.sort((function(t,e){return ao(Gt([a,s],t))-ao(Gt([a,s],e))}));var y=x[0];if(y[0]&&Qo(a)>z)m=-y[0],b=s*Qo(a+m)/Qo(a)-s;else if(y[1]&&Qo(s)>z){var E=s;b=-y[1],m=a*Qo(s+b)/Qo(E)-a}if(t&&c&&l)if(Qo(m)>z&&Qo(m)<Qo(v))m*=S=Qo(v)/Qo(m),b*=S;else if(Qo(b)>z&&Qo(b)<Qo(g)){var S;m*=S=Qo(g)/Qo(b),b*=S}else m=Bo(-v,m),b=Bo(-g,b)}}else m=a||l?-v:0,b=s||c?-g:0;return[m,b]}(r,[e,n],[E,S],[x,y],[Bo(h.offset,m.offset),Bo(v.offset,b.offset)]),2);return[{isBound:E,isSnap:x,offset:D[0]},{isBound:S,isSnap:y,offset:D[1]}]}function ri(t,e,n,r){void 0===r&&(r=n);var i=br(xr(t),r.vertical,r.horizontal),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Br(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),u=s.horizontal,l=s.vertical,c=ei(o[0],u),f=ei(a[0],l),p=Qo(c),d=Qo(f);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l}}}function ii(t,e,n,r,i,o,a){void 0===a&&(a=[1,1]);var s=br(e,n,r),u=s.horizontal,l=s.vertical,c=Ir(t,n,r,[],[],i,o,a),f=c.horizontal,p=c.vertical,d=ei(u[0],f),h=ei(l[0],p),v=Qo(d),g=Qo(h);return{horizontal:{isBound:u[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:d,dist:v,bounds:u,snap:f},vertical:{isBound:l[0].isBound,isSnap:p.isSnap,snapIndex:p.index,offset:h,dist:g,bounds:l,snap:p}}}function oi(t,e,n,r,i,o){return n.map((function(n){var a=Ke(n,2),s=a[0],u=a[1],l=Nn(e,s),c=Nn(e,u),f=r?function(t,e,n,r){var i=function(t,e,n){var r=xr(t),i=r.left,o=r.top,a=r.right,s=r.bottom,u=Ke(n,2),l=u[0],c=u[1],f=Ke(Gt(n,e),2),p=f[0],d=f[1];Qo(p)<bn&&(p=0),Qo(d)<bn&&(d=0);var h=d>0,v=p>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(0===p&&0===d)return{vertical:g,horizontal:m};if(0===p)h?s<c&&(m.pos=s,m.offset=c-s):o>c&&(m.pos=o,m.offset=c-o);else if(0===d)v?a<l&&(g.pos=a,g.offset=l-a):i>l&&(g.pos=i,g.offset=l-i);else{var b=d/p,x=n[1]-b*l,y=0,E=0,S=!1;v&&a<=l?(y=b*a+x,E=a,S=!0):!v&&l<=i&&(y=b*i+x,E=i,S=!0),S&&(y<o||y>s)&&(S=!1),S||(h&&s<=c?(E=((y=s)-x)/b,S=!0):!h&&c<=o&&(E=((y=o)-x)/b,S=!0)),S&&(g.isBound=!0,g.pos=E,g.offset=l-E,m.isBound=!0,m.pos=y,m.offset=c-y)}return{vertical:g,horizontal:m}}(t,e,n),o=i.horizontal,a=i.vertical,s=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=Ke(n,2),i=r[0],o=r[1],a=Ke(e,2),s=a[0],u=a[1],l=Ke(Gt(n,e),2),c=l[0],f=l[1],p=f>0,d=c>0;c=Yo(c),f=Yo(f);var h={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(0===c&&0===f)return{vertical:h,horizontal:v};var g=Br(t,c?[i]:[],f?[o]:[],[],[],void 0,void 0),m=g.vertical,b=g.horizontal;m.posInfos.filter((function(t){var e=t.pos;return d?e>=s:e<=s})),b.posInfos.filter((function(t){var e=t.pos;return p?e>=u:e<=u})),m.isSnap=m.posInfos.length>0,b.isSnap=b.posInfos.length>0;var x=Nr(m),y=x.isSnap,E=x.guideline,S=Nr(b),D=S.isSnap,C=S.guideline,w=D?C.pos[1]:0,M=y?E.pos[0]:0;if(0===c)D&&(v.isSnap=!0,v.pos=C.pos[1],v.offset=o-v.pos);else if(0===f)y&&(h.isSnap=!0,h.pos=M,h.offset=i-M);else{var R=f/c,O=n[1]-R*i,_=0,T=0,P=!1;y?(_=R*(T=M)+O,P=!0):D&&(T=((_=w)-O)/R,P=!0),P&&(h.isSnap=!0,h.pos=T,h.offset=i-T,v.isSnap=!0,v.pos=_,v.offset=o-_)}return{vertical:h,horizontal:v}}(t,e,n),u=s.horizontal,l=s.vertical,c=ai(o,u),f=ai(a,l),p=Qo(c),d=Qo(f);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:c,dist:p},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:f,dist:d}}}(t,l,c,i):ri(t,i,{vertical:[c[0]],horizontal:[c[1]]}),p=f.horizontal,d=p.offset,h=p.isBound,v=p.isSnap,g=f.vertical,m=g.offset,b=g.isBound,x=g.isSnap,y=Gt(u,s);if(!m&&!d)return{isBound:b||h,isSnap:x||v,sign:y,offset:[0,0]};var E=function(t,e,n,r){var i=ot(t,e)/Math.PI*180,o=n.vertical,a=o.isBound,s=o.isSnap,u=o.dist,l=n.horizontal,c=l.isBound,f=l.isSnap,p=i%180,d=p<3||p>177,h=p>87&&p<93;return l.dist<u&&(a||s&&!h&&(!r||!d))?"vertical":!c&&(!f||d||r&&h)?"":"horizontal"}(l,c,f,r);if(!E)return{sign:y,isBound:!1,isSnap:!1,offset:[0,0]};var S="vertical"===E,D=[0,0];return D=(D=r||1!==Qo(u[0])||1!==Qo(u[1])||s[0]===u[0]||s[1]===u[1]?ti(l,c,-(S?m:d),S,o).offset:In({datas:o,distX:-m,distY:-d})).map((function(t,e){return t*(y[e]?2/y[e]:0)})),{sign:y,isBound:S?b:h,isSnap:S?x:v,offset:D}}))}function ai(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}var si={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,o=n.zoom,a=t.getState(),s=a.dragInfo,u=a.beforeOrigin;if(r||!i||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var c=ao(l),f=ot(l,[0,0]);return[e.createElement("div",{className:qi("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(f,"rad) scaleY(").concat(o,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,o=t.state,a=o.gestos,s=o.style;if(a.draggable)return!1;a.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(s.left||"")||0,n.top=parseFloat(s.top||"")||0,n.bottom=parseFloat(s.bottom||"")||0,n.right=parseFloat(s.right||"")||0,n.startValue=[0,0],Tn(t,e),Xn(t,e,"translate"),function(t,e){e.absolutePoses=yo(t.state)}(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var u=wo(t,e,Ze({set:function(t){n.startValue=t}},qn(t,e)));return!1!==(r||Oo(t,"onDragStart",u))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(a.draggable=null,n.isPinch=!1),!!n.isDrag&&u},drag:function(t,e){if(e){Pn(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,a=e.deltaOffset,s=e.useSnap,u=e.isRequest,l=e.isGroup,c=e.parentThrottleDrag,f=e.distX,p=e.distY,d=n.isDrag,h=n.prevDist,v=n.prevBeforeDist,g=n.startValue;if(d){a&&(f+=a[0],p+=a[1]);var m=t.props,b=m.parentMoveable,x=l?0:m.throttleDrag||c||0,y=r?0:m.throttleDragRotate||0,E=0,S=!1,D=!1,C=!1,w=!1;if(!r&&y>0&&(f||p)){var M=m.startDragRotate||0,R=ut(M+180*ot([0,0],[f,p])/Math.PI,y)-M,O=p*Math.abs(Math.cos((R-90)/180*Math.PI)),_=ao([f*Math.abs(Math.cos(R/180*Math.PI)),O]);E=R*Math.PI/180,f=_*Math.cos(E),p=_*Math.sin(E)}if(!o&&!r&&!i){var T=Ke(ni(t,f,p,y,!s&&u||a,n),2),P=T[0],z=T[1];S=P.isSnap,D=P.isBound,C=z.isSnap,w=z.isBound,f+=P.offset,p+=z.offset}var G=zt(Bn({datas:n,distX:f,distY:p}),g),k=zt(Gn({datas:n,distX:f,distY:p}),g);lt(k,bn),lt(G,bn),y||(S||D||(k[0]=ut(k[0],x),G[0]=ut(G[0],x)),C||w||(k[1]=ut(k[1],x),G[1]=ut(G[1],x)));var B=Gt(G,g),I=Gt(k,g),A=Gt(I,h),F=Gt(B,v);n.prevDist=I,n.prevBeforeDist=B,n.passDelta=A,n.passDist=I;var N=n.left+B[0],Y=n.top+B[1],q=n.right-B[0],X=n.bottom-B[1],W=zn(n,"translate(".concat(k[0],"px, ").concat(k[1],"px)"),"translate(".concat(I[0],"px, ").concat(I[1],"px)"));if(Hn(e,W),t.state.dragInfo.dist=r?[0,0]:I,r||b||!A.every((function(t){return!t}))||!F.some((function(t){return!t}))){var H=t.state,L=H.width,j=H.height,V=wo(t,e,Ze({transform:W,dist:I,delta:A,translate:k,beforeDist:B,beforeDelta:F,beforeTranslate:G,left:N,top:Y,right:q,bottom:X,width:L,height:j,isPinch:o},Do({transform:W},e)));return!r&&Oo(t,"onDrag",V),V}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return!(!r[0]&&!r[1])&&(n.deltaOffset=[0,0],this.drag(t,Ze(Ze({},e),{deltaOffset:r})))},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,r.isDrag){r.isDrag=!1;var i=Mo(t,e,{});return!n&&Oo(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,o=e.clientX,a=e.clientY,s=this.dragStart(t,e);if(!s)return!1;var u=ur(t,this,"dragStart",[o||0,a||0],e,!1,"draggable"),l=u.childEvents,c=u.eventParams,f=Oo(t,"onDragGroupStart",Ze(Ze({},s),{targets:t.props.targets,events:c}));i.isDrag=!1!==f;var p=null!==(r=null===(n=l[0])||void 0===n?void 0:n.datas.startValue)&&void 0!==r?r:[0,0];return i.throttleOffset=[p[0]%1,p[1]%1],!!i.isDrag&&s},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,Ze(Ze({},e),{parentThrottleDrag:t.props.throttleDrag})),r=ur(t,this,"drag",e.datas.passDelta,e,!1,"draggable").eventParams;if(n){var i=Ze({targets:t.props.targets,events:r},n);return Oo(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var r=ur(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Oo(t,"onDragGroupEnd",Mo(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=!1;return{isControl:!1,requestStart:function(t){return o=t.useSnap,{datas:e,useSnap:o}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:r,distY:i,useSnap:o}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:o}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function ui(t,e){return{fixedPosition:Nn(t,e),fixedDirection:e,fixedOffset:[0,0]}}function li(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,o=t.height,a=r?4:3,s=function(t,e,n){return[e?t[0]/(e/2)-1:0,n?t[1]/(n/2)-1:0]}(e,i,o);return{fixedPosition:no(n,e,a),fixedDirection:s,fixedOffset:[i?0:e[0],o?0:e[1]]}}var ci=Xo("resizable"),fi={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:vr("resizable"),dragControlCondition:ci,viewClassName:qo("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,o=e.isGroup,a=e.parentDirection,s=e.parentGesto,u=e.datas,l=e.parentFixedDirection,c=e.parentEvent,f=mo(a,i,r,u),p=t.state,d=p.target,h=p.width,v=p.height,g=p.gestos;if(!f||!d)return!1;if(g.resizable)return!1;g.resizable=s||t.controlGesto,!i&&Tn(t,e),u.datas={},u.direction=f,u.startOffsetWidth=h,u.startOffsetHeight=v,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=p.inlineCSSWidth||p.cssWidth,u.startHeight=p.inlineCSSHeight||p.cssHeight,u.maxSize=[1/0,1/0],o||(u.minSize=[p.minOffsetWidth,p.minOffsetHeight],u.maxSize=[p.maxOffsetWidth,p.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";function b(t){u.ratio=t&&isFinite(t)?t:0}function x(t){var e=ui(u.startPositions,t);u.fixedDirection=e.fixedDirection,u.fixedPosition=e.fixedPosition,u.fixedOffset=e.fixedOffset}function y(e){var n=li(t.state,e);u.fixedDirection=n.fixedDirection,u.fixedPosition=n.fixedPosition,u.fixedOffset=n.fixedOffset}function E(t){u.minSize=[tt("".concat(t[0]),0)||0,tt("".concat(t[1]),0)||0]}function S(t){var e=[t[0]||1/0,t[1]||1/0];N(e[0])&&!isFinite(e[0])||(e[0]=tt("".concat(e[0]),0)||1/0),N(e[1])&&!isFinite(e[1])||(e[1]=tt("".concat(e[1]),0)||1/0),u.maxSize=e}u.transformOrigin=m&&F(m)?m.split(" "):m,u.startOffsetMatrix=p.offsetMatrix,u.startTransformOrigin=p.transformOrigin,u.isWidth=null!==(n=null===e||void 0===e?void 0:e.parentIsWidth)&&void 0!==n?n:!f[0]&&!f[1]||f[0]||!f[1],u.startPositions=yo(t.state),b(h/v),x(l||[-f[0],-f[1]]),u.setFixedDirection=x,u.setFixedPosition=y,u.setMin=E,u.setMax=S;var D=wo(t,e,{direction:f,startRatio:u.ratio,set:function(t){var e=Ke(t,2),n=e[0],r=e[1];u.startWidth=n,u.startHeight=r},setMin:E,setMax:S,setRatio:b,setFixedDirection:x,setFixedPosition:y,setOrigin:function(t){u.transformOrigin=t},dragStart:si.dragStart(t,(new Rn).dragStart([0,0],e))}),C=c||Oo(t,"onResizeStart",D);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,!1!==C&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:f}),!!u.isResize&&D},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,o=e.isPinch,a=e.parentKeepRatio,s=e.dragClient,u=e.parentDist,l=e.useSnap,c=e.isRequest,f=e.isGroup,p=e.parentEvent,d=e.resolveMatrix,h=r.isResize,v=r.transformOrigin,g=r.startWidth,m=r.startHeight,b=r.prevWidth,x=r.prevHeight,y=r.minSize,E=r.maxSize,S=r.ratio,D=r.startOffsetWidth,C=r.startOffsetHeight,w=r.isWidth;if(h){if(d){var M=t.state.is3d,R=r.startOffsetMatrix,O=r.startTransformOrigin,_=M?4:3,T=Zt(jn(e)),P=Math.sqrt(T.length);_!==P&&(T=_t(T,P,_));var z=Yn(R,T,O,_),G=ro(z,D,C,_);r.startPositions=G,r.nextTargetMatrix=T,r.nextAllMatrix=z}var k=co(t.props,"resizable"),B=k.resizeFormat,I=k.throttleResize,A=void 0===I?i?0:1:I,F=k.parentMoveable,N=k.keepRatioFinally,Y=r.direction,q=Y,X=0,W=0;Y[0]||Y[1]||(q=[1,1]);var H=S&&(null!=a?a:k.keepRatio)||!1,L=Ke(ot(),2),j=L[0],V=L[1];p||(r.setFixedDirection(r.fixedDirection),Oo(t,"onBeforeResize",wo(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(t){var e;return r.setFixedDirection(t),e=Ke(ot(),2),j=e[0],V=e[1],[j,V]},setFixedPosition:function(t){var e;return r.setFixedPosition(t),e=Ke(ot(),2),j=e[0],V=e[1],[j,V]},boundingWidth:j,boundingHeight:V,setSize:function(t){var e;e=Ke(t,2),j=e[0],V=e[1]}},!0)));var U=s;s||(U=!i&&o?function(t,e){return Nn(yo(t.state),e)}(t,[0,0]):r.fixedPosition);var Z=[0,0];if(o||(Z=function(t,e,n,r,i,o,a){if(!Or(t,"resizable"))return[0,0];var s=a.fixedDirection,u=a.nextAllMatrix,l=t.state,c=l.allMatrix,f=l.is3d;return zi(t,(function(t,r){return _i(u||c,e+t,n+r,s,i,f)}),e,n,r,i,o,a)}(t,j,V,Y,U,!l&&c,r)),u&&(!u[0]&&(Z[0]=0),!u[1]&&(Z[1]=0)),H){q[0]&&q[1]&&Z[0]&&Z[1]&&(Qo(Z[0])>Qo(Z[1])?Z[1]=0:Z[0]=0);var K=!Z[0]&&!Z[1];K&&at(),q[0]&&!q[1]||Z[0]&&!Z[1]||K&&w?(j+=Z[0],V=j/S):(!q[0]&&q[1]||!Z[0]&&Z[1]||K&&!w)&&(V+=Z[1],j=V*S)}else j+=Z[0],V+=Z[1],j=Math.max(0,j),V=Math.max(0,V);n=Ke(rt([j,V],y,E,!!H&&S),2),j=n[0],V=n[1],at(),H&&(f||N)&&(w?V=j/S:j=V*S);var $=[(X=j-D)-b,(W=V-C)-x];r.prevWidth=X,r.prevHeight=W;var J=Jn(t,j,V,U,v,r);if(F||!$.every((function(t){return!t}))||!J.every((function(t){return!t}))){var Q=si.drag(t,Mn(e,t.state,J,!!o,!1,"draggable")),tt=Q.transform,et=g+X,nt=m+W,it=wo(t,e,Ze({width:et,height:nt,offsetWidth:Math.round(j),offsetHeight:Math.round(V),startRatio:S,boundingWidth:j,boundingHeight:V,direction:Y,dist:[X,W],delta:$,isPinch:!!o,drag:Q},Co({style:{width:"".concat(et,"px"),height:"".concat(nt,"px")},transform:tt},Q,e)));return!p&&Oo(t,"onResize",it),it}}function ot(){var t=r.fixedDirection,n=Vo(q,H,r,e);X=n.distWidth,W=n.distHeight;var i=q[0]-t[0]||H?Math.max(D+X,bn):D,o=q[1]-t[1]||H?Math.max(C+W,bn):C;return H&&D&&C&&(w?o=i/S:i=o*S),[i,o]}function at(){var t;B&&(t=Ke(B([j,V]),2),j=t[0],V=t[1]),j=ut(j,A),V=ut(V,A)}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,a=n.prevWidth,s=n.prevHeight;if(r&&!1!==t.props.checkResizableError){var u=t.state,l=u.width-(i+a),c=u.height-(o+s),f=Qo(l)>3,p=Qo(c)>3;return f&&(n.startWidth+=l,n.startOffsetWidth+=l,n.prevWidth+=l),p&&(n.startHeight+=c,n.startOffsetHeight+=c,n.prevHeight+=c),f||p?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=Mo(t,e,{});return!r&&Oo(t,"onResizeEnd",i),i}},dragGroupControlCondition:ci,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,Ze(Ze({},e),{isGroup:!0}));if(!r)return!1;var i=sr(t,"resizable",e),o=n.startOffsetWidth,a=n.startOffsetHeight;function s(){var t=n.minSize;i.forEach((function(e){var n=e.datas,r=n.minSize,i=n.startOffsetWidth,s=n.startOffsetHeight,u=o*(i?r[0]/i:0),l=a*(s?r[1]/s:0);t[0]=Math.max(t[0],u),t[1]=Math.max(t[1],l)}))}function u(){var t=n.maxSize;i.forEach((function(e){var n=e.datas,r=n.maxSize,i=n.startOffsetWidth,s=n.startOffsetHeight,u=o*(i?r[0]/i:0),l=a*(s?r[1]/s:0);t[0]=Math.min(t[0],u),t[1]=Math.min(t[1],l)}))}var l=lr(t,this,"dragControlStart",e,(function(e,r){return cr(t,e,n,r)}));s(),u();var c=function(e){r.setFixedDirection(e),l.forEach((function(r,o){r.setFixedDirection(e),cr(t,r.moveable,n,i[o])}))};n.setFixedDirection=c;var f=Ze(Ze({},r),{targets:t.props.targets,events:l.map((function(t){return Ze(Ze({},t),{setMin:function(e){t.setMin(e),s()},setMax:function(e){t.setMax(e),u()}})})),setFixedDirection:c,setMin:function(t){r.setMin(t),s()},setMax:function(t){r.setMax(t),u()}}),p=Oo(t,"onResizeGroupStart",f);return n.isResize=!1!==p,!!n.isResize&&r},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=co(t.props,"resizable");Ro(t,"onBeforeResize",(function(n){Oo(t,"onBeforeResizeGroup",wo(t,e,Ze(Ze({},n),{targets:r.targets}),!0))}));var i=this.dragControl(t,Ze(Ze({},e),{isGroup:!0}));if(i){var o=i.boundingWidth,a=i.boundingHeight,s=i.dist,u=r.keepRatio,l=[o/(o-s[0]),a/(a-s[1])],c=n.fixedPosition,f=lr(t,this,"dragControl",e,(function(e,n){var r=Ke(Bt(Wt(t.rotation/180*Math.PI,3),[n.datas.originalX*l[0],n.datas.originalY*l[1],1],3),2),i=r[0],o=r[1];return Ze(Ze({},n),{parentDist:null,parentScale:l,dragClient:zt(c,[i,o]),parentKeepRatio:u})})),p=Ze({targets:r.targets,events:f},i);return Oo(t,"onResizeGroup",p),p}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var r=lr(t,this,"dragControlEnd",e);return Oo(t,"onResizeGroupEnd",Mo(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=0,i=!1,o=t.getRect();return{isControl:!0,requestStart:function(t){var n;return i=t.useSnap,{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null===(n=null===t||void 0===t?void 0:t.horizontal)||void 0===n||n,useSnap:i}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-o.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-o.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function pi(t,e,n,r,i){var o=t.props.groupable,a=t.state,s=a.is3d?4:3,u=e.origin,l=no(t.state.rootMatrix,Gt([u[0],u[1]],o?[0,0]:[a.left,a.top]),s),c=zt([i.left,i.top],l);e.startAbsoluteOrigin=c,e.prevDeg=ot(c,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=st(c,[n,r])}function di(t,e,n){var r=n.defaultDeg,i=n.prevDeg,o=i%360,a=Math.floor(i/360);o<0&&(o+=360),o>t&&o>270&&t<90?++a:o<t&&o<90&&t>270&&--a;var s=e*(360*a+t-r);return n.prevDeg=r+s,s}function hi(t,e,n,r){return di(ot(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function vi(t,e,n,r,i,o){var a=t.props.throttleRotate,s=void 0===a?0:a,u=n.prevSnapDeg,l=0,c=!1;if(o){var f=function(t,e,n,r){var i,o=t.props,a=null!==(i=o[Pr])&&void 0!==i?i:5,s=o[zr];if(Or(t,"rotatable")){var u=e.pos1,l=e.pos2,c=e.pos3,f=e.pos4,p=e.origin,d=n*Math.PI/180,h=[u,l,c,f].map((function(t){return Gt(t,p)})),v=h.map((function(t){return Yt(t,d)})),g=$e($e([],Ke(Sr(t,h,v,p,n)),!1),Ke(Qr(t,h,v,p,n)),!1);g.sort((function(t,e){return Qo(t-n)-Qo(e-n)}));var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:n}}if((null===s||void 0===s?void 0:s.length)&&a){var b=s.slice().sort((function(t,e){return Bi(t,r)-Bi(e,r)}))[0];if(Bi(b,r)<=a)return{isSnap:!0,dist:n+ki(r,b)-r}}return{isSnap:!1,dist:n}}(t,e,r,i+r);c=f.isSnap,l=i+f.dist}c||(l=ut(i+r,s));var p=l-i;return n.prevSnapDeg=p,[p-u,p,l]}function gi(t,e,n){var r=Ke(e,4),i=r[0],o=r[1],a=r[2],s=r[3];if("none"===t)return[];if(A(t))return t.map((function(t){return gi(t,[i,o,a,s],n)[0]}));var u=Ke((t||"top").split("-"),2),l=u[0],c=u[1],f=[i,o];"left"===l?f=[a,i]:"right"===l?f=[o,s]:"bottom"===l&&(f=[s,a]);var p=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],d=po(f,n);if(c){var h="top"===c||"left"===c,v="bottom"===l||"left"===l;p=f[h&&!v||!h&&v?0:1]}return[[p,d]]}function mi(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var n=e.inputEvent.target;if(ft(n,qi("rotation-control"))||t.props.rotateAroundControls&&ft(n,qi("around-control"))||ft(n,qi("control"))&&ft(n,qi("rotatable")))return!0;var r=t.props.rotationTarget;return!!r&&Ho(r,!0).some((function(t){return!!t&&(n===t||n.contains(t))}))}var bi={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[".rotation {\nposition: absolute;\nheight: 40px;\nwidth: 1px;\ntransform-origin: 50% 100%;\nheight: calc(40px * var(--zoom));\ntop: auto;\nleft: 0;\nbottom: 100%;\nwill-change: transform;\n}\n.rotation .rotation-line {\ndisplay: block;\nwidth: 100%;\nheight: 100%;\ntransform-origin: 50% 50%;\n}\n.rotation .rotation-control {\nborder-color: #4af;\nborder-color: var(--moveable-color);\nbackground:#fff;\ncursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\ncursor: alias;\n}\n.rotatable.direction.control.move {\ncursor: move;\n}\n"],viewClassName:function(t){return t.isDragging("rotatable")?qi("view-rotation-dragging"):""},render:function(t,e){var n=co(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,o=n.zoom,a=n.renderDirections,s=n.rotateAroundControls,u=n.resolveAblesWithRotatable,l=t.getState(),c=l.renderPoses,f=l.direction;if(!r)return null;var p=gi(i,c,f),d=[];if(p.forEach((function(t,n){var r=Ke(t,2),i=r[0],a=r[1];d.push(e.createElement("div",{key:"rotation".concat(n),className:qi("rotation"),style:{transform:"translate(-50%) translate(".concat(i[0],"px, ").concat(i[1],"px) rotate(").concat(a,"rad)")}},e.createElement("div",{className:qi("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:qi("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))})),a){var h=Q(u||{}),v={};h.forEach((function(t){u[t].forEach((function(e){v[e]=t}))}));var g=[];A(a)&&(g=a.map((function(t){var e=v[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}}))),d.push.apply(d,$e([],Ke(fr(t,"rotatable",g,e)),!1))}return s&&d.push.apply(d,$e([],Ke(mr(t,e)),!1)),d},dragControlCondition:mi,dragControlStart:function(t,e){var n,r,i=e.datas,o=e.clientX,a=e.clientY,s=e.parentRotate,u=e.parentFlag,l=e.isPinch,c=e.isRequest,f=t.state,p=f.target,d=f.left,h=f.top,v=f.direction,g=f.beforeDirection,m=f.targetTransform,b=f.moveableClientRect,x=f.offsetMatrix,y=f.targetMatrix,E=f.allMatrix,S=f.width,D=f.height;if(!c&&!p)return!1;var C=t.getRect();i.rect=C,i.transform=m,i.left=d,i.top=h;var w=function(e){var n=li(t.state,e);i.fixedDirection=n.fixedDirection,i.fixedOffset=n.fixedOffset,i.fixedPosition=n.fixedPosition,A&&A.setFixedPosition(e)},M=function(e){var n=function(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,o=t.height,a=r?4:3;return{fixedPosition:no(n,[i/2*(1+e[0]),o/2*(1+e[1])],a),fixedDirection:e,fixedOffset:[0,0]}}(t.state,e);i.fixedDirection=n.fixedDirection,i.fixedOffset=n.fixedOffset,i.fixedPosition=n.fixedPosition,A&&A.setFixedDirection(e)},R=o,O=a;if(c||l||u){var _=s||0;i.beforeInfo={origin:C.beforeOrigin,prevDeg:_,defaultDeg:_,prevSnapDeg:0,startDist:0},i.afterInfo=Ze(Ze({},i.beforeInfo),{origin:C.origin}),i.absoluteInfo=Ze(Ze({},i.beforeInfo),{origin:C.origin,startValue:_})}else{var T=null===(r=e.inputEvent)||void 0===r?void 0:r.target;if(T){var P=T.getAttribute("data-direction")||"",z=Sn[P];if(z){i.isControl=!0,i.isAroundControl=ft(T,qi("around-control")),i.controlDirection=z;var G=T.getAttribute("data-resolve");G&&(i.resolveAble=G);var k=function(t,e,n){var r=16===t.length?4:3,i=e.map((function(e){return no(t,e,r)})),o=n.left,a=n.top;return i.map((function(t){return[t[0]+o,t[1]+a]}))}(f.rootMatrix,f.renderPoses,b);n=Ke(Nn(k,z),2),R=n[0],O=n[1]}}i.beforeInfo={origin:C.beforeOrigin},i.afterInfo={origin:C.origin},i.absoluteInfo={origin:C.origin,startValue:C.rotation};var B=w;w=function(e){var n=f.is3d?4:3,r=Ke(zt(Rt(y,n),e),2),o=r[0],a=r[1],s=Bt(x,Ot([o,a],n)),u=Bt(E,Ot([e[0],e[1]],n));B(e);var l=f.posDelta;i.beforeInfo.origin=Gt(s,l),i.afterInfo.origin=Gt(u,l),i.absoluteInfo.origin=Gt(u,l),pi(t,i.beforeInfo,R,O,b),pi(t,i.afterInfo,R,O,b),pi(t,i.absoluteInfo,R,O,b)},M=function(t){var e=Nn([[0,0],[S,0],[0,D],[S,D]],t);w(e)}}i.startClientX=R,i.startClientY=O,i.direction=v,i.beforeDirection=g,i.startValue=0,i.datas={},Xn(t,e,"rotate");var I=!1,A=!1;i.isControl&&i.resolveAble&&("resizable"===i.resolveAble&&(A=fi.dragControlStart(t,Ze(Ze({},new Rn("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition}))));A||(I=si.dragStart(t,(new Rn).dragStart([0,0],e))),w(function(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),o=i.offsetWidth,a=i.offsetHeight,s=i.svg,u=i.transformOrigin;if(!n&&s&&r)return Zo(r,o,a);return u}(t));var F=wo(t,e,Ze(Ze({set:function(t){i.startValue=t*Math.PI/180},setFixedDirection:M,setFixedPosition:w},qn(t,e)),{dragStart:I,resizeStart:A})),N=Oo(t,"onRotateStart",F);return i.isRotate=!1!==N,f.snapRenderInfo={request:e.isRequest},!!i.isRotate&&F},dragControl:function(t,e){var n,r,i,o=e.datas,a=e.clientDistX,s=e.clientDistY,u=e.parentRotate,l=e.parentFlag,c=e.isPinch,f=e.groupDelta,p=e.resolveMatrix,d=o.beforeDirection,h=o.beforeInfo,v=o.afterInfo,g=o.absoluteInfo,m=o.isRotate,b=o.startValue,x=o.rect,y=o.startClientX,E=o.startClientY;if(m){Pn(t,e,"rotate");var S,D,C,w,M,R,O,_,T,P=function(t){return On(t.datas.beforeTransform,[50,50],100,100).direction}(e),z=d*P,G=t.props.parentMoveable,k=180/Math.PI*b,B=g.startValue,I=!1,A=y+a,F=E+s;if(!l&&"parentDist"in e){var N=e.parentDist;D=N,M=N,_=N}else c||l?(D=di(u,d,h),M=di(u,z,v),_=di(u,z,g)):(D=hi(A,F,d,h),M=hi(A,F,z,v),_=hi(A,F,z,g),I=!0);if(Oo(t,"onBeforeRotate",wo(t,e,{beforeRotation:C=k+D,rotation:R=k+M,absoluteRotation:T=B+_,setRotation:function(t){D=M=t-k,_=M}},!0)),S=(n=Ke(vi(t,x,h,D,k,I),3))[0],D=n[1],C=n[2],w=(r=Ke(vi(t,x,v,M,k,I),3))[0],M=r[1],R=r[2],O=(i=Ke(vi(t,x,g,_,B,I),3))[0],_=i[1],T=i[2],O||w||S||G||p){var Y=zn(o,"rotate(".concat(R,"deg)"),"rotate(".concat(M,"deg)"));p&&(o.fixedPosition=Kn(t,o.targetAllTransform,o.fixedDirection,o.fixedOffset,o));var q=function(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,o=n.fixedOffset;return $n(t,"rotate(".concat(e,"deg)"),r,i,o,n)}(t,M,o),X=Gt(zt(f||[0,0],q),o.prevInverseDist||[0,0]);o.prevInverseDist=q,o.requestValue=null;var W=Zn(t,Y,X,c,e),H=W,L=st([A,F],g.startAbsoluteOrigin)-g.startDist,j=void 0;if("resizable"===o.resolveAble){var V=fi.dragControl(t,Ze(Ze({},Mn(e,t.state,[e.deltaX,e.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:L}));V&&(j=V,H=Co(H,V,e))}var U=wo(t,e,Ze(Ze({delta:w,dist:M,rotate:R,rotation:R,beforeDist:D,beforeDelta:S,beforeRotate:C,beforeRotation:C,absoluteDist:_,absoluteDelta:O,absoluteRotate:T,absoluteRotation:T,isPinch:!!c,resize:j},W),H));return Oo(t,"onRotate",U),U}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=Mo(t,e,{});return Oo(t,"onRotateEnd",r),r}},dragGroupControlCondition:mi,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,o=r.top,a=r.beforeOrigin,s=this.dragControlStart(t,e);if(!s)return!1;s.set(n.beforeDirection*t.rotation);var u=lr(t,this,"dragControlStart",e,(function(t,e){var n=t.state,r=n.left,s=n.top,u=n.beforeOrigin,l=zt(Gt([r,s],[i,o]),Gt(u,a));return e.datas.startGroupClient=l,e.datas.groupClient=l,Ze(Ze({},e),{parentRotate:0})})),l=Oo(t,"onRotateGroupStart",Ze(Ze({},s),{targets:t.props.targets,events:u}));return n.isRotate=!1!==l,!!n.isRotate&&s},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){Ro(t,"onBeforeRotate",(function(n){Oo(t,"onBeforeRotateGroup",wo(t,e,Ze(Ze({},n),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,o=r.beforeDist,a=o/180*Math.PI,s=lr(t,this,"dragControl",e,(function(t,e){var n=e.datas.startGroupClient,r=Ke(e.datas.groupClient,2),s=r[0],u=r[1],l=Ke(Yt(n,a*i),2),c=l[0],f=l[1],p=[c-s,f-u];return e.datas.groupClient=[c,f],Ze(Ze({},e),{parentRotate:o,groupDelta:p})}));t.rotation=i*r.beforeRotation;var u=Ze({targets:t.props.targets,events:s,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},r);return Oo(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var r=lr(t,this,"dragControlEnd",e);return Oo(t,"onRotateGroupEnd",Mo(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function xi(t,e){return function(t,e){var n,r=t.direction,i=t.classNames,o=t.size,a=t.pos,s=t.zoom,u=t.key,l="horizontal"===r,c=l?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(n={},n[l?"width":"height"]="".concat(o),n.transform="translate(".concat(a[0],", ").concat(a[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(s,")"),n)})}(Ze(Ze({},t),{classNames:$e([qi("line","guideline",t.direction)],Ke(t.classNames),!1).filter((function(t){return t})),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map((function(t){return"".concat(ut(t,.1),"px")}))}),e)}function yi(t,e,n,r,i,o,a,s){var u=t.props.zoom;return n.map((function(t,n){var l=t.type,c=t.pos,f=[0,0];return f[a]=r,f[a?0:1]=-i+c,xi({key:"".concat(e,"TargetGuideline").concat(n),classNames:[qi("target","bold",l)],posValue:f,sizeValue:o,zoom:u,direction:e},s)}))}function Ei(t,e,n,r,i,o){var a=t.props,s=a.zoom,u=a.isDisplayInnerSnapDigit,l="horizontal"===e?Mr:Rr,c=i[l.start],f=i[l.end];return n.filter((function(t){var e=t.hide,n=t.elementRect;if(e)return!1;if(u&&n){var r=n.rect;if(r[l.start]<=c&&f<=r[l.end])return!1}return!0})).map((function(t,n){var i=t.pos,a=t.size,u=t.element,l=t.className,c=[-r[0]+i[0],-r[1]+i[1]];return xi({key:"".concat(e,"-default-guideline-").concat(n),classNames:u?[qi("bold"),l]:[qi("normal"),l],direction:e,posValue:c,sizeValue:a,zoom:s},o)}))}function Si(t,e,n,r,i,o,a,s){var u,l=t.props,c=l.snapDigit,f=void 0===c?0:c,p=l.isDisplaySnapDigit,d=void 0===p||p,h=l.snapDistFormat,v=void 0===h?function(t,e){return t}:h,g=l.zoom,m="horizontal"===e?"X":"Y",b="vertical"===e?"height":"width",x=Math.abs(i),y=d?parseFloat(x.toFixed(f)):0;return s.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:qi("guideline-group",e),style:(u={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},u[b]="".concat(x,"px"),u)},xi({direction:e,classNames:[qi(n),a],size:"100%",posValue:[0,0],sizeValue:x,zoom:g},s),s.createElement("div",{className:qi("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},y>0?v(y,e):""))}function Di(t,e,n,r,i){var o=t.props.isDisplayInnerSnapDigit,a=[];return["vertical","horizontal"].forEach((function(s){var u=e.filter((function(t){return t.type===s})),l="vertical"===s?1:0,c=l?0:1,f=function(t,e,n,r){var i="vertical"===t?0:1,o="vertical"===t?1:0,a=i?Mr:Rr,s=n[a.start],u=n[a.end];return Go(e,(function(t){return t.pos[i]})).map((function(e){var n=[],l=[];return e.forEach((function(e){var c,f,p=e.element,d=e.elementRect.rect;if(d[a.end]<s)n.push(e);else if(u<d[a.start])l.push(e);else if(d[a.start]<=s&&u<=d[a.end]&&r){var h=e.pos,v={element:p,rect:Ze(Ze({},d),(c={},c[a.end]=d[a.start],c))},g={element:p,rect:Ze(Ze({},d),(f={},f[a.start]=d[a.end],f))},m=[0,0],b=[0,0];m[i]=h[i],m[o]=h[o],b[i]=h[i],b[o]=h[o]+e.size,n.push({type:t,pos:m,size:0,elementRect:v,direction:"",elementDirection:"end"}),l.push({type:t,pos:b,size:0,elementRect:g,direction:"",elementDirection:"start"})}})),n.sort((function(t,e){return e.pos[o]-t.pos[o]})),l.sort((function(t,e){return t.pos[o]-e.pos[o]})),{total:e,start:n,end:l,inner:[]}}))}(s,u,r,o),p=l?Rr:Mr,d=l?Mr:Rr,h=r[p.start],v=r[p.end];f.forEach((function(e){var o=e.total,u=e.start,f=e.end,g=e.inner,m=n[c]+o[0].pos[c]-r[d.start],b=r;u.forEach((function(e){var r=e.elementRect.rect,o=b[p.start]-r[p.end];if(o>0){var u=[0,0];u[l]=n[l]+b[p.start]-h-o,u[c]=m,a.push(Si(t,s,"dashed",a.length,o,u,e.className,i))}b=r})),b=r,f.forEach((function(e){var r=e.elementRect.rect,o=r[p.start]-b[p.end];if(o>0){var u=[0,0];u[l]=n[l]+b[p.end]-h,u[c]=m,a.push(Si(t,s,"dashed",a.length,o,u,e.className,i))}b=r})),g.forEach((function(e){var r=e.elementRect.rect,o=h-r[p.start],u=r[p.end]-v,f=[0,0],d=[0,0];f[l]=n[l]-o,f[c]=m,d[l]=n[l]+v-h,d[c]=m,a.push(Si(t,s,"dashed",a.length,o,f,e.className,i)),a.push(Si(t,s,"dashed",a.length,u,d,e.className,i))}))}))})),a}function Ci(t){var e,n,r=t.state,i=r.containerClientRect,o=r.hasFixed,a=i.overflow,s=i.scrollHeight,u=i.scrollWidth,l=i.clientHeight,c=i.clientWidth,f=i.clientLeft,p=i.clientTop,d=t.props,h=d.snapGap,v=void 0===h||h,g=d.verticalGuidelines,m=d.horizontalGuidelines,b=d.snapThreshold,x=void 0===b?5:b,y=d.maxSnapElementGuidelineDistance,E=void 0===y?1/0:y,S=d.isDisplayGridGuidelines,D=io(yo(t.state)),C=D.top,w=D.left,M=D.bottom,R=D.right,O={top:C,left:w,bottom:M,right:R,center:(w+R)/2,middle:(C+M)/2},_=function(t){var e=t.state,n=t.props.elementGuidelines,r=void 0===n?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter((function(t){return!t.refresh})),o=r.map((function(t){return I(t)&&"element"in t?Ze(Ze({},t),{element:Wo(t.element,!0)}):{element:Wo(t,!0)}})).filter((function(t){return t.element})),a=(c=i.map((function(t){return t.element})),f=o.map((function(t){return t.element})),re(c,f,se)),s=a.maintained,u=a.added,l=[];var c,f;s.forEach((function(t){var e=Ke(t,2),n=e[0],r=e[1];l[r]=i[n]})),function(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,o=r.rootMatrix,a=r.is3d,s=r.offsetDelta,u=a?4:3,l=Ke(function(t,e,n){var r=no(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}(o,i,u),2),c=l[0],f=l[1],p=n?0:s[0],d=n?0:s[1];return e.map((function(t){var e=t.element.getBoundingClientRect(),n=e.left-c-p,r=e.top-f-d,i=r+e.height,a=n+e.width,s=Ke(Io(o,[n,r],u),2),l=s[0],h=s[1],v=Ke(Io(o,[a,i],u),2),g=v[0],m=v[1];return Ze(Ze({},t),{rect:{left:l,right:g,top:h,bottom:m,center:(l+g)/2,middle:(h+m)/2}})}))}(t,u.map((function(t){return o[t]}))).map((function(t,e){l[u[e]]=t})),e.elementRects=l;var p=_r(t.props.elementSnapDirections),d=[];return l.forEach((function(t){var e=t.element,n=t.top,r=void 0===n?p.top:n,i=t.left,o=void 0===i?p.left:i,a=t.right,s=void 0===a?p.right:a,u=t.bottom,l=void 0===u?p.bottom:u,c=t.center,f=void 0===c?p.center:c,h=t.middle,v=void 0===h?p.middle:h,g=t.className,m=t.rect,b=Tr({top:r,right:s,left:o,bottom:l,center:f,middle:v},m),x=b.horizontal,y=b.vertical,E=b.horizontalNames,S=b.verticalNames,D=m.top,C=m.left,w=m.right-C,M=m.bottom-D,R=[w,M];y.forEach((function(n,r){d.push({type:"vertical",element:e,pos:[ut(n,.1),D],size:M,sizes:R,className:g,elementRect:t,elementDirection:wr[S[r]]||S[r],direction:""})})),x.forEach((function(n,r){d.push({type:"horizontal",element:e,pos:[C,ut(n,.1)],size:w,sizes:R,className:g,elementRect:t,elementDirection:wr[E[r]]||E[r],direction:""})}))})),d}(t),T=$e([],Ke(_),!1),P=(null!==(n=null===(e=r.snapThresholdInfo)||void 0===e?void 0:e.multiples)&&void 0!==n?n:[1,1]).map((function(t){return t*x}));v&&T.push.apply(T,$e([],Ke(function(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,o=void 0===i?1/0:i,a=r.maxSnapElementGapDistance,s=void 0===a?1/0:a,u=t.state.elementRects,l=[];return[["vertical",Mr,Rr],["horizontal",Rr,Mr]].forEach((function(t){var r=Ke(t,3),i=r[0],a=r[1],c=r[2],f=e[a.start],p=e[a.end],d=e[a.center],h=e[c.start],v=e[c.end],g={left:n[0],top:n[1]};function m(t){var e=t.rect,n=g[a.start];return e[a.end]<f+n?f-e[a.end]:p-n<e[a.start]?e[a.start]-p:-1}var b=u.filter((function(t){var e=t.rect;return!(e[c.start]>v||e[c.end]<h)&&m(t)>0})).sort((function(t,e){return m(t)-m(e)})),x=[];b.forEach((function(t){b.forEach((function(e){if(t!==e){var n=t.rect,r=e.rect,i=n[c.start],o=n[c.end],a=r[c.start];i>r[c.end]||a>o||x.push([t,e])}}))})),x.forEach((function(t){var n=Ke(t,2),r=n[0],u=n[1],c=r.rect,h=u.rect,v=c[a.start],m=c[a.end],b=h[a.start],x=h[a.end],y=g[a.start],E=0,S=0,D=!1,C=!1,w=!1;if(m<=f&&p<=b){if(C=!0,Qo((S=m+(E=(b-m-(p-f))/2)+(p-f)/2)-d)>y)return}else if(m<b&&x<f+y){if(D=!0,Qo((S=x+(E=b-m))-f)>y)return}else{if(!(m<b&&p-y<v))return;if(w=!0,Qo((S=v-(E=b-m))-p)>y)return}E&&wi(e,h,i,o)&&(E>s||l.push({type:i,pos:"vertical"===i?[S,0]:[0,S],element:u.element,size:0,className:u.className,isStart:D,isCenter:C,isEnd:w,gap:E,hide:!0,gapRects:[r,u],direction:"",elementDirection:""}))}))})),l}(t,O,P)),!1));var z=Ze({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(T.push.apply(T,$e([],Ke(function(t,e,n,r,i,o,a){void 0===r&&(r=0);void 0===i&&(i=0);var s=t.props,u=t.state,l=s.snapGridWidth,c=void 0===l?0:l,f=s.snapGridHeight,p=void 0===f?0:f,d=[],h=o.left,v=o.top,g=[0,0];!function(t,e,n,r){var i,o,a=t.props,s=t.state,u=a.snapGridAll,l=a.snapGridWidth,c=void 0===l?0:l,f=a.snapGridHeight,p=void 0===f?0:f,d=s.snapRenderInfo,h=d&&((null===(i=d.direction)||void 0===i?void 0:i[0])||(null===(o=d.direction)||void 0===o?void 0:o[1])),v=t.moveables;if(u&&v&&h&&(c||p)){if(s.snapThresholdInfo)return;s.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=t.getRect(),m=g.children,b=d.direction;if(m){var x=b.map((function(t,i){var o=0===i?{snapSize:c,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:p,posName:"top",sizeName:"height",clientOffset:r.top-n},a=o.snapSize,s=o.posName,u=o.sizeName,l=o.clientOffset;if(!a)return{dir:t,multiple:1,snapSize:a,snapOffset:0};var f,d=g[u],h=g[s],v=(f=m.map((function(t){return[t[s]-h,t[u],d-t[u]-t[s]+h]})),f.reduce((function(t,e){return t.concat(e)}),[])).filter((function(t){return t})).sort((function(t,e){return t-e})),b=v[0],x=v.map((function(t){return ut(t/b,.1)*a})),y=1,E=ut(d/b,.1);for(y=1;y<=10&&!x.every((function(t){return t*y%1===0}));++y);var S=(1-t)/2,D=k(h-l,h-l+d,S,1-S);return{multiple:E*y,dir:t,snapSize:a,snapOffset:Math.round(D/a)}})),y=x.map((function(t){return t.multiple||1}));s.snapThresholdInfo.multiples=y,s.snapThresholdInfo.offset=x.map((function(t){return t.snapOffset})),x.forEach((function(t,e){t.snapSize}))}}else s.snapThresholdInfo=null}(t,r,i,o);var m=u.snapThresholdInfo,b=c,x=p;m&&(c*=m.multiples[0]||1,p*=m.multiples[1]||1,g=m.offset);if(p){for(var y=function(t){d.push({type:"horizontal",pos:[h,ut(g[1]*x+t-i+v,.1)],className:qi("grid-guideline"),size:e,hide:!a,direction:"",grid:!0})},E=0;E<=2*n;E+=p)y(E);for(E=-p;E>=-n;E-=p)y(E)}if(c){for(y=function(t){d.push({type:"vertical",pos:[ut(g[0]*b+t-r+h,.1),v],className:qi("grid-guideline"),size:n,hide:!a,direction:"",grid:!0})},E=0;E<=2*e;E+=c)y(E);for(E=-c;E>=-e;E-=c)y(E)}return d}(t,a?u:c,a?s:l,f,p,z,S)),!1)),o){var G=i.left,B=i.top;z.left+=G,z.top+=B,z.right+=G,z.bottom+=B}return T.push.apply(T,$e([],Ke(Ri(m||!1,g||!1,a?u:c,a?s:l,f,p,z)),!1)),T=T.filter((function(t){var e=t.element,n=t.elementRect,r=t.type;if(!e||!n)return!0;var i=n.rect;return wi(O,i,r,E)})),T}function wi(t,e,n,r){return"horizontal"===n?Qo(t.right-e.left)<=r||Qo(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:"vertical"!==n||(Qo(t.bottom-e.top)<=r||Qo(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom)}function Mi(t,e){return t?t.map((function(t){var n=I(t)?t:{pos:t},r=n.pos;return N(r)?n:Ze(Ze({},n),{pos:tt(r,e)})})):[]}function Ri(t,e,n,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a={left:0,top:0,right:0,bottom:0});var s=[],u=a.left,l=a.top,c=a.bottom,f=n+a.right-u,p=r+c-l;return Mi(t,p).forEach((function(t){s.push({type:"horizontal",pos:[u,ut(t.pos-o+l,.1)],size:f,className:t.className,direction:""})})),Mi(e,f).forEach((function(t){s.push({type:"vertical",pos:[ut(t.pos-i+u,.1),l],size:p,className:t.className,direction:""})})),s}function Oi(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(n!==r){var a=Wo(r,!0);if(a){var s=go(a),u=Lo(e,[s.left-i.left,s.top-i.top]),l=Lo(e,[s.right-i.right,s.bottom-i.bottom]);o.left=ut(u[0],1e-5),o.top=ut(u[1],1e-5),o.right=ut(l[0],1e-5),o.bottom=ut(l[1],1e-5)}}return e.snapContainer=r,e.snapOffset=o,e.guidelines=Ci(t),e.enableSnap=!0,!0}function _i(t,e,n,r,i,o){var a=ro(t,e,n,o?4:3);return xo(a,Gt(i,Nn(a,r)))}function Ti(t){return t?t/Qo(t):0}function Pi(t,e,n,r,i,o){var a=function(t,e,n){var r=[];if(n)1!==Qo(e[0])||1!==Qo(e[1])?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach((function(t){[1,-1].forEach((function(n){var o=[t*i[0],n*i[1]];e[0]===o[0]&&e[1]===o[1]||r.push([e,o])}))}))}else t[0]?(1===Qo(e[0])?[1]:[1,-1]).forEach((function(n){r.push([[e[0],-1],[n*t[0],-1]],[[e[0],0],[n*t[0],0]],[[e[0],1],[n*t[0],1]])})):t[1]&&(1===Qo(e[1])?[1]:[1,-1]).forEach((function(n){r.push([[-1,e[1]],[-1,n*t[1]]],[[0,e[1]],[0,n*t[1]]],[[1,e[1]],[1,n*t[1]]])}));return r}(n,o.fixedDirection,r),s=$r(t,e,n,r),u=$e($e([],Ke(oi(t,e,a,r,i,o)),!1),Ke(Zr(t,s,o)),!1),l=Wr(u,0),c=Wr(u,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function zi(t,e,n,r,i,o,a,s){for(var u=yo(t.state),l=t.props.keepRatio,c=0,f=0,p=0;p<2;++p){var d=Pi(t,e(c,f),i,l,a,s),h=d.width,v=d.height,g=h.isBound,m=v.isBound,b=h.offset,x=v.offset;if(1===p&&(g||(b=0),m||(x=0)),0===p&&a&&!g&&!m)return[0,0];if(l){var y=Qo(b)*(n?1/n:1),E=Qo(x)*(r?1/r:1);(g&&m?y<E:m||!g&&y<E)?b=n*x/r:x=r*b/n}c+=b,f+=x}if(!l&&i[0]&&i[1]){var S=function(t,e,n,r,i){var o=[-n[0],-n[1]],a=t.state,s=a.width,u=a.height,l=t.props.bounds,c=1/0,f=1/0;if(l){var p=[[n[0],-n[1]],[-n[0],n[1]]],d=l.left,h=void 0===d?-1/0:d,v=l.top,g=void 0===v?-1/0:v,m=l.right,b=void 0===m?1/0:m,x=l.bottom,y=void 0===x?1/0:x;p.forEach((function(t){var n=t[0]!==o[0],a=t[1]!==o[1],l=Nn(e,t),p=360*ot(r,l)/Math.PI;if(a){var d=l.slice();(Qo(p-360)<2||Qo(p-180)<2)&&(d[1]=r[1]);var v=ti(r,d,(r[1]<l[1]?y:g)-l[1],!1,i),m=Ke(v.offset,2)[1],x=v.isOutside;isNaN(m)||(f=u+(x?1:-1)*Qo(m))}if(n){d=l.slice(),(Qo(p-90)<2||Qo(p-270)<2)&&(d[0]=r[0]);var E=ti(r,d,(r[0]<l[0]?b:h)-l[0],!0,i),S=Ke(E.offset,1)[0],D=E.isOutside;isNaN(S)||(c=s+(D?1:-1)*Qo(S))}}))}return{maxWidth:c,maxHeight:f}}(t,u,i,o,s),D=S.maxWidth,C=S.maxHeight,w=Ke(function(t,e,n,r,i,o,a,s,u){var l=Nn(e,a),c=ri(t,s,{vertical:[l[0]],horizontal:[l[1]]}),f=c.horizontal.offset,p=c.vertical.offset;if(ut(p,mn)||ut(f,mn)){var d=Ke(In({datas:u,distX:-p,distY:-f}),2),h=d[0],v=d[1];return[Math.min(i||1/0,n+a[0]*h)-n,Math.min(o||1/0,r+a[1]*v)-r]}return[0,0]}(t,e(c,f).map((function(t){return t.map((function(t){return ut(t,mn)}))})),n+c,r+f,D,C,i,a,s),2);c+=b=w[0],f+=x=w[1]}return[c,f]}function Gi(t){return t<0&&(t=t%360+360),t%=360}function ki(t,e){e=Gi(e);var n=Math.floor(t/360),r=360*n+360-e,i=360*n+e;return Qo(t-r)<Qo(t-i)?r:i}function Bi(t,e){t=Gi(t),e=Gi(e);var n=Gi(t-e);return Math.min(n,360-n)}function Ii(t,e,n,r,i){if(!Or(t,"scalable"))return[0,0];var o=i.startOffsetWidth,a=i.startOffsetHeight,s=i.fixedPosition,u=i.fixedDirection,l=i.is3d,c=zi(t,(function(t,n){return _i(function(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,o=t.targetMatrix,a=i?4:3;return Yn(r,Pt(t.targetAllTransform||o,Lt(e,a),a),n,a)}(i,zt(e,[t/o,n/a])),o,a,u,s,l)}),o,a,n,s,r,i);return[c[0]/o,c[1]/a]}function Ai(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(n){var r=n.guideline;K(e,(function(t){return t.guideline===r}))||(r.direction="",e.push({guideline:r,posInfo:t}))}))})),e.map((function(t){var e=t.guideline,n=t.posInfo;return Ze(Ze({},e),{direction:n.direction})}))}function Fi(t,e,n,r,i,o){var a=br(xr(t,o),e,n),s=a.vertical,u=a.horizontal,l={left:!1,top:!1,right:!1,bottom:!1};s.forEach((function(t){t.isBound&&("start"===t.direction&&(l.left=!0),"end"===t.direction&&(l.right=!0),r.push({type:"bounds",pos:t.pos}))})),u.forEach((function(t){t.isBound&&("start"===t.direction&&(l.top=!0),"end"===t.direction&&(l.bottom=!0),i.push({type:"bounds",pos:t.pos}))}));var c=function(t){var e=t.props.innerBounds,n={left:!1,top:!1,right:!1,bottom:!1};if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=[r.pos1,r.pos2,r.pos3,r.pos4],o=Nn(i,[0,0]),a=e.left,s=e.top,u=e.width,l=e.height,c=[[a,s],[a,s+l]],f=[[a,s],[a+u,s]],p=[[a+u,s],[a+u,s+l]],d=[[a,s+l],[a+u,s+l]],h=$r(t,i,[0,0],!1),v=[],g=[];return h.forEach((function(t){var e=t.line,r=t.lineConstants,i=Hr(o,e),h=i.horizontal,m=i.vertical,b=Ur(e,r,f,m,1,!0),x=Ur(e,r,d,m,1,!0),y=Ur(e,r,c,h,1,!0),E=Ur(e,r,p,h,1,!0);b.isBound&&!n.top&&(v.push(s),n.top=!0),x.isBound&&!n.bottom&&(v.push(s+l),n.bottom=!0),y.isBound&&!n.left&&(g.push(a),n.left=!0),E.isBound&&!n.right&&(g.push(a+u),n.right=!0)})),{boundMap:n,horizontal:v,vertical:g}}(t),f=c.boundMap,p=c.vertical,d=c.horizontal;return p.forEach((function(t){Z(r,(function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t}))>=0||r.push({type:"bounds",pos:t})})),d.forEach((function(t){Z(i,(function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t}))>=0||i.push({type:"bounds",pos:t})})),{boundMap:l,innerBoundMap:f}}var Ni=Xo("",["resizable","scalable"]),Yi={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",Pr,zr,Gr,kr,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[":host {\n--bounds-color: #d66;\n}\n.guideline {\npointer-events: none;\nz-index: 2;\n}\n.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}\n.guideline-group {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.guideline-group .size-value {\nposition: absolute;\ncolor: #f55;\nfont-size: 12px;\nfont-size: calc(12px * var(--zoom));\nfont-weight: bold;\n}\n.guideline-group.horizontal .size-value {\ntransform-origin: 50% 100%;\ntransform: translateX(-50%);\nleft: 50%;\nbottom: 5px;\nbottom: calc(2px + 3px * var(--zoom));\n}\n.guideline-group.vertical .size-value {\ntransform-origin: 0% 50%;\ntop: 50%;\ntransform: translateY(-50%);\nleft: 5px;\nleft: calc(2px + 3px * var(--zoom));\n}\n.guideline.gap {\nbackground: #f55;\n}\n.size-value.gap {\ncolor: #f55;\n}\n"],render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,a=n.pos2,s=n.pos3,u=n.pos4,l=n.snapRenderInfo,c=t.props.snapRenderThreshold,f=void 0===c?1:c;if(!l||!l.render||!Or(t,""))return $o(t,"boundMap",{left:!1,top:!1,right:!1,bottom:!1},(function(t){return JSON.stringify(t)})),$o(t,"innerBoundMap",{left:!1,top:!1,right:!1,bottom:!1},(function(t){return JSON.stringify(t)})),[];n.guidelines=Ci(t);var p=Math.min(o[0],a[0],s[0],u[0]),d=Math.min(o[1],a[1],s[1],u[1]),h=l.externalPoses||[],v=yo(t.state),g=[],m=[],b=[],x=[],y=[],E=io(v),S=E.width,D=E.height,C=E.top,w=E.left,M=E.bottom,R=E.right,O={left:w,right:R,top:C,bottom:M,center:(w+R)/2,middle:(C+M)/2},_=h.length>0,T=_?io(h):{};if(!l.request){if(l.direction&&y.push(qr(t,v,l.direction,f,f)),l.snap){var P=io(v);l.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),y.push(Fr(t,P,f,f))}_&&(l.center&&(T.middle=(T.top+T.bottom)/2,T.center=(T.left+T.right)/2),y.push(Fr(t,T,f,f))),y.forEach((function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;g.push.apply(g,$e([],Ke(e.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),!1)),m.push.apply(m,$e([],Ke(n.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),!1)),b.push.apply(b,$e([],Ke(Ai(e)),!1)),x.push.apply(x,$e([],Ke(Ai(n)),!1))}))}var z=Fi(t,[w,R],[C,M],g,m),G=z.boundMap,k=z.innerBoundMap;_&&Fi(t,[T.left,T.right],[T.top,T.bottom],g,m,l.externalBounds);var B=$e($e([],Ke(b),!1),Ke(x),!1),I=B.filter((function(t){return t.element&&!t.gapRects})),A=B.filter((function(t){return t.gapRects})).sort((function(t,e){return t.gap-e.gap}));Oo(t,"onSnap",{guidelines:B.filter((function(t){return!t.element})),elements:I,gaps:A},!0);var F=$o(t,"boundMap",G,(function(t){return JSON.stringify(t)}),{left:!1,top:!1,right:!1,bottom:!1}),N=$o(t,"innerBoundMap",k,(function(t){return JSON.stringify(t)}),{left:!1,top:!1,right:!1,bottom:!1});return G!==F&&k!==N||Oo(t,"onBound",{bounds:G,innerBounds:k},!0),$e($e($e($e($e($e([],Ke(Di(t,I,[p,d],O,e)),!1),Ke(function(t,e,n,r,i){var o=[];return["horizontal","vertical"].forEach((function(a){var s=e.filter((function(t){return t.type===a})).slice(0,1),u="vertical"===a?0:1,l=u?0:1,c=u?Rr:Mr,f=u?Mr:Rr,p=r[c.start],d=r[c.end],h=r[f.start],v=r[f.end];s.forEach((function(e){var r=e.gap,a=e.gapRects,s=Math.max.apply(Math,$e([h],Ke(a.map((function(t){return t.rect[f.start]}))),!1)),g=Math.min.apply(Math,$e([v],Ke(a.map((function(t){return t.rect[f.end]}))),!1)),m=(s+g)/2;s!==g&&m!==(h+v)/2&&a.forEach((function(e){var a=e.rect,s=e.className,f=[n[0],n[1]];if(a[c.end]<p)f[u]+=a[c.end]-p;else{if(!(d<a[c.start]))return;f[u]+=a[c.start]-p-r}f[l]+=m-h,o.push(Si(t,u?"vertical":"horizontal","gap",o.length,r,f,s,i))}))}))})),o}(t,A,[p,d],O,e)),!1),Ke(Ei(t,"horizontal",x,[i,r],O,e)),!1),Ke(Ei(t,"vertical",b,[i,r],O,e)),!1),Ke(yi(t,"horizontal",m,p,r,S,0,e)),!1),Ke(yi(t,"vertical",g,d,i,D,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Oi(t)},drag:function(t){var e=t.state;Oi(t)||(e.guidelines=Ci(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!Ni(t,e)&&!mi(t,e))||(!e.isRequest&&e.inputEvent?ft(e.inputEvent.target,qi("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,Oi(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Oi(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function qi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return E.apply(void 0,$e([dn],Ke(t),!1))}function Xi(t){t()}function Wi(t){return t&&"none"!==t?I(t)?t:Zt(t):[1,0,0,1,0,0]}function Hi(t,e,n){return Tt(e,jt(n,e),t,jt(n.map((function(t){return-t})),e))}function Li(t){return ji(_o(t,":before").transformOrigin).map((function(e,n){var r=V(e),i=r.value,o=r.unit;return i*function(t,e,n){return"%"===e?to(t.ownerSVGElement)[n?"width":"height"]/100:1}(t,o,0===n)}))}function ji(t){return t?t.split(" "):["0","0"]}function Vi(t){var e=ar(t)("transform");if(e&&"none"!==e)return e;if("transform"in t){var n=t.transform.baseVal;if(!n)return"";var r=n.length;if(!r)return"";for(var i=[],o=function(t){var e=n[t].matrix;i.push("matrix(".concat(["a","b","c","d","e","f"].map((function(t){return e[t]})).join(", "),")"))},a=0;a<r;++a)o(a);return i.join(" ")}return""}function Ui(t,e,n,r,i){var o,a,s,u,l=mt(t)||bt(t),c=!1;if(!t||n)s=t;else{var f=null===(o=null===t||void 0===t?void 0:t.assignedSlot)||void 0===o?void 0:o.parentElement,p=t.parentElement;f?(c=!0,u=p,s=f):s=p}for(var d=!1,h=t===e||s===e,v="relative",g=1,m=parseFloat(null===i||void 0===i?void 0:i("zoom"))||1,b=null===i||void 0===i?void 0:i("position");s&&s!==l;){e===s&&(h=!0);var x=ar(s),y=s.tagName.toLowerCase(),E=Vi(s),S=x("willChange"),D=parseFloat(x("zoom"))||1;if(v=x("position"),r&&1!==D){g=D;break}if(!n&&r&&1!==m&&b&&"absolute"!==b||"svg"===y||"foreignobject"===y||"static"!==v||E&&"none"!==E||"transform"===S)break;var C=null===(a=null===t||void 0===t?void 0:t.assignedSlot)||void 0===a?void 0:a.parentNode,w=s.parentNode;C&&(c=!0,u=w);var M=w;if(M&&11===M.nodeType){d=!0,v=ar(s=M.host)("position");break}s=M,v="relative"}return{offsetZoom:g,hasSlot:c,parentSlotElement:u,isCustomElement:d,isStatic:"static"===v,isEnd:h||!s||s===l,offsetParent:s||l}}function Zi(t,e){var n,r,i,o=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop,u=ar(t),l=B(a),c=!l;return c||"svg"===o&&!t.ownerSVGElement?i=(r=ji(u("transformOrigin")).map((function(t){return parseFloat(t)}))).slice():(i=(r=rn?Li(t):ji(u("transformOrigin")).map((function(t){return parseFloat(t)}))).slice(),c=!0,"svg"===o?(a=0,s=0):(n=Ke(function(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&"g"===r)return[0,0,0,0];var i=ar(t),o="fill-box"===i("transform-box"),a=t.getBBox(),s=to(t.ownerSVGElement),u=a.x,l=a.y;"foreignobject"!==r||u||l||(u=parseFloat(t.getAttribute("x"))||0,l=parseFloat(t.getAttribute("y"))||0);var c=u-s.x,f=l-s.y,p=o?e[0]:e[0]-c,d=o?e[1]:e[1]-f;return[c,f,p,d]}(t,r,t===e&&"g"===e.tagName.toLowerCase()),4),a=n[0],s=n[1],r[0]=n[2],r[1]=n[3])),{tagName:o,isSVG:l,hasOffset:c,offset:[a||0,s||0],origin:r,targetOrigin:i}}function Ki(t,e){var n=ar(t),r=ar(bt(t)),i=r("position");if(!e&&(!i||"static"===i))return[0,0];var o=parseInt(r("marginLeft"),10),a=parseInt(r("marginTop"),10);return"absolute"===n("position")&&("auto"===n("top")&&"auto"===n("bottom")||(a=0),"auto"===n("left")&&"auto"===n("right")||(o=0)),[o,a]}function $i(t){t.forEach((function(t){var e=t.matrix;e&&(t.matrix=_t(e,3,4))}))}function Ji(t){for(var e=t.parentElement,n=!1,r=bt(t);e;){var i=_o(e).transform;if(i&&"none"!==i){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function Qi(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(kt(t,!e).join(","),")")}function to(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function eo(t,e){var n,r=to(t),i=r.width,o=r.height,a=r.clientWidth,s=r.clientHeight,u=a/i,l=s/o,c=t.preserveAspectRatio.baseVal,f=c.align,p=c.meetOrSlice,d=[0,0],h=[u,l],v=[0,0];if(1!==f){var g=(f-2)%3,m=Math.floor((f-2)/3);d[0]=i*g/2,d[1]=o*m/2;var b=2===p?Math.max(l,u):Math.min(u,l);h[0]=b,h[1]=b,v[0]=(a-i)/2*g,v[1]=(s-o)/2*m}var x=Lt(h,e);return n=Ke(v,2),x[e*(e-1)]=n[0],x[e*(e-1)+1]=n[1],Hi(x,e,d)}function no(t,e,n){return Bt(t,Ot(e,n),n)}function ro(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map((function(e){return no(t,e,r)}))}function io(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]})),r=Math.min.apply(Math,$e([],Ke(e),!1)),i=Math.min.apply(Math,$e([],Ke(n),!1)),o=Math.max.apply(Math,$e([],Ke(e),!1)),a=Math.max.apply(Math,$e([],Ke(n),!1));return{left:r,top:i,right:o,bottom:a,width:o-r,height:a-i}}function oo(t,e,n,r){return io(ro(t,e,n,r))}function ao(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function so(t,e){return ao([e[0]-t[0],e[1]-t[1]])}function uo(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=ot(t,e));var i=so(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function lo(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,o=n.reduce((function(t,e){return t+e[0]}),0)/i,a=n.reduce((function(t,e){return t+e[1]}),0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(a,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function co(t,e){var n=t[e];return I(n)?Ze(Ze({},t),n):t}function fo(t){var e=t&&!B(t.offsetWidth),n=0,r=0,i=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0,p=0,d=0,h=1/0,v=1/0,g=1/0,m=1/0,b=0,x=0,y=!1;if(t)if(!e&&t.ownerSVGElement){var E=t.getBBox();y=!0,a=n=E.width,s=r=E.height,u=n,l=r,i=n,o=r}else{var S=ar(t),D=t.style,C="border-box"===S("boxSizing"),w=parseFloat(S("borderLeftWidth"))||0,M=parseFloat(S("borderRightWidth"))||0,R=parseFloat(S("borderTopWidth"))||0,O=parseFloat(S("borderBottomWidth"))||0,_=(parseFloat(S("paddingLeft"))||0)+(parseFloat(S("paddingRight"))||0),T=(parseFloat(S("paddingTop"))||0)+(parseFloat(S("paddingBottom"))||0),P=_+(w+M),z=T+(R+O),G=S("position"),k=0,I=0;if("clientLeft"in t){var A=null;if("absolute"===G)A=Ui(t,bt(t)).offsetParent;else A=t.parentElement;if(A){var F=ar(A);k=parseFloat(F("width")),I=parseFloat(F("height"))}}c=Math.max(_,tt(S("minWidth"),k)||0),f=Math.max(T,tt(S("minHeight"),I)||0),h=tt(S("maxWidth"),k),v=tt(S("maxHeight"),I),isNaN(h)&&(h=1/0),isNaN(v)&&(v=1/0),b=tt(D.width,0)||0,x=tt(D.height,0)||0,a=parseFloat(S("width"))||0,s=parseFloat(S("height"))||0,n=u=Qo(a-b)<1?et(c,b||a,h):a,r=l=Qo(s-x)<1?et(f,x||s,v):s,i=u,o=l,C?(g=h,m=v,p=c,d=f,u=n-P,l=r-z):(g=h+P,m=v+z,p=c+P,d=f+z,n=u+P,r=l+z),i=u+_,o=l+T}return{svg:y,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:o,contentWidth:u,contentHeight:l,inlineCSSWidth:b,inlineCSSHeight:x,cssWidth:a,cssHeight:s,minWidth:c,minHeight:f,maxWidth:h,maxHeight:v,minOffsetWidth:p,minOffsetHeight:d,maxOffsetWidth:g,maxOffsetHeight:m}}function po(t,e){return ot(e>0?t[0]:t[1],e>0?t[1]:t[0])}function ho(t,e){var n=t===bt(t)||t===mt(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow="visible"!==ar(t)("overflow"),Ze(Ze({},e),r)}function vo(t,e,n,r){var i=t.left,o=t.right,a=t.top,s=t.bottom,u=e.top,l=e.left,c={left:l+i,top:u+a,right:l+o,bottom:u+s,width:o-i,height:s-a};return n&&r?ho(n,c):c}function go(t,e){var n=0,r=0,i=0,o=0;if(t){var a=t.getBoundingClientRect();n=a.left,r=a.top,i=a.width,o=a.height}var s={left:n,top:r,width:i,height:o,right:n+i,bottom:r+o};return t&&e?ho(t,s):s}function mo(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{i=bo(n.target,r)}return i}function bo(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function xo(t,e){return[zt(e,t[0]),zt(e,t[1]),zt(e,t[2]),zt(e,t[3])]}function yo(t){var e=t.left,n=t.top;return xo([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function Eo(t,e){t[e?"controlAbles":"targetAbles"].forEach((function(e){e.unset&&e.unset(t)}))}function So(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];!1===(null===r||void 0===r?void 0:r.isIdle())&&Eo(t,e),null===r||void 0===r||r.unset(),t[n]=null}function Do(t,e){if(e){var n=Ln(e);n.nextStyle=Ze(Ze({},n.nextStyle),t)}return{style:t,cssText:Q(t).map((function(e){return"".concat((n=e,r="-",void 0===r&&(r="-"),n.replace(/([a-z])([A-Z])/g,(function(t,e,n){return""+e+r+n.toLowerCase()}))),": ").concat(t[e],";");var n,r})).join("")}}function Co(t,e,n){var r=e.afterTransform||e.transform;return Ze(Ze({},Do(Ze(Ze(Ze({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function wo(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var o=Ze(Ze({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:!1!==e.isTrusted,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var t;null===(t=e.stop)||void 0===t||t.call(e)}});return i.isStartEvent?r||(i.lastEvent=o):i.isStartEvent=!0,o}function Mo(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),Ze(Ze({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function Ro(t,e,n){t._emitter.on(e,n)}function Oo(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function _o(t,e){return xt(t).getComputedStyle(t,e)}function To(t,e,n){var r={},i={};return t.filter((function(t){var o=t.name;if(r[o]||!e.some((function(e){return t[e]})))return!1;if(!n&&t.ableGroup){if(i[t.ableGroup])return!1;i[t.ableGroup]=!0}return r[o]=!0,!0}))}function Po(t,e){return t===e||null==t&&null==e}function zo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!B(i))return i}return t[n]}function Go(t,e){var n=[],r=[];return t.forEach((function(i,o){var a=e(i,o,t),s=r.indexOf(a),u=n[s]||[];-1===s&&(r.push(a),n.push(u)),u.push(i)})),n}function ko(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function Bo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Qo(e)-Qo(t)})),t[0]}function Io(t,e,n){return Bt(Mt(t,n),Ot(e,n),n)}function Ao(t,e){var n,r=t.is3d?4:3;return n=Ke(Io(t.rootMatrix,[e.distX,e.distY],r),2),e.distX=n[0],e.distY=n[1],e}function Fo(t,e,n,r){if(!n[0]&&!n[1])return e;var i=no(t,[Ti(n[0]||1),0],r),o=no(t,[0,Ti(n[1]||1)],r);return zt(e,no(t,[n[0]/ao(i),n[1]/ao(o)],r))}function No(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Yo(t){return Qo(t)<=bn?0:t}function qo(t){return function(e){if(!e.isDragging(t))return"";var n=function(t,e){var n,r=t.targetGesto,i=t.controlGesto;return(null===r||void 0===r?void 0:r.isFlag())&&(n=r.getEventData()[e]),!n&&(null===i||void 0===i?void 0:i.isFlag())&&(n=i.getEventData()[e]),n||{}}(e,t),r=n.deg;return r?qi("view-control-rotation".concat(r)):""}}function Xo(t,e){return void 0===e&&(e=[t]),function(n,r){if(r.isRequest)return!!e.some((function(t){return r.requestAble===t}))&&r.parentDirection;var i=r.inputEvent.target;return ft(i,qi("direction"))&&(!t||ft(i,qi(t)))}}function Wo(t,e){return t?Et(t)?t:F(t)?e?document.querySelector(t):t:Y(t)?t():yt(t)?t:"current"in t?t.current:t:null}function Ho(t,e){return t?((n=t)&&I(n)&&!Et(n)&&(A(n)||"length"in n)?[].slice.call(t):[t]).reduce((function(t,n){return F(n)&&e?$e($e([],Ke(t),!1),Ke([].slice.call(document.querySelectorAll(n))),!1):(A(n)?t.push(Ho(n,e)):t.push(Wo(n,e)),t)}),[]):[];var n}function Lo(t,e){var n=t.rootMatrix,r=t.is3d,i=Mt(n,r?4:3);return r||(i=_t(i,3,4)),i[12]=0,i[13]=0,i[14]=0,function(t,e){var n=Bt(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}(i,e)}function jo(t,e,n,r,i){var o=Ke(t,2),a=o[0],s=o[1],u=0,l=0;if(i&&a&&s){var c=ot([0,0],e),f=ot([0,0],r),p=ao(e),d=Math.cos(c-f)*p;if(r[0])if(r[1]){var h=r[0]*a,v=r[1]*s,g=Math.atan2(h+e[0],v+e[1]),m=Math.atan2(h,v);g<0&&(g+=2*Math.PI),m<0&&(m+=2*Math.PI);var b=0;(b=Qo(g-m)<Math.PI/2||Qo(g-m)>Math.PI/2*3?g-m:g-(m+=Math.PI))>2*Math.PI?b-=2*Math.PI:b>Math.PI?b=2*Math.PI-b:b<-Math.PI&&(b=-2*Math.PI-b);var x=ao([h+e[0],v+e[1]])*Math.cos(b);u=x*Math.sin(m)-h,l=x*Math.cos(m)-v,r[0]<0&&(u*=-1),r[1]<0&&(l*=-1)}else l=(u=d)/n;else u=(l=d)*n}else u=r[0]*e[0],l=r[1]*e[1];return[u,l]}function Vo(t,e,n,r){var i,o=n.ratio,a=n.startOffsetWidth,s=n.startOffsetHeight,u=0,l=0,c=r.distX,f=r.distY,p=r.pinchScale,d=r.parentDistance,h=r.parentDist,v=r.parentScale,g=n.fixedDirection,m=[0,1].map((function(e){return Qo(t[e]-g[e])})),b=[0,1].map((function(t){var e=m[t];return 0!==e&&(e=2/e),e}));if(h)u=h[0],l=h[1],e&&(u?l||(l=u/o):u=l*o);else if(N(p))u=(p-1)*a,l=(p-1)*s;else if(v)u=(v[0]-1)*a,l=(v[1]-1)*s;else if(d){var x=a*m[0],y=s*m[1],E=ao([x,y]);u=d/E*x*b[0],l=d/E*y*b[1]}else{var S=In({datas:n,distX:c,distY:f});S=b.map((function(t,e){return S[e]*t})),u=(i=Ke(jo([a,s],S,o,t,e),2))[0],l=i[1]}return{distWidth:u,distHeight:l}}function Uo(t,e){if(e){if("left"===t)return{x:"0%",y:"50%"};if("top"===t)return{x:"50%",y:"50%"};if("center"===t)return{x:"50%",y:"50%"};if("right"===t)return{x:"100%",y:"50%"};if("bottom"===t)return{x:"50%",y:"100%"};var n=Ke(t.split(" "),2),r=n[0],i=n[1],o=Uo(r||""),a=Uo(i||""),s=Ze(Ze({},o),a),u={x:"50%",y:"50%"};return s.x&&(u.x=s.x),s.y&&(u.y=s.y),s.value&&(s.x&&!s.y&&(u.y=s.value),!s.x&&s.y&&(u.x=s.value)),u}return"left"===t?{x:"0%"}:"right"===t?{x:"100%"}:"top"===t?{y:"0%"}:"bottom"===t?{y:"100%"}:t?"center"===t?{value:"50%"}:{value:t}:{}}function Zo(t,e,n){var r=Uo(t,!0),i=r.x,o=r.y;return[tt(i,e)||0,tt(o,n)||0]}function Ko(t,e){return t.length===e.length&&t.every((function(t,n){var r=e[n],i=A(t),o=A(r);return i&&o?Ko(t,r):!i&&!o&&t===r}))}function $o(t,e,n,r,i){var o=t._store,a=o[e];if(!(e in o)){if(null==i)return o[e]=n,n;o[e]=i,a=i}return a===n||r(a)===r(n)?a:(o[e]=n,n)}function Jo(t){return t>=0?1:-1}function Qo(t){return Math.abs(t)}function ta(t,e){return function(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}(t).map((function(t){return e(t)}))}function ea(t){return N(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var na=Je("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,o=e.originalDatas,a=t.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="onPinch".concat(r?"Group":"","Start"),c="drag".concat(r?"Group":"","ControlStart"),f=(!0===s?t.controlAbles:u.filter((function(t){return s.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[c]})),p=wo(t,e,{});r&&(p.targets=r);var d=Oo(t,l,p);n.isPinch=!1!==d,n.ables=f;var h=n.isPinch;return!!h&&(f.forEach((function(n){if(o[n.name]=o[n.name]||{},n[c]){var r=Ze(Ze({},e),{datas:o[n.name],parentRotate:i,isPinch:!0});n[c](t,r)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},h)},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,o=e.originalDatas,a=e.inputEvent,s=e.targets,u=e.angle;if(n.isPinch){var l=i*(1-1/r),c=wo(t,e,{});s&&(c.targets=s);var f="onPinch".concat(s?"Group":"");Oo(t,f,c);var p=n.ables,d="drag".concat(s?"Group":"","Control");return p.forEach((function(n){n[d]&&n[d](t,Ze(Ze({},e),{datas:o[n.name],inputEvent:a,resolveMatrix:!0,pinchScale:r,parentDistance:l,parentRotate:u,isPinch:!0}))})),c}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.targets,a=e.originalDatas;if(n.isPinch){var s="onPinch".concat(o?"Group":"","End"),u=Mo(t,e,{isDrag:r});o&&(u.targets=o),Oo(t,s,u);var l=n.ables,c="drag".concat(o?"Group":"","ControlEnd");return l.forEach((function(n){n[c]&&n[c](t,Ze(Ze({},e),{isDrag:r,datas:a[n.name],inputEvent:i,isPinch:!0}))})),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,Ze(Ze({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Ze(Ze({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Ze(Ze({},e),{targets:t.props.targets}))}}),ra=Xo("scalable"),ia={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:vr("scalable"),dragControlCondition:ra,viewClassName:qo("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=mo(e.parentDirection,r,i,n),a=t.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target,f=a.pos1,p=a.pos2,d=a.pos4;if(!o||!c)return!1;r||Tn(t,e),n.datas={},n.transform=l,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=s,n.startOffsetHeight=u,n.startValue=[1,1];var h=!o[0]&&!o[1]||o[0]||!o[1];function v(t){n.ratio=t&&isFinite(t)?t:0}function g(t){var e=ui(n.startPositions,t);n.fixedDirection=e.fixedDirection,n.fixedPosition=e.fixedPosition,n.fixedOffset=e.fixedOffset}Xn(t,e,"scale"),n.isWidth=h,n.startPositions=yo(t.state),n.setFixedDirection=g,v(st(f,p)/st(p,d)),g([-o[0],-o[1]]);var m=function(t){n.minScaleSize=t},b=function(t){n.maxScaleSize=t};m([-1/0,-1/0]),b([1/0,1/0]);var x=wo(t,e,Ze(Ze({direction:o,set:function(t){n.startValue=t},setRatio:v,setFixedDirection:g,setMinScaleSize:m,setMaxScaleSize:b},qn(t,e)),{dragStart:si.dragStart(t,(new Rn).dragStart([0,0],e))})),y=Oo(t,"onScaleStart",x);return n.startFixedDirection=n.fixedDirection,!1!==y&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!n.isScale&&x},dragControl:function(t,e){Pn(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,o=e.isPinch,a=e.dragClient,s=e.isRequest,u=e.useSnap,l=e.resolveMatrix,c=n.prevDist,f=n.direction,p=n.startOffsetWidth,d=n.startOffsetHeight,h=n.isScale,v=n.startValue,g=n.isWidth,m=n.ratio;if(!h)return!1;var b=t.props,x=b.throttleScale,y=b.parentMoveable,E=f;f[0]||f[1]||(E=[1,1]);var S=m&&(null!=r?r:b.keepRatio)||!1,D=t.state,C=[v[0],v[1]];function w(){var t=Vo(E,S,n,e),r=t.distWidth,i=t.distHeight,o=p?(p+r)/p:1,a=d?(d+i)/d:1;v[0]||(C[0]=r/p),v[1]||(C[1]=i/d);var s=(E[0]||S?o:1)*C[0],u=(E[1]||S?a:1)*C[1];return 0===s&&(s=Jo(c[0])*xn),0===u&&(u=Jo(c[1])*xn),[s,u]}var M=w();if(!o&&t.props.groupable){var R=(D.snapRenderInfo||{}).direction;A(R)&&(R[0]||R[1])&&(D.snapRenderInfo={direction:f,request:e.isRequest})}Oo(t,"onBeforeScale",wo(t,e,{scale:M,setFixedDirection:function(t){return n.setFixedDirection(t),M=w()},startFixedDirection:n.startFixedDirection,setScale:function(t){M=t}},!0));var O,_,T=[M[0]/C[0],M[1]/C[1]],P=a,z=[0,0],G=Jo(T[0]*T[1]),k=!a&&!i&&o;if(k||l?P=Kn(t,n.targetAllTransform,[0,0],[0,0],n):a||(P=n.fixedPosition),o||(z=Ii(t,T,f,!u&&s,n)),S){E[0]&&E[1]&&z[0]&&z[1]&&(Math.abs(z[0]*p)>Math.abs(z[1]*d)?z[1]=0:z[0]=0);var B=!z[0]&&!z[1];if(B&&(g?T[0]=ut(T[0]*C[0],x)/C[0]:T[1]=ut(T[1]*C[1],x)/C[1]),E[0]&&!E[1]||z[0]&&!z[1]||B&&g){T[0]+=z[0];var I=p*T[0]*C[0]/m;T[1]=Jo(G*T[0])*Qo(I/d/C[1])}else if(!E[0]&&E[1]||!z[0]&&z[1]||B&&!g){T[1]+=z[1];var F=d*T[1]*C[1]*m;T[0]=Jo(G*T[1])*Qo(F/p/C[0])}}else T[0]+=z[0],T[1]+=z[1],z[0]||(T[0]=ut(T[0]*C[0],x)/C[0]),z[1]||(T[1]=ut(T[1]*C[1],x)/C[1]);0===T[0]&&(T[0]=Jo(c[0])*xn),0===T[1]&&(T[1]=Jo(c[1])*xn),O=T,_=[C[0],C[1]],M=[O[0]*_[0],O[1]*_[1]];var N=[p,d],Y=[p*M[0],d*M[1]];Y=rt(Y,n.minScaleSize,n.maxScaleSize,!!S&&m),M=ta(2,(function(t){return N[t]?Y[t]/N[t]:Y[t]})),T=ta(2,(function(t){return M[t]/C[t]}));var q=ta(2,(function(t){return c[t]?T[t]/c[t]:T[t]})),X="scale(".concat(T.join(", "),")"),W="scale(".concat(M.join(", "),")"),H=zn(n,W,X),L=!v[0]||!v[1],j=function(t,e,n,r,i,o,a){return $n(t,e,n,r,i,o,a)}(t,L?W:X,n.fixedDirection,P,n.fixedOffset,n,L),V=k?j:Gt(j,n.prevInverseDist||[0,0]);if(n.prevDist=T,n.prevInverseDist=j,M[0]===c[0]&&M[1]===c[1]&&V.every((function(t){return!t}))&&!y&&!k)return!1;var U=wo(t,e,Ze({offsetWidth:p,offsetHeight:d,direction:f,scale:M,dist:T,delta:q,isPinch:!!o},Zn(t,H,V,o,e)));return Oo(t,"onScale",U),U},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=Mo(t,e,{});return Oo(t,"onScaleEnd",r),r},dragGroupControlCondition:ra,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=sr(t,"resizable",e);n.moveableScale=t.scale;var o=lr(t,this,"dragControlStart",e,(function(e,r){return cr(t,e,n,r)})),a=function(e){r.setFixedDirection(e),o.forEach((function(r,o){r.setFixedDirection(e),cr(t,r.moveable,n,i[o])}))};n.setFixedDirection=a;var s=Ze(Ze({},r),{targets:t.props.targets,events:o,setFixedDirection:a}),u=Oo(t,"onScaleGroupStart",s);return n.isScale=!1!==u,!!n.isScale&&s},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){Ro(t,"onBeforeScale",(function(n){Oo(t,"onBeforeScaleGroup",wo(t,e,Ze(Ze({},n),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,e);if(r){var i=r.dist,o=n.moveableScale;t.scale=[i[0]*o[0],i[1]*o[1]];var a=t.props.keepRatio,s=n.fixedPosition,u=lr(t,this,"dragControl",e,(function(e,n){var r=Ke(Bt(Wt(t.rotation/180*Math.PI,3),[n.datas.originalX*i[0],n.datas.originalY*i[1],1],3),2),o=r[0],u=r[1];return Ze(Ze({},n),{parentDist:null,parentScale:i,parentKeepRatio:a,dragClient:zt(s,[o,u])})})),l=Ze({targets:t.props.targets,events:u},r);return Oo(t,"onScaleGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var r=lr(t,this,"dragControlEnd",e);return Oo(t,"onScaleGroupEnd",Mo(t,e,{targets:t.props.targets,events:r})),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(e){return r=e.useSnap,{datas:t,parentDirection:e.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function oa(t,e){return t.map((function(t,n){return k(t,e[n],1,2)}))}function aa(t,e,n){var r=ot(t,e),i=ot(t,n)-r;return i>=0?i:i+2*Math.PI}var sa={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:qo("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable,a=n.zoom;if(r||i||!o)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,f=s.pos4,p=oa(u,l),d=oa(l,u),h=oa(u,c),v=oa(c,u),g=oa(c,f),m=oa(f,c),b=oa(l,f),x=oa(f,l);return $e([e.createElement("div",{className:qi("line"),key:"middeLine1",style:uo(p,g,a)}),e.createElement("div",{className:qi("line"),key:"middeLine2",style:uo(d,m,a)}),e.createElement("div",{className:qi("line"),key:"middeLine3",style:uo(h,b,a)}),e.createElement("div",{className:qi("line"),key:"middeLine4",style:uo(v,x,a)})],Ke(gr(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return ft(n,qi("direction"))&&ft(n,qi("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,o=bo(r.target,n);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,f=a.width,p=a.height,d=a.left,h=a.top;return n.datas={},n.targetTransform=l,n.warpTargetMatrix=u?c:_t(c,3,4),n.targetInverseMatrix=wt(Mt(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=d,n.top=h,n.poses=[[0,0],[f,0],[0,p],[f,p]].map((function(t){return Gt(t,s)})),n.nextPoses=n.poses.map((function(t){var e=Ke(t,2),r=e[0],i=e[1];return Bt(n.warpTargetMatrix,[r,i,0,1],4)})),n.startValue=Ht(4),n.prevMatrix=Ht(4),n.absolutePoses=yo(a),n.posIndexes=An(o),Tn(t,e),Xn(t,e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:o},!1!==Oo(t,"onWarpStart",wo(t,e,Ze({set:function(t){n.startValue=t}},qn(t,e))))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,o=e.distY,a=n.targetInverseMatrix,s=n.prevMatrix,u=n.isWarp,l=n.startValue,c=n.poses,f=n.posIndexes,p=n.absolutePoses;if(!u)return!1;if(Pn(t,e,"matrix3d"),Or(t,"warpable")){var d=f.map((function(t){return p[t]}));d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var h=ri(t,r,{horizontal:d.map((function(t){return t[1]+o})),vertical:d.map((function(t){return t[0]+i}))}),v=h.horizontal,g=h.vertical;o-=v.offset,i-=g.offset}var m=In({datas:n,distX:i,distY:o},!0),b=n.nextPoses.slice();if(f.forEach((function(t){b[t]=zt(b[t],m)})),!gn.every((function(t){return function(t,e){var n=aa(t[0],t[1],t[2]),r=aa(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}(t.map((function(t){return c[t]})),t.map((function(t){return b[t]})))})))return!1;var x=Vt(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var y=kn(n,Pt(a,x,4),!0),E=Pt(Mt(s,4),y,4);n.prevMatrix=y;var S=Pt(l,y,4),D=zn(n,"matrix3d(".concat(S.join(", "),")"),"matrix3d(".concat(y.join(", "),")"));return Hn(e,D),Oo(t,"onWarp",wo(t,e,Ze({delta:E,matrix:S,dist:y,multiply:Pt,transform:D},Do({transform:D},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,Oo(t,"onWarpEnd",Mo(t,e,{})),r)}},ua=qi("area-pieces"),la=qi("area-piece"),ca=qi("avoid"),fa=qi("view-dragging");function pa(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;dt(e,ca),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function da(t){return t.createElement("div",{key:"area_pieces",className:ua},t.createElement("div",{className:la}),t.createElement("div",{className:la}),t.createElement("div",{className:la}),t.createElement("div",{className:la}))}var ha={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,a=n.passDragArea,s=t.getState(),u=s.width,l=s.height,c=s.renderPoses,f=a?qi("area","pass"):qi("area");if(o)return[e.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f}),da(e)];if(!r||!i)return[];var p=Vt([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=p.length?Qi(p,!0):"none";return[e.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(l,"px"),transformOrigin:"0 0",transform:d}}),da(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var o=t.areaElement,a=t.state,s=a.moveableClientRect,u=a.renderPoses,l=a.rootMatrix,c=a.is3d,f=s.left,p=s.top,d=io(u),h=d.left,v=d.top,g=d.width,m=d.height,b=Ke(Io(l,[r-f,i-p],c?4:3),2),x=b[0],y=b[1],E=[{left:h,top:v,width:g,height:(y-=v)-10},{left:h,top:v,width:(x-=h)-10,height:m},{left:h,top:v+y+10,width:g,height:m-y-10},{left:h+x+10,top:v,width:g-x-10,height:m}],S=[].slice.call(o.nextElementSibling.children);E.forEach((function(t,e){S[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")})),pt(o,ca),a.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,pa(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||pa(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){pa(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&$((function(){e.disableNativeEvent=!1}))}},va=Je("origin",{props:["origin","svgOrigin"],render:function(t,e){var n,r=t.props,i=r.zoom,o=r.svgOrigin,a=r.groupable,s=t.getState(),u=s.beforeOrigin,l=s.rotation,c=s.svg,f=s.allMatrix,p=s.is3d,d=s.left,h=s.top,v=s.offsetWidth,g=s.offsetHeight;if(!a&&c&&o){var m=Ke(Zo(o,v,g),2);n=lo(l,i,Gt(no(f,[m[0],m[1]],p?4:3),[d,h]))}else n=lo(l,i,u);return[e.createElement("div",{className:qi("control","origin"),style:n,key:"beforeOrigin"})]}});function ga(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var ma={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=void 0===r?t.getContainer():r,o=n.scrollOptions,a=new ge,s=Wo(i,!0);e.datas.dragScroll=a,t.state.dragScroll=a;var u=e.isControl?"controlGesto":"targetGesto",l=e.targets;a.on("scroll",(function(n){var r=n.container,i=n.direction,o=wo(t,e,{scrollContainer:r,direction:i}),a=l?"onScrollGroup":"onScroll";l&&(o.targets=l),Oo(t,a,o)})).on("move",(function(e){var n=e.offsetX,r=e.offsetY,i=e.inputEvent;t[u].scrollBy(n,r,i.inputEvent,!1)})).on("scrollDrag",(function(e){(0,e.next)(t[u].getCurrentEvent())})),a.dragStart(e,Ze({container:s},o))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,a=r.scrollThreshold,s=void 0===a?0:a,u=r.scrollThrottleTime,l=void 0===u?0:u,c=r.getScrollPosition,f=void 0===c?ga:c,p=r.scrollOptions;return n.drag(e,Ze({container:o,threshold:s,throttleTime:l,getScrollPosition:function(t){return f({scrollContainer:t.container,direction:t.direction})}},p)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Ze(Ze({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Ze(Ze({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Ze(Ze({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Ze(Ze({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Ze(Ze({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,Ze(Ze({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Ze(Ze({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;null===(e=n.dragScroll)||void 0===e||e.dragEnd(),n.dragScroll=null}},ba={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},xa=Je("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=ea(n.padding||{}),i=r.left,o=r.top,a=r.right,s=r.bottom,u=t.getState(),l=u.renderPoses,c=[u.pos1,u.pos2,u.pos3,u.pos4],f=[];return i>0&&f.push([0,2]),o>0&&f.push([0,1]),a>0&&f.push([1,3]),s>0&&f.push([2,3]),f.map((function(t,n){var r=Ke(t,2),i=r[0],o=r[1],a=Vt([0,0],[100,0],[0,100],[100,100],c[i],c[o],l[i],l[o]);if(a.length)return e.createElement("div",{key:"padding".concat(n),className:qi("padding"),style:{transform:Qi(a,!0)}})}))}}),ya=["nw","ne","se","sw"];function Ea(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var Sa=[1,2,5,6],Da=[0,3,4,7],Ca=[1,-1,-1,1],wa=[1,1,-1,-1];function Ma(t,e,n,r,i,o,a,s){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=n),void 0===s&&(s=r);var u=[],l=!1,c=t.filter((function(t){return!t.virtual})),f=c.map((function(t){var c=t.horizontal,f=t.vertical,p=t.pos;if(f&&!l&&(l=!0,u.push("/")),l){var d=Math.max(0,1===f?p[1]-o:s-p[1]);return u.push(No(d,r,e)),d}d=Math.max(0,1===c?p[0]-i:a-p[0]);return u.push(No(d,n,e)),d}));return{radiusPoses:c,styles:u,raws:f}}function Ra(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),o.vertical&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function Oa(t,e,n,r,i,o,a){var s,u,l,c;void 0===o&&(o=[0,0]),void 0===a&&(a=!1);var f=t.indexOf("/"),p=(f>-1?t.slice(0,f):t).length,d=t.slice(0,p),h=t.slice(p+1),v=d.length,g=h.length,m=g>0,b=Ke(d,4),x=b[0],y=void 0===x?"0px":x,E=b[1],S=void 0===E?y:E,D=b[2],C=void 0===D?y:D,w=b[3],M=void 0===w?S:w,R=Ke(h,4),O=R[0],_=void 0===O?y:O,T=R[1],P=void 0===T?m?_:S:T,z=R[2],G=void 0===z?m?_:C:z,k=R[3],B=void 0===k?m?P:M:k,I=[y,S,C,M].map((function(t){return tt(t,e)})),A=[_,P,G,B].map((function(t){return tt(t,n)})),F=I.slice(),N=A.slice();s=Ke(Ea([F[0],F[1]],e),2),F[0]=s[0],F[1]=s[1],u=Ke(Ea([F[3],F[2]],e),2),F[3]=u[0],F[2]=u[1],l=Ke(Ea([N[0],N[3]],n),2),N[0]=l[0],N[3]=l[1],c=Ke(Ea([N[1],N[2]],n),2),N[1]=c[0],N[2]=c[1];var Y=a?F:F.slice(0,Math.max(o[0],v)),q=a?N:N.slice(0,Math.max(o[1],g));return $e($e([],Ke(Y.map((function(t,e){var o=ya[e];return{virtual:e>=v,horizontal:Ca[e],vertical:0,pos:[r+t,i+(-1===wa[e]?n:0)],sub:!0,raw:I[e],direction:o}}))),!1),Ke(q.map((function(t,n){var o=ya[n];return{virtual:n>=g,horizontal:0,vertical:wa[n],pos:[r+(-1===Ca[n]?e:0),i+t],sub:!0,raw:A[n],direction:o}}))),!1)}var _a=[[0,-1,"n"],[1,0,"e"]],Ta=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Pa(t,e,n){var r=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=e,u=s.type,l=s.poses,c="rect"===u,f="circle"===u;if("polygon"===u)return n.map((function(t){return"".concat(No(t[0],o,r)," ").concat(No(t[1],a,r))}));if(c||"inset"===u){var p=n[1][1],d=n[3][0],h=n[7][0],v=n[5][1];if(c)return[p,d,v,h].map((function(t){return"".concat(t,"px")}));var g=[p,o-d,a-v,h].map((function(t,e){return No(t,e%2?o:a,r)}));if(n.length>8){var m=Ke(Gt(n[4],n[0]),2),b=m[0],x=m[1];g.push.apply(g,$e(["round"],Ke(Ma(l.slice(8).map((function(t,e){return Ze(Ze({},t),{pos:n[e]})})),r,b,x,h,p,d,v).styles),!1))}return g}if(f||"ellipse"===u){var y=n[0],E=No(Qo(n[1][1]-y[1]),f?Math.sqrt((o*o+a*a)/2):a,r);return(g=f?[E]:[No(Qo(n[2][0]-y[0]),o,r),E]).push("at",No(y[0],o,r),No(y[1],a,r)),g}}function za(t,e,n,r){var i=[r,(r+e)/2,e],o=[t,(t+n)/2,n];return Ta.map((function(t){var e=Ke(t,3),n=e[0],r=e[1],a=e[2],s=i[n+1],u=o[r+1];return{vertical:Qo(r),horizontal:Qo(n),direction:a,pos:[s,u]}}))}function Ga(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach((function(t){var r=t.pos;e[0]=Math.min(e[0],r[0]),e[1]=Math.max(e[1],r[0]),n[0]=Math.min(n[0],r[1]),n[1]=Math.max(n[1],r[1])})),[Qo(e[1]-e[0]),Qo(n[1]-n[0])]}function ka(t,e,n,r,i){var o,a,s,u,l,c,f,p,d;if(t){var h=i;if(!h){var v=ar(t),g=v("clipPath");h="none"!==g?g:v("clip")}if(h&&"none"!==h&&"auto"!==h||(h=r)){var m=j(h),b=m.prefix,x=void 0===b?h:b,y=m.value,E=void 0===y?"":y,S="circle"===x,D=" ";if("polygon"===x){D=",";var C=(T=L(E||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var r=Ke(t.split(" "),2),i=r[0],o=r[1];return{vertical:1,horizontal:1,pos:[tt(i,e),tt(o,n)]}})),w=Ee(C.map((function(t){return t.pos})));return{type:x,clipText:h,poses:C,splitter:D,left:w.minX,right:w.maxX,top:w.minY,bottom:w.maxY}}if(S||"ellipse"===x){var M="",R="",O=0,_=0,T=H(E);if(S){var P;P=void 0===(a=(o=Ke(T,4))[0])?"50%":a,M=void 0===(s=o[2])?"50%":s,R=void 0===(u=o[3])?"50%":u,O=tt(P,Math.sqrt((e*e+n*n)/2)),_=O}else{var z,G;z=void 0===(c=(l=Ke(T,5))[0])?"50%":c,G=void 0===(f=l[1])?"50%":f,M=void 0===(p=l[3])?"50%":p,R=void 0===(d=l[4])?"50%":d,O=tt(z,e),_=tt(G,n)}var k=[tt(M,e),tt(R,n)];C=$e([{vertical:1,horizontal:1,pos:k,direction:"nesw"}],Ke(_a.slice(0,S?1:2).map((function(t){return{vertical:Qo(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[k[0]+t[0]*O,k[1]+t[1]*_]}}))),!1);return{type:x,clipText:h,radiusX:O,radiusY:_,left:k[0]-O,top:k[1]-_,right:k[0]+O,bottom:k[1]+_,poses:C,splitter:D}}if("inset"===x){var B=(T=H(E||"0 0 0 0")).indexOf("round"),I=(B>-1?T.slice(0,B):T).length,A=T.slice(I+1),F=Ke(T.slice(0,I),4),N=F[0],Y=F[1],q=void 0===Y?N:Y,X=F[2],W=void 0===X?N:X,U=F[3],Z=void 0===U?q:U,K=Ke([N,W].map((function(t){return tt(t,n)})),2),$=K[0],J=K[1],Q=Ke([Z,q].map((function(t){return tt(t,e)})),2),et=Q[0],nt=Q[1],rt=e-nt,it=n-J,ot=Oa(A,rt-et,it-$,et,$);return{type:"inset",clipText:h,poses:C=$e($e([],Ke(za($,rt,it,et)),!1),Ke(ot),!1),top:$,left:et,right:rt,bottom:it,radius:A,splitter:D}}if("rect"===x){D=",";var at=Ke((T=L(E||"0px, ".concat(e,"px, ").concat(n,"px, 0px"))).map((function(t){return V(t).value})),4),st=at[0];return{type:"rect",clipText:h,poses:C=za(st,nt=at[1],J=at[2],et=at[3]),top:st,right:nt,bottom:J,left:et,values:T,splitter:D}}}}}function Ba(t,e){var n=Ke(_n(t,e),2),r=n[0],i=n[1],o=e.datas,a=o.clipPath,s=o.clipIndex,u=a,l=u.type,c=u.poses,f=u.splitter,p=c.map((function(t){return t.pos}));if("polygon"===l)p.splice(s,0,[r,i]);else{if("inset"!==l)return;var d=Sa.indexOf(s),h=Da.indexOf(s),v=c.length;if(function(t,e,n,r,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=Ra(t.slice(n)),p=f.horizontalRange,d=f.verticalRange;if(r>-1)for(var h=1===Ca[r]?o-l:s-o,v=p[1];v<=r;++v){var g=1===wa[v]?c:u,m=0;if(r===v?m=o:0===v?m=l+h:-1===Ca[v]&&(m=s-(e[n][0]-l)),t.splice(n+v,0,{horizontal:Ca[v],vertical:0,pos:[m,g]}),e.splice(n+v,0,[m,g]),0===v)break}else if(i>-1){var b=1===wa[i]?a-c:u-a;if(0===p[1]&&0===d[1]){var x=[l+b,c];t.push({horizontal:Ca[0],vertical:0,pos:x}),e.push(x)}var y=d[0];for(v=d[1];v<=i&&(m=1===Ca[v]?l:s,g=0,i===v?g=a:0===v?g=c+b:1===wa[v]?g=e[n+y][1]:-1===wa[v]&&(g=u-(e[n+y][1]-c)),t.push({horizontal:0,vertical:wa[v],pos:[m,g]}),e.push([m,g]),0!==v);++v);}}(c,p,8,d,h,r,i,p[4][0],p[4][1],p[0][0],p[0][1]),v===c.length)return}var g=Pa(t,a,p),m="".concat(l,"(").concat(g.join(f),")");Oo(t,"onClip",wo(t,e,Ze({clipEventType:"added",clipType:l,poses:p,clipStyles:g,clipStyle:m,distX:0,distY:0},Do({clipPath:m},e))))}function Ia(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,o=r,a=o.type,s=o.poses,u=o.splitter,l=s.map((function(t){return t.pos})),c=l.length;if("polygon"===a)s.splice(i,1),l.splice(i,1);else{if("inset"!==a)return;if(i<8)return;if(function(t,e,n,r,i){void 0===i&&(i=e.length);var o=Ra(t.slice(r)),a=o.horizontalRange,s=o.verticalRange,u=n-r,l=0;if(0===u)l=i;else if(u>0&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(n,l),e.splice(n,l)}(s,l,i,8,c),c===s.length)return}var f=Pa(t,r,l),p="".concat(a,"(").concat(f.join(u),")");Oo(t,"onClip",wo(t,e,Ze({clipEventType:"removed",clipType:a,poses:l,clipStyles:f,clipStyle:p,distX:0,distY:0},Do({clipPath:p},e))))}var Aa={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[".control.clip-control {\nbackground: #6d6;\ncursor: pointer;\n}\n.control.clip-control.clip-radius {\nbackground: #d66;\n}\n.line.clip-line {\nbackground: #6e6;\ncursor: move;\nz-index: 1;\n}\n.clip-area {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.clip-ellipse {\nposition: absolute;\ncursor: move;\nborder: 1px solid #6d6;\nborder: var(--zoompx) solid #6d6;\nborder-radius: 50%;\ntransform-origin: 0px 0px;\n}",":host {\n--bounds-color: #d66;\n}",".guideline {\npointer-events: none;\nz-index: 2;\n}",".line.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}"],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,o=n.clipArea,a=n.zoom,s=n.groupable,u=t.getState(),l=u.target,c=u.width,f=u.height,p=u.allMatrix,d=u.is3d,h=u.left,v=u.top,g=u.pos1,m=u.pos2,b=u.pos3,x=u.pos4,y=u.clipPathState,E=u.snapBoundInfos,S=u.rotation;if(!l||s)return[];var D=ka(l,c,f,i||"inset",y||r);if(!D)return[];var C=d?4:3,w=D.type,M=D.poses.map((function(t){var e=no(p,t.pos,C);return[e[0]-h,e[1]-v]})),R=[],O=[],_="rect"===w,T="inset"===w,P="polygon"===w;if(_||T||P){var z=T?M.slice(0,8):M;O=z.map((function(t,n){var r=0===n?z[z.length-1]:z[n-1],i=ot(r,t),o=so(r,t);return e.createElement("div",{key:"clipLine".concat(n),className:qi("line","clip-line","snap-control"),"data-clip-index":n,style:{width:"".concat(o,"px"),transform:"translate(".concat(r[0],"px, ").concat(r[1],"px) rotate(").concat(i,"rad) scaleY(").concat(a,")")}})}))}if(R=M.map((function(t,n){return e.createElement("div",{key:"clipControl".concat(n),className:qi("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(S,"rad) scale(").concat(a,")")}})})),T&&R.push.apply(R,$e([],Ke(M.slice(8).map((function(t,n){return e.createElement("div",{key:"clipRadiusControl".concat(n),className:qi("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(S,"rad) scale(").concat(a,")")}})}))),!1)),"circle"===w||"ellipse"===w){var G=D.left,k=D.top,B=D.radiusX,I=D.radiusY,A=Ke(Gt(no(p,[G,k],C),no(p,[0,0],C)),2),F=A[0],N=A[1],Y="none";if(!o){for(var q=Math.max(10,B/5,I/5),X=[],W=0;W<=q;++W){var H=2*Math.PI/q*W;X.push([B+(B-a)*Math.cos(H),I+(I-a)*Math.sin(H)])}X.push([B,-2]),X.push([-2,-2]),X.push([-2,2*I+2]),X.push([2*B+2,2*I+2]),X.push([2*B+2,-2]),X.push([B,-2]),Y="polygon(".concat(X.map((function(t){return"".concat(t[0],"px ").concat(t[1],"px")})).join(", "),")")}R.push(e.createElement("div",{key:"clipEllipse",className:qi("clip-ellipse","snap-control"),style:{width:"".concat(2*B,"px"),height:"".concat(2*I,"px"),clipPath:Y,transform:"translate(".concat(-h+F,"px, ").concat(-v+N,"px) ").concat(Qi(p))}}))}if(o){var L=io($e([g,m,b,x],Ke(M),!1)),j=L.width,V=L.height,U=L.left,Z=L.top;if(P||_||T){X=T?M.slice(0,8):M;R.push(e.createElement("div",{key:"clipArea",className:qi("clip-area","snap-control"),style:{width:"".concat(j,"px"),height:"".concat(V,"px"),transform:"translate(".concat(U,"px, ").concat(Z,"px)"),clipPath:"polygon(".concat(X.map((function(t){return"".concat(t[0]-U,"px ").concat(t[1]-Z,"px")})).join(", "),")")}}))}}return E&&["vertical","horizontal"].forEach((function(t){var n=E[t],r="horizontal"===t;n.isSnap&&O.push.apply(O,$e([],Ke(n.snap.posInfos.map((function(n,i){var o=n.pos,s=Gt(no(p,r?[0,o]:[o,0],C),[h,v]),u=Gt(no(p,r?[c,o]:[o,f],C),[h,v]);return dr(e,"",s,u,a,"clip".concat(t,"snap").concat(i),"guideline")}))),!1)),n.isBound&&O.push.apply(O,$e([],Ke(n.bounds.map((function(n,i){var o=n.pos,s=Gt(no(p,r?[0,o]:[o,0],C),[h,v]),u=Gt(no(p,r?[c,o]:[o,f],C),[h,v]);return dr(e,"",s,u,a,"clip".concat(t,"bounds").concat(i),"guideline","bounds","bold")}))),!1))})),$e($e([],Ke(R),!1),Ke(O),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,Ze(Ze({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,a=n.target,s=n.width,u=n.height,l=e.inputEvent?e.inputEvent.target:null,c=l&&l.getAttribute("class")||"",f=e.datas,p=ka(a,s,u,i||"inset",o);if(!p)return!1;var d=p.clipText;return!1===Oo(t,"onClipStart",wo(t,e,{clipType:p.type,clipStyle:d,poses:p.poses.map((function(t){return t.pos}))}))?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,n.clipPathState=d,Tn(t,e),!0)},dragControl:function(t,e){var n,r,i,o=e.datas,a=e.originalDatas,s=e.isDragTarget;if(!o.isClipStart)return!1;var u=o,l=u.isControl,c=u.isLine,f=u.isArea,p=u.clipIndex,d=u.clipPath;if(!d)return!1;var h=co(t.props,"clippable"),v=h.keepRatio,g=0,m=0,b=a.draggable,x=In(e);s&&b?(n=Ke(b.prevBeforeDist,2),g=n[0],m=n[1]):(r=Ke(x,2),g=r[0],m=r[1]);var y=[g,m],E=t.state,S=E.width,D=E.height,C=!f&&!l&&!c,w=d.type,M=d.poses,R=d.splitter,O=M.map((function(t){return t.pos}));C&&(g=-g,m=-m);var _=!l||"nesw"===M[p].direction,T="inset"===w||"rect"===w,P=M.map((function(){return[0,0]}));if(l&&!_){var z=M[p],G=z.horizontal,k=z.vertical,B=[g*Qo(G),m*Qo(k)];P=function(t,e,n,r,i){var o=t[e],a=o.direction,s=o.sub,u=t.map((function(){return[0,0]})),l=a?a.split(""):[];if(r&&e<8){var c=l.filter((function(t){return"w"===t||"e"===t})),f=l.filter((function(t){return"n"===t||"s"===t})),p=c[0],d=f[0];u[e]=n;var h=Ke(Ga(t),2),v=h[0],g=h[1],m=v&&g?v/g:0;if(m&&i){var b=t[(e+4)%8].pos,x=[0,0];a.indexOf("w")>-1?x[0]=-1:a.indexOf("e")>-1&&(x[0]=1),a.indexOf("n")>-1?x[1]=-1:a.indexOf("s")>-1&&(x[1]=1);var y=jo([v,g],n,m,x,!0),E=v+y[0],S=g+y[1],D=b[1],C=b[1],w=b[0],M=b[0];-1===x[0]?w=M-E:1===x[0]?M=w+E:(w-=E/2,M+=E/2),-1===x[1]?D=C-S:C=1===x[1]?D+S:(D=C-S/2)+S;var R=za(D,M,C,w);t.forEach((function(t,e){u[e][0]=R[e].pos[0]-t.pos[0],u[e][1]=R[e].pos[1]-t.pos[1]}))}else t.forEach((function(t,e){var r=t.direction;r&&(r.indexOf(p)>-1&&(u[e][0]=n[0]),r.indexOf(d)>-1&&(u[e][1]=n[1]))})),p&&(u[1][0]=n[0]/2,u[5][0]=n[0]/2),d&&(u[3][1]=n[1]/2,u[7][1]=n[1]/2)}else a&&!s?l.forEach((function(e){var r="n"===e||"s"===e;t.forEach((function(t,i){var o=t.direction,a=t.horizontal,s=t.vertical;o&&-1!==o.indexOf(e)&&(u[i]=[r||!a?0:n[0],r&&s?n[1]:0])}))})):u[e]=n;return u}(M,p,B,T,v)}else _&&(P=O.map((function(){return[g,m]})));var I=O.map((function(t,e){return zt(t,P[e])})),A=$e([],Ke(I),!1);E.snapBoundInfos=null;var F="circle"===d.type,N="ellipse"===d.type;if(F||N){var Y=Qo((rt=io(I)).bottom-rt.top),q=Qo(N?rt.right-rt.left:Y),X=I[0][1]+Y,W=I[0][0]-q,H=I[0][0]+q;F&&(A.push([H,rt.bottom]),P.push([1,0])),A.push([rt.left,X]),P.push([0,1]),A.push([W,rt.bottom]),P.push([1,0])}var L=Ri((h.clipHorizontalGuidelines||[]).map((function(t){return tt("".concat(t),D)})),(h.clipVerticalGuidelines||[]).map((function(t){return tt("".concat(t),S)})),S,D),j=[],V=[];if(F||N)j=[A[4][0],A[2][0]],V=[A[1][1],A[3][1]];else if(T){var U=[A[0],A[2],A[4],A[6]],Z=[P[0],P[2],P[4],P[6]];j=U.filter((function(t,e){return Z[e][0]})).map((function(t){return t[0]})),V=U.filter((function(t,e){return Z[e][1]})).map((function(t){return t[1]}))}else j=A.filter((function(t,e){return P[e][0]})).map((function(t){return t[0]})),V=A.filter((function(t,e){return P[e][1]})).map((function(t){return t[1]}));var K=[0,0],$=ii(L,h.clipTargetBounds&&{left:0,top:0,right:S,bottom:D},j,V,5,5),J=$.horizontal,Q=$.vertical,et=J.offset,nt=Q.offset;if(J.isBound&&(K[1]+=et),Q.isBound&&(K[0]+=nt),(N||F)&&0===P[0][0]&&0===P[0][1]){var rt,it=(rt=io(I)).bottom-rt.top,ot=N?rt.right-rt.left:it;ot-=Q.isBound?Qo(nt):0===Q.snapIndex?-nt:nt,it-=J.isBound?Qo(et):0===J.snapIndex?-et:et,F&&(ot=it=Xr(Q,J)>0?it:ot);var at=A[0];A[1][1]=at[1]-it,A[2][0]=at[0]+ot,A[3][1]=at[1]+it,A[4][0]=at[0]-ot}else if(T&&v&&l){var st=Ke(Ga(M),2),ut=st[0],lt=st[1],ct=ut&&lt?ut/lt:0,ft=M[p].direction||"",pt=A[1][1];X=A[5][1],W=A[7][0],H=A[3][0];Qo(et)<=Qo(nt)?et=Jo(et)*Qo(nt)/ct:nt=Jo(nt)*Qo(et)*ct,ft.indexOf("w")>-1?W-=nt:ft.indexOf("e")>-1?H-=nt:(W+=nt/2,H-=nt/2),ft.indexOf("n")>-1?pt-=et:ft.indexOf("s")>-1?X-=et:(pt+=et/2,X-=et/2);var dt=za(pt,H,X,W);A.forEach((function(t,e){var n;n=Ke(dt[e].pos,2),t[0]=n[0],t[1]=n[1]}))}else A.forEach((function(t,e){var n=P[e];n[0]&&(t[0]-=nt),n[1]&&(t[1]-=et)}));var ht=Pa(t,d,I),vt="".concat(w,"(").concat(ht.join(R),")");if(E.clipPathState=vt,F||N)j=[A[4][0],A[2][0]],V=[A[1][1],A[3][1]];else if(T){j=(U=[A[0],A[2],A[4],A[6]]).map((function(t){return t[0]})),V=U.map((function(t){return t[1]}))}else j=A.map((function(t){return t[0]})),V=A.map((function(t){return t[1]}));if(E.snapBoundInfos=ii(L,h.clipTargetBounds&&{left:0,top:0,right:S,bottom:D},j,V,1,1),b){var gt=E.is3d,mt=E.allMatrix,bt=gt?4:3,xt=K;s&&(xt=[y[0]+K[0]-x[0],y[1]+K[1]-x[1]]),b.deltaOffset=Pt(mt,[xt[0],xt[1],0,0],bt)}return Oo(t,"onClip",wo(t,e,Ze({clipEventType:"changed",clipType:w,poses:I,clipStyle:vt,clipStyles:ht,distX:g,distY:m},Do(((i={})["rect"===w?"clip":"clipPath"]=vt,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,a=r.isClipStart,s=r.isControl;return!!a&&(Oo(t,"onClipEnd",Mo(t,e,{})),i&&(s?Ia(t,e):o&&Ba(t,e)),i||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Fa={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[":host[data-able-origindraggable] .control.origin {\npointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:ft(e.inputEvent.target,qi("origin"))},dragControlStart:function(t,e){var n=e.datas;Tn(t,e);var r=wo(t,e,{dragStart:si.dragStart(t,(new Rn).dragStart([0,0],e))}),i=Oo(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,!1===i?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var o=Ke(In(e),2),a=o[0],s=o[1],u=t.state,l=u.width,c=u.height,f=u.offsetMatrix,p=u.targetMatrix,d=u.is3d,h=t.props.originRelative,v=void 0===h||h,g=d?4:3,m=[a,s];if(i){var b=e.distOrigin;(b[0]||b[1])&&(m=b)}var x=zt(n.startOrigin,m),y=zt(n.startTargetOrigin,m),E=Gt(m,n.prevOrigin),S=Yn(f,p,x,g),D=t.getRect(),C=io(ro(S,l,c,g)),w=[D.left-C.left,D.top-C.top];n.prevOrigin=m;var M=[No(y[0],l,v),No(y[1],c,v)].join(" "),R=si.drag(t,Mn(e,t.state,w,!!r,!1)),O=wo(t,e,Ze(Ze({width:l,height:c,origin:x,dist:m,delta:E,transformOrigin:M,drag:R},Do({transformOrigin:M,transform:R.transform},e)),{afterTransform:R.transform}));return Oo(t,"onDragOrigin",O),O},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(Oo(t,"onDragOriginEnd",Mo(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Na(t,e,n,r,i){void 0===r&&(r=[0,0]);return Oa(t&&"0px"!==t?H(t):[],e,n,0,0,r,i)}function Ya(t,e,n,r,i){var o=t.state,a=o.width,s=o.height,u=Ma(i,t.props.roundRelative,a,s),l=u.raws,c=u.styles,f=function(t,e){return void 0===e&&(e=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,n){return t.horizontal?e[n]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,n){return t.vertical?e[n]:null})).filter((function(t){return null!=t}))}}(u.radiusPoses,l),p=f.horizontals,d=f.verticals,h=c.join(" ");o.borderRadiusState=h;var v=wo(t,e,Ze({horizontals:p,verticals:d,borderRadius:h,width:a,height:s,delta:r,dist:n},Do({borderRadius:h},e)));return Oo(t,"onRound",v),v}function qa(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var o=t.moveables[0],a=t.getTargets()[0];a&&((null===o||void 0===o?void 0:o.props.target)===a?(i=null!==(n=null===(e=t.moveables[0])||void 0===e?void 0:e.state.style.borderRadius)&&void 0!==n?n:"",r.borderRadius=i):(i=_o(a).borderRadius,r.borderRadius=i))}return i}var Xa={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[".control.border-radius {\nbackground: #d66;\ncursor: pointer;\nz-index: 3;\n}",".control.border-radius.vertical {\nbackground: #d6d;\nz-index: 2;\n}",".control.border-radius.virtual {\nopacity: 0.5;\nz-index: 1;\n}",":host.round-line-clickable .line.direction {\ncursor: pointer;\n}"],className:function(t){var e=t.props.roundClickable;return!0===e||"line"===e?qi("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,o=n.height,a=n.allMatrix,s=n.is3d,u=n.left,l=n.top,c=n.borderRadiusState,f=t.props,p=f.minRoundControls,d=void 0===p?[0,0]:p,h=f.maxRoundControls,v=void 0===h?[4,4]:h,g=f.zoom,m=f.roundPadding,b=void 0===m?0:m,x=f.isDisplayShadowRoundControls,y=f.groupable;if(!r)return null;var E=c||qa(t),S=s?4:3,D=Na(E,i,o,d,!0);if(!D)return null;var C=0,w=0,M=y?[0,0]:[u,l];return D.map((function(t,n){var r=t.horizontal,i=t.vertical,o=t.direction||"",s=$e([],Ke(t.pos),!1);w+=Math.abs(r),C+=Math.abs(i),r&&o.indexOf("n")>-1&&(s[1]-=b),i&&o.indexOf("w")>-1&&(s[0]-=b),r&&o.indexOf("s")>-1&&(s[1]+=b),i&&o.indexOf("e")>-1&&(s[0]+=b);var u=Gt(no(a,s,S),M),l=x&&"horizontal"!==x,c=t.vertical?C<=v[1]&&(l||!t.virtual):w<=v[0]&&(x||!t.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(n),className:qi("control","border-radius",t.vertical?"vertical":"",t.virtual?"virtual":""),"data-radius-index":n,style:{display:c?"block":"none",transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) scale(").concat(g,")")}})}))},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,o=i.getAttribute("class")||"",a=o.indexOf("border-radius")>-1,s=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=-1;if(s){var c=i.getAttribute("data-line-key")||"";c&&(l=parseInt(c.replace(/render-line-/g,""),10),isNaN(l)&&(l=-1))}if(!a&&!s)return!1;var f=wo(t,e,{});if(!1===Oo(t,"onRoundStart",f))return!1;r.lineIndex=l,r.controlIndex=u,r.isControl=a,r.isLine=s,Tn(t,e);var p=t.props,d=p.roundRelative,h=p.minRoundControls,v=void 0===h?[0,0]:h,g=t.state,m=g.width,b=g.height;r.isRound=!0,r.prevDist=[0,0];var x=Na(qa(t)||"",m,b,v,!0)||[];return r.controlPoses=x,g.borderRadiusState=Ma(x,d,m,b).styles.join(" "),f},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,o=Ke(In(e),2),a=o[0],s=o[1],u=[a,s],l=Gt(u,n.prevDist),c=t.props.maxRoundControls,f=void 0===c?[4,4]:c,p=t.state,d=p.width,h=p.height,v=r[i],g=v.vertical,m=v.horizontal,b=r.map((function(t){var e=t.horizontal,n=t.vertical,r=[e*m*u[0],n*g*u[1]];if(e){if(1===f[0])return r;if(f[0]<4&&e!==m)return r}else{if(0===f[1])return r[1]=n*m*u[0]/d*h,r;if(g){if(1===f[1])return r;if(f[1]<4&&n!==g)return r}}return[0,0]}));b[i]=u;var x=r.map((function(t,e){return Ze(Ze({},t),{pos:zt(t.pos,b[e])})}));return i<4?x.slice(0,i+1).forEach((function(t){t.virtual=!1})):x.slice(4,i+1).forEach((function(t){t.virtual=!1})),n.prevDist=[a,s],Ya(t,e,u,l,x)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var o=r.isControl,a=r.controlIndex,s=r.isLine,u=r.lineIndex,l=r.controlPoses,c=l.filter((function(t){return t.virtual})).length,f=t.props.roundClickable,p=void 0===f||f;if(i&&p){if(!o||!0!==p&&"control"!==p){if(s&&(!0===p||"line"===p)){var d=Ke(_n(t,e),2);!function(t,e,n,r){var i=t.filter((function(t){var e=t.virtual;return t.horizontal&&!e})).length,o=t.filter((function(t){var e=t.virtual;return t.vertical&&!e})).length,a=-1;if(0===e&&(0===i?a=0:1===i&&(a=1)),2===e&&(i<=2?a=2:i<=3&&(a=3)),3===e&&(0===o?a=4:o<4&&(a=7)),1===e&&(o<=1?a=5:o<=2&&(a=6)),-1!==a&&t[a].virtual){var s=t[a];!function(t,e){e<4?t.slice(0,e+1).forEach((function(t){t.virtual=!1})):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach((function(t){t.virtual=!1})))}(t,a),a<4?s.pos[0]=n:s.pos[1]=r}}(l,u,d[0],d[1])}}else!function(t,e){e<4?t.slice(e,4).forEach((function(t){t.virtual=!0})):t.slice(e).forEach((function(t){t.virtual=!0}))}(l,a);c!==l.filter((function(t){return t.virtual})).length&&Ya(t,e,[0,0],[0,0],l)}var h=Mo(t,e,{});return Oo(t,"onRoundEnd",h),n.borderRadiusState="",h},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,o=sr(t,"roundable",e);return Oo(t,"onRoundGroupStart",Ze({targets:t.props.targets,events:o.map((function(t,e){return Ze(Ze({},t),{target:i[e],moveable:r[e],currentTarget:r[e]})}))},n)),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,o=sr(t,"roundable",e),a=Ze({targets:t.props.targets,events:o.map((function(t,e){return Ze(Ze(Ze({},t),{target:i[e],moveable:r[e],currentTarget:r[e]}),Do({borderRadius:n.borderRadius},t))}))},n);return Oo(t,"onRoundGroup",a),a},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=sr(t,"roundable",e);Ro(t,"onRound",(function(e){var o=Ze({targets:t.props.targets,events:i.map((function(t,i){return Ze(Ze(Ze({},t),{target:r[i],moveable:n[i],currentTarget:n[i]}),Do({borderRadius:e.borderRadius},t))}))},e);Oo(t,"onRoundGroup",o)}));var o=this.dragControlEnd(t,e);if(!o)return!1;var a=Ze({targets:t.props.targets,events:i.map((function(t,e){var i;return Ze(Ze({},t),{target:r[e],moveable:n[e],currentTarget:n[e],lastEvent:null===(i=t.datas)||void 0===i?void 0:i.lastEvent})}))},o);return Oo(t,"onRoundGroupEnd",a),a},unset:function(t){t.state.borderRadiusState=""}};var Wa={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,o=n.inlineTransform,a=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(kt(i,!0),")"),s=o&&"none"!==o?o:a;e.datas.startTransforms=function(t,e){var n=Ht(e?4:3);return t==="matrix".concat(e?"3d":"","(").concat(n.join(","),")")||"matrix(1,0,0,1,0,0)"===t}(s,r)?[]:H(s)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return wo(t,e,{setTransform:function(t){e.datas.startTransforms=A(t)?t:H(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return wo(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Oo(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Oo(t,"onBeforeRender",wo(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Oo(t,"onBeforeRenderEnd",wo(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=sr(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.setTransform(r,t),n.resetStyle(t),n.fillDragStartParams(r,t)}));Oo(t,"onBeforeRenderGroupStart",wo(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=sr(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.resetStyle(t),n.fillDragParams(r,t)}));Oo(t,"onBeforeRenderGroup",wo(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Oo(t,"onBeforeRenderGroupEnd",wo(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Ha={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Oo(t,"onRenderStart",wo(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Oo(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Oo(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Oo(t,"onRenderGroupStart",wo(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=sr(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.fillDragParams(r,t)}));Oo(t,"onRenderGroup",wo(t,e,Ze(Ze({isPinch:!!e.isPinch,targets:t.props.targets,transform:Vn(e),transformObject:{}},Do(Un(e))),{events:o})))},dragGroupEnd:function(t,e){var n=this,r=sr(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.fillDragEndParams(r,t)}));Oo(t,"onRenderGroupEnd",wo(t,e,Ze({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o,transformObject:{},transform:Vn(e)},Do(Un(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return $t(jn(e)||[]).forEach((function(t){n[t.name]=t.functionValue})),wo(t,e,Ze({isPinch:!!e.isPinch,transformObject:n,transform:Vn(e)},Do(Un(e))))},fillDragEndParams:function(t,e){var n={};return $t(jn(e)||[]).forEach((function(t){n[t.name]=t.functionValue})),wo(t,e,Ze({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Vn(e)},Do(Un(e))))}};function La(t,e,n,r,i,o,a){o.clientDistX=o.distX,o.clientDistY=o.distY;var s="Start"===i,u="End"===i,l="After"===i,c=t.state.target,f=o.isRequest,p=r.indexOf("Control")>-1;if(!c||s&&p&&!f&&t.areaElement===o.inputEvent.target)return!1;var d=$e([],Ke(e),!1);if(f){var h=o.requestAble;d.some((function(t){return t.name===h}))||d.push.apply(d,$e([],Ke(t.props.ables.filter((function(t){return t.name===h}))),!1))}if(!d.length||d.every((function(t){return t.dragRelation})))return!1;var v,g=o.inputEvent;u&&g&&(v=document.elementFromPoint(o.clientX,o.clientY)||g.target);var m=!1,b=function(){var t;m=!0,null===(t=o.stop)||void 0===t||t.call(o)},x=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());x&&t.updateRect(i,!0,!1);var y=o.datas,E=p?"controlGesto":"targetGesto",S=t[E],D=function(e,n,r){if(!(n in e)||S!==t[E])return!1;var i=e.name,a=y[i]||(y[i]={});if(s&&(a.isEventStart=!r||!e[r]||e[r](t,o)),!a.isEventStart)return!1;var u=e[n](t,Ze(Ze({},o),{stop:b,datas:a,originalDatas:y,inputTarget:v}));return t._emitter.off(),s&&!1===u&&(a.isEventStart=!1),u};x&&d.forEach((function(e){e.unset&&e.unset(t)})),D(Wa,"drag".concat(r).concat(i));var C=0,w=0;n.forEach((function(e){if(m)return!1;var n="".concat(e).concat(r).concat(i),a="".concat(e).concat(r,"Condition");""!==i||f||Ao(t.state,o);var u=d.filter((function(t){return t[n]})),l=(u=u.filter((function(t,e){return t.name&&u.indexOf(t)===e}))).filter((function(t){return D(t,n,a)})).length;m&&++C,l&&++w,!m&&s&&u.length&&!l&&(C+=u.filter((function(t){var e=t.name;return!!y[e].isEventStart&&"strong"!==t.dragRelation})).length?1:0)})),l&&!w||D(Ha,"drag".concat(r).concat(i));var M=S!==t[E]||C===n.length;if((u||m||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach((function(t){t.state.gestos={}})),d.forEach((function(e){e.unset&&e.unset(t)}))),s&&!M&&!f&&w&&t.props.preventDefault&&(null===o||void 0===o||o.preventDefault()),t.isUnmounted||M)return!1;(!s&&w&&!a||u)&&(t.props.flushSync||Xi)((function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()}));return s||u||l||!w||a||La(t,e,n,r,i+"After",o),!0}function ja(t,e){return function(n,r){var i;void 0===r&&(r=n.inputEvent.target);var o=r,a=t.areaElement,s=t._dragTarget;return!(!s||!e&&(null===(i=t.controlGesto)||void 0===i?void 0:i.isFlag()))&&(o===s||s.contains(o)||o===a||!t.isMoveableElement(o)&&!t.controlBox.contains(o)||ft(o,"moveable-area")||ft(o,"moveable-padding")||ft(o,"moveable-edgeDraggable"))}}function Va(t,e,n){var r=t.controlBox,i=[],o=t.props,a=o.dragArea,s=t.state.target,u=o.dragTarget;i.push(r),a&&!u||i.push(e),!a&&u&&s&&e!==s&&o.dragTargetSelf&&i.push(s);var l=ja(t);return Za(t,i,"targetAbles",n,{dragStart:l,pinchStart:l})}function Ua(t,e){var n=t.controlBox,r=[];r.push(n);var i=ja(t,!0),o=function(t,e){return void 0===e&&(e=t.inputEvent.target),e===n||!i(t,e)};return Za(t,r,"controlAbles",e,{dragStart:o,pinchStart:o})}function Za(t,e,n,r,i){void 0===i&&(i={});var o="targetAbles"===n,a=t.props,s=a.pinchOutside,u=a.pinchThreshold,l=a.preventClickEventOnDrag,c=a.preventClickDefault,f=a.checkInput,p=a.dragFocusedInput,d=a.preventDefault,h=void 0===d||d,v=a.preventRightClick,g=void 0===v||v,m=a.preventWheelClick,b={preventDefault:h,preventRightClick:g,preventWheelClick:void 0===m||m,container:Wo(a.dragContainer,!0)||xt(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:!!o&&l,preventClickEventOnDragStart:!!o&&c,preventClickEventByCondition:o?null:function(e){return t.controlBox.contains(e.target)},checkInput:!!o&&f,dragFocusedInput:p},x=new Ye(e,b),y="Control"===r;return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(o){x.on("".concat(e).concat(o),(function(a){var s,u=a.eventType,l="drag"===e&&a.isPinch;if(!i[u]||i[u](a)){if(!l){var c="drag"===e?[e]:["drag",e],f=$e([],Ke(t[n]),!1);La(t,f,c,r,o,a)?(t.props.stopPropagation||"Start"===o&&y)&&(null===(s=null===a||void 0===a?void 0:a.inputEvent)||void 0===s||s.stopPropagation()):a.stop()}}else a.stop()}))}))})),x}var Ka=function(){function t(t,e,n){var r=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(t){var e=r.eventName,n=r.moveable;n.state.disableNativeEvent||r.ables.forEach((function(r){r[e](n,{inputEvent:t})}))},t.addEventListener(n.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(t){this.ables=t},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function $a(t,e,n,r){var i;void 0===n&&(n=e);var o=er(t,e),a=o.matrixes,s=o.is3d,u=o.targetMatrix,l=o.transformOrigin,c=o.targetOrigin,f=o.offsetContainer,p=o.hasFixed,d=o.zoom,h=function(t,e){if(ir){var n=K(ir,(function(n){return n[0][0]==t&&n[0][1]==e}));if(n)return n[1]}var r=er(t,e,!0);return ir&&ir.push([[t,e],r]),r}(f,n),v=h.matrixes,g=h.is3d,m=h.offsetContainer,b=h.zoom,x=r||g||s,y=x?4:3,E="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,S=u,D=Ht(y),C=Ht(y),w=Ht(y),M=Ht(y),R=a.length,O=v.map((function(t){return Ze(Ze({},t),{matrix:t.matrix?$e([],Ke(t.matrix),!1):void 0})})).reverse();a.reverse(),!s&&x&&(S=_t(S,3,4),$i(a)),!g&&x&&$i(O),O.forEach((function(t){C=Pt(C,t.matrix,y)}));var _=n||bt(t),T=(null===(i=O[0])||void 0===i?void 0:i.target)||Ui(_,_,!0).offsetParent,P=O.slice(1).reduce((function(t,e){return Pt(t,e.matrix,y)}),Ht(y));a.forEach((function(t,e){if(R-2===e&&(w=D.slice()),R-1===e&&(M=D.slice()),!t.matrix){var n=function(t,e,n,r,i){var o,a=t.target,s=t.origin,u=e.matrix,l=fo(a),c=l.offsetWidth,f=l.offsetHeight,p=n.getBoundingClientRect(),d=[0,0];n===bt(n)&&(d=Ki(a,!0));for(var h=a.getBoundingClientRect(),v=h.left-p.left+n.scrollLeft-(n.clientLeft||0)+d[0],g=h.top-p.top+n.scrollTop-(n.clientTop||0)+d[1],m=h.width,b=h.height,x=Tt(r,i,u),y=oo(x,c,f,r),E=y.left,S=y.top,D=y.width,C=y.height,w=no(x,s,r),M=Gt(w,[E,S]),R=[v+M[0]*m/D,g+M[1]*b/C],O=[0,0],_=0;++_<10;){var T=Mt(i,r);o=Ke(Gt(no(T,R,r),no(T,w,r)),2),O[0]=o[0],O[1]=o[1];var P=oo(Tt(r,i,jt(O,r),u),c,f,r),z=P.left-v,G=P.top-g;if(Qo(z)<2&&Qo(G)<2)break;R[0]-=z,R[1]-=G}return O.map((function(t){return Math.round(t)}))}(t,a[e+1],T,y,Pt(P,D,y));t.matrix=jt(n,y)}D=Pt(D,t.matrix,y)}));var z=!E&&s;S||(S=Ht(z?4:3));var G=Qi(E&&16===S.length?_t(S,4,3):S,z),k=C;return C=wt(C,y,y),{hasZoom:1!==d||1!==b,hasFixed:p,matrixes:a,rootMatrix:C,originalRootMatrix:k,beforeMatrix:w,offsetMatrix:M,allMatrix:D,targetMatrix:S,targetTransform:G,inlineTransform:t.style.transform,transformOrigin:l,targetOrigin:c,is3d:x,offsetContainer:f,offsetRootContainer:m}}function Ja(t,e,n,r){void 0===n&&(n=e);var i=0,o=0,a=0,s={},u=fo(t);if(t&&(i=u.offsetWidth,o=u.offsetHeight),t){var l=$a(t,e,n,r),c=On(l.allMatrix,l.transformOrigin,i,o);s=Ze(Ze({},l),c);var f=On(l.allMatrix,[50,50],100,100);a=po([f.pos1,f.pos2],f.direction)}var p=r?4:3;return Ze(Ze(Ze({hasZoom:!1,width:i,height:o,rotation:a},u),{originalRootMatrix:Ht(p),rootMatrix:Ht(p),beforeMatrix:Ht(p),offsetMatrix:Ht(p),allMatrix:Ht(p),targetMatrix:Ht(p),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}function Qa(t,e,n){return void 0===n&&(n=e),Ja(t,e,n,!0)}function ts(t,e,n,r,i,o){void 0===o&&(o=[]);var a=1,s=[0,0],u={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},f={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},p=[0,0],d={},h=Ja(e,n,i,!0);if(e){var v=ar(e);o.forEach((function(t){d[t]=v(t)}));var g=h.is3d?4:3,m=On(h.offsetMatrix,zt(h.transformOrigin,Rt(h.targetMatrix,g)),h.width,h.height);a=m.direction,s=zt(m.origin,[m.left-h.left,m.top-h.top]),f=go(h.offsetRootContainer);var b=Ui(r,r,!0).offsetParent||h.offsetRootContainer;if(h.hasZoom){var x=On(Pt(h.originalRootMatrix,h.allMatrix),h.transformOrigin,h.width,h.height),y=On(h.originalRootMatrix,ji(ar(b)("transformOrigin")).map((function(t){return parseFloat(t)})),b.offsetWidth,b.offsetHeight);if(u=vo(x,f),c=vo(y,f,b,!0),t){var E=x.left,S=x.top;l=vo({left:E,top:S,bottom:S,right:S},f)}}else{u=go(e),c=function(t){var e=null===rr||void 0===rr?void 0:rr.get(t);if(e)return e;var n=go(t,!0);return rr&&rr.set(t,n),n}(b),t&&(l=go(t));var D=c.left,C=c.top,w=c.clientLeft,M=c.clientTop,R=[u.left-D,u.top-C];p=Gt(Io(h.rootMatrix,R,4),[w+h.left,M+h.top])}}return Ze({targetClientRect:u,containerClientRect:c,moveableClientRect:l,rootContainerClientRect:f,beforeDirection:a,beforeOrigin:s,originalBeforeOrigin:s,target:e,style:d,offsetDelta:p},h)}function es(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var o=Ee([e,n,r,i]),a=[o.minX,o.minY],s=Gt(t.origin,a);return e=Gt(e,a),n=Gt(n,a),r=Gt(r,a),i=Gt(i,a),Ze(Ze({},t),{left:t.left,top:t.top,posDelta:a,pos1:e,pos2:n,pos3:r,pos4:i,origin:s,beforeOrigin:s,isPersisted:!0})}var ns=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=Ze({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},ts(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new ce,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;t?t.checkUpdateRect():(J(e._observerId),e._observerId=$((function(){e.isDragging()||e.updateRect()})))}},e._onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e}return Ue(e,t),e.prototype.render=function(){var t=this.props,e=this.getState(),n=t.parentPosition,r=t.className,i=t.target,o=t.zoom,a=t.cspNonce,s=t.translateZ,u=t.cssStyled,l=t.groupable,c=t.linePadding,f=t.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=Ke(n||[0,0],2),d=p[0],h=p[1],v=e.left,g=e.top,m=e.target,b=e.direction,x=e.hasFixed,y=e.offsetDelta,E=t.targets,D=this.isDragging(),C={};this.getEnabledAbles().forEach((function(t){C["data-able-".concat(t.name.toLowerCase())]=!0}));var w=this._getAbleClassName(),M=E&&E.length&&(m||l)||i||!this._hasFirstTarget&&this.state.isPersisted,R=this.controlBox||this.props.firstRenderState||this.props.persistData,O=[v-d,g-h];!l&&t.useAccuratePosition&&(O[0]+=y[0],O[1]+=y[1]);var _={position:x?"fixed":"absolute",display:M?"block":"none",visibility:R?"visible":"hidden",transform:"translate3d(".concat(O[0],"px, ").concat(O[1],"px, ").concat(s,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return c&&(_["--moveable-line-padding"]=c),f&&(_["--moveable-control-padding"]=f),_e.createElement(u,Ze({cspNonce:a,ref:S(this,"controlBox"),className:"".concat(qi("control-box",-1===b?"reverse":"",D?"dragging":"")," ").concat(w," ").concat(r)},C,{onClick:this._onPreventClick,style:_}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var t=this.props,e=t.parentMoveable,n=t.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),n||e||this.state.isPersisted||(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(t)},e.prototype.componentWillUnmount=function(){var t,e;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),null===(t=this._reiszeObserver)||void 0===t||t.disconnect(),null===(e=this._mutationObserver)||void 0===e||e.disconnect(),this._viewContainer&&this._changeAbleViewClassNames([]),So(this,!1),So(this,!0);var n=this.events;for(var r in n){var i=n[r];i&&i.destroy()}},e.prototype.getTargets=function(){var t=this.props.target;return t?[t]:[]},e.prototype.getAble=function(t){return K(this.props.ables||[],(function(e){return e.name===t}))},e.prototype.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(t){var e;return t&&((null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"class"))||"").indexOf(dn)>-1},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var n=this.targetGesto,r=this.controlGesto;return n&&ja(this)({inputEvent:t},e)?n.isFlag()||n.triggerDragStart(t):r&&this.isMoveableElement(e)&&(r.isFlag()||r.triggerDragStart(t)),this},e.prototype.hitTest=function(t){var e,n=this.state,r=n.target,i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=n.targetClientRect;if(!r)return 0;if(Et(t)){var l=t.getBoundingClientRect();e={left:l.left,top:l.top,width:l.width,height:l.height}}else e=Ze({width:0,height:0},t);var c=e.left,f=e.top,p=e.width,d=e.height,h=ye([i,o,s,a],u),v=Oe(h,[[c,f],[c+p,f],[c+p,f+d],[c,f+d]]),g=xe(h);return v&&g?Math.min(100,v/g*100):0},e.prototype.isInside=function(t,e){var n=this.state,r=n.target,i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=n.targetClientRect;return!!r&&Se([t,e],ye([i,o,s,a],u))},e.prototype.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props,i=!r.parentPosition&&!r.wrapperMoveable;i&&or(!0);var o=r.parentMoveable,a=this.state.target||r.target,s=this.getContainer(),u=o?o._rootContainer:this._rootContainer,l=ts(this.controlBox,a,s,s,u||s,this._getRequestStyles());if(!a&&this._hasFirstTarget&&r.persistData){var c=es(r.persistData);for(var f in c)l[f]=c[f]}i&&or(),this.updateState(l,!o&&n)},e.prototype.isDragging=function(t){var e,n,r=this.targetGesto,i=this.controlGesto;return(null===r||void 0===r?void 0:r.isFlag())?!t||!!(null===(e=r.getEventData()[t])||void 0===e?void 0:e.isEventStart):!!(null===i||void 0===i?void 0:i.isFlag())&&(!t||!!(null===(n=i.getEventData()[t])||void 0===n?void 0:n.isEventStart))},e.prototype.updateTarget=function(t){this.updateRect(t,!0)},e.prototype.getRect=function(){var t=this.state,e=yo(this.state),n=Ke(e,4),r=n[0],i=n[1],o=n[2],a=n[3],s=io(e),u=t.width,l=t.height,c=s.width,f=s.height,p=s.left,d=s.top,h=[t.left,t.top],v=zt(h,t.origin);return{width:c,height:f,left:p,top:d,pos1:r,pos2:i,pos3:o,pos4:a,offsetWidth:u,offsetHeight:l,beforeOrigin:zt(h,t.beforeOrigin),origin:v,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(t){var e;t&&"target"!==t||(!1===(null===(e=this.targetGesto)||void 0===e?void 0:e.isIdle())&&Eo(this,!1),null===e||void 0===e||e.stop());t&&"control"!==t||(!1===(null===(e=this.controlGesto)||void 0===e?void 0:e.isIdle())&&Eo(this,!0),null===e||void 0===e||e.stop())},e.prototype.getRotation=function(){var t=this.state;return function(t,e,n){var r=ot(t,e)/Math.PI*180;return(r=n>=0?r:180-r)>=0?r:360+r}(t.pos1,t.pos2,t.direction)},e.prototype.request=function(t,e,n){void 0===e&&(e={});var r=this,i=r.props,o=i.parentMoveable||i.wrapperMoveable||r,a=o.props.ables,s=i.groupable,u=K(a,(function(e){return e.name===t}));if(this.isDragging()||!u||!u.request)return{request:function(){return this},requestEnd:function(){return this}};var l=u.request(r),c=n||e.isInstant,f=l.isControl?"controlAbles":"targetAbles",p="".concat(s?"Group":"").concat(l.isControl?"Control":""),d=$e([],Ke(o[f]),!1),h={request:function(e){return La(r,d,["drag"],p,"",Ze(Ze({},l.request(e)),{requestAble:t,isRequest:!0}),c),h},requestEnd:function(){return La(r,d,["drag"],p,"End",Ze(Ze({},l.requestEnd()),{requestAble:t,isRequest:!0}),c),h}};return La(r,d,["drag"],p,"Start",Ze(Ze({},l.requestStart(e)),{requestAble:t,isRequest:!0}),c),c?h.request(e).requestEnd():h},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var t=this.getState(),e=this.props,n=e.padding,r=t.originalBeforeOrigin,i=t.transformOrigin,o=t.allMatrix,a=t.is3d,s=t.pos1,u=t.pos2,l=t.pos3,c=t.pos4,f=t.left,p=t.top,d=t.isPersisted,h=e.zoom||1;if(!n&&h<=1)return t.renderPoses=[s,u,l,c],void(t.renderLines=[[s,u],[u,c],[c,l],[l,s]]);var v=ea(n||{}),g=v.left,m=v.top,b=v.bottom,x=v.right,y=a?4:3,E=Tt(y,jt((d?i:this.controlBox&&e.groupable?r:zt(r,[f,p])).map((function(t){return-t})),y),o,jt(i,y)),S=Fo(E,s,[-g,-m],y),D=Fo(E,u,[x,-m],y),C=Fo(E,l,[-g,b],y),w=Fo(E,c,[x,b],y);if(t.renderPoses=[S,D,C,w],t.renderLines=[[S,D],[D,w],[w,C],[C,S]],h){var M=h/2;t.renderLines=[[Fo(E,s,[-g-M,-m],y),Fo(E,u,[x+M,-m],y)],[Fo(E,u,[x,-m-M],y),Fo(E,c,[x,b+M],y)],[Fo(E,c,[x+M,b],y),Fo(E,l,[-g-M,b],y)],[Fo(E,l,[-g,b+M],y),Fo(E,s,[-g,-m-M],y)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,e=t.target,n=t.container,r=t.parentMoveable,i=this.state,o=i.target,a=i.container;if(o||e){this.updateAbles();var s=!Po(o,e);if(s||!Po(a,n)){var u=n||this.controlBox;u&&this.unsetAbles(),this.updateState({target:e,container:n}),!r&&u&&this.updateRect("End",!1,!1),this._isPropTargetChanged=s}}},e.prototype.waitToChangeTarget=function(){return new Promise((function(){}))},e.prototype.triggerEvent=function(t,e){var n=this.props;if(this._emitter.trigger(t,e),n.parentMoveable&&e.isRequest&&!e.isRequestChild)return n.parentMoveable.triggerEvent(t,e,!0);var r=n[t];return r&&r(e)},e.prototype.useCSS=function(t,e){var n=this.props.customStyledMap,r=t+e;return n[r]||(n[r]=je(t,e)),n[r]},e.prototype.getState=function(){var t,e=this.props;(e.target||(null===(t=e.targets)||void 0===t?void 0:t.length))&&(this._hasFirstTarget=!0);var n=this.controlBox,r=e.persistData,i=e.firstRenderState;if(i&&!n)return i;if(!this._hasFirstTarget&&r){var o=es(r);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var t=this;this.targetAbles.forEach((function(e){e.unset&&e.unset(t)}))},e.prototype.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props.triggerAblesSimultaneously,r=this.getEnabledAbles(t),i="drag".concat(e,"Start"),o="pinch".concat(e,"Start"),a="drag".concat(e,"ControlStart"),s=To(r,[i,o],n),u=To(r,[a],n);this.enabledAbles=r,this.targetAbles=s,this.controlAbles=u},e.prototype.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var n=this.state;for(var r in t)n[r]=t[r]}},e.prototype.getEnabledAbles=function(t){void 0===t&&(t=this.props.ables);var e=this.props;return t.filter((function(t){return t&&(t.always&&!1!==e[t.name]||e[t.name])}))},e.prototype.renderAbles=function(){var t=this,e=this.props.triggerAblesSimultaneously,n={createElement:_e.createElement};return this.renderState={},function(t,e){var n=[],r={};return t.forEach((function(i,o){var a=e(i,o,t),s=r[a];s||(s=[],r[a]=s,n.push(s)),s.push(i)})),n}(ko(To(this.getEnabledAbles(),["render"],e).map((function(e){return(0,e.render)(t,n)||[]}))).filter((function(t){return t})),(function(t){return t.key})).map((function(t){return t[0]}))},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){return this.getEnabledAbles().reduce((function(t,e){var n,r,i=null!==(r=null===(n=e.requestStyle)||void 0===n?void 0:n.call(e))&&void 0!==r?r:[];return $e($e([],Ke(t),!1),Ke(i),!1)}),$e([],Ke(this.props.requestStyles||[]),!1))},e.prototype._updateObserver=function(t){this._updateResizeObserver(t),this._updateMutationObserver(t)},e.prototype._updateEvents=function(){var t=this.targetAbles.length,e=this.controlAbles.length,n=this._dragTarget;(!t&&this.targetGesto||this._isTargetChanged(!0))&&(So(this,!1),this.updateState({gestos:{}})),e||So(this,!0),n&&t&&!this.targetGesto&&(this.targetGesto=Va(this,n,"")),!this.controlGesto&&e&&(this.controlGesto=Ua(this,"Control"))},e.prototype._updateTargets=function(){var t=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=t.dragArea,this._propTarget=t.target,this._originalDragTarget=t.dragTarget||t.target,this._dragTarget=Wo(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var t=this.props,e=t.zoom,n=t.hideDefaultLines,r=t.hideChildMoveableDefaultLines,i=t.parentMoveable;if(n||i&&r)return[];var o=this.getState(),a={createElement:_e.createElement};return o.renderLines.map((function(t,n){return dr(a,"",t[0],t[1],e,"render-line-".concat(n))}))},e.prototype._isTargetChanged=function(t){var e=this.props,n=e.dragTarget||e.target,r=this._prevOriginalDragTarget,i=this._prevDragArea,o=e.dragArea;return!o&&r!==n||(t||o)&&i!==o||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,n=this.events,r=Q(n);if(this._isTargetChanged())for(var i in n){var o=n[i];o&&o.destroy(),n[i]=null}if(e){var a=this.enabledAbles;r.forEach((function(r){var i=To(a,[r]),o=i.length>0,s=n[r];o?(s||(s=new Ka(e,t,r),n[r]=s),s.setAbles(i)):s&&(s.destroy(),n[r]=null)}))}},e.prototype._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=Wo(t,!0))},e.prototype._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=Wo(t,!0)),this._viewContainer&&this._changeAbleViewClassNames($e($e([],Ke(this._getAbleViewClassNames()),!1),[this.isDragging()?fa:""],!1))},e.prototype._changeAbleViewClassNames=function(t){var e=this._viewContainer,n=Go(t.filter(Boolean),(function(t){return t})).map((function(t){return Ke(t,1)[0]})),r=this._viewClassNames,i=re(r,n),o=i.removed,a=i.added;o.forEach((function(t){dt(e,r[t])})),a.forEach((function(t){pt(e,n[t])})),this._viewClassNames=n},e.prototype._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map((function(e){var n;return(null===(n=e.viewClassName)||void 0===n?void 0:n.call(e,t))||""})).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(t){var e=this;void 0===t&&(t="");var n=this.getEnabledAbles(),r=this.targetGesto,i=this.controlGesto,o=(null===r||void 0===r?void 0:r.isFlag())?r.getEventData():{},a=(null===i||void 0===i?void 0:i.isFlag())?i.getEventData():{};return n.map((function(n){var r,i,s,u=n.name,l=(null===(r=n.className)||void 0===r?void 0:r.call(n,e))||"";return((null===(i=o[u])||void 0===i?void 0:i.isEventStart)||(null===(s=a[u])||void 0===s?void 0:s.isEventStart))&&(l+=" ".concat(qi("".concat(u).concat(t,"-dragging")))),l.trim()})).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(t){var e,n=this.props,r=n.target,i=xt(this.getControlBoxElement());if(i.ResizeObserver&&r&&n.useResizeObserver){if(t.target!==r||!this._reiszeObserver){var o=new i.ResizeObserver(this.checkUpdateRect);o.observe(r,{box:"border-box"}),this._reiszeObserver=o}}else null===(e=this._reiszeObserver)||void 0===e||e.disconnect()},e.prototype._updateMutationObserver=function(t){var e,n=this,r=this.props,i=r.target,o=xt(this.getControlBoxElement());if(o.MutationObserver&&i&&r.useMutationObserver){if(t.target!==i||!this._mutationObserver){var a=new o.MutationObserver((function(t){var e,r;try{for(var i=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),o=i.next();!o.done;o=i.next()){var a=o.value;"attributes"===a.type&&"style"===a.attributeName&&n.checkUpdateRect()}}catch(s){e={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}));a.observe(i,{attributes:!0}),this._mutationObserver=a}}else null===(e=this._mutationObserver)||void 0===e||e.disconnect()},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Xi,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(_e.PureComponent),rs={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],o=t.getState(),a=o.left,s=o.top,u=o.isPersisted,l=r.zoom||1,c=t.renderGroupRects,f=(null===(n=r.persistData)||void 0===n?void 0:n.children)||[];u?i=f.map((function(){return null})):f=[];var p=$o(t,"parentPosition",[a,s],(function(t){return t.join(",")})),d=$o(t,"requestStyles",t.getRequestChildStyles(),(function(t){return t.join(",")}));return t.moveables=t.moveables.slice(0,i.length),$e($e([],Ke(i.map((function(n,i){return e.createElement(ns,{key:"moveable"+i,ref:D(t,"moveables",i),target:n,origin:!1,requestStyles:d,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[a,s],persistData:f[i],zoom:l})}))),!1),Ke(ko(c.map((function(t,n){var r=[t.pos1,t.pos2,t.pos3,t.pos4];return[[0,1],[1,3],[3,2],[2,0]].map((function(t,i){var o=Ke(t,2),a=o[0],s=o[1];return dr(e,"",Gt(r[a],p),Gt(r[s],p),l,"group-rect-".concat(n,"-").concat(i))}))})))),!1)}},is=Je("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.contains(i);if(r&&i&&!e.isDrag&&!t.isMoveableElement(i)&&!o){var a=n.contains(i);Oo(t,"onClick",wo(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(n&&r&&!e.isDrag&&!t.isMoveableElement(r)&&e.datas.inputTarget!==r){var i=t.props.targets,o=i.indexOf(r),a=o>-1,s=!1;-1===o&&(s=(o=Z(i,(function(t){return t.contains(r)})))>-1),Oo(t,"onClickGroup",wo(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:o,isTarget:a,containsTarget:s,moveableTarget:i[o]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function os(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),Ze(Ze({},t),{datas:e})}var as=Je("edgeDraggable",{css:[".edge.edgeDraggable.line {\ncursor: move;\n}"],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?hr(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=null===(n=e.inputEvent)||void 0===n?void 0:n.target;return!(!r.edgeDraggable||!i)&&(!r.draggable&&ft(i,qi("direction"))&&ft(i,qi("edge"))&&ft(i,qi("edgeDraggable")))},dragStart:function(t,e){return si.dragStart(t,os(e))},drag:function(t,e){return si.drag(t,os(e))},dragEnd:function(t,e){return si.dragEnd(t,os(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=null===(n=e.inputEvent)||void 0===n?void 0:n.target;return!(!r.edgeDraggable||!i)&&(!r.draggable&&ft(i,qi("direction"))&&ft(i,qi("line")))},dragGroupStart:function(t,e){return si.dragGroupStart(t,os(e))},dragGroup:function(t,e){return si.dragGroup(t,os(e))},dragGroupEnd:function(t,e){return si.dragGroupEnd(t,os(e))},unset:function(t){return si.unset(t)}}),ss={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},us=[Wa,ba,Yi,na,si,as,fi,ia,sa,bi,ma,xa,va,Fa,Aa,Xa,rs,ss,is,ha,Ha],ls=us.reduce((function(t,e){return(e.events||[]).forEach((function(e){ct(t,e)})),t}),[]),cs=us.reduce((function(t,e){return(e.props||[]).forEach((function(e){ct(t,e)})),t}),[]);function fs(t,e){var n=Ke(t,3),r=n[0],i=n[1],o=n[2];return(r*e[0]+i*e[1]+o)/Math.sqrt(r*r+i*i)}function ps(t,e){var n=Ke(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function ds(t,e){return Math.max.apply(Math,$e([],Ke(t.map((function(t){var n=Ke(t,4),r=n[0],i=n[1],o=n[2],a=n[3];return Math.max(r[e],i[e],o[e],a[e])}))),!1))}function hs(t,e){return Math.min.apply(Math,$e([],Ke(t.map((function(t){var n=Ke(t,4),r=n[0],i=n[1],o=n[2],a=n[3];return Math.min(r[e],i[e],o[e],a[e])}))),!1))}function vs(t,e){var n=e.map((function(e){if(A(e)){var n=vs(t,e),r=n.length;return r>1?n:1===r?n[0]:null}var i=K(t,(function(t){return t.manager.props.target===e}));return i?(i.finded=!0,i.manager):null})).filter(Boolean);return 1===n.length&&A(n[0])?n[0]:n}var gs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new ue,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return Ue(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,n){var r;void 0===n&&(n=!0);var i=this.state;if(this.controlBox&&!i.isPersisted){or(!0),this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var o=this.props,a=this.moveables,s=i.target||o.target,u=a.map((function(t){return{finded:!1,manager:t}})),l=this.props.targetGroups||[],c=vs(u,l),f=o.useDefaultGroupRotate;c.push.apply(c,$e([],Ke(u.filter((function(t){return!t.finded})).map((function(t){return t.manager}))),!1));var p=[],d=!e||""!==t&&o.updateGroup,h=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var v=null===(r=o.persistData)||void 0===r?void 0:r.rotation;null!=v&&(h=v)}var g=function t(e,n,r){var i=e.map((function(e){if(A(e)){var r=t(e,n),i=[r.pos1,r.pos2,r.pos3,r.pos4];return p.push(r),{poses:i,rotation:r.rotation}}return{poses:yo(e.state),rotation:e.getRotation()}})),o=i.map((function(t){return t.rotation})),a=0,s=o[0],u=o.every((function(t){return Math.abs(s-t)<.1}));a=d?!f&&u?s:h:f||r||!u?n:s;var l=i.map((function(t){return t.poses})),c=function(t,e){var n,r,i,o=[0,0],a=[0,0],s=[0,0],u=[0,0],l=0,c=0;if(!t.length)return{pos1:o,pos2:a,pos3:s,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:l,height:c,rotation:e};var f=ut(e,bn);if(f%90){var p=f/180*Math.PI,d=Math.tan(p),h=-1/d,v=[yn,En],g=[[0,0],[0,0]],m=[yn,En],b=[[0,0],[0,0]];t.forEach((function(t){t.forEach((function(t){var e=fs([-d,1,0],t),n=fs([-h,1,0],t);v[0]>e&&(g[0]=t,v[0]=e),v[1]<e&&(g[1]=t,v[1]=e),m[0]>n&&(b[0]=t,m[0]=n),m[1]<n&&(b[1]=t,m[1]=n)}))}));var x=Ke(g,2),y=x[0],E=x[1],S=Ke(b,2),D=S[0],C=S[1],w=[-d,1,ps([-d,1],y)],M=[-d,1,ps([-d,1],E)],R=[-h,1,ps([-h,1],D)],O=[-h,1,ps([-h,1],C)];n=Ke([[w,R],[w,O],[M,R],[M,O]].map((function(t){var e=Ke(t,2);return Ce(e[0],e[1])[0]})),4),o=n[0],a=n[1],s=n[2],u=n[3],l=m[1]-m[0],c=v[1]-v[0]}else{var _=hs(t,0),T=hs(t,1),P=ds(t,0),z=ds(t,1);o=[_,T],a=[P,T],s=[_,z],u=[P,z],l=P-_,c=z-T,f%180&&(o=(r=Ke([s,o,u,a],4))[0],a=r[1],s=r[2],u=r[3],l=z-T,c=P-_)}f%360>180&&(o=(i=Ke([u,s,a,o],4))[0],a=i[1],s=i[2],u=i[3]);var G=Ee([o,a,s,u]);return{pos1:o,pos2:a,pos3:s,pos4:u,width:l,height:c,minX:G.minX,minY:G.minY,maxX:G.maxX,maxY:G.maxY,rotation:e}}(l,a);return c}(c,this.rotation,!0);d&&(this.rotation=g.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=l,this.renderGroupRects=p;var m=this.transformOrigin,b=this.rotation,x=this.scale,y=g.width,E=g.height,S=g.minX,D=g.minY,C=function(t,e,n){var r=t.map((function(t){return Gt(t,e)})),i=r.map((function(t){return Yt(t,n)}));return{prev:r,next:i,result:i.map((function(t){return zt(t,e)}))}}([[0,0],[y,0],[0,E],[y,E]],Zo(m,y,E),this.rotation/180*Math.PI),w=Ee(C.result),M=w.minX,R=w.minY,O=" rotate(".concat(b,"deg)")+" scale(".concat(Jo(x[0]),", ").concat(Jo(x[1]),")"),_="translate(".concat(-M,"px, ").concat(-R,"px)").concat(O);this.controlBox.style.transform="translate3d(".concat(S,"px, ").concat(D,"px, ").concat(this.props.translateZ||0,")"),s.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(m,";")+"width:".concat(y,"px;height:").concat(E,"px;")+"transform: ".concat(_),i.width=y,i.height=E;var T=this.getContainer(),P=ts(this.controlBox,s,this.controlBox,this.getContainer(),this._rootContainer||T,[]),z=[P.left,P.top],G=Ke(yo(P),4),k=G[0],B=G[1],I=G[2],F=G[3],N=Ee([k,B,I,F]),Y=[N.minX,N.minY],q=Jo(x[0]*x[1]);P.pos1=Gt(k,Y),P.pos2=Gt(B,Y),P.pos3=Gt(I,Y),P.pos4=Gt(F,Y),P.left=S-P.left+Y[0],P.top=D-P.top+Y[1],P.origin=Gt(zt(z,P.origin),Y),P.beforeOrigin=Gt(zt(z,P.beforeOrigin),Y),P.originalBeforeOrigin=zt(z,P.originalBeforeOrigin),P.transformOrigin=Gt(zt(z,P.transformOrigin),Y),s.style.transform="translate(".concat(-M-Y[0],"px, ").concat(-R-Y[1],"px)")+O,or(),this.updateState(Ze(Ze({},P),{posDelta:Y,direction:q,beforeDirection:q}),n)}},e.prototype.getRect=function(){return Ze(Ze({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},e.prototype.triggerEvent=function(e,n,r){if(r||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},e.prototype.getRequestChildStyles=function(){return this.getEnabledAbles().reduce((function(t,e){var n,r,i=null!==(r=null===(n=e.requestChildStyle)||void 0===n?void 0:n.call(e))&&void 0!==r?r:[];return $e($e([],Ke(t),!1),Ke(i),!1)}),[])},e.prototype.getMoveables=function(){return $e([],Ke(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,$e($e([],Ke(this.props.ables),!1),[rs],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Wo(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var t=this.state,e=this.props,n=this._prevDragTarget,r=e.dragTarget||this.areaElement,i=e.targets,o=this.differ.update(i),a=o.added,s=o.changed,u=o.removed,l=a.length||u.length;(l||this._prevOriginalDragTarget!==this._originalDragTarget)&&(So(this,!1),So(this,!0),this.updateState({gestos:{}})),n!==r&&(t.target=null),t.target||(t.target=this.areaElement,this.controlBox.style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=Va(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Ua(this,"GroupControl")));var c=!Po(t.container,e.container);c&&(t.container=e.container),(c||l||this.transformOrigin!==(e.defaultGroupOrigin||"50% 50%")||s.length||i.length&&!Ko(this._targetGroups,e.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!l},e.prototype._updateObserver=function(){},e.defaultProps=Ze(Ze({},ns.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(ns),ms=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}return Ue(e,t),e.prototype.render=function(){var t,e=this,n=this.props,r=n.cspNonce,i=n.cssStyled,o=n.persistData,a=n.targets||[],s=a.length,u=this.isUnmounted||!s,l=null!==(t=null===o||void 0===o?void 0:o.children)&&void 0!==t?t:[];return u&&!s&&l.length?a=l.map((function(){return null})):u||(l=[]),_e.createElement(i,{cspNonce:r,ref:S(this,"controlBox"),className:qi("control-box")},a.map((function(t,r){var i,o,a=null!==(o=null===(i=n.individualGroupableProps)||void 0===i?void 0:i.call(n,t,r))&&void 0!==o?o:{};return _e.createElement(ns,Ze({key:"moveable"+r,ref:D(e,"moveables",r)},n,a,{target:t,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:l[r]}))})))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,n){void 0===n&&(n=!0),or(!0),this.moveables.forEach((function(r){r.updateRect(t,e,n)})),or()},e.prototype.getRect=function(){return Ze(Ze({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},e.prototype.request=function(t,e,n){void 0===e&&(e={});var r=this.moveables.map((function(n){return n.request(t,Ze(Ze({},e),{isInstant:!1}),!1)})),i={request:function(t){return r.forEach((function(e){return e.request(t)})),this},requestEnd:function(){return r.forEach((function(t){return t.requestEnd()})),this}};return n||e.isInstant?i.request(e).requestEnd():i},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var n=e,r=K(this.moveables,(function(t){var e=t.getTargets()[0],r=t.getControlBoxElement(),i=t.getDragElement();return!(!e||!i)&&(i===n||i.contains(n)||i!==e&&e===n||e.contains(n)||r===n||r.contains(n))}));return r&&r.dragStart(t,e),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return $e([],Ke(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(ns);function bs(t,e){var n=[];return t.forEach((function(t){t&&(F(t)?e[t]&&n.push.apply(n,$e([],Ke(e[t]),!1)):A(t)?n.push.apply(n,$e([],Ke(bs(t,e)),!1)):n.push(t))})),n}function xs(t,e){var n=[];return t.forEach((function(t){t&&(F(t)?e[t]&&n.push.apply(n,$e([],Ke(e[t]),!1)):A(t)?n.push(xs(t,e)):n.push(t))})),n}function ys(t,e){return t.length!==e.length||t.some((function(t,n){var r=e[n];return!(!t&&!r)&&(t!=r&&(!A(t)||!A(r)||ys(t,r)))}))}var Es=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new ue,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}var n,r;return Ue(e,t),e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var n=e.css;n&&n.forEach((function(e){t[e]=!0}))}));var e=Q(t).join("\n");this.defaultStyled=je("div",function(t,e){return e.replace(/([^}{]*){/gm,(function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}(dn,vn+e))},e.getTotalAbles=function(){return $e([ba,rs,ss,ha],Ke(this.defaultAbles),!1)},e.prototype.render=function(){var t,e=this.constructor;e.defaultStyled||e.makeStyled();var n=this.props,r=n.ables,i=n.props,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["ables","props"]),a=Ke(this._updateRefs(!0),2),s=a[0],u=a[1],l=bs(s,u),c=l.length>1,f=$e($e([],Ke(e.getTotalAbles()),!1),Ke(r||[]),!1),p=Ze(Ze(Ze({},o),i||{}),{ables:f,cssStyled:e.defaultStyled,customStyledMap:e.customStyledMap});this._elementTargets=l;var d=null,h=this.moveable,v=o.persistData;if((null===v||void 0===v?void 0:v.children)&&(c=!0),o.individualGroupable)return _e.createElement(ms,Ze({key:"individual-group",ref:S(this,"moveable")},p,{target:null,targets:l}));if(c){var g=xs(s,u);if(h&&!h.props.groupable&&!h.props.individualGroupable){var m=h.props.target;m&&l.indexOf(m)>-1&&(d=Ze({},h.state))}return _e.createElement(gs,Ze({key:"group",ref:S(this,"moveable")},p,null!==(t=o.groupableProps)&&void 0!==t?t:{},{target:null,targets:l,targetGroups:g,firstRenderState:d}))}var b=l[0];if(h&&(h.props.groupable||h.props.individualGroupable)){var x=K(h.moveables||[],(function(t){return t.props.target===b}));x&&(d=Ze({},x.state))}return _e.createElement(ns,Ze({key:"single",ref:S(this,"moveable")},p,{target:b,firstRenderState:d}))},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var t,e;return null!==(e=null===(t=this.moveable)||void 0===t?void 0:t.getTargets())&&void 0!==e?e:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var t,e=this;return this._onChangeTargets=function(){e._onChangeTargets=null,t()},new Promise((function(e){t=e}))},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(t){var e=this.refTargets,n=Ho(this.props.target||this.props.targets),r="undefined"!==typeof document,i=ys(e,n),o=this.selectorMap,a={};return this.refTargets.forEach((function t(e){F(e)?o[e]?a[e]=o[e]:r&&(i=!0,a[e]=[].slice.call(document.querySelectorAll(e))):A(e)&&e.forEach(t)})),this._tmpRefTargets=n,this._tmpSelectorMap=a,[n,a,!t&&i]},e.prototype._checkChangeTargets=function(){var t,e,n;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var r=this._differ.update(this._elementTargets),i=r.added,o=r.removed;(i.length||o.length)&&(null===(e=(t=this.props).onChangeTargets)||void 0===e||e.call(t,{moveable:this.moveable,targets:this._elementTargets}),null===(n=this._onChangeTargets)||void 0===n||n.call(this));var a=Ke(this._updateRefs(),3),s=a[0],u=a[1],l=a[2];this.refTargets=s,this.selectorMap=u,l&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);o>3&&a&&Object.defineProperty(e,n,a)}([(n=wn,void 0===r&&(r={}),function(t,e){n.forEach((function(n){var i=r[n]||n;i in t||(t[i]=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=(t=this[e])[n].apply(t,r);return o===this[e]?this:o})}))})],e.prototype,"moveable",void 0),e}(_e.PureComponent),Ss=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ue(e,t),e.defaultAbles=us,e}(Es);function Ds(t){var e;return e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ue(e,t),e}(Es),e.defaultAbles=t,e}}}]);