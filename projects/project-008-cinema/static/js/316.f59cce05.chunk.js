"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[316],{97592:(e,t,r)=>{r.d(t,{Q:()=>i});var n=r(11758),a=r(27623),o=r(36373),s=r(41397);const i=(0,o.h)()((0,n.Zr)((e=>({envState:null,isLandscape:null,guiFrameWidth:null,guiFrameHeight:null,dynamicBg:null,cacheQueue:[],projectBuildSelectedEnv:void 0,setEnvState:t=>{e((()=>({envState:t})))},updateEnvStore:t=>{e((e=>({...e,...t})))},addToCacheQueue:t=>{e((e=>{const{imgId:r,externalUrl:n}=t,a=[...e.cacheQueue];return r&&!e.cacheQueue.some((e=>e.imgId===r))||n&&!e.cacheQueue.some((e=>e.externalUrl===n))?{cacheQueue:[...a,t]}:e}))}})),{name:"envStore",partialize:e=>({projectBuildSelectedEnv:e.projectBuildSelectedEnv}),storage:{getItem:a.Gq,setItem:a.SO,removeItem:a.Ai}}),s.isEqual)},27623:(e,t,r)=>{r.d(t,{Ai:()=>s,Gq:()=>a,SO:()=>o});var n=r(49211);function a(e){let t=n.A.get(e);if(t)try{t=JSON.parse(t)}catch(r){console.error(r)}return t}function o(e,t){try{n.A.set(e,JSON.stringify(t))}catch(r){console.error(r)}}function s(e){return n.A.remove(e)}},71069:(e,t,r)=>{r.d(t,{F:()=>a});var n=r(48362);const a=(0,r(19458).vt)((e=>({projectsList:null,resetProjectsList:()=>e({projectsList:[]}),fillProjectsList:async()=>{const t=await(0,n.C8)();e({projectsList:t||[]})}})))},15224:(e,t,r)=>{r.d(t,{k:()=>i});var n=r(19458),a=r(49211),o=r(11758),s=r(27623);const i=(0,n.vt)()((0,o.Zr)((e=>({jwt:void 0,user:null,setUserStore:t=>e((()=>({...t}))),resetUserStore:()=>(a.A.remove("token"),e((()=>({jwt:void 0,user:null}))))})),{name:"userStore",storage:{getItem:s.Gq,setItem:s.SO,removeItem:s.Ai}}))},64983:(e,t,r)=>{r.d(t,{f:()=>m});var n=r(48362),a=r(74744),o=r.n(a),s=r(37948),i=r(79721),l=r(44719),c=r(18288),d=r(36373),u=r(41397);let p,h=null;const m=(0,d.h)()((e=>({workingProject:null,pagesHashes:[],pastPatches:[],futurePatches:[],savedProjectHash:"",currentProjectHash:"",tabs:[],fetchAndFill:async t=>{const r=await(0,n.EV)(t);if(!r)return void l.A.error({title:"Error",content:"Cannot fetch project data",onOk:()=>{window.location.reload()},okText:"Reload Window",maskClosable:!0});const a=(0,c.A)(r);let o=[];const s=r.attributes.pages.data;null!==s&&void 0!==s&&s.length&&s.forEach((e=>{const t=(0,c.A)(e);o.push({pageId:e.id,savedHash:t,currentHash:t})})),e((()=>({workingProject:r,currentProjectHash:a,savedProjectHash:a,pagesHashes:o,pastPatches:[],futurePatches:[]})))},fillWorkingProject:t=>{e({workingProject:t})},updateProjectWithHistory:async function(t){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e((n=>{var a;if(null===(a=n.workingProject)||void 0===a||!a.attributes)throw new Error("No attributes to update");const i=(0,s.jM)(n.workingProject,(e=>{Object.assign(e.attributes,t)}));if(o().diff(n.workingProject,i)){if(r)return((t,r)=>{h&&(clearTimeout(h),h=null),void 0===p&&(p=t),h=setTimeout((()=>{e((e=>{const t=o().diff(p,r);let n=structuredClone(e.pagesHashes);try{var a;const e=null===t||void 0===t||null===(a=t.attributes.pages)||void 0===a?void 0:a.data;if(e){const t=Object.keys(e)[0];if(void 0!==t){const e=r.attributes.pages.data[Number(t)],a=(0,c.A)(e);n=n.map((t=>String(t.pageId)===String(e.id)?{...t,currentHash:a}:t))}}}catch(s){console.log(s)}return{...e,pastPatches:[...e.pastPatches,t],pagesHashes:n}})),h=null,p=void 0}),500)})(n.workingProject,i),{...n,workingProject:i,currentProjectHash:(0,c.A)(i),futurePatches:[]};{const e=n.savedProjectHash!==n.currentProjectHash,t=(0,c.A)(i);return{...n,workingProject:i,currentProjectHash:t,savedProjectHash:e?n.savedProjectHash:t}}}return n}))},setSavedHashes:()=>{e((e=>{let t=structuredClone(e.pagesHashes);return t=t.map((e=>({...e,savedHash:e.currentHash}))),{savedProjectHash:e.currentProjectHash,pagesHashes:t}}))},addPageHash:t=>e((e=>({...e,pagesHashes:[...e.pagesHashes,t]}))),clearHistory:()=>new Promise((t=>{e((e=>({...e,pastPatches:[],futurePatches:[]}))),t()})),resetWorkingProject:()=>new Promise((t=>{e((e=>({...e,workingProject:null,currentProjectHash:"",pastPatches:[],futurePatches:[]}))),t()})),undo:()=>{e((e=>{if(!e.workingProject)throw new Error("No workingProject state");try{const t=e.pastPatches.pop();if(t){const r=o().unpatch(structuredClone(e.workingProject),t);return i.R.emit("undo"),{...e,workingProject:r,currentProjectHash:(0,c.A)(r),futurePatches:[...e.futurePatches,t]}}}catch(t){throw new Error("Error undo")}return e}))},redo:()=>{e((e=>{if(!e.workingProject)throw new Error("No workingProject state");const t=e.futurePatches.pop();try{if(t){const r=o().patch(structuredClone(e.workingProject),t);return i.R.emit("redo"),{...e,workingProject:r,currentProjectHash:(0,c.A)(r),pastPatches:[...e.pastPatches,t]}}}catch(r){throw new Error("Error redo")}return e}))},clearTabs:()=>{e((()=>({tabs:[]})))},removeTab:t=>e((e=>{let r=structuredClone(e.tabs);return r=r.filter((e=>e.pageId!==t)),{...e,tabs:r}})),addNewTab:t=>e((e=>e.tabs.findIndex((e=>e.pageId===t))<0?{...e,tabs:[...e.tabs,{pageId:t}]}:e))})),u.isEqual)},79721:(e,t,r)=>{r.d(t,{R:()=>n});const n=new class{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e){const t=this.listeners[e];t&&t.forEach((e=>e()))}off(e,t){const r=this.listeners[e];r&&(this.listeners[e]=r.filter((e=>e!==t)))}}},89321:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(15224);const a=()=>{const e=n.k.getState().jwt;if(e){return{Authorization:"Bearer "+e}}}},27911:(e,t,r)=>{function n(e){return!!(null!==e&&void 0!==e&&e.startsWith("{")&&null!==e&&void 0!==e&&e.endsWith("}")||null!==e&&void 0!==e&&e.startsWith("$")&&null!==e&&void 0!==e&&e.endsWith("$")||null!==e&&void 0!==e&&e.startsWith("%")&&null!==e&&void 0!==e&&e.endsWith("%"))}function a(e){return new Promise(((t,r)=>{const a=String(e);n(a)||/^-?\d+$/.test(a)?t("Ok"):r(new Error("Only numbers allowed"))}))}function o(e){return new Promise(((t,r)=>{n(e)||Number(e)>=0?t("Ok"):r(new Error("Only positive numbers allowed"))}))}function s(e){return new Promise(((t,r)=>{void 0===e||null===e||""===e?r(new Error("Field can not be empty")):t("Ok")}))}function i(e){return new Promise(((t,r)=>{const n=e.charAt(0);/\d/.test(n)?r(new Error("First character must not be a number")):t("Ok")}))}function l(e){return new Promise(((t,r)=>{/^[a-zA-Z0-9 ]+$/.test(e)?t(!0):r(new Error("Only latin letters and numbers allowed"))}))}function c(e){return new Promise(((t,r)=>{e&&e.includes(" ")?r(new Error("No spaces allowed")):t(e)}))}function d(e){return new Promise(((t,r)=>e.length<8?r(new Error("Password must be at least 8 characters long")):/[A-Z]/.test(e)?/[a-z]/.test(e)?/\d/.test(e)?/[!@#$%^&*()_+[\]{};':",.<>?]/.test(e)?t(e):r(new Error("Password must contain at least one special character")):r(new Error("Password must contain at least one digit")):r(new Error("Password must contain at least one lowercase letter")):r(new Error("Password must contain at least one uppercase letter"))))}function u(e){let{input:t,searchArray:r,searchKey:n}=e;return new Promise(((e,a)=>{let o=[];void 0!==n?(o=Array.isArray(n)?n:[n],null!==r&&void 0!==r&&r.some((e=>{var r,n;return(null===(r=String(function(e,t){let r=t;for(const o of e){var n,a;if(null===(n=r)||void 0===n||!n.hasOwnProperty(o))return;r=null===(a=r)||void 0===a?void 0:a[o]}return r}(o,e)))||void 0===r?void 0:r.toLowerCase())===(null===(n=String(t))||void 0===n?void 0:n.toLowerCase())}))?a(new Error("Field must be unique")):e(t)):null!==r&&void 0!==r&&r.some((e=>{var r,n;return(null===(r=String(e))||void 0===r?void 0:r.toLowerCase())===(null===(n=String(t))||void 0===n?void 0:n.toLowerCase())}))?a(new Error("Field must be unique")):e(t)}))}r.d(t,{Gl:()=>u,Ld:()=>i,WE:()=>o,YY:()=>d,cv:()=>l,fp:()=>c,mC:()=>a,z2:()=>s})},18288:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(54800),a=r.n(n);const o=function(e){try{const t=JSON.stringify(e);return window.getHash(JSON.stringify(t))}catch(t){return a()(e)}}},13753:(e,t,r)=>{r.r(t),r.d(t,{axiosInstance:()=>Z,default:()=>G});var n,a=r(9950),o=r(28429),s=r(42074),i=r(92759),l=r(87827),c=r(77645),d=r(48538),u=r(40895),p=r(30904),h=r(57528),m=r(86006);const g=m.Ay.div(n||(n=(0,h.A)(["\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 1;\n  transform: translate3d(0, 0, 0);\n  will-change: all;\n\n  &::after {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 200vw;\n    height: 200vh;\n\n    background-color: #26004d;\n    background-image: radial-gradient(\n        at 62% 50%,\n        hsla(21, 87%, 69%, 1) 0,\n        hsla(21, 87%, 69%, 0) 50%\n      ),\n      radial-gradient(\n        at 11% 6%,\n        hsla(181, 91%, 55%, 1) 0,\n        hsla(181, 91%, 55%, 0) 50%\n      ),\n      radial-gradient(\n        at 68% 48%,\n        hsla(269, 86%, 70%, 1) 0,\n        hsla(269, 86%, 70%, 0) 50%\n      ),\n      radial-gradient(\n        at 97% 72%,\n        hsla(195, 87%, 51%, 1) 0,\n        hsla(195, 87%, 51%, 0) 50%\n      ),\n      radial-gradient(\n        at 73% 81%,\n        hsla(227, 88%, 53%, 1) 0,\n        hsla(227, 88%, 53%, 0) 50%\n      ),\n      radial-gradient(\n        at 11% 26%,\n        hsla(158, 85%, 57%, 1) 0,\n        hsla(158, 85%, 57%, 0) 50%\n      ),\n      radial-gradient(\n        at 48% 46%,\n        hsla(346, 86%, 67%, 1) 0,\n        hsla(346, 86%, 67%, 0) 50%\n      );\n    background-size: 100% 100%;\n\n    animation: gradient 25s ease infinite;\n\n    @keyframes gradient {\n      0% {\n        /* background-position: 0% 50%; */\n        transform: translate(0, 0);\n      }\n      50% {\n        /* background-position: 100% 50%; */\n        transform: translate(-100vw, -100vh);\n      }\n      100% {\n        /* background-position: 0% 50%; */\n        transform: translate(0, 0);\n      }\n    }\n  }\n"])));var f=r(44414);const w=a.memo((()=>{const e=(0,a.useRef)(null);return(0,a.useEffect)((()=>{try{var t=document.createElement("canvas"),r=t.width=.75*window.innerWidth,n=t.height=.75*window.innerHeight;e.current.appendChild(t);for(var a=t.getContext("webgl"),o=[],s=0;s<7;s++){var i=160*Math.random()+10;o.push({x:Math.random()*(r-2*i)+i,y:Math.random()*(n-2*i)+i,vx:2*(Math.random()-.5),vy:2*(Math.random()-.5),r:.75*i})}var l="\n  precision highp float;\n\n  const float WIDTH = "+(r|0)+".0;\n  const float HEIGHT = "+(n|0)+".0;\n\n  uniform vec3 metaballs[7];\n\n  void main(){\n  float x = gl_FragCoord.x;\n  float y = gl_FragCoord.y;\n\n  float sum = 0.0;\n  for (int i = 0; i < 7; i++) {\n  vec3 metaball = metaballs[i];\n  float dx = metaball.x - x;\n  float dy = metaball.y - y;\n  float radius = metaball.z;\n\n  sum += (radius * radius) / (dx * dx + dy * dy);\n  }\n\n  if (sum >= 0.99) {\n  gl_FragColor = vec4(mix(vec3(x / WIDTH, y / HEIGHT, 1.0), vec3(0, 0, 0), max(0.0, 1.0 - (sum - 0.99) * 100.0)), 1.0);\n  return;\n  }\n\n  gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n  }\n\n  ",c=j("\n  attribute vec2 position;\n\n  void main() {\n  // position specifies only x and y.\n  // We set z to be 0.0, and w to be 1.0\n  gl_Position = vec4(position, 0.0, 1.0);\n  }\n  ",a.VERTEX_SHADER),d=j(l,a.FRAGMENT_SHADER),u=a.createProgram();a.attachShader(u,c),a.attachShader(u,d),a.linkProgram(u),a.useProgram(u);var p=new Float32Array([-1,1,-1,-1,1,1,1,-1]),h=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,h),a.bufferData(a.ARRAY_BUFFER,p,a.STATIC_DRAW);var m=x(u,"position");a.enableVertexAttribArray(m),a.vertexAttribPointer(m,2,a.FLOAT,a.FALSE,8,0);var g=v(u,"metaballs");function w(){for(var e=0;e<7;e++){var t=o[e];t.x+=t.vx,t.y+=t.vy,(t.x<t.r||t.x>r-t.r)&&(t.vx*=-1),(t.y<t.r||t.y>n-t.r)&&(t.vy*=-1)}for(var s=new Float32Array(21),i=0;i<7;i++){var l=3*i,c=o[i];s[l+0]=c.x,s[l+1]=c.y,s[l+2]=c.r}a.uniform3fv(g,s),a.drawArrays(a.TRIANGLE_STRIP,0,4),requestAnimationFrame(w)}function j(e,t){var r=a.createShader(t);if(a.shaderSource(r,e),a.compileShader(r),!a.getShaderParameter(r,a.COMPILE_STATUS))throw"Shader compile failed with: "+a.getShaderInfoLog(r);return r}function v(e,t){var r=a.getUniformLocation(e,t);if(-1===r)throw"Can not find uniform "+t+".";return r}function x(e,t){var r=a.getAttribLocation(e,t);if(-1===r)throw"Can not find attribute "+t+".";return r}w()}catch(f){console.log(f)}}),[e.current]),(0,f.jsx)(g,{ref:e})}));var j,v=r(42466);const x=m.Ay.div(j||(j=(0,h.A)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  justify-items: center;\n\n  .info {\n    position: relative;\n    z-index: 2;\n    width: 35vw;\n    padding: 5vw;\n    color: #fff;\n    background: transparent;\n    mix-blend-mode: overlay;\n    background: rgba(30, 30, 30, 0.95);\n\n    img {\n      position: relative;\n      width: 100%;\n      height: auto;\n      mix-blend-mode: normal;\n      background-color: #000;\n    }\n\n    ul {\n      font-size: 1.1em;\n      line-height: 120%;\n      li {\n        margin-bottom: 0.6em;\n        position: relative;\n\n        &:before {\n          content: '';\n          width: 10px;\n          height: 2px;\n          background-color: #fff;\n          position: absolute;\n          right: 100%;\n          top: 0.9em;\n          transform: translateX(-0.5em);\n          border-radius: 3px;\n        }\n      }\n    }\n\n    a.poweredby {\n      position: absolute;\n      top: 0;\n      left: 0;\n      font-size: 10px;\n      text-transform: uppercase;\n      background-color: #ac2b42;\n      padding: 1em;\n      color: #fff;\n    }\n\n    h1 {\n      color: inherit;\n      font-size: clamp(30px, 3vw, 50px);\n      position: relative;\n      margin-bottom: 0.6em;\n    }\n  }\n\n  @media screen and (max-width: 1000px) {\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n    grid-gap: 15vh;\n\n    .info {\n      width: 100vw;\n\n      a.poweredby {\n        top: auto;\n        bottom: 100%;\n      }\n    }\n  }\n\n  .content {\n    position: relative;\n    z-index: 2;\n    display: flex;\n    align-items: flex-start;\n    justify-content: center;\n    flex-flow: column;\n    gap: 15px;\n  }\n\n  .card {\n    max-width: 450px;\n    width: 90vw !important;\n  }\n\n  .ant-form-item:last-child {\n    margin-bottom: 0;\n  }\n"])));var y=r(79378),A=r(591),b=r(41967),P=r(51400),k=r(96109),C=r(27911),S=r(15224),H=r(49211);const E=e=>{e&&H.A.set("token",e,{domain:".avstudio.local"})},I=()=>{let[e,t]=(0,s.ok)();(0,a.useEffect)((()=>{e.get("confirm")&&(i.Ay.success("Email confirmed, you may login now with your email and password."),t(""))}),[]);const[r,n]=(0,a.useState)(),[o,p]=(0,a.useState)("");return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(l.A,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:e=>{n(e.email),(0,v.iD)({email:e.email,password:e.password}).then((e=>{e&&p("show")}))},children:[(0,f.jsx)(l.A.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input your email"}],children:(0,f.jsx)(c.A,{prefix:(0,f.jsx)(y.A,{className:"site-form-item-icon"}),placeholder:"Email"})}),(0,f.jsx)(l.A.Item,{name:"password",rules:[{required:!0,message:"Please input your password"}],children:(0,f.jsx)(c.A,{prefix:(0,f.jsx)(A.A,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),(0,f.jsx)(l.A.Item,{children:(0,f.jsx)(d.A,{type:"primary",htmlType:"submit",children:"Log in"})})]}),"show"===o||"inprogress"===o?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.A,{}),(0,f.jsxs)(d.A,{loading:"inprogress"===o,onClick:()=>{r&&(p("inprogress"),(0,v.n$)(r).then((e=>{e&&p("done")})))},type:"dashed",block:!0,children:["Resend confirmation link to ",r]})]}):null,"done"===o?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.A,{}),(0,f.jsx)(b.A,{style:{color:"green"}})," Done, please check your email."]}):null]})},L=()=>{const[e,t]=(0,a.useState)(""),r=e=>{(0,v.BD)(e.email).then((()=>{i.Ay.success("Recover email sent please check your inbox."),t("Please check your email and follow instructions.")})).catch((e=>{i.Ay.error("Something went wrong..."),console.error("An error occurred:",e.response)}))};let[n,o]=(0,s.ok)();const[u,p]=(0,a.useState)();(0,a.useEffect)((()=>{let e=n.get("code");e&&(p(e),o(""))}),[n,o]);const h=e=>{const{firstPassword:r,secondPassword:n}=e;u&&r&&n?(0,v.xw)({code:u,password:r,passwordConfirmation:n}).then((()=>t("Password changed, now you can login"))):i.Ay.error("No data for password reset...")},m=()=>(0,f.jsxs)(l.A,{name:"normal_login",className:"login-form",onFinish:r,children:[(0,f.jsx)(l.A.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input your email"}],children:(0,f.jsx)(c.A,{prefix:(0,f.jsx)(y.A,{className:"site-form-item-icon"}),placeholder:"Email"})}),(0,f.jsx)(l.A.Item,{children:(0,f.jsx)(d.A,{type:"primary",htmlType:"submit",children:"Recover"})})]}),g=()=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:{marginBottom:"1em"},children:"Please set new password for your account."}),(0,f.jsxs)(l.A,{name:"normal_login",className:"login-form",onFinish:h,children:[(0,f.jsx)(l.A.Item,{name:"firstPassword",rules:[{required:!0,message:"Password is too weak"}],children:(0,f.jsx)(c.A.Password,{placeholder:"Password"})}),(0,f.jsx)(l.A.Item,{validateTrigger:"onSubmit",name:"secondPassword",rules:[{required:!0,message:"Please repeat your password!"},e=>{let{getFieldValue:t}=e;return{validator:(e,r)=>r&&t("firstPassword")!==r?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}],children:(0,f.jsx)(c.A.Password,{prefix:(0,f.jsx)(A.A,{}),placeholder:"Repeat password"})}),(0,f.jsx)(l.A.Item,{children:(0,f.jsx)(d.A,{type:"primary",htmlType:"submit",children:"Set New Password"})})]})]});return e?(0,f.jsx)("p",{children:e}):u?(0,f.jsx)(g,{}):(0,f.jsx)(m,{})},N=()=>{let e=(0,o.Zp)();const[t,r]=(0,a.useState)(null);return null===t?(0,f.jsxs)(l.A,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:e=>{(0,v.kz)({email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,company:e.company}).then((e=>{e&&r(e)}))},children:[(0,f.jsx)(l.A.Item,{name:"firstName",rules:[{type:"string",required:!0,message:"Please input your First Name"}],children:(0,f.jsx)(c.A,{prefix:(0,f.jsx)(y.A,{className:"site-form-item-icon"}),placeholder:"First Name"})}),(0,f.jsx)(l.A.Item,{name:"lastName",rules:[{type:"string",required:!0,message:"Please input your Last Name"}],children:(0,f.jsx)(c.A,{prefix:(0,f.jsx)(y.A,{className:"site-form-item-icon"}),placeholder:"Last Name"})}),(0,f.jsx)(l.A.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input your email"}],children:(0,f.jsx)(c.A,{prefix:(0,f.jsx)(P.A,{}),placeholder:"Email"})}),(0,f.jsx)(l.A.Item,{name:"company",rules:[{type:"string",required:!0,message:"Please input your Company"}],children:(0,f.jsx)(c.A,{prefix:(0,f.jsx)(k.A,{className:"site-form-item-icon"}),placeholder:"Company"})}),(0,f.jsx)(l.A.Item,{name:"password",rules:[{required:!0,message:"Please input password"},()=>({validator:(e,t)=>(0,C.YY)(t)})],children:(0,f.jsx)(c.A.Password,{placeholder:"Password"})}),(0,f.jsx)(l.A.Item,{children:(0,f.jsx)(d.A,{type:"primary",htmlType:"submit",children:"Create account"})})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("p",{children:"Email confirmation."}),(0,f.jsxs)("p",{children:["Please check ",t.data.user.email," and click on confirmation link."]}),(0,f.jsx)(u.A,{}),(0,f.jsx)("p",{children:(0,f.jsx)(d.A,{onClick:()=>{r(null),e("/login")},type:"primary",children:"Ok"})})]})},F=()=>{const e=(0,S.k)((e=>e.jwt)),t=(0,o.Zp)();(0,a.useEffect)((()=>{e&&(E(e),t("/projects"))}),[e,t]);const r=(0,o.zy)(),n={login:(0,f.jsx)(I,{}),register:(0,f.jsx)(N,{}),recover:(0,f.jsx)(L,{})};return(0,f.jsxs)(x,{children:[(0,f.jsxs)("div",{className:"content",children:[(0,f.jsx)("div",{children:(0,f.jsxs)("svg",{width:"143",height:"75",viewBox:"0 0 143 75",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M13.9207 36.1345C14.5407 35.7843 15.2986 35.014 15.2986 33.4034V31.5126C15.2986 28.1513 12.6118 25.07 9.30492 25H6.20475C2.76013 25 0.00442624 28.0812 0.00442624 31.5126V36.5546C0.00442624 36.5546 -0.202253 39.8459 2.20899 44.3277L8.13374 55.6022C8.13374 55.6022 10.2694 59.3838 10.2694 62.2549V67.8571C10.2694 69.3978 9.09824 70.5882 7.6515 70.5882C6.20475 70.5882 5.03358 69.3978 5.03358 67.9272V59.3838C3.79352 59.944 1.79563 60.8543 1.38228 60.9944C0.762244 61.3445 0.00442624 62.1148 0.00442624 63.7255V68.7675C0.0733189 72.1289 2.69123 74.8599 5.99808 75H9.09824C12.5429 75 15.2986 72.1989 15.2986 68.7675V62.535C15.2986 62.535 15.5052 59.2437 13.094 54.7619L7.16925 43.4174C7.16925 43.4174 5.03358 39.7059 5.03358 36.8347V32.1429C5.03358 30.6022 6.20475 29.4118 7.6515 29.4118C9.09824 29.4118 10.2694 30.6022 10.2694 32.1429V37.8151C11.5784 37.2549 13.5074 36.3445 13.9207 36.1345Z",fill:"white"}),(0,f.jsx)("path",{d:"M44.8954 25.4902H25.1922C24.3655 25.4902 23.6765 26.1905 23.6765 27.0308V30.4622H30.6347V73.4594C30.6347 73.8095 30.8414 74.5098 32.0125 74.5098H35.5261V31.6527C35.595 31.0224 36.0772 30.4622 36.7661 30.4622H40.6241C42.2086 30.4622 42.9664 29.7619 43.242 29.1317L44.8954 25.4902Z",fill:"white"}),(0,f.jsx)("path",{d:"M67.2032 25.4902H62.2429V67.8571C62.2429 69.3277 61.0717 70.5182 59.625 70.5182H58.8672C57.4204 70.5182 56.3181 69.3277 56.3181 67.8571V25.4902H52.8046C52.0468 25.4902 51.4268 26.1204 51.3579 26.8908V68.7675C51.3579 72.1989 54.1136 74.7899 57.4893 74.7899H61.2784V74.7199C64.5163 74.6499 67.2032 72.1289 67.2032 68.7675V25.4902Z",fill:"white"}),(0,f.jsx)("path",{d:"M78.9569 25.4902V74.5098H88.5329C91.9087 74.5098 94.5955 71.7787 94.6644 68.3473V31.6527C94.5955 28.2213 91.9087 25.4902 88.5329 25.4902H78.9569ZM89.773 66.9468C89.773 68.8375 88.5329 69.5378 87.1551 69.5378H83.9171V30.5322H87.1551C88.5329 30.5322 89.773 31.2325 89.773 33.0532V66.9468Z",fill:"white"}),(0,f.jsx)("path",{d:"M108.416 25.4902V73.4594C108.485 73.8095 108.692 74.5098 109.863 74.5098H113.376V27.451C113.376 26.6106 112.825 25.4902 111.378 25.4902H108.416Z",fill:"white"}),(0,f.jsx)("path",{d:"M133.217 25C129.773 25 127.017 27.8011 127.017 31.2325V68.8375C127.086 72.1989 129.842 75 133.217 75H137.006C140.313 74.8599 142.931 72.1989 143 68.8375V31.2325C143 27.8711 140.313 25.1401 137.006 25H133.217ZM134.595 70.5882C133.148 70.5182 131.977 69.3277 131.977 67.8571V32.1429C131.977 30.6723 133.148 29.4818 134.595 29.4118H135.353C136.8 29.4118 137.971 30.6022 137.971 32.1429V67.8571C137.971 69.3978 136.8 70.5882 135.353 70.5882H134.595Z",fill:"white"}),(0,f.jsx)("path",{d:"M31.9609 18.9387L18.9218 3.24838L22.7426 0L31.9609 11.0936L41.1793 0L45 3.24838L31.9609 18.9387ZM13.0391 0L26.0782 15.7516L22.2574 19L13.0391 7.90647L3.82075 19L0 15.7516L13.0391 0Z",fill:"white"})]})}),(0,f.jsx)(p.A,{className:"card",style:{width:"100%"},tabList:[{key:"login",tab:"Login"},{key:"register",tab:"Register"},{key:"recover",tab:"Recover"}],activeTabKey:r.pathname.substring(1),onTabChange:e=>{(e=>{t("/"+e)})(e)},children:n[r.pathname.substring(1)]})]}),(0,f.jsxs)("div",{className:"info",children:[(0,f.jsx)("h1",{children:"WYSIWYG HTML5 GUI Editor"}),(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:" Online based HTML5 Editor "}),(0,f.jsx)("li",{children:"Compiled GUI environment: Crestron One (IOS), Android App, PWA or browser"}),(0,f.jsx)("li",{children:"Crestron support (Contract including). Other control systems in development"}),(0,f.jsx)("li",{children:" Themes, elements, widgets, applications Libraries "}),(0,f.jsx)("li",{children:" Built-in smart console "}),(0,f.jsx)("li",{children:" Live debugging with real processor "}),(0,f.jsx)("li",{children:" Responsive layout out of the box "}),(0,f.jsx)("li",{children:" Flexible actions scenarios "}),(0,f.jsx)("li",{children:"Zero coding skills or Custom css & js"})]}),(0,f.jsx)("p",{style:{marginTop:"2em",lineHeight:"120%"},children:"Register to participate in beta release and get notified when updates available."}),(0,f.jsx)("a",{target:"_blank",className:"poweredby",href:"https://avgator.com",rel:"noreferrer",children:"powered by avgator.com"})]}),(0,f.jsx)(w,{})]})};var O=r(18469),T=r(44719),V=r(33626),R=r(27379);const W=(0,a.lazy)((()=>Promise.all([r.e(8323),r.e(6168),r.e(7835),r.e(8939),r.e(5492),r.e(9051),r.e(6796),r.e(4060),r.e(430),r.e(2689),r.e(4822),r.e(7567)]).then(r.bind(r,27567)))),z=(0,a.lazy)((()=>Promise.all([r.e(4060),r.e(430),r.e(1058)]).then(r.bind(r,1058)))),M=(0,a.lazy)((()=>Promise.all([r.e(8323),r.e(6168),r.e(8939),r.e(5613),r.e(9051),r.e(841),r.e(4060),r.e(1215),r.e(7797),r.e(7128),r.e(492),r.e(3072),r.e(6182),r.e(1206),r.e(2819)]).then(r.bind(r,59798)))),B=(0,a.lazy)((()=>Promise.all([r.e(8323),r.e(6168),r.e(7835),r.e(8939),r.e(5492),r.e(2718),r.e(5613),r.e(6796),r.e(841),r.e(3154),r.e(4060),r.e(7926),r.e(430),r.e(8208),r.e(9280),r.e(5490),r.e(2078),r.e(7128),r.e(5116),r.e(3072),r.e(6182),r.e(1206),r.e(4169),r.e(9653),r.e(5428),r.e(5746)]).then(r.bind(r,25859)))),D=(0,a.lazy)((()=>Promise.all([r.e(8323),r.e(6216)]).then(r.bind(r,26216)))),q=()=>{let e=(0,o.r5)();return console.error(e),(0,f.jsx)(f.Fragment,{children:T.A.error({icon:null,maskClosable:!1,content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:{color:"red",paddingBottom:5},children:(0,f.jsx)(R.A,{})}),"Looks like something went wrong while loading. Check network connection and reload app."]}),okText:"Reload App",onOk:()=>window.location.reload()})})},_=()=>{const e=(0,o.zy)();return(0,f.jsxs)("div",{children:["No template for ",e.pathname]})},Z=O.A.create({baseURL:"http://api.avstudio.local"}),U=(0,s.Ge)([{path:"/login",element:(0,f.jsx)(F,{}),errorElement:(0,f.jsx)(q,{})},{path:"/register",element:(0,f.jsx)(F,{}),errorElement:(0,f.jsx)(q,{})},{path:"/recover",element:(0,f.jsx)(F,{}),errorElement:(0,f.jsx)(q,{})},{path:"/",element:(0,f.jsx)(a.Suspense,{fallback:(0,f.jsx)(V.A,{}),children:(0,f.jsx)(M,{})}),errorElement:(0,f.jsx)(q,{}),children:[{path:"/",element:(0,f.jsx)(o.C5,{to:"/projects",replace:!0})},{path:"/projects",element:(0,f.jsx)(a.Suspense,{fallback:(0,f.jsx)(V.A,{}),children:(0,f.jsx)(W,{})})},{path:"/projects/:projectId",element:(0,f.jsx)(a.Suspense,{fallback:(0,f.jsx)(V.A,{}),children:(0,f.jsx)(z,{})})},{path:"/projects/:projectId/page/:pageId",element:(0,f.jsx)(a.Suspense,{fallback:(0,f.jsx)(V.A,{}),children:(0,f.jsx)(B,{})})},{path:"/profile",element:(0,f.jsx)(a.Suspense,{fallback:(0,f.jsx)(V.A,{}),children:(0,f.jsx)(D,{})})},{path:"/profile/:profileSection",element:(0,f.jsx)(a.Suspense,{fallback:(0,f.jsx)(V.A,{}),children:(0,f.jsx)(D,{})})},{path:"*",element:(0,f.jsx)(_,{})}]}]);const G=function(){return i.Ay.config({top:70,duration:2}),(0,f.jsx)(s.pg,{router:U,fallbackElement:(0,f.jsx)(_,{})})}},48362:(e,t,r)=>{r.d(t,{$H:()=>j,BL:()=>b,C8:()=>h,EV:()=>f,Hk:()=>m,Qx:()=>w,ay:()=>P,fS:()=>g,gA:()=>x,kA:()=>A,w8:()=>y,xx:()=>v,zo:()=>k});var n=r(92759),a=r(44719),o=r(13753),s=r(89321),i=r(64983),l=r(71069),c=r(97592),d=r(15224),u=r(54800),p=r.n(u);const h=async()=>await o.axiosInstance.get("/api/projects?populate[0]=builds&populate[1]=theme&sort=updatedAt:desc",{headers:(0,s.A)()}).then((e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.data?e.data.data:null})).catch((e=>{console.log("Fetch all projects error occurred:",e.response),n.Ay.error("Error fetching projects")})),m=async e=>{let{projectId:t,eventData:r}=e;const{onSuccess:a,onError:l,file:c}=r,d=new FormData;d.append("files",c),d.append("ref","api::project.project"),d.append("refId",String(t)),d.append("field","media");const{updateProjectWithHistory:u}=i.f.getState();await o.axiosInstance.post("/api/upload",d,{headers:(0,s.A)(),withCredentials:!0}).then((e=>(console.log("newMedia",e),a("ok"),e))).then((e=>{var t;const r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t[0],{id:n,...a}=r,o={id:n,attributes:a},{workingProject:s}=i.f.getState();u({media:{data:[...(null===s||void 0===s?void 0:s.attributes.media.data)||[],o]}},!1)})).catch((e=>{console.log("uploadProjectMedia error occurred:",e.response),n.Ay.error("Error uploadProjectMedia"),l("Error uploading")}))},g=async e=>{let{user:t,productId:r,productQuantity:a=1,paymentProvider:i=1,projectId:l}=e;const c=window.location.href,d="".concat(c,"?paymentFeedback=").concat("buyBuildOk"),u="".concat(c,"?paymentFeedback=").concat("buyBuildError");return await o.axiosInstance.post("/api/billing/order/create",{data:{user:t,product:[{id:r,quantity:a}],paymentProvider:i,project:l,successURL:d,cancelURL:u}},{headers:(0,s.A)()}).then((e=>{var t;console.log("createOrder response",e);const r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.paymentLink;if(console.log("createOrder paymentLink",r),!r)throw n.Ay.error("Payment link not found"),new Error("Payment link not found");window.location.href=r})).catch((e=>{n.Ay.error("Error creating order"),console.log("createOrder error occurred:",e.response)}))},f=async e=>await o.axiosInstance.get("/api/projects/".concat(e,"?populate=deep,3&replacePageId=true"),{headers:(0,s.A)()}).then((e=>{var t,r,n;return console.log("response",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data),null!==(r=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data)&&void 0!==r?r:null})).catch((e=>(console.log("Error fetching project data: ",e.response),n.Ay.error("Error fetching project data"),!1))),w=async e=>{let{projectId:t,inputData:r}=e;const n=Object.keys(r)||[],a=i.f.getState().updateProjectWithHistory;return console.log("updateProjectWithHistory env",r.env),await o.axiosInstance.put("/api/projects/".concat(t,"?populate=deep,3"),{data:r},{headers:(0,s.A)()}).then((e=>{var t,r;const o=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.attributes,s={};return n.forEach((e=>{Object.assign(s,{[e]:o[e]})})),o?a(s,!1):null})).catch((e=>(console.log("Update project error occurred:",e.response),Promise.reject(e))))},j=async e=>{let{projectData:t}=e;const{builds:r,media:n,datasources:a,variables:l,modificators:c,pages:d,...u}=t.attributes,{pagesHashes:p,setSavedHashes:h}=i.f.getState(),m=[];p.forEach((e=>{e.currentHash!==e.savedHash&&m.push(String(e.pageId))}));let g=structuredClone(d.data);g=g.filter((e=>m.includes(String(e.id)))),g=g.map((e=>e.attributes.numericPageId?{...e,id:e.attributes.numericPageId}:e));const f={data:{...u,pages:g}};return await o.axiosInstance.put("/api/projects/".concat(t.id,"?populate=deep,3"),f,{headers:(0,s.A)()}).then((e=>{h()})).catch((e=>(console.log("Save full project error occurred:",e.response),Promise.reject(e))))},v=async e=>{let{projectId:t}=e;return await o.axiosInstance.delete("/api/deleteproject/".concat(t),{headers:(0,s.A)()}).catch((e=>{console.log("Delete Project error occurred:",e.response)}))},x=async e=>{let{inputData:t}=e;return await o.axiosInstance.post("/api/projects/",{data:{name:t.name,theme:t.theme}},{headers:(0,s.A)()}).then((()=>(0,l.F.getState().fillProjectsList)())).catch((e=>{console.log("Create Project error occurred:",e.response)}))},y=async(e,t)=>o.axiosInstance.delete("/api/deletemedia?projectId=".concat(e,"&mediaId=").concat(t),{headers:(0,s.A)()}).then((()=>{const{workingProject:e,updateProjectWithHistory:r}=i.f.getState();let n=(null===e||void 0===e?void 0:e.attributes.media.data)||[];n=n.filter((e=>e.id!==t)),r({media:{data:n}},!1)})).catch((e=>{console.log("Delete Media error occurred:",e.response)})),A=async e=>{let{projectId:t,buildId:r}=e;return o.axiosInstance.delete("/api/deletebuild/".concat(t,"/").concat(r),{headers:(0,s.A)()}).then((()=>{const{workingProject:e,updateProjectWithHistory:t}=i.f.getState();let n=(null===e||void 0===e?void 0:e.attributes.builds.data)||[];return n=n.filter((e=>e.id!==r)),t({builds:{data:n}},!1)})).then((()=>n.Ay.info("Build deleted"))).catch((e=>{console.log("Delete Build error occurred:",e.response)}))},b=async e=>{const t=a.A.info({title:"Creating project clone",zIndex:3e3,content:"Clone in progress...",closeIcon:null,closable:!1,okButtonProps:{style:{display:"none"}}});return o.axiosInstance.post("/api/cloneproject/",{data:{projectId:e}},{headers:(0,s.A)()}).then((e=>(0,l.F.getState().fillProjectsList)().then((()=>(n.Ay.info("Project cloned"),e.data.clonedProjectId))))).catch((e=>{console.log("Clone Project error occurred:",e.response)})).finally((()=>{t.destroy()}))},P=async e=>{var t,r;console.log("Build project start");const n=null===(t=i.f.getState().workingProject)||void 0===t?void 0:t.attributes.env,{webXpanel:a,datasetOptions:l,archiveName:d,debugOptions:u}=(null===(r=i.f.getState().workingProject)||void 0===r?void 0:r.attributes)||{},p=c.Q.getState().projectBuildSelectedEnv,h=null===n||void 0===n?void 0:n.find((e=>e.envId===p)),{webXpanel:m,datasetOptions:g,archiveName:f,debugOptions:w,envName:j}=h||{},v={webXpanel:{...a,...m},datasetOptions:{...l,...g},archiveName:f||d,debugOptions:{...u,...w},envName:j};return new Promise((async(t,r)=>{var n,a;const i=await o.axiosInstance.post("/api/buildproject/".concat(e),{buildEnv:v},{headers:(0,s.A)()}),l=null===i||void 0===i||null===(n=i.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a[0];l?t(l):r(null)}))};function k(){const e=d.k.getState().jwt||"";return"//"+p()(e)+".live."+window.location.host}},42466:(e,t,r)=>{r.d(t,{BD:()=>m,ec:()=>p,iD:()=>w,je:()=>j,kz:()=>f,n$:()=>g,xw:()=>h});var n=r(92759),a=r(71069),o=r(15224),s=r(64983),i=r(18469),l=r(89321),c=r(49211);const{setUserStore:d,resetUserStore:u}=o.k.getState(),p=async e=>{let{currentPassword:t,newPassword:r,repeatNewPassword:n}=e;return i.A.post("".concat("http://api.avstudio.local","/api/auth/change-password"),{currentPassword:t,password:r,passwordConfirmation:n},{headers:(0,l.A)()})},h=async e=>{let{code:t,password:r,passwordConfirmation:a}=e;return i.A.post("".concat("http://api.avstudio.local","/api/auth/reset-password"),{code:t,password:r,passwordConfirmation:a}).then((e=>{n.Ay.success("Your password changed, now you can login.")})).catch((e=>{n.Ay.error("Something went wrong...".concat(e.response.data.error.message)),console.error("An error occurred:",e.response)}))},m=async e=>i.A.post("".concat("http://api.avstudio.local","/api/auth/forgot-password"),{email:e}),g=async e=>await i.A.post("".concat("http://api.avstudio.local","/api/auth/send-email-confirmation"),{email:e}).then((e=>e)).catch((e=>{n.Ay.error("Something went wrong..."),console.error("An error occurred:",e.response)})),f=async e=>await i.A.post("".concat("http://api.avstudio.local","/api/auth/local/register"),{firstName:e.firstName,lastName:e.lastName,username:e.firstName+" "+e.lastName,company:e.company,email:e.email,password:e.password}).then((e=>e.data.user.confirmed?(d(e.data),!1):e)).catch((e=>{n.Ay.error("Something went wrong... ".concat(e.response.data.error.message,".")),console.log("Register error occurred:",e.response)})),w=async e=>await i.A.post("".concat("http://api.avstudio.local","/api/auth/local"),{identifier:e.email,password:e.password}).then((e=>{d(e.data),v()})).catch((e=>{var t;if(400===(null===(t=e.response)||void 0===t?void 0:t.status)&&(n.Ay.error(e.response.data.error.message),"Your account email is not confirmed"===e.response.data.error.message))return e.response;console.log(e)})),j=async()=>{const e=s.f.getState().resetWorkingProject,t=a.F.getState().resetProjectsList;try{localStorage.clear()}catch(r){console.log(r)}u(),c.A.remove(),e(),t()},v=async()=>await i.A.post("".concat("http://api.avstudio.local","/api/service/setLoginTime"),{lastLoginDateTime:new Date},{headers:(0,l.A)()}).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}}]);