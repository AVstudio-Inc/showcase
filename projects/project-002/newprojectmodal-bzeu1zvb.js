import{h as m,F as t,r as x,j as r,M as b,H as P,B as l,eg as q,z as y}from"./main-BKM2fIwG.js";import{u as C}from"./mainLayout-B1JYqbwH.js";import{h as k}from"./SettingOutlined-CvJ3130u.js";import{S as c}from"./PlusSquareOutlined-DN4XdNMT.js";import"./renderGuides-Dj2i6UDx.js";import"./Styles-BqtYWpHV.js";import"./index-Aazyqc20.js";import"./DownOutlined-BZ_0tHYf.js";import"./formItemPropsWrapper-I6w9mx6V.js";import"./modificatorAPI-D74AIDqr.js";import"./pageAPI-DkFp6Yf6.js";import"./index-B2WlvB3G.js";import"./EditOutlined-_GB9OZ1y.js";const{Option:T}=c,z=({setOpenNewProjectModal:o})=>{const i=C(e=>e.themesList),u=m(e=>e.myProjects??[]),p=m(e=>e.myTemplates??[]),[a]=t.useForm(),n=()=>{a.submit()};function d(e){return![...u,...p].some(s=>s.attributes.name===e)}const f=({name:e,theme:s})=>{j(!0),q({inputData:{name:e,theme:s}}).then(()=>{o(!1),y.success("Project created")})},[h,j]=x.useState(!1);return r.jsx("div",{onKeyUp:e=>{e.key==="Enter"&&n()},children:r.jsx(b,{maskClosable:!1,title:"Create New Project",open:!0,onCancel:()=>o(!1),footer:[r.jsx(l,{onClick:()=>o(!1),children:"Cancel"},"back"),r.jsx(l,{loading:h,type:"primary",onClick:n,children:"Add new project"},"submit")],children:r.jsxs(t,{labelCol:{xs:{span:9}},wrapperCol:{xs:{span:12}},form:a,initialValues:{name:`New project (${k(new Date).format("MMM Do, h:mm a")})`,theme:i?.[0]?.id,defaultOrientation:"portrait"},onFinish:f,scrollToFirstError:!0,children:[r.jsx(t.Item,{colon:!1,required:!1,name:"name",label:"Name",rules:[{required:!0,message:"This field is required."},()=>({validator(e,s){return s&&d(s)?Promise.resolve():Promise.reject(new Error("Project name must be unique"))}})],children:r.jsx(P,{})}),r.jsx(t.Item,{colon:!1,required:!1,name:"theme",label:"Theme",rules:[{required:!0,message:"This field is required."}],children:r.jsx(c,{children:i?.map(e=>r.jsx(T,{value:e.id,children:e.attributes.name},e.id))})})]})})})};export{z as default};
