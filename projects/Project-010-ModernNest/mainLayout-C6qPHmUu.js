const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./undoRedo-bmnk68UB.js","./main-DkRMjw9y.js","./main-3L8nLUGM.css","./Styles-na8skXb2.js","./PlusSquareOutlined-CabPYtdb.js","./Styles-BO9_zmax.css","./varsion-DlDGQRjz.js","./index-CMItvqjf.js","./index-Com_Q53J.js","./SettingOutlined-BIc0TNUj.js","./index-B5FVELOg.js","./modificatorAPI-C9ZwS79B.js","./index-DOOIMEDo.js","./EditOutlined-DWCmQkXB.js","./newProjectModal-B2O6A-6z.js"])))=>i.map(i=>d[i]);
import{r as reactExports,I as Icon,_ as _objectSpread2,n as createWithEqualityFn,o as lodashExports,p as axiosInstance,s as setHeaders,q as create,g as useParams,j as jsxRuntimeExports,F as Form,M as Modal,B as Button,t as changeContainer,v as changeElement,w as React,x as Checkbox,y as Row,z as Col,S as Switch,A as eventEmitter,E as v4,G as api,H as RefIcon$a,D as Divider,J as RefIcon$b,T as Tag,K as Input,N as noSpaces,O as RenderActionTag,P as Popover,Q as RefIcon$c,U as PremiumTag,V as Tabs,f as useWorkingProjectStore,W as Select,X as updateProjectOnBackend,Y as ConfirmationDialog,Z as RefIcon$d,$ as qe,a0 as fetchHttpDatasource,a1 as createExecutableFunctionFromString,i as RefIcon$e,a2 as isUnique,a3 as Segmented,a4 as updateDatasource,a5 as getDatasourcesValues,a6 as createDatasource,a7 as useStatesStore,a8 as useVariablesStore,a9 as containsOnlyLatinLettersAndNumbers,aa as noFirstCharNumber,ab as RefIcon$i,ac as RefIcon$j,ad as getVariables,ae as useFunctionsStore,af as Radio,ag as notEmpty,ah as containsOnlyNumbers,ai as changeVariableOrParameter,aj as getDefaultExportFromCjs,ak as addListener,al as postMessage,am as removeListener,l as useMainMenuStore,an as Tooltip,ao as Dropdown,ap as RefIcon$m,aq as Menu,ar as getProjectLiveUrl,as as useUserStore,at as RefIcon$n,au as useEnvStore,u as useNavigate,av as PageLayoutIcon,aw as RefIcon$o,ax as CompoundedSpace,ay as useXpanelStore,az as useGetWsConnectorsWithEnv,aA as useWebsocketStore,aB as RefIcon$p,aC as useGetElDimensionsStyles,aD as useLocation,aE as logoIcon,aF as RefIcon$r,aG as logOut,L as Loader,m as __vitePreload,aH as useBlocker,aI as saveFullProjectToBackend,e as useSearchParams,aJ as useWindowAvgatorStudioComposer,aK as useAddNavigateToWindow,h as useProjectsListStore,aL as api$1,aM as useFillCompiledUserFunctions,aN as useFillVariableCalculatedStore,aO as useInitialFillDatasourceStore,aP as removeCustomFonts,aQ as Outlet,aR as NewPageModal}from"./main-DkRMjw9y.js";import{D as Details,h as handleRemoveGuides,u as useTestDevice,S as Slider,A as AppLayoutContainer,a as AppTopBar,b as AppContentArea}from"./Styles-na8skXb2.js";import{D as Drawer,R as RefIcon$f,u as useVersionStore}from"./varsion-DlDGQRjz.js";import{I as InputNumber}from"./index-CMItvqjf.js";import{C as Collapse,F as FormExports,d as de,k,u as useGetActivePageData}from"./index-Com_Q53J.js";import{h as hooks,R as RefIcon$k,a as RefIcon$l}from"./SettingOutlined-BIc0TNUj.js";import{R as RefAutoComplete}from"./index-B5FVELOg.js";import{u as updateModificator,c as createModificator}from"./modificatorAPI-C9ZwS79B.js";import{R as RefIcon$g,a as RefIcon$h}from"./PlusSquareOutlined-CabPYtdb.js";import{B as Badge}from"./index-DOOIMEDo.js";import{R as RefIcon$q}from"./EditOutlined-DWCmQkXB.js";var ArrowLeftOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},ArrowLeftOutlined=function(t,s){return reactExports.createElement(Icon,_objectSpread2(_objectSpread2({},t),{},{ref:s,icon:ArrowLeftOutlined$1}))},RefIcon$9=reactExports.forwardRef(ArrowLeftOutlined),ApiOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"},ApiOutlined=function(t,s){return reactExports.createElement(Icon,_objectSpread2(_objectSpread2({},t),{},{ref:s,icon:ApiOutlined$1}))},RefIcon$8=reactExports.forwardRef(ApiOutlined),ClearOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},ClearOutlined=function(t,s){return reactExports.createElement(Icon,_objectSpread2(_objectSpread2({},t),{},{ref:s,icon:ClearOutlined$1}))},RefIcon$7=reactExports.forwardRef(ClearOutlined),FundViewOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M956 686.5l-.1-.1-.1-.1C911.7 593 843.4 545 752.5 545s-159.2 48.1-203.4 141.3v.1a42.92 42.92 0 000 36.4C593.3 816 661.6 864 752.5 864s159.2-48.1 203.4-141.3c5.4-11.5 5.4-24.8.1-36.2zM752.5 800c-62.1 0-107.4-30-141.1-95.5C645 639 690.4 609 752.5 609c62.1 0 107.4 30 141.1 95.5C860 770 814.6 800 752.5 800z"}},{tag:"path",attrs:{d:"M697 705a56 56 0 10112 0 56 56 0 10-112 0zM136 232h704v253h72V192c0-17.7-14.3-32-32-32H96c-17.7 0-32 14.3-32 32v520c0 17.7 14.3 32 32 32h352v-72H136V232z"}},{tag:"path",attrs:{d:"M724.9 338.1l-36.8-36.8a8.03 8.03 0 00-11.3 0L493 485.3l-86.1-86.2a8.03 8.03 0 00-11.3 0L251.3 543.4a8.03 8.03 0 000 11.3l36.8 36.8c3.1 3.1 8.2 3.1 11.3 0l101.8-101.8 86.1 86.2c3.1 3.1 8.2 3.1 11.3 0l226.3-226.5c3.2-3.1 3.2-8.2 0-11.3z"}}]},name:"fund-view",theme:"outlined"},FundViewOutlined=function(t,s){return reactExports.createElement(Icon,_objectSpread2(_objectSpread2({},t),{},{ref:s,icon:FundViewOutlined$1}))},RefIcon$6=reactExports.forwardRef(FundViewOutlined),IssuesCloseOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm72-112c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48zm400-188h-59.3c-2.6 0-5 1.2-6.5 3.3L763.7 538.1l-49.9-68.8a7.92 7.92 0 00-6.5-3.3H648c-6.5 0-10.3 7.4-6.5 12.7l109.2 150.7a16.1 16.1 0 0026 0l165.8-228.7c3.8-5.3 0-12.7-6.5-12.7zm-44 306h-64.2c-5.5 0-10.6 2.9-13.6 7.5a352.2 352.2 0 01-49.8 62.2A355.92 355.92 0 01651.1 840a355 355 0 01-138.7 27.9c-48.1 0-94.8-9.4-138.7-27.9a355.92 355.92 0 01-113.3-76.3A353.06 353.06 0 01184 650.5c-18.6-43.8-28-90.5-28-138.5s9.4-94.7 28-138.5c17.9-42.4 43.6-80.5 76.4-113.2 32.8-32.7 70.9-58.4 113.3-76.3a355 355 0 01138.7-27.9c48.1 0 94.8 9.4 138.7 27.9 42.4 17.9 80.5 43.6 113.3 76.3 19 19 35.6 39.8 49.8 62.2 2.9 4.7 8.1 7.5 13.6 7.5H892c6 0 9.8-6.3 7.2-11.6C828.8 178.5 684.7 82 517.7 80 278.9 77.2 80.5 272.5 80 511.2 79.5 750.1 273.3 944 512.4 944c169.2 0 315.6-97 386.7-238.4A8 8 0 00892 694z"}}]},name:"issues-close",theme:"outlined"},IssuesCloseOutlined=function(t,s){return reactExports.createElement(Icon,_objectSpread2(_objectSpread2({},t),{},{ref:s,icon:IssuesCloseOutlined$1}))},RefIcon$5=reactExports.forwardRef(IssuesCloseOutlined),LogoutOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"},LogoutOutlined=function(t,s){return reactExports.createElement(Icon,_objectSpread2(_objectSpread2({},t),{},{ref:s,icon:LogoutOutlined$1}))},RefIcon$4=reactExports.forwardRef(LogoutOutlined),MonitorOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M692.8 412.7l.2-.2-34.6-44.3a7.97 7.97 0 00-11.2-1.4l-50.4 39.3-70.5-90.1a7.97 7.97 0 00-11.2-1.4l-37.9 29.7a7.97 7.97 0 00-1.4 11.2l70.5 90.2-.2.1 34.6 44.3c2.7 3.5 7.7 4.1 11.2 1.4l50.4-39.3 64.1 82c2.7 3.5 7.7 4.1 11.2 1.4l37.9-29.6c3.5-2.7 4.1-7.7 1.4-11.2l-64.1-82.1zM608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5L114.3 856.1a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6C473 696.1 537.7 720 608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644s-118.2-23.7-161.2-66.8C403.7 534.2 380 476.9 380 416s23.7-118.2 66.8-161.2c43-43.1 100.3-66.8 161.2-66.8s118.2 23.7 161.2 66.8c43.1 43 66.8 100.3 66.8 161.2s-23.7 118.2-66.8 161.2z"}}]},name:"monitor",theme:"outlined"},MonitorOutlined=function(t,s){return reactExports.createElement(Icon,_objectSpread2(_objectSpread2({},t),{},{ref:s,icon:MonitorOutlined$1}))},RefIcon$3=reactExports.forwardRef(MonitorOutlined),NodeExpandOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M952 612c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H298a95.92 95.92 0 00-89-60c-53 0-96 43-96 96s43 96 96 96c40.3 0 74.8-24.8 89-60h150.3v152c0 55.2 44.8 100 100 100H952c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H548.3c-15.5 0-28-12.5-28-28V612H952zM456 344h264v98.2c0 8.1 9.5 12.8 15.8 7.7l172.5-136.2c5-3.9 5-11.4 0-15.3L735.8 162.1c-6.4-5.1-15.8-.5-15.8 7.7V268H456c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8z"}}]},name:"node-expand",theme:"outlined"},NodeExpandOutlined=function(t,s){return reactExports.createElement(Icon,_objectSpread2(_objectSpread2({},t),{},{ref:s,icon:NodeExpandOutlined$1}))},RefIcon$2=reactExports.forwardRef(NodeExpandOutlined),RetweetOutlined$1={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 552h63.6c4.4 0 8-3.6 8-8V288.7h528.6v72.6c0 1.9.6 3.7 1.8 5.2a8.3 8.3 0 0011.7 1.4L893 255.4c4.3-5 3.6-10.3 0-13.2L749.7 129.8a8.22 8.22 0 00-5.2-1.8c-4.6 0-8.4 3.8-8.4 8.4V209H199.7c-39.5 0-71.7 32.2-71.7 71.8V544c0 4.4 3.6 8 8 8zm752-80h-63.6c-4.4 0-8 3.6-8 8v255.3H287.8v-72.6c0-1.9-.6-3.7-1.8-5.2a8.3 8.3 0 00-11.7-1.4L131 768.6c-4.3 5-3.6 10.3 0 13.2l143.3 112.4c1.5 1.2 3.3 1.8 5.2 1.8 4.6 0 8.4-3.8 8.4-8.4V815h536.6c39.5 0 71.7-32.2 71.7-71.8V480c-.2-4.4-3.8-8-8.2-8z"}}]},name:"retweet",theme:"outlined"},RetweetOutlined=function(t,s){return reactExports.createElement(Icon,_objectSpread2(_objectSpread2({},t),{},{ref:s,icon:RetweetOutlined$1}))},RefIcon$1=reactExports.forwardRef(RetweetOutlined),SaveOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},SaveOutlined=function(t,s){return reactExports.createElement(Icon,_objectSpread2(_objectSpread2({},t),{},{ref:s,icon:SaveOutlined$1}))},RefIcon=reactExports.forwardRef(SaveOutlined);const initialValues={sourceContainerIndex:null,sourceContainerType:null,destinationContainerIndex:null,destinationContainerType:null,sourceElementIndex:null,destinationElementIndex:null,destinationElementCorner:null,destinationContainerFlow:null},useDragStore=createWithEqualityFn((e,t)=>({selectedElementRef:null,staticEementsGuidesClasses:[],activeStaticElementKey:null,dragData:initialValues,updateDragStore:s=>{const n=t().dragData,c={...n,...s};lodashExports.isEqual(n,c)||e(()=>({dragData:c}))},resetDragStore:()=>{e(()=>({dragData:initialValues}))},setSelectedElementRef:s=>{e(()=>({selectedElementRef:s}))},setActiveStaticElementKey:s=>{e(()=>({activeStaticElementKey:s}))},setStaticEementsGuidesClasses:s=>{e(n=>{const c=n.staticEementsGuidesClasses;return c.includes(s)?n:{staticEementsGuidesClasses:[...c,s]}})}}),lodashExports.isEqual),getThemes=async()=>await axiosInstance.get("/api/themes?sort=createdAt:asc&populate=deep,3",{headers:setHeaders()}).then(e=>e?.data?.data?e.data.data:null).catch(e=>{console.log("Get news error occurred:",e)}),useThemesStore=create(e=>({themesList:[],fetchAndFillThemesList:async()=>{const t=await getThemes();e({themesList:t||[]})}})),RenderModal=({cloneItemModal:e,setCloneItemModal:t,onFinish:s})=>{const[n]=Form.useForm(),c=()=>{n.submit()};return jsxRuntimeExports.jsx(Modal,{destroyOnClose:!0,afterClose:()=>n.resetFields(),maskClosable:!1,title:`Cloning ${e.nodeType}`,open:!!e,onOk:c,onCancel:()=>t(null),footer:[jsxRuntimeExports.jsx(Button,{onClick:()=>t(null),children:"Cancel"},"back"),jsxRuntimeExports.jsxs(Button,{type:"primary",onClick:c,children:["Clone ",e.nodeType]},"submit")],children:jsxRuntimeExports.jsx(Form,{labelCol:{xs:{span:6}},wrapperCol:{xs:{span:16}},form:n,onFinish:a=>s(a),initialValues:{copiesCount:1},scrollToFirstError:!0,children:jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:"copiesCount",label:"How many copies",rules:[{required:!0,message:"This field is required."}],children:jsxRuntimeExports.jsx(InputNumber,{min:1,max:10})})})})},useCloneItemModal=()=>{const[e,t]=reactExports.useState(null),{pageId:s}=useParams(),n=({copiesCount:a})=>{const{containerIndex:l,elementIndex:o,nodeType:d,isGlobal:u}=e||{};l!==void 0&&(d==="container"?changeContainer({action:"clone",containerIndex:l,copiesCount:a,pageId:s}).then(()=>t(null)):o!==void 0&&changeElement({containerIndex:l,elementIndex:o,copiesCount:a,isGlobal:u,pageId:s,action:"clone"}).then(()=>t(null)))};return{CloneModal:e?jsxRuntimeExports.jsx(RenderModal,{onFinish:n,setCloneItemModal:t,cloneItemModal:e}):null,setCloneItemModal:t}};var solidProjectSettingsRow="editProjectModal_solidProjectSettingsRow__mtt4ox0",envTabs="editProjectModal_envTabs__mtt4ox2",settingsRow="editProjectModal_settingsRow__mtt4ox3",settingsCell="editProjectModal_settingsCell__mtt4ox4",connectorsHeadersRow="editProjectModal_connectorsHeadersRow__mtt4ox6",headerRowDeleteButtonBox="editProjectModal_headerRowDeleteButtonBox__mtt4ox7",boxWithAutocomplete="editProjectModal_boxWithAutocomplete__mtt4ox8";const InputWithAutocomplete=({addonBefore:e,addonAfter:t,autocomplete:s,disabled:n=!1,placeholder:c,...a})=>{const l=reactExports.useMemo(()=>{if(s)return s.map(o=>({value:o}))},[s]);return jsxRuntimeExports.jsxs("div",{className:boxWithAutocomplete,children:[jsxRuntimeExports.jsx("div",{children:e}),jsxRuntimeExports.jsx(RefAutoComplete,{...a,filterOption:(o,d)=>d.value.toUpperCase().indexOf(o.toUpperCase())!==-1,options:l,disabled:n,placeholder:c}),jsxRuntimeExports.jsx("div",{children:t})]})},EnvFormFieldsItem=React.memo(({name:e,envIndex:t,label:s,placeholder:n,rules:c,addonAfter:a,form:l,isBooleanValue:o,allowEditOnlyForDefault:d,autocomplete:u})=>{const f=typeof t!="number",j=Form.useWatch(["env",t,...e],l),[g,b]=reactExports.useState(j!==void 0);reactExports.useEffect(()=>{b(j!==void 0)},[j]);const v=C=>{C?l.setFieldValue(["env",t,...e],""):l.setFieldValue(["env",t,...e],void 0),eventEmitter.emit("projectFormHasChanges")};return f?jsxRuntimeExports.jsx(Form.Item,{isListField:!1,label:s,colon:!1,required:!1,name:[...e],rules:c,valuePropName:o?"checked":"value",children:o?jsxRuntimeExports.jsx(Checkbox,{children:n}):jsxRuntimeExports.jsx(InputWithAutocomplete,{autocomplete:u,placeholder:n,addonAfter:a})}):jsxRuntimeExports.jsx(Form.Item,{colon:!1,label:s,children:jsxRuntimeExports.jsxs(Row,{style:{flexWrap:"nowrap"},gutter:8,children:[jsxRuntimeExports.jsx(Col,{flex:"auto",children:jsxRuntimeExports.jsx(Form.Item,{noStyle:!0,isListField:g,label:s,colon:!1,required:!1,name:g?["env",t,...e]:e,rules:c,valuePropName:o?"checked":"value",children:o?jsxRuntimeExports.jsx(Checkbox,{disabled:!g,children:n}):jsxRuntimeExports.jsx(InputWithAutocomplete,{addonBefore:g?null:jsxRuntimeExports.jsx("div",{style:{textTransform:"uppercase",fontSize:9,color:"gray",paddingInline:"0.5em"},children:"inherited"}),autocomplete:u,disabled:!g,placeholder:n,addonAfter:a})})}),jsxRuntimeExports.jsx(Col,{style:{alignSelf:"center"},children:jsxRuntimeExports.jsx(Switch,{onChange:C=>{v(C)},checked:g,size:"small",disabled:d&&!f})})]})})}),EnvContext=reactExports.createContext(void 0),EnvContextProvider=({children:e})=>{const[t,s]=reactExports.useState(""),[n,c]=reactExports.useState(""),a=reactExports.useCallback(o=>{Array.isArray(o)||s(o)},[]),l=reactExports.useCallback(o=>{Array.isArray(o)||c(o)},[]);return jsxRuntimeExports.jsx(EnvContext.Provider,{value:{connectorsOpenSection:t,handleChangeConectorsOpenSection:a,singleConnectorOpenKey:n,handleChangeSingleConnectorOpen:l},children:e})},{Panel:Panel$4}=Collapse,CrestronConnectorsTable=React.memo(({envIndex:e})=>{const t=Form.useFormInstance(),{singleConnectorOpenKey:s,handleChangeSingleConnectorOpen:n}=React.useContext(EnvContext)??{};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Collapse,{accordion:!0,activeKey:s,onChange:n,children:jsxRuntimeExports.jsx(Panel$4,{header:"WebXpanel",children:jsxRuntimeExports.jsxs("div",{className:settingsRow,style:{"--gap":"3em"},children:[jsxRuntimeExports.jsx(EnvFormFieldsItem,{form:t,label:"Host",placeholder:"Ip or Hostname",envIndex:e,name:["webXpanel","host"]}),jsxRuntimeExports.jsx(EnvFormFieldsItem,{label:"ipId",form:t,placeholder:"IpId",envIndex:e,name:["webXpanel","ipId"]}),jsxRuntimeExports.jsx(EnvFormFieldsItem,{label:"Room ID",form:t,placeholder:"Room ID",envIndex:e,name:["webXpanel","roomId"]}),jsxRuntimeExports.jsx(EnvFormFieldsItem,{label:"Auth Token",form:t,placeholder:"Auth Token",envIndex:e,name:["webXpanel","authToken"]})]})},"1")})})}),returnStorageKey=e=>{switch(e){case"web":return"webConnectors";case"websocket":return"websocketConnectors";default:throw new Error("Unknown connector type")}},createNewConnector=({form:e,connectorType:t})=>{const s=returnStorageKey(t),n=v4(),c={uid:n,type:t,host:"",name:`New ${t} connector`},l={...e.getFieldValue(s)??{},[n]:c};e.setFieldValue([s],l),eventEmitter.emit("projectFormHasChanges")},removeConnector=({uid:e,connectorType:t,form:s})=>{const n=returnStorageKey(t),c=s.getFieldValue(n);if(!c){api.error("There is no connectors to remove");return}const{[e]:a,...l}=c;s.setFieldValue(n,l);const o=s.getFieldValue(["env"]);o?.length&&o.some(d=>d?.[n]?.[e])&&(o.forEach(d=>{d?.[n]?.[e]&&delete d?.[n]?.[e]}),s.setFieldValue(["env"],o)),eventEmitter.emit("projectFormHasChanges")},handleChangeWebHeader=({uid:e,headerIndex:t,action:s,form:n})=>{const c=n.getFieldValue("webConnectors");if(!c){console.error("There are no connectors to manipulate headers for...");return}const a=c?.[e];if(!a){console.error("There is no connector with such uid...");return}const l=a?.headers??[];if(s==="add"){const o={key:"",value:""},d=[...l,o];n.setFieldValue(["webConnectors",e,"headers"],d),eventEmitter.emit("projectFormHasChanges")}else if(s==="remove"){if(t===void 0){console.error("There is no header index to remove...");return}const o=l.filter((u,f)=>f!==t);n.setFieldValue(["webConnectors",e,"headers"],o);const d=n.getFieldValue(["env"]);d?.length&&(d.forEach(u=>{const f=u?.webConnectors?.[e];f?.headers&&f.headers.splice(t,1)}),n.setFieldValue(["env"],d)),eventEmitter.emit("projectFormHasChanges")}},{Panel:Panel$3}=Collapse,RenderConnectorsCollapse=React.memo(({envIndex:e,dataKey:t,connectorType:s})=>{const n=Form.useFormInstance(),{singleConnectorOpenKey:c,handleChangeSingleConnectorOpen:a}=React.useContext(EnvContext)??{},l=FormExports.useWatch(t,n)??{},o=e===void 0;return Object.values(l)?.length?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Collapse,{destroyInactivePanel:!1,accordion:!0,activeKey:c,onChange:a,children:Object.values(l).map(d=>{const{uid:u,name:f}=d;return u?jsxRuntimeExports.jsxs(Panel$3,{forceRender:!0,header:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Tag,{children:s}),f]}),extra:o&&jsxRuntimeExports.jsx(Button,{onClick:j=>{j.stopPropagation(),removeConnector({uid:u,connectorType:s,form:n})},danger:!0,icon:jsxRuntimeExports.jsx(RefIcon$b,{}),size:"small"}),children:[jsxRuntimeExports.jsxs("div",{className:settingsRow,style:{"--gap":"2em"},children:[jsxRuntimeExports.jsx(EnvFormFieldsItem,{form:n,label:"Name",placeholder:"Friendly Name",envIndex:e,name:[t,u,"name"],allowEditOnlyForDefault:!0}),jsxRuntimeExports.jsx(EnvFormFieldsItem,{form:n,label:"Host URL (IP)",placeholder:"Host URL",envIndex:e,name:[t,u,"host"]}),s==="websocket"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(EnvFormFieldsItem,{form:n,label:"Reconnect Timeout (ms)",placeholder:"5000ms by default",envIndex:e,name:[t,u,"reconnectTimeout"]})})]}),s==="web"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Divider,{className:"fromleft",children:"http headers"}),jsxRuntimeExports.jsx(Form.Item,{noStyle:!0,shouldUpdate:(j,g)=>j.dataKey?.[u]?.headers!==g.dataKey?.[u]?.headers,children:({getFieldValue:j})=>(j([t,u,"headers"])??[]).map((b,v)=>jsxRuntimeExports.jsxs("div",{className:connectorsHeadersRow,children:[jsxRuntimeExports.jsx(EnvFormFieldsItem,{form:n,label:"Header Key",placeholder:"Header Key",envIndex:e,name:[t,u,"headers",v,"key"]}),jsxRuntimeExports.jsx(EnvFormFieldsItem,{form:n,label:"Header Value",placeholder:"Header Value",envIndex:e,name:[t,u,"headers",v,"value"]}),jsxRuntimeExports.jsx("div",{className:headerRowDeleteButtonBox,children:o&&jsxRuntimeExports.jsx(Button,{className:"removeHttpHeaderButton",icon:jsxRuntimeExports.jsx(RefIcon$b,{}),onClick:()=>handleChangeWebHeader({uid:u,headerIndex:v,action:"remove",form:n}),danger:!0})})]},v))}),o&&jsxRuntimeExports.jsx(Button,{style:{marginTop:"1em"},onClick:()=>handleChangeWebHeader({uid:u,action:"add",form:n}),block:!0,type:"dashed",children:"Add new header"})]})]},u):null})})}):jsxRuntimeExports.jsx("div",{children:"No connectors yet"})}),ConnectorsTable=React.memo(({envIndex:e,connectorType:t})=>{const s=returnStorageKey(t),n=Form.useFormInstance();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(RenderConnectorsCollapse,{dataKey:s,envIndex:e,connectorType:t}),jsxRuntimeExports.jsx(Form.Item,{name:s,noStyle:!0,children:jsxRuntimeExports.jsxs(Button,{style:{marginTop:"1em"},icon:jsxRuntimeExports.jsx(RefIcon$a,{}),type:"primary",onClick:()=>createNewConnector({form:n,connectorType:t}),children:["Add ",t," connector"]})})]})}),{Panel:Panel$2}=Collapse,connectorAccordeonKeys=["webxpanel","web","websocket"],EnvFormFields=React.memo(({envIndex:e})=>{const t=Form.useFormInstance(),s=typeof e!="number",n=s?{value:"Default"}:{},c=Form.useWatch("websocketConnectors",t)??t.getFieldValue("websocketConnectors"),a=Form.useWatch("webConnectors",t)??t.getFieldValue("webConnectors"),l=Object.keys(c??{})?.length??0,o=Object.keys(a??{})?.length??0,{connectorsOpenSection:d,handleChangeConectorsOpenSection:u}=React.useContext(EnvContext)??{};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:settingsRow,children:[jsxRuntimeExports.jsx("div",{className:settingsCell,children:jsxRuntimeExports.jsx(Form.Item,{isListField:!0,colon:!1,required:!1,name:s?void 0:["env",e,"envName"],label:"Environment name",children:jsxRuntimeExports.jsx(Input,{...n,disabled:s,placeholder:"Environment name"})})}),jsxRuntimeExports.jsx("div",{className:settingsCell,children:jsxRuntimeExports.jsx(Form.Item,{isListField:!s,colon:!1,required:!1,label:"Enable debug console",valuePropName:"checked",name:s?["debugOptions","showConsoleOnLoad"]:["env",e,"debugOptions","showConsoleOnLoad"],children:jsxRuntimeExports.jsx(Switch,{})})}),jsxRuntimeExports.jsx("div",{className:settingsCell,children:jsxRuntimeExports.jsx(EnvFormFieldsItem,{form:t,label:"Build Archive Name",placeholder:"Archive Name",envIndex:e,name:["archiveName"],rules:[()=>({validator(f,j){return noSpaces(j)}})],addonAfter:".ch5z"})})]}),jsxRuntimeExports.jsx(Divider,{plain:!0,className:"fromleft",orientation:"left",children:"project connectors"}),jsxRuntimeExports.jsxs(Collapse,{destroyInactivePanel:!1,onChange:u,activeKey:d,accordion:!0,children:[jsxRuntimeExports.jsxs(Panel$2,{forceRender:!0,header:"Crestron connectors (1)",children:[jsxRuntimeExports.jsxs(Details,{summary:"Crestron Global Joins",children:[jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:["globalJoins","analogPageFlip_signal_a_fb"],label:"Analog flip page signal",children:jsxRuntimeExports.jsx(Input,{disabled:!s,addonBefore:jsxRuntimeExports.jsx("div",{style:{marginRight:0,marginTop:-2},children:jsxRuntimeExports.jsx(RenderActionTag,{style:{margin:0},type:"a"})}),placeholder:"Analog signal name"})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:["globalJoins","serialPageFlip_signal_s_fb"],label:"Serial flip page signal",children:jsxRuntimeExports.jsx(Input,{disabled:!s,addonBefore:jsxRuntimeExports.jsx("div",{style:{marginRight:0,marginTop:-2},children:jsxRuntimeExports.jsx(RenderActionTag,{style:{margin:0},type:"s"})}),placeholder:"Serial signal name"})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:["globalJoins","notification_signal_s_fb"],label:"Notification signal",children:jsxRuntimeExports.jsx(Input,{disabled:!s,addonBefore:jsxRuntimeExports.jsx("div",{style:{marginRight:0,marginTop:-2},children:jsxRuntimeExports.jsx(RenderActionTag,{style:{margin:0},type:"s"})}),placeholder:"Serial signal name"})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:["globalJoins","refreshDataSources_signal_d_fb"],label:"Refresh All DataSources",children:jsxRuntimeExports.jsx(Input,{disabled:!s,addonBefore:jsxRuntimeExports.jsx("div",{style:{marginRight:0,marginTop:-2},children:jsxRuntimeExports.jsx(RenderActionTag,{style:{margin:0},type:"d"})}),placeholder:"Digital signal name"})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:["globalJoins","refreshSingleDataSource_signal_s_fb"],label:"Refresh Single DataSource",children:jsxRuntimeExports.jsx(Input,{disabled:!s,addonBefore:jsxRuntimeExports.jsx("div",{style:{marginRight:0,marginTop:-2},children:jsxRuntimeExports.jsx(RenderActionTag,{style:{margin:0},type:"s"})}),placeholder:"Serial signal name"})}),jsxRuntimeExports.jsx(Form.Item,{style:{margin:0},colon:!1,required:!1,name:["globalJoins","connected_signal_d_fb"],label:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Connected status indicator",jsxRuntimeExports.jsx(Popover,{placement:"top",title:"Crestron connect indicator",content:jsxRuntimeExports.jsx("div",{style:{maxWidth:200},children:"UI will not start until we get true feedback value from this signal (if filled)."}),trigger:"hover",children:jsxRuntimeExports.jsx(RefIcon$c,{style:{color:"var(--ant-primary-5)",marginInlineStart:"0.5em"}})})]}),children:jsxRuntimeExports.jsx(Input,{disabled:!s,addonBefore:jsxRuntimeExports.jsx("div",{style:{marginRight:0,marginTop:-2},children:jsxRuntimeExports.jsx(RenderActionTag,{style:{margin:0},type:"d"})}),placeholder:"Digital signal name"})})]}),jsxRuntimeExports.jsx(Divider,{style:{marginBottom:5},plain:!0}),jsxRuntimeExports.jsx(CrestronConnectorsTable,{envIndex:e})]},connectorAccordeonKeys[0]),jsxRuntimeExports.jsx(Panel$2,{forceRender:!0,header:`Websocket connectors (${l})`,children:jsxRuntimeExports.jsx(ConnectorsTable,{envIndex:e,connectorType:"websocket"})},connectorAccordeonKeys[2]),jsxRuntimeExports.jsx(Panel$2,{forceRender:!0,header:`WEB connectors (${o})`,children:jsxRuntimeExports.jsx(ConnectorsTable,{envIndex:e,connectorType:"web"})},connectorAccordeonKeys[1])]})]})}),ProjectEnvTabs=React.memo(()=>{const e=Form.useFormInstance(),t=Form.useWatch("env",e),s=(c,a)=>{const l=[...t??[]];if(a==="add"){const o=hooks().format("YYYY-MM-DD_HH-mm"),d=v4(),f={envName:"ENV_"+o,envId:d};l.push(f),e.setFieldValue("env",l),eventEmitter.emit("projectFormHasChanges")}else if(a==="remove"&&typeof c=="string")try{const o=Number(c);l.splice(o,1),e.setFieldValue("env",l),eventEmitter.emit("projectFormHasChanges")}catch(o){console.log(o)}},n=reactExports.useMemo(()=>{const c={label:"Default Project Settings",key:"Default",forceRender:!0,children:jsxRuntimeExports.jsx(EnvFormFields,{})},l=(t??[]).map((o,d)=>{const{envName:u="no_name"}=o;return{label:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(PremiumTag,{star:!0})," ",u]}),key:String(d),forceRender:!0,children:jsxRuntimeExports.jsx(EnvFormFields,{envIndex:d})}});return[c,...l]},[t]);return jsxRuntimeExports.jsx(EnvContextProvider,{children:jsxRuntimeExports.jsx(Tabs,{destroyInactiveTabPane:!1,className:envTabs,size:"small",type:"editable-card",onEdit:s,items:n})})}),{Option}=Select,EditProjectModal=React.memo(({editProjectModalId:e,setEditProjectModalId:t})=>{const s=useThemesStore(M=>M.themesList),n=useWorkingProjectStore.getState().workingProject,{name:c,theme:a,env:l,webXpanel:o,datasetOptions:d,debugOptions:u,archiveName:f,globalJoins:j,splashScreen:g,websocketConnectors:b=[],webConnectors:v=[]}=n?.attributes??{},C=reactExports.useMemo(()=>{const M=v?.reduce((L,H)=>(L[H.uid]=H,L),{}),S=b?.reduce((L,H)=>(L[H.uid]=H,L),{});return{env:l,webXpanel:o,datasetOptions:d,debugOptions:u,archiveName:f,globalJoins:j,name:c,splashScreen:g,theme:a?.data.id,websocketConnectors:S,webConnectors:M}},[f,d,u,l,j,c,g,a?.data.id,v,o,b]),[R]=Form.useForm(),[A,P]=reactExports.useState(!1),[O,V]=reactExports.useState(!1);reactExports.useEffect(()=>{const M=()=>{V(!0)};return eventEmitter.on("projectFormHasChanges",M),()=>{eventEmitter.off("projectFormHasChanges",M)}},[]);const q=M=>{const{webConnectors:S,websocketConnectors:L}=M,H=Object.values(S||{}),x=Object.values(L||{}),i={...M,webConnectors:H,websocketConnectors:x};P(!0),e&&updateProjectOnBackend({projectId:e,inputData:i}).then(()=>{V(!1),api.success("Project settings saved")}).finally(()=>P(!1))},F=()=>{O?ConfirmationDialog({icon:jsxRuntimeExports.jsx(RefIcon$d,{}),title:"Exit project settings?",content:"Close without saving project settings?",okText:"Close without save",cancelText:"Cancel",okButtonProps:{danger:!0},onOk:()=>{P(!1),t(null)},onCancel:()=>{P(!1)}}):t(null)},{refreshSingleDataSource_signal_s_fb:T}=n?.attributes.globalJoins||{},G=()=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsx("div",{children:"Project Settings"}),jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(RefIcon,{}),loading:A,disabled:!O,onClick:()=>{R.submit()},type:"primary",children:"Save Project Settings"})]});return n?jsxRuntimeExports.jsx(Drawer,{closable:!0,maskClosable:!0,width:"100vw",title:jsxRuntimeExports.jsx(G,{}),placement:"right",onClose:()=>{F()},destroyOnClose:!0,open:e!==null,children:jsxRuntimeExports.jsxs(Form,{onValuesChange:()=>{V(!0)},style:{maxHeight:"100%",overflowY:"auto"},form:R,initialValues:C,onFinish:q,scrollToFirstError:!0,layout:"vertical",children:[jsxRuntimeExports.jsxs("section",{className:solidProjectSettingsRow,children:[jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:"name",label:"Project Name",rules:[{required:!0,message:"This field is required."}],children:jsxRuntimeExports.jsx(Input,{})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:"theme",label:"Project Theme",rules:[{required:!0,message:"This field is required."}],children:jsxRuntimeExports.jsx(Select,{children:s?.map(M=>jsxRuntimeExports.jsx(Option,{value:M.id,children:M.attributes.name},M.id))})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,initialValue:T,required:!1,name:["splashScreen","logoImgId"],label:"Splash screen Logo image ID",children:jsxRuntimeExports.jsx(Input,{placeholder:"Image id from library"})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,initialValue:T,required:!1,name:["splashScreen","text"],label:"Splash screen Text",children:jsxRuntimeExports.jsx(Input,{placeholder:"Splash screen text"})})]}),jsxRuntimeExports.jsx(Divider,{className:"fromleft",plain:!0,children:"project settings with environment support"}),jsxRuntimeExports.jsx(Form.List,{name:"env",children:()=>null}),jsxRuntimeExports.jsx(ProjectEnvTabs,{})]})}):null}),StyledModal=qe(Modal)`
  height: calc(100vh - 4%) !important;
  width: 100% !important;

  .ant-modal-content {
    height: 100%;
    position: relative;
    display: flex;
    flex-flow: column;

    .dsForm {
      height: 100%;
      flex: 1;
      position: relative;
      display: flex;
      flex-flow: column;
    }

    .ant-modal-body {
      flex: 1;
      position: relative;
      padding: 0;
      display: flex;
      flex-flow: column;
    }

    .ant-collapse-header {
      font-weight: normal !important;
      user-select: none;
      text-transform: uppercase;
      font-size: 12px;
    }

    .ant-form-item-label {
      flex-basis: 200px;
    }
  }
`,DsEditorArea=qe.div`
  position: relative;
  height: 100%;
  padding-top: 17px;
  /* overflow: hidden; */
  min-height: 200px;

  .monaco-editor {
    position: absolute !important;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
  }
`,handleFetchHttpData=({form:e,beforeAction:t,afterAction:s,onOk:n,onError:c,functionString:a})=>{const{name:l,modificatorId:o,...d}=e.getFieldsValue(!0);console.log("restConfig",d);const u={id:0,attributes:{uid:"manual_ds_config",name:l,production:{storageType:"remote",...d}}};t?.(),fetchHttpDatasource({datasourceConfig:u}).then(f=>{let j=f?.rawValue;a&&(j=createExecutableFunctionFromString({functionString:a,uid:"0",name:"Datasource test function"})(j)),n(j)}).catch(f=>{console.log("err",f),c?.(f)}).finally(()=>s?.())},{Panel:Panel$1}=Collapse,DsTabs=qe(Tabs)`
  position: relative;
  flex: 1;

  .ant-tabs-content {
    position: relative;
    height: 100%;
  }

  .ant-tabs-tabpane {
    height: 100%;
    background-color: #1e1e1e;
  }

  .ant-tabs-nav {
    margin: 0;
  }

  .ant-tabs-tab {
    border: 0 !important;

    &.ant-tabs-tab-active {
      background-color: #1e1e1e;

      .ant-tabs-tab-btn {
        color: #fff;
        user-select: none;
      }
    }
  }
`,NoDataStyledBox=qe.div`
  color: #fff;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
`,ModificatorTab=qe.div`
  position: relative;
  display: flex;
  color: #fff;
  height: 100%;

  .functionBox {
    min-width: 300px;
    position: relative;
    height: 100%;
    display: flex;
    flex-flow: column;

    .functionBoxControls {
      padding: 17px;
      padding-right: 0;
      padding-bottom: 0;
      font-size: 12px;
      display: flex;
      gap: 5px;
      justify-content: space-between;
    }
  }

  .resultBox {
    flex: 1;
  }
`,NewDatasourceModal=({setNewDatasourceVisible:e,newDatasourceVisible:t})=>{const s=typeof t=="number"?t:null,n=useWorkingProjectStore.getState().workingProject?.attributes.datasources.data.find(E=>E.id===s),c=useWorkingProjectStore.getState().workingProject?.attributes.modificators.data,[a]=Form.useForm(),{projectId:l}=useParams(),o=reactExports.useMemo(()=>{let E=useWorkingProjectStore.getState().workingProject?.attributes.datasources.data??[];return n&&(E=E.filter(y=>y.id!==n.id)),E.map(y=>y.attributes.name)},[n]),d=reactExports.useMemo(()=>useWorkingProjectStore.getState().workingProject?.attributes.modificators.data?.map(y=>({value:y.attributes.uid,label:y.attributes.name}))??[],[]),u=reactExports.useMemo(()=>useWorkingProjectStore.getState().workingProject?.attributes.websocketConnectors?.map(y=>({value:y.uid,label:y.name}))??[],[]),f=reactExports.useMemo(()=>useWorkingProjectStore.getState().workingProject?.attributes.webConnectors?.map(y=>({value:y.uid,label:y.name}))??[],[]),[j,g]=reactExports.useState("local"),[b,v]=reactExports.useState(null),[C,R]=reactExports.useState(null),A=Form.useWatch("sourceObject",a),P=Form.useWatch("modificatorId",a),O=Form.useWatch("wsConnectorUid",a),V=Form.useWatch("webConnectorUid",a),q=Form.useWatch("sourceLink",a),F=!!V||!!q,[T,G]=reactExports.useState(!1),[M,S]=reactExports.useState(!1),[L,H]=reactExports.useState("local"),x=reactExports.useMemo(()=>F||O?A?"mixed":"remote":"local",[A,F,O]),i=reactExports.useMemo(()=>P?c?.find(E=>E.attributes.uid===P):null,[P,c]),r=reactExports.useCallback(()=>{i&&(a.setFieldValue("modificatorFunctionString",i.attributes.function),S(!1))},[a,i]);reactExports.useEffect(()=>{r()},[r]);const[m,p]=reactExports.useState(!1),[h,_]=reactExports.useState([]),[I,N]=reactExports.useState([]),$=E=>{_(E)},B=E=>{N(E)},z=async E=>{if(!l)return;const{name:D,sourceLink:y,useBaseUrl:K,headerKey:ee,headerValue:te,modificatorId:oe,sourceObject:re,modificatorFunctionString:ae,isImagePreloadSource:ie,wsConnectorUid:le,webConnectorUid:ce}=E;console.log("formData",E);const ne={name:D||"New datasouce",production:{sourceLink:y,useBaseUrl:K,headerKey:ee,headerValue:te,modificatorId:oe||void 0,sourceObject:re,storageType:x,isImagePreloadSource:ie,wsConnectorUid:le,webConnectorUid:ce},uid:v4()};if(p(!0),M&&i?.id&&await updateModificator({function:ae},i.id).catch(()=>{api.error("Failed to update function"),p(!1)}),n){const{uid:me,...ue}=ne;updateDatasource({...ue},n.id).then(()=>e(!1)).then(()=>getDatasourcesValues()).finally(()=>p(!1))}else createDatasource(l,ne).then(()=>e(!1)).then(()=>getDatasourcesValues()).finally(()=>p(!1))},W=reactExports.useCallback(()=>h.length>0?jsxRuntimeExports.jsx(Popover,{trigger:"hover",title:"invalid JSON",content:"JSON data contains errors",children:jsxRuntimeExports.jsx(RefIcon$d,{style:{fontSize:14,margin:"0 0 0 5px",color:"red",cursor:"help"}})}):null,[h.length]);function X(){const E=new Date,D=E.getFullYear(),y=String(E.getMonth()+1).padStart(2,"0"),K=String(E.getDate()).padStart(2,"0"),ee=String(E.getHours()).padStart(2,"0"),te=String(E.getMinutes()).padStart(2,"0");return`${D}-${y}-${K}_${ee}-${te}`}const J=X(),w=reactExports.useMemo(()=>{const E={name:"New datasource "+J,sourceLink:"",useBaseUrl:!1,headerKey:null,headerValue:null,modificatorId:void 0,sourceObject:"",modificatorFunctionString:"",isImagePreloadSource:!1,wsConnectorUid:void 0,webConnectorUid:void 0};if(n){const{name:D,production:y}=n.attributes;return{name:D,modificatorFunctionString:"",...y}}return E},[J,n]);reactExports.useEffect(()=>{j==="remote"&&!F&&g("local"),j==="modified"&&!P&&g("local"),R(null)},[j,P,F]);const U=reactExports.useMemo(()=>{const E=()=>{R("loading");try{const y=a.getFieldValue("modificatorFunctionString"),K=JSON.parse(A),te=createExecutableFunctionFromString({uid:"ds_Modal_Function",name:"ds_Modal_Function",functionString:y})(K);R(JSON.stringify(te,null,2))}catch(y){console.log(y),R(null)}},D=()=>{if(L==="local")return A?jsxRuntimeExports.jsx(Button,{style:{textTransform:"capitalize"},icon:jsxRuntimeExports.jsx(RefIcon$3,{}),loading:C==="loading",onClick:()=>{E()},ghost:!0,children:"Calculate Local Modified Data"}):jsxRuntimeExports.jsx("p",{children:"Your local source is empty"});if(L==="remote")return V?jsxRuntimeExports.jsx(Button,{style:{textTransform:"capitalize"},icon:jsxRuntimeExports.jsx(RefIcon$3,{}),loading:C==="loading",onClick:()=>{const y=a.getFieldValue("modificatorFunctionString");handleFetchHttpData({form:a,functionString:y,beforeAction:()=>{R("loading")},onOk:K=>{R(JSON.stringify(K))},onError:()=>{R(null)}})},ghost:!0,children:"Calculate Remote Modified Data"}):jsxRuntimeExports.jsx("p",{children:"Remote URL is not presented in ENV or datasource settings"})};return[{label:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Set Local Source ",W()]}),key:"local",children:jsxRuntimeExports.jsx(DsEditorArea,{hasErrors:!!h.length,children:jsxRuntimeExports.jsx(Form.Item,{noStyle:!0,name:"sourceObject",validateStatus:h.length?"error":void 0,rules:[()=>({validator(){return h.length?Promise.reject():Promise.resolve()}})],normalize:y=>y===void 0?"":y,children:jsxRuntimeExports.jsx(de,{className:"monaco-editor",language:"json",loading:jsxRuntimeExports.jsx(RefIcon$e,{}),options:{readOnly:!1,automaticLayout:!0,hideCursorInOverviewRuler:!0,matchBrackets:"always",wordWrap:"on",glyphMargin:!1,folding:!0,lineNumbersMinChars:3,minimap:{enabled:!0}},theme:"vs-dark",defaultLanguage:"json",onValidate:$})})})},{label:"Test Remote HTTP Source",disabled:!F,key:"remote",children:b===null||b==="loading"?jsxRuntimeExports.jsx(NoDataStyledBox,{children:jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(RefIcon$3,{}),loading:b==="loading",onClick:()=>handleFetchHttpData({form:a,beforeAction:()=>{v("loading")},onOk:y=>{v(JSON.stringify(y))},onError:()=>{v(null)}}),ghost:!0,children:"Retreive Remote Data"})}):jsxRuntimeExports.jsx(DsEditorArea,{hasErrors:!!h.length,children:jsxRuntimeExports.jsx(de,{className:"monaco-editor",language:"json",loading:jsxRuntimeExports.jsx(RefIcon$e,{}),options:{readOnly:!0,automaticLayout:!0,hideCursorInOverviewRuler:!0,matchBrackets:"always",wordWrap:"on",glyphMargin:!1,folding:!0,lineNumbersMinChars:3,minimap:{enabled:!0}},theme:"vs-dark",defaultLanguage:"json",value:b})})},{label:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Test Function",!!I.length&&jsxRuntimeExports.jsx(Popover,{trigger:"hover",title:"invalid Function",content:"Function contains errors",children:jsxRuntimeExports.jsx(RefIcon$d,{style:{fontSize:14,margin:"0 0 0 5px",color:"red",cursor:"help"}})})]}),disabled:!P,key:"modified",children:jsxRuntimeExports.jsxs(ModificatorTab,{children:[jsxRuntimeExports.jsx("div",{className:"functionBox",children:jsxRuntimeExports.jsx("div",{style:{flex:1},children:jsxRuntimeExports.jsx(DsEditorArea,{hasErrors:!1,children:jsxRuntimeExports.jsx(Form.Item,{name:"modificatorFunctionString",validateStatus:I.length?"error":void 0,rules:[()=>({validator(){return I.length?Promise.reject():Promise.resolve()}})],normalize:y=>y===void 0?"":y,noStyle:!0,children:jsxRuntimeExports.jsx(de,{className:"monaco-editor",language:"json",loading:jsxRuntimeExports.jsx(RefIcon$e,{}),options:{readOnly:!1,automaticLayout:!0,hideCursorInOverviewRuler:!0,matchBrackets:"always",lineNumbers:"off",wordWrap:"on",glyphMargin:!1,folding:!0,lineDecorationsWidth:0,lineNumbersMinChars:3,minimap:{enabled:!0}},theme:"vs-dark",defaultLanguage:"javascript",onValidate:B})})})})}),jsxRuntimeExports.jsx("div",{className:"resultBox",children:C===null||C==="loading"?jsxRuntimeExports.jsx(NoDataStyledBox,{children:jsxRuntimeExports.jsx(D,{})}):jsxRuntimeExports.jsx(DsEditorArea,{hasErrors:!!h.length,children:jsxRuntimeExports.jsx(de,{className:"monaco-editor",language:"json",loading:jsxRuntimeExports.jsx(RefIcon$e,{}),options:{readOnly:!0,automaticLayout:!0,hideCursorInOverviewRuler:!0,matchBrackets:"always",wordWrap:"on",glyphMargin:!1,folding:!0,lineNumbersMinChars:3,minimap:{enabled:!0}},theme:"vs-dark",defaultLanguage:"json",value:C})})})]})}]},[h.length,W,a,I.length,F,P,C,L,A,b,V]),Z=reactExports.useMemo(()=>{switch(j){case"local":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{size:"small",disabled:!F,icon:jsxRuntimeExports.jsx(RefIcon$2,{}),type:"dashed",style:{marginLeft:10},loading:T,onClick:()=>handleFetchHttpData({form:a,beforeAction:()=>{G(!0)},afterAction:()=>{G(!1)},onOk:E=>{a.setFieldsValue({sourceObject:JSON.stringify(E)})},onError:()=>{a.setFieldsValue({sourceObject:""})}}),children:"Fill from remote source"}),jsxRuntimeExports.jsx(Button,{size:"small",onClick:()=>{a.setFieldsValue({sourceObject:null})},disabled:!(A&&!T),danger:!0,icon:jsxRuntimeExports.jsx(RefIcon$7,{}),type:"dashed",style:{marginLeft:10},children:"Clear"})]});case"remote":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onClick:()=>handleFetchHttpData({form:a,beforeAction:()=>{v("loading")},onOk:E=>{v(JSON.stringify(E))},onError:()=>{v(null)}}),loading:b==="loading",size:"small",icon:jsxRuntimeExports.jsx(RefIcon$f,{}),type:"dashed",style:{marginLeft:10},disabled:b===null||b==="loading",children:"Refresh Remote Data"}),jsxRuntimeExports.jsx(Button,{size:"small",onClick:()=>{v(null)},disabled:b===null||b==="loading",danger:!0,icon:jsxRuntimeExports.jsx(RefIcon$7,{}),type:"dashed",style:{marginLeft:10},children:"Clear Preview"})]});case"modified":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onClick:()=>R(null),loading:C==="loading",size:"small",icon:jsxRuntimeExports.jsx(RefIcon$7,{}),type:"dashed",style:{marginLeft:10},disabled:C===null||C==="loading",children:"Clear"}),jsxRuntimeExports.jsx(Button,{size:"small",onClick:()=>r(),disabled:!M,danger:!0,icon:jsxRuntimeExports.jsx(RefIcon$7,{}),type:"dashed",style:{marginLeft:10},children:"Discard function changes"}),jsxRuntimeExports.jsx(Select,{size:"small",value:L,style:{marginLeft:10},onChange:E=>{H(E),R(null)},options:[{value:"local",label:"Use Local Source"},{value:"remote",label:"Use Remote Source"}]})]});default:return null}},[j,T,a,M,F,C,L,r,A,b]),Y=E=>{const D=Object.keys(E);D.includes("modificatorFunctionString")&&!M&&S(!0),D.includes("modificatorId")&&(S(!1),R(null))},[Q,se]=reactExports.useState(w.wsConnectorUid?"ws":"http");return jsxRuntimeExports.jsx(StyledModal,{destroyOnClose:!0,maskClosable:!1,centered:!0,title:n?`Edit datasource: ${n.attributes.name}`:"Add new datasource",open:!0,onCancel:()=>e(!1),footer:[jsxRuntimeExports.jsx(Button,{onClick:()=>e(!1),children:"Cancel"},"back"),jsxRuntimeExports.jsxs(Button,{loading:m,type:"primary",onClick:()=>{a.submit()},children:[n?"Save datasource":"Add datasource"," ",M?"& Update Function":""]},"submit")],children:jsxRuntimeExports.jsxs(Form,{onValuesChange:Y,onFinish:z,className:"dsForm",form:a,initialValues:w,scrollToFirstError:!0,children:[jsxRuntimeExports.jsx(Collapse,{destroyInactivePanel:!1,expandIcon:({isActive:E})=>E?jsxRuntimeExports.jsx(RefIcon$g,{}):jsxRuntimeExports.jsx(RefIcon$h,{}),defaultActiveKey:s?[]:["form"],ghost:!0,children:jsxRuntimeExports.jsxs(Panel$1,{forceRender:!0,extra:jsxRuntimeExports.jsx(Tag,{color:x==="local"?"gold":"green",style:{marginInlineEnd:0,textTransform:"none"},children:x}),header:"DataSource Settings",children:[jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,label:"Name",name:"name",rules:[{required:!0,message:"This field is required."},()=>({validator(E,D){return Promise.all([isUnique({input:D,searchArray:o})])}})],children:jsxRuntimeExports.jsx(Input,{})}),jsxRuntimeExports.jsx(Divider,{plain:!0,orientationMargin:200,orientation:"left",children:"Remote fetch settings"}),jsxRuntimeExports.jsx(Segmented,{style:{margin:"0 0 16px 200px"},onChange:E=>{se(E)},value:Q,options:[{label:"HTTP",value:"http"},{label:"WebSocket",value:"ws"}]}),Q==="http"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,preserve:!1,name:"webConnectorUid",label:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(PremiumTag,{placement:"topLeft",star:!0})," Web Connector"]}),children:jsxRuntimeExports.jsx(Select,{placeholder:"Select Web connector",allowClear:!0,notFoundContent:"No Web connectors found",options:f})}),jsxRuntimeExports.jsx(Form.Item,{noStyle:!0,shouldUpdate:(E,D)=>E.webConnectorUid!==D.webConnectorUid,children:({getFieldValue:E})=>{const D=E("webConnectorUid");return jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:"sourceLink",label:D?"Request URL Postfix":"Request URL",preserve:!1,normalize:y=>y===void 0?"":y,children:jsxRuntimeExports.jsx(Input,{allowClear:!0,spellCheck:!1,placeholder:D?"Request URL Postfix":"Request URL"})})}})]}):jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,preserve:!1,name:"wsConnectorUid",label:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(PremiumTag,{placement:"topLeft",star:!0})," Websocket Connector"]}),children:jsxRuntimeExports.jsx(Select,{placeholder:"Select Websocket connector",allowClear:!0,notFoundContent:"No Websocket connectors found",options:u})}),jsxRuntimeExports.jsx(Divider,{plain:!0,orientationMargin:200,orientation:"left",children:"Datasource postprocessing & manipulation"}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,label:"Modify Function",name:"modificatorId",children:jsxRuntimeExports.jsx(Select,{options:[{value:0,label:"None"},...d]})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,label:jsxRuntimeExports.jsxs("div",{style:{width:200},children:["Image preload",jsxRuntimeExports.jsx(Popover,{placement:"topLeft",title:"Datasource for Image preloading",content:"URLs array will be used to preload & cache images",trigger:"hover",arrowPointAtCenter:!0,children:jsxRuntimeExports.jsx(RefIcon$c,{style:{marginLeft:7}})})]}),name:"isImagePreloadSource",valuePropName:"checked",children:jsxRuntimeExports.jsx(Switch,{})})]},"form")}),jsxRuntimeExports.jsx(DsTabs,{activeKey:j,onChange:E=>{g(E)},tabBarExtraContent:{right:jsxRuntimeExports.jsx("div",{style:{paddingRight:17},children:Z})},animated:!1,type:"card",items:U})]})})},NewGlobalContainerModal=({setNewGlobalContainerVisible:e,newGlobalContainerVisible:t})=>{const{projectId:s}=useParams(),[n,c]=reactExports.useState(!1),l=useWorkingProjectStore(j=>j.workingProject)?.attributes.globalContainers;function o(j){return!l?.some(g=>g.name===j)}const[d]=Form.useForm(),u=()=>{d.submit()},f=({name:j,visibleByDefault:g,position:b})=>{c(!0);let C=[{name:j||"Global Container",visibleByDefault:g===void 0?!0:g,visibleOnPages:[],hiddenOnPages:[],elements:[],useOrientation:!1,cssClass:"globalContainer",landscapePosition:b||"top",portraitPosition:b||"top",landscape:{flow:"row",padding:{value:void 0,unit:"%"},gap:{value:void 0,unit:"%"},align:"center",distribution:"center",border:null,size:{manualMode:!1,value:void 0,unit:"%"},backgroundColor:""},portrait:{flow:"row",padding:{value:void 0,unit:"%"},gap:{value:void 0,unit:"%"},align:"center",distribution:"center",border:null,size:{manualMode:!1,value:void 0,unit:"%"},backgroundColor:""}}];l&&Array.isArray(l)&&(C=[...l,...C]),s&&updateProjectOnBackend({projectId:s,inputData:{globalContainers:C}}).then(()=>{e(!1)}).finally(()=>{c(!1)})};return jsxRuntimeExports.jsx("div",{onKeyUp:j=>{j.key==="Enter"&&u()},children:jsxRuntimeExports.jsx(Modal,{afterClose:()=>d.resetFields(),maskClosable:!1,title:"Add New Global Container",open:!0,onCancel:()=>e(!1),footer:[jsxRuntimeExports.jsx(Button,{onClick:()=>e(!1),children:"Cancel"},"back"),jsxRuntimeExports.jsx(Button,{loading:n,type:"primary",onClick:u,children:"Add global container"},"submit")],children:jsxRuntimeExports.jsxs(Form,{labelCol:{xs:{span:8}},wrapperCol:{xs:{span:14}},form:d,onFinish:f,initialValues:{name:"Global Container",visibleByDefault:!0},scrollToFirstError:!0,children:[jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,label:"Name",name:"name",rules:[{required:!0,message:"This field is required."},()=>({validator(j,g){return g&&o(g)?Promise.resolve():Promise.reject(new Error("Container name must be unique"))}})],children:jsxRuntimeExports.jsx(Input,{})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:"position",label:"Default Position",initialValue:"top",children:jsxRuntimeExports.jsx(Select,{style:{width:"100%"},options:[{value:"top",label:"Top"},{value:"right",label:"Right"},{value:"bottom",label:"Bottom"},{value:"left",label:"Left"}]})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,name:"visibleByDefault",label:"Default Visibility",valuePropName:"checked",children:jsxRuntimeExports.jsx(Switch,{checkedChildren:"Visible",unCheckedChildren:"Hidden"})})]})})})},extractUsedDynamicFromFunction=({functionString:e})=>{const t={variablesUsed:[],statesUsed:[],datasourceUsed:[]};if(!e)return t;const s=e.replace(/\s+/g,"");if(/getVariableByName\(\{name:\s*([^\s'"]+)\}/.test(s))t.variablesUsed="*";else{const a=/getVariableByName\(\{name:\s*['"]([^'"]+)['"]\}\)/g,l=[];let o;for(;(o=a.exec(s))!==null;)l.push(o[1]);t.variablesUsed=[...new Set(l)]}return/window\?.avgatorStudio\?.getStoreValue/g.test(s)&&(t.statesUsed="*"),console.log("extractUsedDynamicFromFunction result",t),t};var dsTabs="newModificatorModal_dsTabs__hs8w7r0",modificatorModal="newModificatorModal_modificatorModal__hs8w7r1",modificatorCreatingEditor="newModificatorModal_modificatorCreatingEditor__hs8w7r2",modificatorEditorsRow="newModificatorModal_modificatorEditorsRow__hs8w7r3",createModificatorColumn="newModificatorModal_createModificatorColumn__hs8w7r4",testModificatorColumn="newModificatorModal_testModificatorColumn__hs8w7r5",argumentTabLabel="newModificatorModal_argumentTabLabel__hs8w7r6";const{Panel}=Collapse,camalize=function(t){return t.trim().toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(s,n)=>n.toUpperCase())},NewModificatorModal=({setNewModificatorVisible,newModificatorVisible})=>{const mdEditId=typeof newModificatorVisible=="number"?newModificatorVisible:null,editMdData=useWorkingProjectStore.getState().workingProject?.attributes.modificators.data.find(e=>e.id===mdEditId),[saveInProgress,setSaveInProgress]=reactExports.useState(!1),{projectId}=useParams(),[editorErrors,setEditorErrors]=reactExports.useState([]),[form]=Form.useForm(),nameVal=Form.useWatch("name",form),defaultTestTabKey="RunFunction",[activeTabKey,setActiveTabKey]=reactExports.useState(defaultTestTabKey),argumentsTestDataVal=Form.useWatch("argumentsTestData",form),{addValueToStore,getValueFromStore}=useStatesStore.getState(),{setVariableNewValue}=useVariablesStore.getState(),editorRef=reactExports.useRef(null),handleEditorDidMount=e=>{editorRef.current=e,e.onKeyDown(t=>{const s=editorRef.current&&editorRef.current.getPosition().lineNumber,n=editorRef.current&&editorRef.current.getModel().getLineCount(),c=editorRef.current.getSelection(),{startLineNumber:a,endLineNumber:l,selectionStartLineNumber:o}=c;(s===1||s===n||a===1||a===n||l===1||l===n||o===1||o===n)&&(t.stopPropagation(),t.preventDefault())})},editorTestResultRef=reactExports.useRef(null),handleEditorTestResultDidMount=e=>{editorTestResultRef.current=e},getNewArgName=()=>`arg${argumentsTestDataVal.length+1}`,handleClearTestData=e=>{try{const t=[...argumentsTestDataVal];t[e].testData="",form.setFieldsValue({argumentsTestData:t})}catch(t){console.log(t)}},runTestFunction=()=>new Promise((resolve,reject)=>{const currentFunctionValue=form.getFieldValue("function");if(!currentFunctionValue){reject(new Error("No function found."));return}const argumentWithTestData=argumentsTestDataVal?.map(e=>{const t=e?.testData;try{return JSON.parse(t)}catch{return t}})||[];try{const userFunction=eval(currentFunctionValue);let res=userFunction(...argumentWithTestData,getVariables(),addValueToStore,getValueFromStore,setVariableNewValue);typeof res=="object"?res=JSON.stringify(res):res=String(res),editorTestResultRef.current?.getModel().setValue(res),resolve(res)}catch(e){console.error("Error when calling finalFunction:",e);const t=`Error when calling ${camalize(nameVal??"")}: ${e?.message}`;editorTestResultRef.current?.getModel().setValue(t),reject(e)}}),RenderExtraTabContent=()=>{if(activeTabKey===defaultTestTabKey)return jsxRuntimeExports.jsxs("div",{style:{paddingRight:17,display:"flex",gap:5},children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{runTestFunction().catch(s=>{console.log(s)})},icon:jsxRuntimeExports.jsx(RefIcon$1,{}),ghost:!0,type:"primary",children:"Run"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{editorTestResultRef.current?.getModel().setValue("")},danger:!0,icon:jsxRuntimeExports.jsx(RefIcon$7,{}),type:"dashed"})]});const e=Number(activeTabKey.split("_")[1]),t=!!argumentsTestDataVal?.[e]?.testData;return jsxRuntimeExports.jsx("div",{style:{paddingRight:17},children:jsxRuntimeExports.jsx(Button,{disabled:!t,onClick:()=>{handleClearTestData(e)},danger:!0,icon:jsxRuntimeExports.jsx(RefIcon$7,{}),type:"dashed"})})};reactExports.useEffect(()=>{if(activeTabKey===defaultTestTabKey)return;const e=Number(activeTabKey.split("_")[1]);argumentsTestDataVal?.[e]||setActiveTabKey(defaultTestTabKey)},[argumentsTestDataVal,activeTabKey]),reactExports.useEffect(()=>{if(!nameVal)return;const e=form.getFieldValue("function");if(!e)return;const t=argumentsTestDataVal?.map(c=>c.name)??[],s=e.split(`
`),n=`function ${camalize(nameVal)}(${t.join(",")}){`;s[0]=n,form.setFieldsValue({function:s.join(`
`)})},[form,nameVal,argumentsTestDataVal]);const tabs=reactExports.useMemo(()=>{let e=[];return!argumentsTestDataVal?.length||argumentsTestDataVal?.some(t=>t===void 0)?e=[]:e=argumentsTestDataVal?.map((t,s)=>({label:jsxRuntimeExports.jsxs("div",{className:argumentTabLabel,children:[jsxRuntimeExports.jsx("small",{children:"test data"}),t.name]}),key:`argument_${s}`,children:jsxRuntimeExports.jsx("div",{className:modificatorCreatingEditor,children:jsxRuntimeExports.jsx(Form.Item,{isListField:!0,preserve:!1,noStyle:!0,name:["argumentsTestData",s,"testData"],validateStatus:"success",normalize:n=>n===void 0?"":n,children:jsxRuntimeExports.jsx(de,{className:"monaco-editor",loading:jsxRuntimeExports.jsx(RefIcon$e,{}),options:{readOnly:!1,automaticLayout:!0,hideCursorInOverviewRuler:!0,matchBrackets:"always",wordWrap:"on",glyphMargin:!1,folding:!0,lineNumbersMinChars:3,minimap:{enabled:!0}},theme:"vs-dark"})},s)})})),[{label:"Test Function",key:"RunFunction",children:jsxRuntimeExports.jsx("div",{className:modificatorCreatingEditor,children:jsxRuntimeExports.jsx(de,{value:"",onMount:handleEditorTestResultDidMount,className:"monaco-editor",language:"javascript",loading:jsxRuntimeExports.jsx(RefIcon$e,{}),options:{readOnly:!0,automaticLayout:!0,hideCursorInOverviewRuler:!0,matchBrackets:"always",wordWrap:"on",glyphMargin:!1,folding:!0,lineNumbersMinChars:3,minimap:{enabled:!0}},theme:"vs-dark",defaultLanguage:"javascript"})},"RunFunctionKey")},...e??[]]},[argumentsTestDataVal]),handleOk=()=>{form.submit()},onFinish=({name:e,function:t,argumentsTestData:s})=>{setSaveInProgress(!0);const n=extractUsedDynamicFromFunction({functionString:t}),c={name:e||"New function",function:t,dynamicDataUsed:n};mdEditId?updateModificator({...c},mdEditId).then(()=>{setNewModificatorVisible(!1)}):projectId&&createModificator(projectId,{...c,argumentsTestData:s}).then(()=>{setNewModificatorVisible(!1)}),setSaveInProgress(!1)},initialFormValues=editMdData?{name:editMdData.attributes.name,function:editMdData.attributes.function,argumentsTestData:editMdData.attributes.function.substring(editMdData.attributes.function.indexOf("(")+1,editMdData.attributes.function.indexOf(")")).trim()===""?[]:editMdData.attributes.function.substring(editMdData.attributes.function.indexOf("(")+1,editMdData.attributes.function.indexOf(")")).split(",").map(e=>({name:e.trim(),testData:null}))}:{name:"My function",function:[`function ${camalize("My function")}(){`,"//write your code here","","}"].join(`
`),argumentsTestData:[]},ErrorIndicator=()=>editorErrors.length>0?jsxRuntimeExports.jsx(Popover,{trigger:"hover",title:"Validation error",content:"Function contains errors",children:jsxRuntimeExports.jsx(RefIcon$d,{style:{fontSize:14,margin:"0 0 0 5px",color:"red",cursor:"help"}})}):null,legend=[{name:"Navigate",content:`
    //navigate - function to navigate by url path
    window?.avgatorStudio?.navigate("/path")
    //navigate - function to navigate by page name
    window?.avgatorStudio?.navigateToPage("my page name")
    `},{name:"Events",content:`
    //publishAnalog - function to publish analog signal
    window?.avgatorStudio?.publishAnalog({ signalName: "signalName", value: 1 })
    //publishDigital - function to publish digital signal
    window?.avgatorStudio?.publishDigital({ signalName: "signalName", value: true })
    //publishSerial - function to publish serial signal
    window?.avgatorStudio?.publishSerial({ signalName: "signalName", value: "value" })
    //getInstantDigitalFb - get instant digital feedback value
    window?.avgatorStudio?.getInstantDigitalFb({ signalName: "signalName", defaultValue: false })
    //getInstantAnalogFb - get instant analog feedback value
    window?.avgatorStudio?.getInstantAnalogFb({ signalName: "signalName", defaultValue: 0 })
    //getInstantSerialFb - get instant serial feedback value
    window?.avgatorStudio?.getInstantSerialFb({ signalName: "signalName", defaultValue: "text" })
      `},{name:"Get Datasource",content:`
    //getDatasource - function to get datasource value by uid. if no uid provided, returns all datasources
    const dataSource = window?.avgatorStudio?.getDatasource({ uid: '1234' });
      `},{name:"Variables",content:`
      //getVariableByName - function to get variable value by name
      const variableValue = window?.avgatorStudio?.getVariableByName({ name: 'variableName' });
      
      //setVariableByName - function to set variable value by name
      window?.avgatorStudio?.setVariableByName({ name: 'variableName', value: 'newValue' });
      `},{name:"Audio control",content:`
      //audioControl - function to control audio
	  window?.avgatorStudio?.audioControl({
	  value: true, //true to play, false to stop. Any type of value will be converted to boolean
	  audioLoop: false,
	  audioSrcTargetByName:'audio_file_name.mp3',
	  audioVolumePercent: 100,
	  });
      `}];return jsxRuntimeExports.jsx(Modal,{className:modificatorModal,destroyOnClose:!0,maskClosable:!1,centered:!0,title:"Add new function",open:!0,onCancel:()=>setNewModificatorVisible(!1),onOk:handleOk,footer:[jsxRuntimeExports.jsx(Button,{onClick:()=>setNewModificatorVisible(!1),children:"Cancel"},"back"),jsxRuntimeExports.jsx(Button,{disabled:editorErrors.length>0,loading:saveInProgress,type:"primary",onClick:()=>{form.submit()},children:editorErrors.length>0?"Function contains errors":"Save"},"submit")],children:jsxRuntimeExports.jsxs(Form,{onFinish,className:"modificatorForm",form,initialValues:initialFormValues,scrollToFirstError:!0,children:[jsxRuntimeExports.jsx(Collapse,{destroyInactivePanel:!1,expandIcon:({isActive:e})=>e?jsxRuntimeExports.jsx(RefIcon$g,{}):jsxRuntimeExports.jsx(RefIcon$h,{}),defaultActiveKey:["form"],ghost:!0,children:jsxRuntimeExports.jsx(Panel,{forceRender:!0,header:"Function Settings",children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:20,alignItems:"stretch",height:"100%",position:"relative"},children:[jsxRuntimeExports.jsxs("div",{style:{flex:1},children:[jsxRuntimeExports.jsx(Form.Item,{colon:!1,required:!1,label:"Name",name:"name",rules:[{required:!0,message:"This field is required."},()=>({validator(e,t){return Promise.all([isUnique({input:t,searchArray:[]}),containsOnlyLatinLettersAndNumbers(t),noFirstCharNumber(t||"")])}})],children:jsxRuntimeExports.jsx(Input,{spellCheck:!1})}),jsxRuntimeExports.jsx(Divider,{plain:!0,orientationMargin:160,orientation:"left",children:"Function Arguments"}),jsxRuntimeExports.jsx(Form.List,{name:"argumentsTestData",children:(e,{add:t,remove:s})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e.map((n,c)=>{const{key:a,...l}=n;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:10,alignItems:"flex-start",marginBottom:15},children:[jsxRuntimeExports.jsx(Form.Item,{...l,label:`Argument #${c+1}`,name:[n.name,"name"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"This field is required."},()=>({validator(o,d){return Promise.all([isUnique({input:d,searchArray:argumentsTestDataVal.filter((u,f)=>f!==c)||[],searchKey:"name"}),noSpaces(d),containsOnlyLatinLettersAndNumbers(d),noFirstCharNumber(d||"")])}})],style:{marginBottom:0,flex:1},children:jsxRuntimeExports.jsx(Input,{spellCheck:!1,autoFocus:!0})},a),jsxRuntimeExports.jsx(RefIcon$i,{style:{marginTop:10},onClick:()=>s(n.name)})]},n.key)}),jsxRuntimeExports.jsx(Form.Item,{label:" ",colon:!1,children:jsxRuntimeExports.jsx(Button,{type:"dashed",onClick:()=>t({name:getNewArgName(),testData:void 0}),style:{width:"100%"},block:!0,icon:jsxRuntimeExports.jsx(RefIcon$j,{}),children:"Add Function Argument"})})]})})]}),jsxRuntimeExports.jsx("div",{style:{minWidth:"50%",width:"50%",position:"relative",overflow:"auto",translate:"0 -10px"},children:jsxRuntimeExports.jsx(Collapse,{ghost:!0,accordion:!0,children:legend.map(e=>jsxRuntimeExports.jsx(Panel,{header:e.name,children:jsxRuntimeExports.jsx(k,{wrapLongLines:!0,lineNumberContainerStyle:{display:"none"},lineNumberStyle:{display:"none"},style:{position:"relative",maxWidth:"100% !important",borderRadius:"3px"},language:"JavaScript",theme:"AtomOneDark",copy:!1,suppressContentWarning:!0,children:e.content})},e.name))})})]})},"form")}),jsxRuntimeExports.jsxs("div",{className:modificatorEditorsRow,children:[jsxRuntimeExports.jsxs("div",{className:createModificatorColumn,children:[jsxRuntimeExports.jsxs(Divider,{plain:!0,orientationMargin:17,style:{paddingRight:17,marginBottom:9.5},orientation:"left",children:["Function Body editor",jsxRuntimeExports.jsx(ErrorIndicator,{})]}),jsxRuntimeExports.jsx("div",{className:modificatorModal,children:jsxRuntimeExports.jsx(Form.Item,{noStyle:!0,name:"function",dependencies:["name"],validateStatus:editorErrors.length?"error":void 0,rules:[()=>({validator(e,t){return editorErrors.length?Promise.reject():Promise.resolve()}})],normalize:e=>e===void 0?"":e,children:jsxRuntimeExports.jsx(de,{onMount:handleEditorDidMount,className:"monaco-editor",language:"javascript",loading:jsxRuntimeExports.jsx(RefIcon$e,{}),options:{readOnly:!1,automaticLayout:!0,hideCursorInOverviewRuler:!0,matchBrackets:"always",wordWrap:"on",glyphMargin:!1,folding:!0,lineNumbersMinChars:3,minimap:{enabled:!0},showUnused:!0},theme:"vs-dark",defaultLanguage:"javascript",onValidate:e=>{setEditorErrors(e)}})})})]}),jsxRuntimeExports.jsx("div",{className:testModificatorColumn,children:jsxRuntimeExports.jsx(Tabs,{className:dsTabs,activeKey:activeTabKey,onChange:e=>{setActiveTabKey(e)},tabBarExtraContent:{right:jsxRuntimeExports.jsx(RenderExtraTabContent,{})},animated:!1,type:"card",items:tabs})})]})]})})},NewVariableModal=({setNewVariableModalVisible:e,newVariableModalVisible:t})=>{const s=t==="parameter",{projectId:n}=useParams(),{pageId:c}=useParams(),a=useGetActivePageData({pageId:c}),l=useWorkingProjectStore(F=>F.workingProject),{variables:o=[]}=l?.attributes??{},{parameters:d=[]}=a?.attributes??{},[u]=Form.useForm(),f=()=>{u.submit()},[j,g]=reactExports.useState(!1),b=async({type:F,defaultValue_boolean:T,defaultValue_number:G,defaultValue_string:M,name:S,joinValueSetter_signal_fb:L,formatValueFunctionUid:H})=>{let x={name:S,type:F,joinValueSetter_signal_fb:L,formatValueFunctionUid:H};switch(x.type){case"boolean":x={...x,defaultValue:T==="true"};break;case"string":x={...x,defaultValue:M};break;case"number":x={...x,defaultValue:G};break}g(!0);const i=x;try{await changeVariableOrParameter({actionType:"create",variableData:i,projectId:n,pageId:c}),u.resetFields(),e(null),api.success("Successfully created")}catch(r){console.log("Error creating",r),api.error(r)}finally{g(!1)}},v={name:s?"newParameter":"newVariable",type:"boolean",defaultValue_boolean:"false",defaultValue_number:0,defaultValue_string:"",joinValueSetter_signal_fb:"",formatValueFunctionUid:void 0},C={project:o,parameter:d},[R,A]=reactExports.useState(v),P=reactExports.useMemo(()=>s?"Create Subpage Parameter":"Create Project Variable",[s]),[O,V]=reactExports.useState(!1),q=reactExports.useMemo(()=>{const F=useFunctionsStore.getState().formatterFunctions[R.type??"boolean"];return F?.length?F.map(T=>{const{uid:G,name:M}=T;return{label:M,value:G}}):[]},[R.type]);return t?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Modal,{maskClosable:!1,title:P,open:!0,width:"50vw",onOk:f,onCancel:()=>e(null),footer:[jsxRuntimeExports.jsx(Button,{onClick:()=>e(null),children:"Cancel"},"back"),jsxRuntimeExports.jsxs(Button,{loading:j,type:"primary",onClick:f,children:["Create ",s?"Parameter":"Variable"]},"submit")],children:jsxRuntimeExports.jsxs(Form,{onValuesChange:F=>A({...R,...F}),labelCol:{xs:{span:9}},wrapperCol:{xs:{span:12}},form:u,initialValues:v,onFinish:b,scrollToFirstError:!0,children:[jsxRuntimeExports.jsx(Form.Item,{colon:!1,name:"name",label:"Name",rules:[{required:!0,message:"This field is required."},()=>({validator(F,T){return Promise.all([isUnique({input:T,searchArray:C[t],searchKey:"name"}),noSpaces(T),containsOnlyLatinLettersAndNumbers(T),noFirstCharNumber(T)])}})],children:jsxRuntimeExports.jsx(Input,{spellCheck:!1})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,name:"type",label:"Type",rules:[{required:!1}],children:jsxRuntimeExports.jsxs(Radio.Group,{className:"radioFullWidth",buttonStyle:"solid",children:[jsxRuntimeExports.jsx(Radio.Button,{value:"boolean",children:"Boolean"}),jsxRuntimeExports.jsx(Radio.Button,{value:"string",children:"String"}),jsxRuntimeExports.jsx(Radio.Button,{value:"number",children:"Number"})]})}),R.type==="string"&&jsxRuntimeExports.jsx(Form.Item,{colon:!1,name:"defaultValue_string",label:"Default Value",children:jsxRuntimeExports.jsx(Input,{spellCheck:!1})}),R.type==="boolean"&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Form.Item,{colon:!1,name:"defaultValue_boolean",label:"Default Value",children:jsxRuntimeExports.jsx(Segmented,{block:!0,options:["true","false"]})})}),R.type==="number"&&jsxRuntimeExports.jsx(Form.Item,{colon:!1,name:"defaultValue_number",label:"Default Value",rules:[()=>({validator(F,T){return Promise.all([notEmpty(T),containsOnlyNumbers(T)])}})],children:jsxRuntimeExports.jsx(Input,{style:{width:"100%"}})}),!s&&R.type&&jsxRuntimeExports.jsx(Form.Item,{extra:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Use signal feedback to modify variable"}),colon:!1,name:"joinValueSetter_signal_fb",label:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Set value Signal "}),rules:[()=>({validator(F,T){return noSpaces(T)}})],children:jsxRuntimeExports.jsx(Input,{suffix:jsxRuntimeExports.jsx("div",{style:{marginRight:-5,marginTop:-2},children:jsxRuntimeExports.jsx(RenderActionTag,{style:{margin:0},type:R.type,sub:"FB"})}),spellCheck:!1})}),jsxRuntimeExports.jsx(Form.Item,{colon:!1,label:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),children:jsxRuntimeExports.jsx(Checkbox,{checked:O,onChange:F=>V(F.target.checked),children:"Format output value"})}),O&&jsxRuntimeExports.jsx(Form.Item,{colon:!1,name:"formatValueFunctionUid",label:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Format value with function "}),children:jsxRuntimeExports.jsx(Select,{allowClear:!0,style:{width:"100%",minWidth:"250px"},placeholder:"Select formatter function",showSearch:!0,filterOption:(F,T)=>T.label.toLowerCase().includes(F.toLowerCase()),options:q})})]})})}):null};var dist={},ga4={},gtag={},hasRequiredGtag;function requireGtag(){return hasRequiredGtag||(hasRequiredGtag=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){for(var c=arguments.length,a=new Array(c),l=0;l<c;l++)a[l]=arguments[l];if(typeof window<"u"){var o;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(o=window).gtag.apply(o,a)}},s=t;e.default=s}(gtag)),gtag}var format={},hasRequiredFormat;function requireFormat(){return hasRequiredFormat||(hasRequiredFormat=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function s(o){return o.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(d,u,f){return u>0&&u+d.length!==f.length&&d.search(t)>-1&&f.charAt(u-2)!==":"&&(f.charAt(u+d.length)!=="-"||f.charAt(u-1)==="-")&&f.charAt(u-1).search(/[^\s-]/)<0?d.toLowerCase():d.substr(1).search(/[A-Z]|\../)>-1?d:d.charAt(0).toUpperCase()+d.substr(1)})}function n(o){return typeof o=="string"&&o.indexOf("@")!==-1}var c="REDACTED (Potential Email Address)";function a(o){return n(o)?(console.warn("This arg looks like an email address, redacting."),c):o}function l(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=o||"";return d&&(f=s(o)),u&&(f=a(f)),f}}(format)),format}var hasRequiredGa4;function requireGa4(){return hasRequiredGa4||(hasRequiredGa4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GA4=void 0;var t=o(requireGtag()),s=o(requireFormat()),n=["eventCategory","eventAction","eventLabel","eventValue","hitType"],c=["title","location"],a=["page","hitType"],l=["action","category","label","value","nonInteraction","transport"];function o(x){return x&&x.__esModule?x:{default:x}}function d(x,i){if(x==null)return{};var r=u(x,i),m,p;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(x);for(p=0;p<h.length;p++)m=h[p],!(i.indexOf(m)>=0)&&Object.prototype.propertyIsEnumerable.call(x,m)&&(r[m]=x[m])}return r}function u(x,i){if(x==null)return{};var r={},m=Object.keys(x),p,h;for(h=0;h<m.length;h++)p=m[h],!(i.indexOf(p)>=0)&&(r[p]=x[p]);return r}function f(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f=function(r){return typeof r}:f=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},f(x)}function j(x){return v(x)||b(x)||O(x)||g()}function g(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}function v(x){if(Array.isArray(x))return V(x)}function C(x,i){var r=Object.keys(x);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(x);i&&(m=m.filter(function(p){return Object.getOwnPropertyDescriptor(x,p).enumerable})),r.push.apply(r,m)}return r}function R(x){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?C(Object(r),!0).forEach(function(m){S(x,m,r[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(m){Object.defineProperty(x,m,Object.getOwnPropertyDescriptor(r,m))})}return x}function A(x,i){return F(x)||q(x,i)||O(x,i)||P()}function P(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(x,i){if(x){if(typeof x=="string")return V(x,i);var r=Object.prototype.toString.call(x).slice(8,-1);if(r==="Object"&&x.constructor&&(r=x.constructor.name),r==="Map"||r==="Set")return Array.from(x);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(x,i)}}function V(x,i){(i==null||i>x.length)&&(i=x.length);for(var r=0,m=new Array(i);r<i;r++)m[r]=x[r];return m}function q(x,i){var r=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(r!=null){var m=[],p=!0,h=!1,_,I;try{for(r=r.call(x);!(p=(_=r.next()).done)&&(m.push(_.value),!(i&&m.length===i));p=!0);}catch(N){h=!0,I=N}finally{try{!p&&r.return!=null&&r.return()}finally{if(h)throw I}}return m}}function F(x){if(Array.isArray(x))return x}function T(x,i){if(!(x instanceof i))throw new TypeError("Cannot call a class as a function")}function G(x,i){for(var r=0;r<i.length;r++){var m=i[r];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(x,m.key,m)}}function M(x,i,r){return i&&G(x.prototype,i),x}function S(x,i,r){return i in x?Object.defineProperty(x,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):x[i]=r,x}var L=function(){function x(){var i=this;T(this,x),S(this,"reset",function(){i.isInitialized=!1,i._testMode=!1,i._currentMeasurementId,i._hasLoadedGA=!1,i._isQueuing=!1,i._queueGtag=[]}),S(this,"_gtag",function(){for(var r=arguments.length,m=new Array(r),p=0;p<r;p++)m[p]=arguments[p];i._testMode||i._isQueuing?i._queueGtag.push(m):t.default.apply(void 0,m)}),S(this,"_loadGA",function(r,m){if(!(typeof window>"u"||typeof document>"u")&&!i._hasLoadedGA){var p=document.createElement("script");p.async=!0,p.src="https://www.googletagmanager.com/gtag/js?id=".concat(r),m&&p.setAttribute("nonce",m),document.body.appendChild(p),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},i._hasLoadedGA=!0}}),S(this,"_toGtagOptions",function(r){if(r){var m={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},p=Object.entries(r).reduce(function(h,_){var I=A(_,2),N=I[0],$=I[1];return m[N]?h[m[N]]=$:h[N]=$,h},{});return p}}),S(this,"initialize",function(r){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!r)throw new Error("Require GA_MEASUREMENT_ID");var p=typeof r=="string"?[{trackingId:r}]:r;i._currentMeasurementId=p[0].trackingId;var h=m.gaOptions,_=m.gtagOptions,I=m.legacyDimensionMetric,N=I===void 0?!0:I,$=m.nonce,B=m.testMode,z=B===void 0?!1:B;if(i._testMode=z,z||i._loadGA(i._currentMeasurementId,$),i.isInitialized||(i._gtag("js",new Date),p.forEach(function(J){var w=i._appendCustomMap(R(R(R({send_page_view:!1},i._toGtagOptions(R(R({},h),J.gaOptions))),_),J.gtagOptions),N);i._gtag("config",J.trackingId,w)})),i.isInitialized=!0,!z){var W=j(i._queueGtag);for(i._queueGtag=[],i._isQueuing=!1;W.length;){var X=W.shift();i._gtag.apply(i,j(X)),X[0]==="get"&&(i._isQueuing=!0)}}}),S(this,"set",function(r){if(!r){console.warn("`fieldsObject` is required in .set()");return}if(f(r)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(r).length===0&&console.warn("empty `fieldsObject` given to .set()"),i._gaCommand("set",r)}),S(this,"_gaCommandSendEvent",function(r,m,p,h,_){i._gtag("event",m,R(R({event_category:r,event_label:p,value:h},_&&{non_interaction:_.nonInteraction}),i._toGtagOptions(_)))}),S(this,"_gaCommandSendEventParameters",function(){for(var r=arguments.length,m=new Array(r),p=0;p<r;p++)m[p]=arguments[p];if(typeof m[0]=="string")i._gaCommandSendEvent.apply(i,j(m.slice(1)));else{var h=m[0],_=h.eventCategory,I=h.eventAction,N=h.eventLabel,$=h.eventValue;h.hitType;var B=d(h,n);i._gaCommandSendEvent(_,I,N,$,B)}}),S(this,"_gaCommandSendTiming",function(r,m,p,h){i._gtag("event","timing_complete",{name:m,value:p,event_category:r,event_label:h})}),S(this,"_gaCommandSendPageview",function(r,m){if(m&&Object.keys(m).length){var p=i._toGtagOptions(m),h=p.title,_=p.location,I=d(p,c);i._gtag("event","page_view",R(R(R(R({},r&&{page_path:r}),h&&{page_title:h}),_&&{page_location:_}),I))}else r?i._gtag("event","page_view",{page_path:r}):i._gtag("event","page_view")}),S(this,"_gaCommandSendPageviewParameters",function(){for(var r=arguments.length,m=new Array(r),p=0;p<r;p++)m[p]=arguments[p];if(typeof m[0]=="string")i._gaCommandSendPageview.apply(i,j(m.slice(1)));else{var h=m[0],_=h.page;h.hitType;var I=d(h,a);i._gaCommandSendPageview(_,I)}}),S(this,"_gaCommandSend",function(){for(var r=arguments.length,m=new Array(r),p=0;p<r;p++)m[p]=arguments[p];var h=typeof m[0]=="string"?m[0]:m[0].hitType;switch(h){case"event":i._gaCommandSendEventParameters.apply(i,m);break;case"pageview":i._gaCommandSendPageviewParameters.apply(i,m);break;case"timing":i._gaCommandSendTiming.apply(i,j(m.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(h));break;default:console.warn("Send command doesn't exist: ".concat(h))}}),S(this,"_gaCommandSet",function(){for(var r=arguments.length,m=new Array(r),p=0;p<r;p++)m[p]=arguments[p];typeof m[0]=="string"&&(m[0]=S({},m[0],m[1])),i._gtag("set",i._toGtagOptions(m[0]))}),S(this,"_gaCommand",function(r){for(var m=arguments.length,p=new Array(m>1?m-1:0),h=1;h<m;h++)p[h-1]=arguments[h];switch(r){case"send":i._gaCommandSend.apply(i,p);break;case"set":i._gaCommandSet.apply(i,p);break;default:console.warn("Command doesn't exist: ".concat(r))}}),S(this,"ga",function(){for(var r=arguments.length,m=new Array(r),p=0;p<r;p++)m[p]=arguments[p];if(typeof m[0]=="string")i._gaCommand.apply(i,m);else{var h=m[0];i._gtag("get",i._currentMeasurementId,"client_id",function(_){i._isQueuing=!1;var I=i._queueGtag;for(h({get:function(B){return B==="clientId"?_:B==="trackingId"?i._currentMeasurementId:B==="apiVersion"?"1":void 0}});I.length;){var N=I.shift();i._gtag.apply(i,j(N))}}),i._isQueuing=!0}return i.ga}),S(this,"event",function(r,m){if(typeof r=="string")i._gtag("event",r,i._toGtagOptions(m));else{var p=r.action,h=r.category,_=r.label,I=r.value,N=r.nonInteraction,$=r.transport,B=d(r,l);if(!h||!p){console.warn("args.category AND args.action are required in event()");return}var z={hitType:"event",eventCategory:(0,s.default)(h),eventAction:(0,s.default)(p)};_&&(z.eventLabel=(0,s.default)(_)),typeof I<"u"&&(typeof I!="number"?console.warn("Expected `args.value` arg to be a Number."):z.eventValue=I),typeof N<"u"&&(typeof N!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):z.nonInteraction=N),typeof $<"u"&&(typeof $!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf($)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),z.transport=$)),Object.keys(B).filter(function(W){return W.substr(0,9)==="dimension"}).forEach(function(W){z[W]=B[W]}),Object.keys(B).filter(function(W){return W.substr(0,6)==="metric"}).forEach(function(W){z[W]=B[W]}),i._gaCommand("send",z)}}),S(this,"send",function(r){i._gaCommand("send",r)}),S(this,"pageview",function(r,m,p){var h=r?.trim();if(h===""){console.warn("path cannot be an empty string in .pageview()");return}i._gaCommand("send","pageview",h,{title:p})}),this.reset()}return M(x,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}},{key:"_appendCustomMap",value:function(r){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!m)return r;r.custom_map||(r.custom_map={});for(var p=1;p<=200;p++)r.custom_map["dimension".concat(p)]||(r.custom_map["dimension".concat(p)]="dimension".concat(p)),r.custom_map["metric".concat(p)]||(r.custom_map["metric".concat(p)]="metric".concat(p));return r}},{key:"outboundLink",value:function(r,m){var p=r.label;if(typeof m!="function"){console.warn("hitCallback function is required");return}if(!p){console.warn("args.label is required in outboundLink()");return}var h={hitType:"event",eventCategory:"Outbound",eventAction:"Click",eventLabel:(0,s.default)(p)},_=!1,I=function(){_=!0,m()},N=setTimeout(I,250),$=function(){clearTimeout(N),_||m()};h.hitCallback=$,this._gaCommand("send",h)}}]),x}();e.GA4=L;var H=new L;e.default=H}(ga4)),ga4}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(e){function t(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(u){return typeof u}:t=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t(o)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ReactGAImplementation=void 0;var s=c(requireGa4());function n(o){if(typeof WeakMap!="function")return null;var d=new WeakMap,u=new WeakMap;return(n=function(j){return j?u:d})(o)}function c(o,d){if(o&&o.__esModule)return o;if(o===null||t(o)!=="object"&&typeof o!="function")return{default:o};var u=n(d);if(u&&u.has(o))return u.get(o);var f={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in o)if(g!=="default"&&Object.prototype.hasOwnProperty.call(o,g)){var b=j?Object.getOwnPropertyDescriptor(o,g):null;b&&(b.get||b.set)?Object.defineProperty(f,g,b):f[g]=o[g]}return f.default=o,u&&u.set(o,f),f}var a=s.GA4;e.ReactGAImplementation=a;var l=s.default;e.default=l}(dist)),dist}var distExports=requireDist();const ReactGA=getDefaultExportFromCjs(distExports),usePushDataToLive=({workingProject:e})=>{const t=reactExports.useRef(),s=reactExports.useRef();reactExports.useEffect(()=>{clearTimeout(t.current),clearTimeout(s.current);const n=c=>{const{type:a}=c;a==="CLAIM"&&(clearTimeout(s.current),s.current=setTimeout(()=>{postMessage({type:"LIVE",payload:e})},300))};return addListener(n),t.current=setTimeout(()=>{console.log("Updated project sent to live"),postMessage({type:"LIVE",payload:e})},500),()=>{removeListener(n)}},[e])},RenderConsoleButton=React.memo(()=>{const e=useMainMenuStore.getState().setMainMenuData,t=useMainMenuStore(a=>a.isConsoleOpen),n=useMainMenuStore(a=>a.consoleLogs)?.length??0,c=n>100?"100+":n;return jsxRuntimeExports.jsx("div",{"data-counter":c,className:c?"customBadge":"",children:jsxRuntimeExports.jsx(Tooltip,{title:"Show/Hide Console",children:jsxRuntimeExports.jsx(Button,{onFocus:a=>a.target.blur(),type:t?"primary":"default",onClick:()=>{e({isConsoleOpen:!t})},icon:jsxRuntimeExports.jsx(RefIcon$6,{})})})})});var topBarContainer="renderAppTopBar_topBarContainer__1ey9s4v0",tabsRow="renderAppTopBar_tabsRow__1ey9s4v1",pagesTabsArea="renderAppTopBar_pagesTabsArea__1ey9s4v2",pagesTabsAreaInner="renderAppTopBar_pagesTabsAreaInner__1ey9s4v3",pagesTabsHolder="renderAppTopBar_pagesTabsHolder__1ey9s4v4",envButtonArea="renderAppTopBar_envButtonArea__1ey9s4v5",tabsAntComponent="renderAppTopBar_tabsAntComponent__1ey9s4v6",tabContent="renderAppTopBar_tabContent__1ey9s4v7",tabIcon="renderAppTopBar_tabIcon__1ey9s4v8",tabLabel$1="renderAppTopBar_tabLabel__1ey9s4v9",tabSubIndicator="renderAppTopBar_tabSubIndicator__1ey9s4va",saveIndicator={saved:"renderAppTopBar_saveIndicator_saved__1ey9s4vc renderAppTopBar_tabUnsaved__1ey9s4vb",unsaved:"renderAppTopBar_saveIndicator_unsaved__1ey9s4vd renderAppTopBar_tabUnsaved__1ey9s4vb"},tabClose="renderAppTopBar_tabClose__1ey9s4ve",envSelectorWrapper="renderAppTopBar_envSelectorWrapper__1ey9s4vf",envLiveStartButton="renderAppTopBar_envLiveStartButton__1ey9s4vg",envSelectorButton="renderAppTopBar_envSelectorButton__1ey9s4vh",topBarControlsRow="renderAppTopBar_topBarControlsRow__1ey9s4vj",viewLayoutContentBox="renderAppTopBar_viewLayoutContentBox__1ey9s4vk",viewLayoutContentRow="renderAppTopBar_viewLayoutContentRow__1ey9s4vl",testDeviceRadioItem="renderAppTopBar_testDeviceRadioItem__1ey9s4vn",secondTabsRow="renderAppTopBar_secondTabsRow__1ey9s4vo",connectionManagerButton="renderAppTopBar_connectionManagerButton__1ey9s4vp";const EnvSelector=({setEditProjectModalId:e,projectId:t})=>{const s=useWorkingProjectStore(d=>d.workingProject?.attributes.env),n=useWorkingProjectStore(d=>d.workingProject?.attributes.selectedEnv),c=reactExports.useMemo(()=>n?s?.find(d=>d.envId===n)?.envName??"Default":"Default",[s,n]),a=({envUidToSelect:d})=>{const u=useWorkingProjectStore.getState().updateProjectWithHistory;u({selectedEnv:d},!1)},l=reactExports.useMemo(()=>s?.length?s.map(u=>({key:u.envId,label:jsxRuntimeExports.jsx("div",{onClick:()=>a({envUidToSelect:u.envId}),children:u.envName}),icon:jsxRuntimeExports.jsx(RefIcon$k,{})})):[],[s]),o=[{key:"default",label:jsxRuntimeExports.jsx("div",{onClick:()=>a({envUidToSelect:""}),children:"Default"}),icon:jsxRuntimeExports.jsx(RefIcon$k,{})},...l??[],{key:"env divider",label:jsxRuntimeExports.jsx(Divider,{style:{margin:0}})},{key:"env settings",label:jsxRuntimeExports.jsx("div",{onClick:()=>e(Number(t)),children:"Project ENV settings"}),icon:jsxRuntimeExports.jsx(RefIcon$l,{})}];return jsxRuntimeExports.jsxs("div",{className:envSelectorWrapper,children:[jsxRuntimeExports.jsx(Dropdown,{className:"GlobalEnvSelector",dropdownRender:()=>jsxRuntimeExports.jsx(Menu,{items:o,style:{whiteSpace:"nowrap"}}),trigger:["click"],children:jsxRuntimeExports.jsxs("div",{className:envSelectorButton,children:[jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx(RefIcon$k,{style:{marginRight:5}}),c]}),jsxRuntimeExports.jsx(RefIcon$m,{})]})}),jsxRuntimeExports.jsx(Tooltip,{placement:"bottomRight",title:"Open Project LIVE Preview",children:jsxRuntimeExports.jsx("a",{href:getProjectLiveUrl(),target:"_blank",rel:"noreferrer",className:envLiveStartButton,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 28 28",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M25 9.5v5A7.5 7.5 0 0 0 14.5 25H6.25A3.25 3.25 0 0 1 3 21.75V9.5zM21.75 3A3.25 3.25 0 0 1 25 6.25V8H3V6.25A3.25 3.25 0 0 1 6.25 3zM20.5 27a6.5 6.5 0 1 0 0-13a6.5 6.5 0 0 0 0 13m-.902-9.404l4.032 2.275a.72.72 0 0 1 0 1.258l-4.032 2.274c-.49.277-1.098-.072-1.098-.629v-4.548c0-.557.609-.905 1.098-.63"})})})})]})},HeaderTitle=({projectName:e,isProfilePage:t})=>{const{projectId:s}=useParams(),n=useUserStore(a=>a.user?.email);let c="My Projects";return s?c=e||jsxRuntimeExports.jsx(RefIcon$e,{}):t&&(c=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(RefIcon$n,{}),n]})),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:c})},LayoutView=React.memo(()=>{const e=()=>{const{displayGuidePos:t,showGuides:s,lockGuides:n}=useEnvStore(o=>o.guidesOptions),c=useEnvStore.getState().updateEnvGuidesOptions,a=useWorkingProjectStore(o=>o.workingProject?.attributes.guides),l=!!a?.horizontal?.length||!!a?.vertical?.length;return jsxRuntimeExports.jsxs("div",{className:viewLayoutContentBox,children:[jsxRuntimeExports.jsxs("div",{className:viewLayoutContentRow,children:[jsxRuntimeExports.jsx(Switch,{size:"small",checked:s,onChange:()=>{c({showGuides:!s})}}),"Show Guides"]}),jsxRuntimeExports.jsxs("div",{className:viewLayoutContentRow,children:[jsxRuntimeExports.jsx(Switch,{disabled:!s,size:"small",checked:t,onChange:()=>{c({displayGuidePos:!t})}}),"Display Guides Positions"]}),jsxRuntimeExports.jsxs("div",{className:viewLayoutContentRow,children:[jsxRuntimeExports.jsx(Switch,{size:"small",checked:n,onChange:()=>{c({lockGuides:!n})}}),"Lock Guides"]}),jsxRuntimeExports.jsx(Divider,{style:{margin:"5px 0"}}),jsxRuntimeExports.jsx(Button,{disabled:!l,icon:jsxRuntimeExports.jsx(RefIcon$b,{}),onClick:()=>{handleRemoveGuides()},children:"Delete all Guides"})]})};return jsxRuntimeExports.jsx(Popover,{placement:"bottomLeft",content:jsxRuntimeExports.jsx(e,{}),trigger:"hover",children:jsxRuntimeExports.jsx(Button,{onFocus:t=>t.target.blur(),onClick:()=>{},icon:jsxRuntimeExports.jsx("svg",{style:{translate:"-0.3em 0.1em"},xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 14 14",children:jsxRuntimeExports.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5.5h-11a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1m-12 3h13m-9 0v10m9-5h-9"})}),children:"View"})})}),projectTabKey="mainProjectTab",PagesTabs=()=>{const{pageId:e}=useParams(),{projectId:t}=useParams(),s=useNavigate(),n=useWorkingProjectStore(v=>v.tabs),c=useWorkingProjectStore(v=>v.pagesHashes),a=useWorkingProjectStore(v=>v.workingProject?.attributes.pages.data)??[],l=useWorkingProjectStore(v=>v.currentProjectHash),o=useWorkingProjectStore(v=>v.savedProjectHash),d=l===o,{removeTab:u}=useWorkingProjectStore.getState();function f(v){async function C(){const{lastUseProjectTabKey:R=""}=useMainMenuStore.getState(),A=R?`/${R}`:"";s(`/projects/${t}${A}`)}e===v&&C().then(()=>{u(v)}),u(v)}const j=reactExports.useCallback(v=>{const{lastUseProjectTabKey:C}=useMainMenuStore.getState(),A=v===projectTabKey?(O=>O?`/${O}`:"")(C):"",P=v===projectTabKey?`/projects/${t}`:`/projects/${t}/page/${v}`;s(P+A)},[s,t]),g=[];for(const v of n){const C=a.find(q=>String(q.id)===v.pageId);if(!C)continue;const R=c.find(q=>String(q.pageId)===String(v.pageId)),{name:A,isSubpage:P,isStatic:O}=C.attributes,V=R?R.currentHash!==R.savedHash:!1;g.push({label:jsxRuntimeExports.jsxs("div",{className:tabContent,children:[jsxRuntimeExports.jsx("div",{className:tabIcon,children:jsxRuntimeExports.jsx(PageLayoutIcon,{style:{height:"auto",width:"1em"},isStatic:O})}),jsxRuntimeExports.jsx("div",{className:tabSubIndicator,children:P?"sub":null}),jsxRuntimeExports.jsx("div",{className:saveIndicator[V?"unsaved":"saved"]}),jsxRuntimeExports.jsx("div",{className:tabLabel$1,children:A}),jsxRuntimeExports.jsx("div",{onClick:q=>{q.stopPropagation(),f(v.pageId)},className:tabClose,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.3em",height:"1.3em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m7 7l10 10M7 17L17 7"})})})]}),key:v.pageId})}const b={label:jsxRuntimeExports.jsxs("div",{className:tabContent,children:[jsxRuntimeExports.jsx("div",{className:tabIcon,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 15 15",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M1.5 0A1.5 1.5 0 0 0 0 1.5v4A1.5 1.5 0 0 0 1.5 7h4A1.5 1.5 0 0 0 7 5.5v-4A1.5 1.5 0 0 0 5.5 0zm8 0A1.5 1.5 0 0 0 8 1.5v4A1.5 1.5 0 0 0 9.5 7h4A1.5 1.5 0 0 0 15 5.5v-4A1.5 1.5 0 0 0 13.5 0zm-8 8A1.5 1.5 0 0 0 0 9.5v4A1.5 1.5 0 0 0 1.5 15h4A1.5 1.5 0 0 0 7 13.5v-4A1.5 1.5 0 0 0 5.5 8zm8 0A1.5 1.5 0 0 0 8 9.5v4A1.5 1.5 0 0 0 9.5 15h4a1.5 1.5 0 0 0 1.5-1.5v-4A1.5 1.5 0 0 0 13.5 8z"})})}),jsxRuntimeExports.jsx("div",{className:saveIndicator[d?"saved":"unsaved"]}),jsxRuntimeExports.jsx("div",{className:tabLabel$1,children:"Project"}),jsxRuntimeExports.jsx("div",{onClick:v=>{v.stopPropagation(),s("/projects/")},className:tabClose,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.3em",height:"1.3em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m7 7l10 10M7 17L17 7"})})})]}),key:projectTabKey};return jsxRuntimeExports.jsxs("div",{className:pagesTabsAreaInner,children:[jsxRuntimeExports.jsx(Tabs,{className:tabsAntComponent,activeKey:e??projectTabKey,onChange:j,items:[b]}),jsxRuntimeExports.jsx("div",{className:pagesTabsHolder,children:jsxRuntimeExports.jsx(Tabs,{className:tabsAntComponent,popupClassName:"pagesTabsPopup",activeKey:e??projectTabKey,onChange:j,items:g})})]})};var secondRowTabContainer="secondRowTabs_secondRowTabContainer__1jvc5q0",tabLabel="secondRowTabs_tabLabel__1jvc5q1";const projectSecondRowItems=[{label:jsxRuntimeExports.jsxs("span",{className:tabLabel,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,color:"currentColor",children:[jsxRuntimeExports.jsx("path",{d:"M12 17h.009M20 8.5v5c0 3.771 0 5.657-1.172 6.828S15.771 21.5 12 21.5s-5.657 0-6.828-1.172S4 17.271 4 13.5v-5"}),jsxRuntimeExports.jsx("path",{d:"m22 10.5l-4.343-4.165C14.99 3.778 13.657 2.5 12 2.5S9.01 3.778 6.343 6.335L2 10.5"})]})}),"Dashboard"]}),key:"projectDashboard"},{label:jsxRuntimeExports.jsxs("span",{className:tabLabel,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,color:"currentColor",children:[jsxRuntimeExports.jsx("path",{d:"M3.5 10c0-3.771 0-5.657 1.245-6.828S7.993 2 12 2h.773c3.26 0 4.892 0 6.024.798c.324.228.612.5.855.805c.848 1.066.848 2.6.848 5.67v2.545c0 2.963 0 4.445-.469 5.628c-.754 1.903-2.348 3.403-4.37 4.113c-1.257.441-2.83.441-5.98.441c-1.798 0-2.698 0-3.416-.252c-1.155-.406-2.066-1.263-2.497-2.35c-.268-.676-.268-1.523-.268-3.216z"}),jsxRuntimeExports.jsx("path",{d:"M20.5 12a3.333 3.333 0 0 1-3.333 3.333c-.666 0-1.451-.116-2.098.057a1.67 1.67 0 0 0-1.179 1.179c-.173.647-.057 1.432-.057 2.098A3.333 3.333 0 0 1 10.5 22M8 7h7m-7 4h3"})]})}),"Pages"]}),key:"projectPages"},{label:jsxRuntimeExports.jsxs("span",{className:tabLabel,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,color:"currentColor",children:[jsxRuntimeExports.jsx("path",{d:"M20 12.5V7.818c0-1.693 0-2.54-.268-3.216c-.43-1.087-1.342-1.944-2.497-2.35C16.517 2 15.617 2 13.818 2c-3.148 0-4.722 0-5.98.441c-2.02.71-3.615 2.21-4.37 4.113C3 7.737 3 9.219 3 12.182v2.545c0 3.07 0 4.604.848 5.67q.366.461.855.805C5.81 21.982 7.39 22 10.5 22"}),jsxRuntimeExports.jsx("path",{d:"M3 12a3.333 3.333 0 0 1 3.333-3.333c.666 0 1.451.116 2.098-.057A1.67 1.67 0 0 0 9.61 7.43c.173-.647.057-1.432.057-2.098A3.333 3.333 0 0 1 13 2m1.813 20c-.57-.59-2.813-2.16-2.813-3s2.244-2.41 2.813-3m3.374 6c.57-.59 2.813-2.16 2.813-3s-2.244-2.41-2.812-3"})]})}),"SubPages"]}),key:"projectSubPages"},{label:jsxRuntimeExports.jsxs("span",{className:tabLabel,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2 12c0-3.69 0-5.534.814-6.841a4.8 4.8 0 0 1 1.105-1.243C5.08 3 6.72 3 10 3h4c3.28 0 4.919 0 6.081.916c.43.338.804.759 1.105 1.243C22 6.466 22 8.31 22 12s0 5.534-.814 6.841a4.8 4.8 0 0 1-1.105 1.243C18.92 21 17.28 21 14 21h-4c-3.28 0-4.919 0-6.081-.916a4.8 4.8 0 0 1-1.105-1.243C2 17.534 2 15.69 2 12m7.5-9v18M5 7h1m-1 3h1",color:"currentColor"})}),"Global Containers"]}),key:"projectGlobalContainers"},{label:jsxRuntimeExports.jsxs("span",{className:tabLabel,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,color:"currentColor",children:[jsxRuntimeExports.jsx("path",{d:"M2.5 12c0-4.478 0-6.718 1.391-8.109S7.521 2.5 12 2.5c4.478 0 6.718 0 8.109 1.391S21.5 7.521 21.5 12c0 4.478 0 6.718-1.391 8.109S16.479 21.5 12 21.5c-4.478 0-6.718 0-8.109-1.391S2.5 16.479 2.5 12"}),jsxRuntimeExports.jsx("path",{d:"M16 9c-3.184 0-4.816 6.02-8 6.02"}),jsxRuntimeExports.jsx("path",{d:"M15.54 15.02c-.809 0-1.253 0-1.594-.12a1.8 1.8 0 0 1-.52-.284c-.265-.21-.41-.509-.7-1.108l-1.451-2.995c-.29-.6-.436-.9-.7-1.108a1.8 1.8 0 0 0-.52-.284C9.712 9 9.268 9 8.46 9"})]})}),"Variables"]}),key:"projectVariables"},{label:jsxRuntimeExports.jsxs("span",{className:tabLabel,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,color:"currentColor",children:[jsxRuntimeExports.jsx("ellipse",{cx:12,cy:5,rx:8,ry:3}),jsxRuntimeExports.jsx("path",{d:"M20 12c0 1.657-3.582 3-8 3s-8-1.343-8-3"}),jsxRuntimeExports.jsx("path",{d:"M20 5v14c0 1.657-3.582 3-8 3s-8-1.343-8-3V5m4 3v2m0 5v2"})]})}),"Data Sources"]}),key:"projectDataSources"},{label:jsxRuntimeExports.jsxs("span",{className:tabLabel,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,color:"currentColor",children:[jsxRuntimeExports.jsx("path",{d:"M8 15.889C8.15 16.42 8.455 17 9.25 17c1.375 0 1.719-1.111 2.75-5s1.375-5 2.75-5c.795 0 1.1.58 1.25 1.111m-5.667 2.5h4.417"}),jsxRuntimeExports.jsx("path",{d:"M2.5 12c0-4.478 0-6.718 1.391-8.109S7.521 2.5 12 2.5c4.478 0 6.718 0 8.109 1.391S21.5 7.521 21.5 12c0 4.478 0 6.718-1.391 8.109S16.479 21.5 12 21.5c-4.478 0-6.718 0-8.109-1.391S2.5 16.479 2.5 12"})]})}),"Functions"]}),key:"projectFunctions"},{label:jsxRuntimeExports.jsxs("span",{className:tabLabel,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,color:"currentColor",children:[jsxRuntimeExports.jsx("circle",{cx:7.5,cy:7.5,r:1.5}),jsxRuntimeExports.jsx("path",{d:"M2.5 12c0-4.478 0-6.718 1.391-8.109S7.521 2.5 12 2.5c4.478 0 6.718 0 8.109 1.391S21.5 7.521 21.5 12c0 4.478 0 6.718-1.391 8.109S16.479 21.5 12 21.5c-4.478 0-6.718 0-8.109-1.391S2.5 16.479 2.5 12"}),jsxRuntimeExports.jsx("path",{d:"M5 21c4.372-5.225 9.274-12.116 16.498-7.458"})]})}),"Media Assets"]}),key:"projectMedia"}],pageSecondRowItems=({isSubpage:e})=>[{label:jsxRuntimeExports.jsxs("span",{className:tabLabel,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 3c0-.471 0-.707-.146-.854C15.707 2 15.47 2 15 2h-1c-.471 0-.707 0-.854.146C13 2.293 13 2.53 13 3v1c0 .471 0 .707.146.854C13.293 5 13.53 5 14 5h1c.471 0 .707 0 .854-.146C16 4.707 16 4.47 16 4zM8.333 8.407C9.938 6.68 22.01 10.913 22 12.46c-.011 1.752-4.714 2.292-6.018 2.658c-.784.22-.994.445-1.175 1.267c-.818 3.723-1.23 5.574-2.166 5.616c-1.493.066-5.874-11.906-4.308-13.593M5 3c0-.471 0-.707-.146-.854C4.707 2 4.47 2 4 2H3c-.471 0-.707 0-.854.146C2 2.293 2 2.53 2 3v1c0 .471 0 .707.146.854C2.293 5 2.53 5 3 5h1c.471 0 .707 0 .854-.146C5 4.707 5 4.47 5 4zm0 11c0-.471 0-.707-.146-.854C4.707 13 4.47 13 4 13H3c-.471 0-.707 0-.854.146C2 13.293 2 13.53 2 14v1c0 .471 0 .707.146.854C2.293 16 2.53 16 3 16h1c.471 0 .707 0 .854-.146C5 15.707 5 15.47 5 15zm-1.5-1V5M13 3.5H5",color:"currentColor"})}),"Editor"]}),key:"pageEditor"},{label:jsxRuntimeExports.jsxs("span",{className:tabLabel,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,color:"currentColor",children:[jsxRuntimeExports.jsx("path",{d:"M2.5 12c0-4.478 0-6.718 1.391-8.109S7.521 2.5 12 2.5c4.478 0 6.718 0 8.109 1.391S21.5 7.521 21.5 12c0 4.478 0 6.718-1.391 8.109S16.479 21.5 12 21.5c-4.478 0-6.718 0-8.109-1.391S2.5 16.479 2.5 12"}),jsxRuntimeExports.jsx("path",{d:"M16 9c-3.184 0-4.816 6.02-8 6.02"}),jsxRuntimeExports.jsx("path",{d:"M15.54 15.02c-.809 0-1.253 0-1.594-.12a1.8 1.8 0 0 1-.52-.284c-.265-.21-.41-.509-.7-1.108l-1.451-2.995c-.29-.6-.436-.9-.7-1.108a1.8 1.8 0 0 0-.52-.284C9.712 9 9.268 9 8.46 9"})]})}),"Parameters"]}),key:"parameters"}],SecondRowTabs=React.memo(()=>{const e=useMainMenuStore(u=>u.lastUseProjectTabKey??"projectDashboard"),{projectInfoSection:t=e,pageInfoSection:s="pageEditor",projectId:n,pageId:c}=useParams(),a=useNavigate(),l=u=>{const f=useMainMenuStore.getState().setMainMenuData;c?a(`/projects/${n}/page/${c}/${u}`):(a(`/projects/${n}/${u}`),f({lastUseProjectTabKey:u}))};reactExports.useEffect(()=>{const u=useMainMenuStore.getState().setMainMenuData;return()=>{u({lastUseProjectTabKey:void 0})}},[]);const o=useMainMenuStore(u=>u.isSubpageEditor),d=reactExports.useMemo(()=>pageSecondRowItems({isSubpage:o}),[o]);return jsxRuntimeExports.jsx(Tabs,{tabBarGutter:0,className:secondRowTabContainer,size:"small",items:c?d:projectSecondRowItems,activeKey:c?s:t,onChange:l})});var dimensionsPopTitle="testDeviceButton_dimensionsPopTitle__88rnak0",dimensionsPopTitleSmall="testDeviceButton_dimensionsPopTitleSmall__88rnak1",dimensionsDeviceListScroll="testDeviceButton_dimensionsDeviceListScroll__88rnak2",addUserDeviceForm="testDeviceButton_addUserDeviceForm__88rnak3";const RenderRadioLine=({deviceItem:e,editable:t=!1})=>{const{name:s,width:n,height:c,uid:a}=e,l=o=>{o.stopPropagation(),o.preventDefault();const d=useTestDevice.getState().removeUserTestDevice;d(a)};return jsxRuntimeExports.jsx(Radio,{value:a,children:jsxRuntimeExports.jsxs("div",{className:testDeviceRadioItem,children:[s,jsxRuntimeExports.jsxs(Tag,{style:{fontSize:11,padding:2,lineHeight:"1em"},children:[n," x ",c]}),t&&jsxRuntimeExports.jsx(RefIcon$o,{style:{color:"red"},className:"close",onClick:l})]})})},TestDeviceSizePopover=()=>{const e=useEnvStore.getInitialState().updateEnvStore,t=useEnvStore(j=>j.selectedTestDevice),{userDefinedTestDevices:s,predefinedTestDevices:n}=useTestDevice(j=>j),c=j=>{let g=j.target.value;g=g==="none"?null:g;const b=[...s,...n].find(v=>v.uid===g);if(b){const{fitEditor:v}=useEnvStore.getState();e({selectedTestDevice:b}),v()}else throw new Error("Test device not found")},a=reactExports.useMemo(()=>s.map(j=>jsxRuntimeExports.jsx(RenderRadioLine,{editable:!0,deviceItem:j},j.uid)),[s]),l=reactExports.useMemo(()=>n.map(j=>jsxRuntimeExports.jsx(RenderRadioLine,{editable:!1,deviceItem:j},j.uid)),[n]),[o]=Form.useForm(),[d,u]=React.useState(!1),f=j=>{u(!0);const g=useTestDevice.getState().createUserTestDevice;g(j).then(()=>{o.resetFields(),u(!1)})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Radio.Group,{onChange:c,value:t?.uid,children:jsxRuntimeExports.jsx(CompoundedSpace,{style:{width:400},direction:"vertical",children:jsxRuntimeExports.jsxs("div",{className:dimensionsDeviceListScroll,children:[jsxRuntimeExports.jsxs(Details,{initialOpen:!0,summary:"My devices",children:[...a]}),jsxRuntimeExports.jsxs(Details,{initialOpen:!0,summary:"Predefined devices",children:[...l]})]})})}),jsxRuntimeExports.jsx(Divider,{style:{margin:"10px 0"}}),jsxRuntimeExports.jsx(Form,{form:o,onFinish:f,onFinishFailed:()=>u(!1),className:addUserDeviceForm,layout:"vertical",children:jsxRuntimeExports.jsxs(CompoundedSpace,{children:[jsxRuntimeExports.jsx(Form.Item,{required:!1,name:"name",rules:[{required:!0,message:"Required"}],label:"Name",children:jsxRuntimeExports.jsx(Input,{style:{width:100},placeholder:"Name"})}),jsxRuntimeExports.jsx(Form.Item,{required:!1,name:"width",rules:[{required:!0,message:"Required"}],label:"Width",children:jsxRuntimeExports.jsx(InputNumber,{min:0,style:{width:100},placeholder:"Width"})}),jsxRuntimeExports.jsx(Form.Item,{required:!1,name:"height",rules:[{required:!0,message:"Required"}],label:"Height",children:jsxRuntimeExports.jsx(InputNumber,{min:0,style:{width:100},placeholder:"Height"})}),jsxRuntimeExports.jsx(Form.Item,{label:" ",children:jsxRuntimeExports.jsx(Button,{loading:d,htmlType:"submit",block:!0,icon:jsxRuntimeExports.jsx(RefIcon$a,{}),children:"Add device"})})]})})]})},TestDeviceButton=()=>{const e=useMainMenuStore(a=>a.isSubpageEditor),t=useEnvStore(a=>a.selectedTestDevice),s=useEnvStore(a=>a.isTestDeviceRotated),n=()=>{const a=useEnvStore.getState().updateEnvStore;a({isTestDeviceRotated:!s})},c=e?jsxRuntimeExports.jsxs("div",{className:dimensionsPopTitle,children:["Subpage editor - no test devices available here",jsxRuntimeExports.jsxs("small",{className:dimensionsPopTitleSmall,children:[jsxRuntimeExports.jsx(RefIcon$c,{})," Subpage is a reusable component - it has own size and there is no sense to test it on different devices in fullscreen mode."]})]}):jsxRuntimeExports.jsxs("div",{className:dimensionsPopTitle,children:["Test device selector",jsxRuntimeExports.jsxs("small",{className:dimensionsPopTitleSmall,children:[jsxRuntimeExports.jsx(RefIcon$c,{})," It's not a project setting, just preview option to see how page looks on different devices."]})]});return jsxRuntimeExports.jsxs(CompoundedSpace.Compact,{block:!0,children:[jsxRuntimeExports.jsx(Popover,{placement:"bottomLeft",title:c,content:e?null:jsxRuntimeExports.jsx(TestDeviceSizePopover,{}),trigger:e?"hover":"click",children:jsxRuntimeExports.jsx(Button,{disabled:e,onFocus:a=>a.target.blur(),icon:jsxRuntimeExports.jsx("svg",{style:{translate:"-0.3em 0.1em"},xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M13 3H7.5A4.5 4.5 0 0 0 3 7.5V9a1 1 0 0 0 2 0V7.5A2.5 2.5 0 0 1 7.5 5H13a1 1 0 1 0 0-2m2.5 26a4.5 4.5 0 0 0 4.5-4.5v-8a4.5 4.5 0 0 0-4.5-4.5h-8A4.5 4.5 0 0 0 3 16.5v8A4.5 4.5 0 0 0 7.5 29zm6.5-1a1 1 0 0 1 1-1h1.5a2.5 2.5 0 0 0 2.5-2.5V19a1 1 0 1 1 2 0v5.5a4.5 4.5 0 0 1-4.5 4.5H23a1 1 0 0 1-1-1m7-15V7.5A4.5 4.5 0 0 0 24.5 3H19a1 1 0 1 0 0 2h5.5A2.5 2.5 0 0 1 27 7.5V13a1 1 0 1 0 2 0"})}),children:t?.name})}),jsxRuntimeExports.jsx(Button,{disabled:e,onFocus:a=>a.target.blur(),onClick:n,type:s?"primary":"default",icon:jsxRuntimeExports.jsx("svg",{style:{translate:"0 2px"},xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.26 1.874a.75.75 0 0 1 .866-.613c3.2.544 5.624 3.36 5.624 6.74a.75.75 0 0 1-1.17.62l-1.5-1.014a.75.75 0 1 1 .84-1.242l.1.067c-.577-1.91-2.18-3.358-4.146-3.693a.75.75 0 0 1-.613-.865M8.319 3.316c-.579.442-1.257 1.118-2.232 2.092l-.678.679c-.974.974-1.65 1.652-2.092 2.232c-.429.561-.566.941-.566 1.307s.137.746.566 1.308c.442.579 1.118 1.257 2.092 2.232l5.427 5.426c.974.974 1.652 1.65 2.231 2.092c.563.43.942.566 1.308.566s.746-.137 1.308-.566c.579-.442 1.257-1.118 2.232-2.092l.678-.678c.974-.975 1.65-1.653 2.092-2.232c.429-.562.566-.942.566-1.308s-.137-.745-.566-1.307c-.442-.58-1.118-1.258-2.092-2.232l-5.427-5.427c-.974-.974-1.652-1.65-2.231-2.092c-.562-.429-.942-.566-1.308-.566s-.746.137-1.308.566m-.91-1.193c.696-.53 1.392-.873 2.218-.873s1.522.343 2.217.873c.67.51 1.418 1.26 2.345 2.186l5.503 5.504c.927.926 1.676 1.675 2.186 2.344c.53.695.873 1.391.873 2.217s-.343 1.522-.873 2.218c-.51.668-1.26 1.417-2.186 2.344l-.755.755c-.927.927-1.676 1.676-2.344 2.186c-.696.53-1.392.873-2.218.873s-1.522-.343-2.217-.873c-.67-.51-1.418-1.26-2.344-2.186L4.31 14.188c-.927-.927-1.676-1.676-2.186-2.344c-.53-.696-.873-1.392-.873-2.218s.343-1.522.873-2.217c.51-.67 1.26-1.418 2.186-2.344l.755-.756c.927-.926 1.676-1.675 2.345-2.186m2.07 2.903a.75.75 0 0 1 0 1.06L6.086 9.479a.75.75 0 1 1-1.06-1.06l3.391-3.392a.75.75 0 0 1 1.06 0m6.74 10.218a.689.689 0 1 0-.974.974a.689.689 0 0 0 .974-.974m-2.035-1.06a2.189 2.189 0 1 1 3.096 3.095a2.189 2.189 0 0 1-3.096-3.096M1.648 15.337a.75.75 0 0 1 .772.04l1.5 1.015a.75.75 0 0 1-.84 1.242l-.1-.067c.577 1.91 2.18 3.358 4.146 3.693a.75.75 0 0 1-.252 1.479c-3.2-.545-5.624-3.361-5.624-6.74a.75.75 0 0 1 .398-.662",clipRule:"evenodd"})})})]})},bagdeStatusMap={connected:"success",disconnected:"warning",connecting:"processing",error:"error"},ConnectControl=({manualConnection:e,wsConnectors:t,wsInstances:s,xpanelStatus:n})=>{const c=useEnvStore.getState().toggleManualConnection,a=reactExports.useMemo(()=>{if(!t)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"No connectors..."});const l=t.map(o=>{const{uid:d,name:u}=o,f=s?.[d].status??"disconnected";return jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Badge,{status:bagdeStatusMap[f],text:u})},d)});return jsxRuntimeExports.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1em"},children:l})},[t,s]);return jsxRuntimeExports.jsxs("div",{style:{minWidth:300},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Switch,{checkedChildren:"ON",unCheckedChildren:"OFF",checked:e,onChange:c})," Toggle connections"]}),jsxRuntimeExports.jsx(Divider,{className:"fromleft",plain:!0,children:"Crestron Connection"}),jsxRuntimeExports.jsx(Badge,{status:bagdeStatusMap[n],text:"WebXpanel"}),jsxRuntimeExports.jsx(Divider,{className:"fromleft",plain:!0,children:"Websocket Connections"}),a]})},XPanelButton=()=>{const e=useXpanelStore(l=>l.status),t=useGetWsConnectorsWithEnv(),s=useWebsocketStore(l=>l.wsInstances),n=useEnvStore(l=>l.manualConnection),c=reactExports.useMemo(()=>{const l=[e];if(t){const o=t.map(d=>{const{uid:u}=d;return s?.[u].status??"disconnected"});l.push(...o)}return l},[t,s,e]),a=reactExports.useMemo(()=>n?c.every(l=>l==="connecting")?{text:"Connecting...",icon:jsxRuntimeExports.jsx(RefIcon$e,{}),bgColor:"inherit"}:c.some(l=>l!=="connected")?{text:"Partially Connected",icon:jsxRuntimeExports.jsx(RefIcon$5,{}),bgColor:"#EC6258"}:{text:"Connected",icon:jsxRuntimeExports.jsx(RefIcon$p,{}),bgColor:"#d1f155"}:{text:"Disconnected",icon:jsxRuntimeExports.jsx(RefIcon$8,{})},[c,n]);return jsxRuntimeExports.jsx(Popover,{placement:"bottom",title:"Connection Manager",content:jsxRuntimeExports.jsx(ConnectControl,{manualConnection:n,wsConnectors:t,xpanelStatus:e,wsInstances:s}),trigger:"click",children:jsxRuntimeExports.jsx(Button,{style:{"--iconBg":a.bgColor},className:connectionManagerButton,icon:a.icon,children:a.text})})},ZoomPopover=React.memo(({subPageHeight:e,subPageWidth:t})=>{const s=useEnvStore(u=>u.editorZoom),n=Number.parseFloat((s*100).toFixed(0)),c=({value:u})=>{const f=Number(u)||1,{updateEditorZoom:j}=useEnvStore.getState();j(f/100)},{resetEditorZoom:a,centerViewer:l,fitEditor:o}=useEnvStore.getState(),d=()=>{t&&e?o(t,e):o()};return jsxRuntimeExports.jsxs(CompoundedSpace,{style:{minWidth:250},direction:"vertical",size:"small",children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"10px"},children:[jsxRuntimeExports.jsx("div",{style:{flexGrow:1},children:jsxRuntimeExports.jsx(Slider,{min:1,max:100,value:n,onChange:u=>{c({value:u})}})}),jsxRuntimeExports.jsx(Input,{addonAfter:"%",style:{width:87},value:n,onChange:u=>{c({value:u.target.value})}})]}),jsxRuntimeExports.jsxs(CompoundedSpace.Compact,{block:!0,children:[jsxRuntimeExports.jsx(Button,{style:{flexGrow:1},onClick:d,children:"Fit"}),jsxRuntimeExports.jsx(Button,{style:{flexGrow:1},onClick:l,children:"Center"}),jsxRuntimeExports.jsx(Button,{style:{flexGrow:1},onClick:a,children:"Reset"})]})]})}),ZoomButton=()=>{const{pageId:e}=useParams(),t=(useEnvStore(l=>l.editorZoom)*100).toFixed(0),s=useGetActivePageData({pageId:e}),n=useMainMenuStore(l=>l.isSubpageEditor),{width:c,height:a}=useGetElDimensionsStyles({width:s?.attributes.width,height:s?.attributes.height});return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Popover,{placement:"bottomLeft",title:"Zoom controls",content:jsxRuntimeExports.jsx(ZoomPopover,{subPageHeight:n?a:void 0,subPageWidth:n?c:void 0}),trigger:"click",children:jsxRuntimeExports.jsxs(Button,{onFocus:l=>l.target.blur(),icon:jsxRuntimeExports.jsxs("svg",{style:{translate:"-0.3em 0.1em",scale:"1.2"},width:"1em",height:"1em",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("g",{clipPath:"url(#clip0_224_4)",children:[jsxRuntimeExports.jsx("path",{d:"M9.7 9.7L11 11M10.35 7.425C10.35 7.04088 10.2743 6.66053 10.1273 6.30565C9.98035 5.95077 9.7649 5.62832 9.49329 5.35671C9.22168 5.0851 8.89923 4.86965 8.54435 4.72265C8.18947 4.57566 7.80912 4.5 7.425 4.5C7.04088 4.5 6.66053 4.57566 6.30565 4.72265C5.95077 4.86965 5.62832 5.0851 5.35671 5.35671C5.0851 5.62832 4.86965 5.95077 4.72265 6.30565C4.57566 6.66053 4.5 7.04088 4.5 7.425C4.5 8.20076 4.80817 8.94474 5.35671 9.49329C5.90526 10.0418 6.64924 10.35 7.425 10.35C8.20076 10.35 8.94474 10.0418 9.49329 9.49329C10.0418 8.94474 10.35 8.20076 10.35 7.425Z",stroke:"black",strokeWidth:"0.75",strokeLinecap:"round",strokeLinejoin:"round"}),jsxRuntimeExports.jsx("path",{d:"M9.5375 9.5375L11 11M1 3C1.065 2.3325 1.213 1.883 1.548 1.548C1.883 1.213 2.3325 1.0655 3 1M3 11C2.3325 10.935 1.883 10.787 1.548 10.452C1.213 10.117 1.0655 9.6675 1 9M11 3C10.935 2.3325 10.787 1.883 10.452 1.548C10.117 1.213 9.6675 1.0655 9 1M1 5V7M7 1H5M10.35 7.425C10.35 6.64924 10.0418 5.90526 9.49329 5.35671C8.94474 4.80817 8.20076 4.5 7.425 4.5C6.64924 4.5 5.90526 4.80817 5.35671 5.35671C4.80817 5.90526 4.5 6.64924 4.5 7.425C4.5 8.20076 4.80817 8.94474 5.35671 9.49329C5.90526 10.0418 6.64924 10.35 7.425 10.35C8.20076 10.35 8.94474 10.0418 9.49329 9.49329C10.0418 8.94474 10.35 8.20076 10.35 7.425Z",stroke:"black",strokeWidth:"0.75",strokeLinecap:"round",strokeLinejoin:"round"})]}),jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("clipPath",{id:"clip0_224_4",children:jsxRuntimeExports.jsx("rect",{width:"12",height:"12",fill:"white"})})})]}),children:[t,"%"]})})})},UndoRedo=React.lazy(()=>__vitePreload(()=>import("./undoRedo-bmnk68UB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),NewProjectModal=React.lazy(()=>__vitePreload(()=>import("./newProjectModal-B2O6A-6z.js"),__vite__mapDeps([14,1,2,9,3,4,5,6,7,8,10,11,12,13]),import.meta.url)),RenderAppTopbar=({setEditProjectModalId:e})=>{const t=useNavigate(),{projectId:s}=useParams(),{pageId:n}=useParams(),a=useLocation().pathname.includes("profile"),l=useWorkingProjectStore(j=>j.workingProject),o=useMainMenuStore(j=>j.showBoundingBox),{setMainMenuData:d}=useMainMenuStore.getState(),[u,f]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:topBarContainer,onContextMenu:j=>j.preventDefault(),children:[!!s&&!!l&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("div",{className:tabsRow,children:[jsxRuntimeExports.jsx("div",{className:pagesTabsArea,children:jsxRuntimeExports.jsx(PagesTabs,{})}),jsxRuntimeExports.jsx("div",{className:envButtonArea,children:jsxRuntimeExports.jsx(EnvSelector,{projectId:s,setEditProjectModalId:e})})]})}),jsxRuntimeExports.jsx("section",{className:secondTabsRow,children:jsxRuntimeExports.jsx(SecondRowTabs,{})})]}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsxs("div",{className:topBarControlsRow,style:o?{}:{backgroundColor:"rgb(66, 32, 201)",color:"#fff"},children:[jsxRuntimeExports.jsxs("section",{className:"left",style:{fontSize:14},children:[jsxRuntimeExports.jsx("img",{onClick:()=>t("/projects"),style:{width:"auto",height:23,cursor:"pointer"},src:logoIcon,alt:"avgator studio"}),jsxRuntimeExports.jsx(HeaderTitle,{isProfilePage:a,projectName:l?.attributes.name})]}),jsxRuntimeExports.jsx("section",{className:"center",children:n?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LayoutView,{}),jsxRuntimeExports.jsx(TestDeviceButton,{}),jsxRuntimeExports.jsx(ZoomButton,{}),jsxRuntimeExports.jsxs(Radio.Group,{style:{whiteSpace:"nowrap"},value:o,onChange:j=>d({showBoundingBox:j.target.value}),buttonStyle:"solid",children:[jsxRuntimeExports.jsxs(Radio.Button,{value:!0,children:[jsxRuntimeExports.jsx(RefIcon$q,{})," Editor"]}),jsxRuntimeExports.jsxs(Radio.Button,{style:o?{}:{backgroundColor:"red",color:"#fff",borderColor:"red"},className:"previewButton",value:!1,children:[jsxRuntimeExports.jsx(RefIcon$r,{})," Preview"]})]}),jsxRuntimeExports.jsx(XPanelButton,{}),jsxRuntimeExports.jsx(RenderConsoleButton,{})]}):null}),jsxRuntimeExports.jsxs("section",{className:"right",style:{display:"flex",gap:5},children:[!s&&!a?jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(RefIcon$j,{}),onClick:()=>f(!0),type:"primary",children:"New Project"}):null,!s&&!a&&jsxRuntimeExports.jsx(Dropdown,{menu:{items:[{key:"Profile",label:jsxRuntimeExports.jsx("div",{onClick:()=>t("/profile"),children:"Profile"})},{key:"Logout",label:jsxRuntimeExports.jsx("div",{onClick:()=>logOut(),children:"Change Account"})}]},placement:"bottomRight",arrow:!0,children:jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(RefIcon$n,{})})}),a&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{icon:jsxRuntimeExports.jsx(RefIcon$9,{}),onClick:()=>t("/projects"),children:"Back to projects"}),jsxRuntimeExports.jsx(Button,{onClick:()=>logOut(),icon:jsxRuntimeExports.jsx(RefIcon$4,{}),children:"Logout"})]}),s&&jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:null,children:jsxRuntimeExports.jsx(UndoRedo,{})})]}),jsxRuntimeExports.jsx("div",{style:{position:"absolute"},children:u?jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Loader,{}),children:jsxRuntimeExports.jsx(NewProjectModal,{setOpenNewProjectModal:f})}):null})]})})]})};function checkForProjectId(e){const t=/\/projects\/(\d+)/;return!!e.match(t)}const ConfirmUnsaveModal=React.memo(()=>{const e=useUserStore(g=>g.jwt),t=useWorkingProjectStore(g=>g.currentProjectHash),s=useWorkingProjectStore(g=>g.savedProjectHash),n=useWorkingProjectStore(g=>g.resetWorkingProject),{projectId:c}=useParams(),[a,l]=reactExports.useState(!1),o=reactExports.useMemo(()=>!!e&&!!c&&t!==s,[e,c,t,s]),d=useBlocker(({nextLocation:g})=>{const b=checkForProjectId(g.pathname);return!!(o&&!b)}),u=reactExports.useCallback(()=>{d?.reset?.()},[d]),f=reactExports.useCallback(()=>{n().then(()=>{d?.proceed?.()})},[d,n]),j=reactExports.useCallback(()=>{l(!0);const g=useWorkingProjectStore.getState().workingProject;g?saveFullProjectToBackend({projectData:g}).then(()=>{const b=useWorkingProjectStore.getState().resetWorkingProject;api.success("Project saved successfully"),d?.proceed?.(),b()}).catch(b=>{console.error(b),api.error("Error while saving project")}):(api.error("Error while saving project: not found"),l(!1))},[d,l]);return reactExports.useEffect(()=>{const g=b=>{o&&(b.preventDefault(),b.returnValue="")};return window.addEventListener("beforeunload",g),()=>{window.removeEventListener("beforeunload",g)}},[d.state,o]),d.state==="blocked"?jsxRuntimeExports.jsx(Modal,{maskClosable:!1,title:jsxRuntimeExports.jsxs("div",{style:{color:"rgb(255 113 77)"},children:[jsxRuntimeExports.jsx(RefIcon$d,{})," Unsaved changes"]}),open:!0,onCancel:()=>{u()},footer:[jsxRuntimeExports.jsx(Button,{onClick:()=>u(),children:"Stay here"},"back"),jsxRuntimeExports.jsx(Button,{loading:a,type:"primary",onClick:()=>j(),children:"Save and exit"},"saveAndExit"),jsxRuntimeExports.jsx(Button,{type:"primary",danger:!0,onClick:()=>f(),children:"Leave without saving"},"submit")],children:jsxRuntimeExports.jsx("div",{children:"Are you really want to leave editor? All unsaved changes will be lost."})}):null}),Moveable=reactExports.lazy(()=>__vitePreload(()=>import("./main-DkRMjw9y.js").then(e=>e.eu),__vite__mapDeps([1,2]),import.meta.url)),AppLayout=()=>{const e=useUserStore(w=>w.jwt),t=useLocation(),[s,n]=useSearchParams();useWindowAvgatorStudioComposer();const c=useAddNavigateToWindow();reactExports.useEffect(()=>{if(s.size){let w=function(){n({})};const U=s.get("paymentFeedback");if(U)switch(U){case"buyBuildError":Modal.error({icon:null,maskClosable:!1,content:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{color:"red",paddingBottom:5},children:jsxRuntimeExports.jsx(RefIcon$d,{})}),"We cannot process your payment. Please try again later."]}),okText:"Close",onOk:()=>w()});break;case"buyBuildOk":Modal.success({icon:null,maskClosable:!1,content:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{color:"green",paddingBottom:5},children:jsxRuntimeExports.jsx(RefIcon$p,{})}),"Thank you for your purchase! Now project have unlimited builds."]}),okText:"Close",onOk:()=>w()});break;default:Modal.error({icon:null,maskClosable:!1,content:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{color:"red",paddingBottom:5},children:jsxRuntimeExports.jsx(RefIcon$d,{})}),"Unknown payment feedback: ",U]}),okText:"Close",onOk:()=>w()}),console.error("Unknown payment feedback: ",U);break}}return()=>{Modal.destroyAll()}},[s,n]),axiosInstance.interceptors.response.use(w=>w.data&&(w?.status===200||w?.status===201)?w:Promise.reject(w),w=>(w.response?.status===401&&logOut(),Promise.reject(w)));const a=window.location.hostname;reactExports.useEffect(()=>{a==="avstudio.app"&&ReactGA.initialize("G-CJ806X6F1C")},[a]),reactExports.useEffect(()=>{t.pathname&&a==="avstudio.app"&&ReactGA.send({hitType:"pageview",page:t.pathname})},[a,t.pathname]),reactExports.useEffect(()=>{e||c("/login")},[t.pathname,e,c]);const{projectId:l}=useParams(),{pageId:o}=useParams(),{fillProjectsList:d}=useProjectsListStore.getState(),{fetchAndFill:u,resetWorkingProject:f,clearHistory:j}=useWorkingProjectStore.getState(),g=useWorkingProjectStore(w=>w.workingProject),b=reactExports.useRef(!1);reactExports.useEffect(()=>{function w(){api$1.destroy(),b.current=!1}async function U(Z){await fetch(Z,{headers:{Pragma:"no-cache",Expires:"-1","Cache-Control":"no-cache"}}),window.location.href=Z,window.location.reload()}if(!l&&e&&!b.current){const Z=useVersionStore.getState().fetchVersions;try{Z().then(Y=>{if(Y?.length){const Q="3.9.1",se=Y?.[0],{version:E,text:D}=se?.attributes??{};if(!Q||!E)return;let y=!1;const K=Number(Q.replace(/\./g,"")),ee=Number(E.replace(/\./g,""));K<ee&&(y=!0),y&&(b.current=!0,api$1.destroy(),api$1.info({message:"New version available",onClose:w,description:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{marginBottom:5},children:jsxRuntimeExports.jsxs(Tag,{children:["Current ",Q," => New ",E]})}),D," ",jsxRuntimeExports.jsx(Divider,{style:{margin:"15px 0"}})," ",jsxRuntimeExports.jsx(Button,{onClick:()=>{U(window.location.href)},style:{marginRight:5},type:"primary",children:"Refresh to update"}),jsxRuntimeExports.jsx(Button,{onClick:()=>w(),children:"Later"})]}),onClick:()=>{},placement:"top",duration:null}))}})}catch(Y){console.log(Y)}}},[l,e]),useFillCompiledUserFunctions(),useFillVariableCalculatedStore({initVariableArr:g?.attributes.variables}),useInitialFillDatasourceStore({skipDsLoading:!1});const v=useGetActivePageData({pageId:o}),C=useMainMenuStore(w=>w.showBoundingBox),{setMainMenuData:R}=useMainMenuStore.getState(),{addNewTab:A,clearTabs:P}=useWorkingProjectStore.getState(),O=useEnvStore.getState().setEnvState,V=useMainMenuStore(w=>w.selectedMenuSection.elementIndex);reactExports.useEffect(()=>{if(V===null){const w=useDragStore.getState().setSelectedElementRef;w({current:null})}},[V]),reactExports.useEffect(()=>{v?.attributes.isSubpage?R({isSubpageEditor:!0}):R({isSubpageEditor:!1})},[v?.attributes.isSubpage,R]),reactExports.useEffect(()=>{v?.attributes.isStatic?(R({isStaticEditor:!0}),api.info({content:"You are in adaptive editor mode",style:{position:"fixed",bottom:"50px",left:"50%",translate:"-50% 0"}})):R({isStaticEditor:!1})},[v?.attributes.isStatic,R]),usePushDataToLive({workingProject:g}),reactExports.useEffect(()=>{o&&O(C?"editor":"preview")},[o,O,C]),reactExports.useEffect(()=>{o&&g&&A(o)},[A,o,g]),reactExports.useLayoutEffect(()=>{if(!e)return;const w=useThemesStore.getState().fetchAndFillThemesList;w();const U=useTestDevice.getState().fetchTestDevices;U()},[e]),reactExports.useEffect(()=>{j()},[j,o]),reactExports.useEffect(()=>{l||removeCustomFonts()},[l]);const q=reactExports.useRef(!1);reactExports.useLayoutEffect(()=>{e&&(l?(g&&String(g.id)!==l&&f(),!g&&!q.current&&(q.current=!0,u(l).then(()=>{q.current=!1}))):(d(),P(),j()))},[u,d,l,f,g?.id,P,j,g,e]);const[F,T]=reactExports.useState(null),[G,M]=reactExports.useState(null),[S,L]=reactExports.useState(null),[H,x]=reactExports.useState(!1),[i,r]=reactExports.useState(!1),[m,p]=reactExports.useState(null),[h,_]=reactExports.useState(!1),{CloneModal:I,setCloneItemModal:N}=useCloneItemModal(),$={editProjectModalId:F,setEditProjectModalId:T,newPageModalVisible:G,setNewPageModalVisible:M,newGlobalContainerVisible:h,setNewGlobalContainerVisible:_,setNewDatasourceVisible:x,newDatasourceVisible:H,setNewModificatorVisible:r,newModificatorVisible:i,setEditModificator:p,editModificator:m,newVariableModalVisible:S,setNewVariableModalVisible:L,CloneModal:I,setCloneItemModal:N},B=useDragStore(w=>w.selectedElementRef),z=useMainMenuStore(w=>w.isStaticEditor),W=useDragStore(w=>w.staticEementsGuidesClasses),X=useDragStore(w=>w.activeStaticElementKey),J=reactExports.useMemo(()=>W.filter(w=>w!==X),[X,W]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(AppLayoutContainer,{children:[jsxRuntimeExports.jsx(AppTopBar,{children:jsxRuntimeExports.jsx(RenderAppTopbar,{setEditProjectModalId:T})}),jsxRuntimeExports.jsx(AppContentArea,{children:jsxRuntimeExports.jsx(Outlet,{context:$})})]}),F&&jsxRuntimeExports.jsx(EditProjectModal,{editProjectModalId:F,setEditProjectModalId:T},l+"_EditProjectModal"),G&&jsxRuntimeExports.jsx(NewPageModal,{newPageModalVisible:G,setNewPageModalVisible:M},l+"_NewPageModal"),S&&jsxRuntimeExports.jsx(NewVariableModal,{setNewVariableModalVisible:L,newVariableModalVisible:S},l+"_NewVariableModal"),h&&jsxRuntimeExports.jsx(NewGlobalContainerModal,{setNewGlobalContainerVisible:_,newGlobalContainerVisible:h},l+"_NewGlobalContainerModal"),i&&jsxRuntimeExports.jsx(NewModificatorModal,{setNewModificatorVisible:r,newModificatorVisible:i},l+"_NewModificatorModal"),H&&jsxRuntimeExports.jsx(NewDatasourceModal,{setNewDatasourceVisible:x,newDatasourceVisible:H},l+"_NewDatasourceModal"),I,jsxRuntimeExports.jsx(ConfirmUnsaveModal,{}),z&&jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Loader,{}),children:jsxRuntimeExports.jsx(Moveable,{target:C?B:null,zoom:1,snappable:!0,snapThreshold:5,snapContainer:".page",bounds:{left:0,top:0,right:0,bottom:0,position:"css"},isDisplaySnapDigit:!0,isDisplayInnerSnapDigit:!1,snapGap:!0,snapDirections:{top:!0,left:!0,bottom:!0,right:!0,center:!0,middle:!0},elementSnapDirections:{top:!0,left:!0,bottom:!0,right:!0,center:!0,middle:!0},dragTargetSelf:!1,elementGuidelines:J,useMutationObserver:!0,origin:!1,throttleResize:0,throttleDrag:0,throttleRotate:0,startDragRotate:0,throttleDragRotate:0,draggable:!0,resizable:!1,scalable:!1,keepRatio:!0,rotatable:!1,padding:10,onDrag:w=>{const{target:U,transform:Z}=w;U.style.transform=Z}})})]})},mainLayout=Object.freeze(Object.defineProperty({__proto__:null,default:AppLayout},Symbol.toStringTag,{value:"Module"}));export{RefIcon$7 as R,mainLayout as m,useThemesStore as u};
