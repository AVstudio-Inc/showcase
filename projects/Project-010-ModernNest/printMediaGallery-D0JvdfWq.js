import{M as p,j as e,w as C,f as I,r as b,B as g,cL as k,br as y,T as x,aF as v,J as F,Y as w,cM as D,G as h,Z as N}from"./main-DkRMjw9y.js";const B=s=>p.info({icon:null,maskClosable:!0,content:e.jsx(e.Fragment,{children:s}),okText:"Close"}),P=({currentProject:s,selectFile:n,setSelectFile:d,renderAsModalPicker:r,style:u,setUploadState:l})=>{const a=s?.id,f=s?.attributes?.media?.data?.filter(t=>t.attributes.mime.includes("image"));return e.jsx(e.Fragment,{children:e.jsx(k,{style:u,children:f?.map(t=>{let i=t.id;try{const m=JSON.parse(t.attributes.alternativeText),{uuid:j}=m;j&&(i=j)}catch{}const{url:c}=y({imageId:t.id,project:s,renderEnvtype:"editor"});let o={};return t.id===n&&(o={borderColor:"var(--ant-primary-5)"}),s&&e.jsxs("div",{style:o,onClick:()=>r&&d(t.id),className:"thumb",children:[e.jsx("img",{className:"pic",src:c,alt:t.attributes.name}),e.jsxs(x,{className:"imgIDBox",children:["ID: ",i]}),!r&&e.jsxs("div",{className:"overlay",children:[e.jsx(v,{onClick:()=>{B(e.jsxs("div",{style:{display:"flex",flexFlow:"column",gap:10},children:[e.jsx("div",{children:e.jsxs(x,{className:"imgIDBox",children:["ID: ",i]})}),e.jsx("img",{className:"pic",src:c,alt:t.attributes.name})]}))}}),e.jsx(F,{onClick:()=>{w({icon:e.jsx(N,{}),title:"Remove media file?",content:`Please confirm removing ${t.attributes.name} from project media library`,okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},onOk:()=>{a&&l&&(l("removing"),D(a,t.id).then(()=>{l(""),h.success("File deleted")}).catch(()=>{h.error("Failed to delete file")}))},onCancel:()=>{}})}})]})]},t.id)})})})},T=C.memo(({style:s,renderAsModalPicker:n,uploadState:d,setUploadState:r})=>{const u=I(m=>m.workingProject),[l,a,f]=n||[],[t,i]=b.useState(null);function c(){f?.(t),a?.(!1)}const o=e.jsx(P,{style:s,setSelectFile:i,selectFile:t,renderAsModalPicker:n,currentProject:u,uploadState:d,setUploadState:r});return n!==void 0?e.jsx(p,{destroyOnClose:!0,maskClosable:!1,title:"Pick Image",open:l,onCancel:()=>a?.(!1),footer:[e.jsx(g,{onClick:()=>{i(null),a?.(!1)},children:"Cancel"},"back"),e.jsx(g,{disabled:t===null,type:"primary",onClick:()=>c(),children:"Pick Image"},"submit")],children:o}):e.jsxs(e.Fragment,{children:[" ",o]})});export{T as P,B as s};
