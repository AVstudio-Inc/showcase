import{r as d,j as e,b as m,ae as y,af as j,a as E}from"./index-BWO8qd00.js";import{T as I}from"./index-DQFZSvcF.js";import{R as C}from"./index-BPRdgIWZ.js";import{I as w,S as R}from"./index-DI0YWsM8.js";import{I as b,B as g}from"./editorApp-BQHhAWNR.js";const k=({initialValue:o,saveInProgress:l,setIsEditing:i,setSaveInProgress:a,save:r,style:c})=>{const[s,f]=d.useState(o);switch(typeof o){case"boolean":return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1em",...c},children:[l&&e.jsx(m,{}),e.jsx(R,{onChange:t=>{f(t==="true")},value:s?"true":"false",options:["true","false"]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx(g,{style:{marginRight:2},type:"dashed",children:e.jsx(y,{onClick:()=>r(s),style:{color:"var(--ant-primary-5)"}})}),e.jsx(g,{onClick:()=>{i(!1),a(!1)},type:"dashed",children:e.jsx(j,{style:{color:"gray"}})})]})]});case"string":return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1em",...c},children:[l&&e.jsx(m,{}),e.jsx(b,{spellCheck:!1,autoFocus:!0,onPressEnter:()=>r(s),onBlur:()=>r(s),onChange:t=>{t.stopPropagation(),f(t.target.value)},value:s})]});case"number":case"object":return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1em",...c},children:[l&&e.jsx(m,{}),e.jsx(w,{style:{width:"100%"},autoFocus:!0,onPressEnter:()=>r(s),onBlur:()=>r(s),onChange:t=>f(t),value:s})]});default:return null}},T=({value:o,onChange:l,initialValue:i,validators:a,style:r})=>{const[c,s]=d.useState(!1),[f,t]=d.useState(!1);function x(n){t(!0),l(n).then(()=>{s(!1),t(!1)})}function h(n){if(n===i){s(!1),t(!1);return}if(a!=null&&a.length){let u=[];return a.forEach(p=>{u.push(p(n))}),Promise.all(u).then(()=>{x(n)}).catch(p=>{E.error(p.message)})}else x(n)}return d.useEffect(()=>{const n=u=>{u.keyCode===27&&s(!1)};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[i]),c?e.jsx(k,{initialValue:i,saveInProgress:f,setIsEditing:s,setSaveInProgress:t,save:h,style:r}):e.jsxs("div",{style:{...r},children:[typeof o=="boolean"?e.jsx(I,{style:{padding:"3px",lineHeight:"1em"},color:o?"green":"red",children:o?"true":"false"}):o,e.jsx(C,{style:{marginLeft:"0.3em",color:"var(--ant-primary-5)"},onClick:()=>{s(!0)}})]})};export{T as E};
