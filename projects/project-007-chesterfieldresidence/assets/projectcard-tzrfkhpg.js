import{r,L as w,h as u,g as ze,b1 as Me,q as Oe,j as e,b as He,R as De,ac as he,a as F,ae as Ee}from"./index-BWO8qd00.js";import{B as Ie,F as Se,G as $e,H as Ne,D as H,b as Z,I as Fe,g as ve}from"./useCustomFonts--hfI8X19.js";import{o as Le,M as pe,l as Ve,aO as Te,D as be,e as Ae,h as We,u as xe,W as _e,aP as Ye,Y as Ue,aQ as U,aR as ge,g as q,B as $,aS as qe,a as N,m as Ge,aT as Ze,aU as Qe}from"./editorApp-BQHhAWNR.js";import{h as Q}from"./moment-G82_0lEo.js";import{C as Je,D as Xe,a as Ke}from"./driverGuideButton-BquW8wR7.js";import{S as et}from"./index.es-6fh8Idhv.js";import{O as tt,R as it}from"./oneProject-73XmHinD.js";import{T as V}from"./index-DQFZSvcF.js";import{R as C,a as at}from"./SettingOutlined-BfK-OcKA.js";import{R as G}from"./DiffOutlined-4UMKY59v.js";import{R as nt}from"./BgColorsOutlined-B_gNkL_v.js";import{P as rt}from"./index-PlVE70kS.js";import{R as st}from"./index-BPRdgIWZ.js";import"./leftSidebar-AH8kSalj.js";import"./Styles-BTfwVjr1.js";import"./GlobalOutlined-f3TBbcvU.js";var lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"},ot=function(n,a){return r.createElement(w,u(u({},n),{},{ref:a,icon:lt}))},ct=r.forwardRef(ot),dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M916 210H376c-17.7 0-32 14.3-32 32v236H108c-17.7 0-32 14.3-32 32v272c0 17.7 14.3 32 32 32h540c17.7 0 32-14.3 32-32V546h236c17.7 0 32-14.3 32-32V242c0-17.7-14.3-32-32-32zm-504 68h200v200H412V278zm-68 468H144V546h200v200zm268 0H412V546h200v200zm268-268H680V278h200v200z"}}]},name:"build",theme:"outlined"},ut=function(n,a){return r.createElement(w,u(u({},n),{},{ref:a,icon:dt}))},L=r.forwardRef(ut),mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},ft=function(n,a){return r.createElement(w,u(u({},n),{},{ref:a,icon:mt}))},ht=r.forwardRef(ft),vt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M945 412H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h256c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM811 548H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h122c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM477.3 322.5H434c-6.2 0-11.2 5-11.2 11.2v248c0 3.6 1.7 6.9 4.6 9l148.9 108.6c5 3.6 12 2.6 15.6-2.4l25.7-35.1v-.1c3.6-5 2.5-12-2.5-15.6l-126.7-91.6V333.7c.1-6.2-5-11.2-11.1-11.2z"}},{tag:"path",attrs:{d:"M804.8 673.9H747c-5.6 0-10.9 2.9-13.9 7.7a321 321 0 01-44.5 55.7 317.17 317.17 0 01-101.3 68.3c-39.3 16.6-81 25-124 25-43.1 0-84.8-8.4-124-25-37.9-16-72-39-101.3-68.3s-52.3-63.4-68.3-101.3c-16.6-39.2-25-80.9-25-124 0-43.1 8.4-84.7 25-124 16-37.9 39-72 68.3-101.3 29.3-29.3 63.4-52.3 101.3-68.3 39.2-16.6 81-25 124-25 43.1 0 84.8 8.4 124 25 37.9 16 72 39 101.3 68.3a321 321 0 0144.5 55.7c3 4.8 8.3 7.7 13.9 7.7h57.8c6.9 0 11.3-7.2 8.2-13.3-65.2-129.7-197.4-214-345-215.7-216.1-2.7-395.6 174.2-396 390.1C71.6 727.5 246.9 903 463.2 903c149.5 0 283.9-84.6 349.8-215.8a9.18 9.18 0 00-8.2-13.3z"}}]},name:"field-time",theme:"outlined"},xt=function(n,a){return r.createElement(w,u(u({},n),{},{ref:a,icon:vt}))},J=r.forwardRef(xt),gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 392h64v64h-64zm0 190v160h128V582h-64v-62h-64v62zm80 48v64h-32v-64h32zm-16-302h64v64h-64zm-64-64h64v64h-64zm64 192h64v64h-64zm0-256h64v64h-64zm494.6 88.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h64v64h64v-64h174v216a42 42 0 0042 42h216v494z"}}]},name:"file-zip",theme:"outlined"},jt=function(n,a){return r.createElement(w,u(u({},n),{},{ref:a,icon:gt}))},pt=r.forwardRef(jt),bt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},yt=function(n,a){return r.createElement(w,u(u({},n),{},{ref:a,icon:bt}))},je=r.forwardRef(yt),wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},Ct=function(n,a){return r.createElement(w,u(u({},n),{},{ref:a,icon:wt}))},Pt=r.forwardRef(Ct),kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM492 400h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zM340 368a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"profile",theme:"outlined"},Rt=function(n,a){return r.createElement(w,u(u({},n),{},{ref:a,icon:kt}))},Bt=r.forwardRef(Rt),zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"},Mt=function(n,a){return r.createElement(w,u(u({},n),{},{ref:a,icon:zt}))},Ot=r.forwardRef(Mt),ye={};(function(t){var n=Ie.default,a=Se.default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a($e),m=a(Me),l=n(r),g=Ne(),v=function(s,c){var f={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&c.indexOf(d)<0&&(f[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,d=Object.getOwnPropertySymbols(s);j<d.length;j++)c.indexOf(d[j])<0&&Object.prototype.propertyIsEnumerable.call(s,d[j])&&(f[d[j]]=s[d[j]]);return f},x=function(c){return l.createElement(g.ConfigConsumer,null,function(f){var d=f.getPrefixCls,j=c.prefixCls,T=c.className,D=c.avatar,E=c.title,B=c.description,I=v(c,["prefixCls","className","avatar","title","description"]),P=d("card",j),A=(0,m.default)("".concat(P,"-meta"),T),W=D?l.createElement("div",{className:"".concat(P,"-meta-avatar")},D):null,z=E?l.createElement("div",{className:"".concat(P,"-meta-title")},E):null,R=B?l.createElement("div",{className:"".concat(P,"-meta-description")},B):null,_=z||R?l.createElement("div",{className:"".concat(P,"-meta-detail")},z,R):null;return l.createElement("div",(0,o.default)({},I,{className:A}),W,_)})};t.default=x})(ye);const Ht=ze(ye),Dt=Oe.div`
width:30%;
height: 100%;
min-width: 140px;
position: relative;
cursor: pointer;
user-select: none;

.overlayButtons {
    position: absolute;
    z-index: 1;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.3);
    color: #fff;
    opacity: 0.001;
    transition: 200ms;
    backdrop-filter: blur(20px);
}

&:hover {

    .overlayButtons {
        opacity: 0.9999;
    }
  
}
`,Et=({projectScreenshots:t,projectTitle:n})=>{const[a,o]=r.useState(!1),m=({screenShotItem:g,title:v})=>{const x="",{description:s,image:c}=g,{url:f}=c.data.attributes;pe.info({width:"90vw",centered:!0,icon:null,maskClosable:!0,title:v,content:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:"70vh",display:"flex",justifyContent:"center",alignItems:"center",flexFlow:"column",position:"relative"},children:a?e.jsx(He,{style:{fontSize:"3em"}}):e.jsx("img",{style:{position:"relative",transition:"200ms",width:"100%",height:"100%",maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},alt:s,src:x+f,onLoad:()=>{o(!1)}})}),e.jsx("div",{children:s})]}),okText:"Close"})},l=t.map(g=>{const{id:v,description:x,image:s,order:c}=g,{thumbnail:f}=s.data.attributes.formats;return e.jsxs(Dt,{onClick:()=>{m({screenShotItem:g,title:n})},style:{order:c},children:[e.jsx("img",{style:{position:"absolute",zIndex:0,objectFit:"cover",width:"100%",height:"100%",borderRadius:3},src:""+f.url,alt:x}),e.jsx("div",{className:"overlayButtons",children:e.jsx(Le,{})})]},v)});return e.jsx(et,{style:{position:"relative",display:"flex",gap:10,alignItems:"stretch",flex:1,minWidth:0,overflow:"auto"},children:l})};function It(t){return t<1024?`${t} KB`:`${(t/1024).toFixed(2)} MB`}function we(t,n){function a(o,m){const l=document.createElement("a");l.download=m,l.href=o,document.body.appendChild(l),l.click(),l.remove()}fetch(t,{headers:new Headers({Origin:window.location.origin}),mode:"cors",credentials:"include"}).then(o=>{if(o.status===200)return o.blob();F.error("Download build error.")}).then(o=>{if(o){const m=window.URL.createObjectURL(o);a(m,n)}}).catch(o=>console.error(o))}const St=De.memo(({project:t,buildingNow:n})=>{const[a,o]=r.useState([]);r.useEffect(()=>{var v;const l=[...((v=t.attributes.builds)==null?void 0:v.data)||[]];function g(x,s){return x.id<s.id?1:x.id>s.id?-1:0}if(l!=null&&l.length){l.sort(g);const x=[];l.forEach(s=>{let c="Default";try{const f=JSON.parse(s.attributes.alternativeText??""),d=f==null?void 0:f.envName;d&&(c=d)}catch{}x.push({key:s.id,envName:e.jsx("div",{style:{textAlign:"right"},children:e.jsx(Ve,{placement:"topLeft",title:"Environment used for this build",arrowPointAtCenter:!0,children:e.jsx(V,{icon:e.jsx(C,{}),style:{marginLeft:5,lineHeight:"1em",padding:"2px 3px"},color:c!=="Default"?"purple":"",children:c})})}),filename:e.jsxs("div",{style:{whiteSpace:"nowrap"},children:[e.jsx(L,{})," ",s.attributes.name]}),fileSize:e.jsxs("div",{style:{whiteSpace:"nowrap"},children:[e.jsx(pt,{})," ",It(s.attributes.size)]}),fileDate:e.jsxs("div",{style:{whiteSpace:"nowrap"},children:[e.jsx(J,{style:{marginRight:"0.5em"}}),Q(s.attributes.createdAt).format("MMMM Do YYYY, h:mm a")]}),fileControls:e.jsxs(H.Button,{onClick:()=>{we(void 0+s.attributes.url,s.attributes.name)},menu:{items:[{key:"remove",danger:!0,icon:e.jsx(Z,{}),label:"Delete Build",onClick:()=>{Te({projectId:t.id,buildId:s.id})}}]},children:[e.jsx(ht,{})," Download"]})})}),o(x)}else o([])},[t]);const m=[{title:"File Name",width:"100%",dataIndex:"filename",key:"filename"},{title:"Environment",dataIndex:"envName",key:"envName"},{title:"File Size",dataIndex:"fileSize",key:"fileSize"},{title:"File Date",dataIndex:"fileDate",key:"fileDate"},{title:"File Controls",dataIndex:"fileControls",key:"fileControls"}];return e.jsxs(e.Fragment,{children:[a.length?e.jsxs(e.Fragment,{children:[e.jsx(be,{style:{marginBottom:"0.8em"}}),e.jsxs(V,{style:{marginBottom:"1em"},children:["Builds count: ",a.length]})]}):null,e.jsx("div",{style:{maxHeight:250,overflow:"scroll"},children:a.length?e.jsx(Fe,{loading:n,showHeader:!1,pagination:!1,dataSource:a,columns:m}):null},a.length)]})}),Xt=({project:t,compact:n})=>{var K,ee,te,ie,ae,ne,re,se,le,oe,ce,de,ue,me;const{id:a,attributes:o}=t,m=Ae(),{projectId:l}=We(),g=xe(i=>i.projectBuildSelectedEnv),{isTemplate:v,isTemplateOwner:x,templateOwnerInfo:s,templatePrice:c,templateLicense:f="none",templateCategory:d="None",projectScreenshots:j}=o,{firstName:T,lastName:D,company:E="No Company"}=s??{},B=r.useMemo(()=>{var h,p,b,y;const i=(h=t.attributes)==null?void 0:h.selectedEnv;if(i)return(y=(b=(p=t.attributes)==null?void 0:p.env)==null?void 0:b.find(S=>S.envId===i))==null?void 0:y.envName},[(K=t.attributes)==null?void 0:K.env,(ee=t.attributes)==null?void 0:ee.selectedEnv]),I=r.useMemo(()=>{var i,h,p;if(g)return(p=(h=(i=t.attributes)==null?void 0:i.env)==null?void 0:h.find(b=>b.envId===g))==null?void 0:p.envName},[(te=t.attributes)==null?void 0:te.env,g]),P=i=>{const h=xe.getState().updateEnvStore;h({projectBuildSelectedEnv:i})},A=i=>{const h=N.getState().updateProjectWithHistory;h({selectedEnv:i},!1)},{setEditProjectModalId:W}=_e(),[z,R]=r.useState(!1);function _(i){var y,S,fe;if(!((y=t.attributes.permissions)!=null&&y.canBuild)){pe.confirm({open:!0,title:"Activate unlimited builds for this project",zIndex:3e3,icon:e.jsxs("svg",{style:{color:" var(--ant-primary-5)"},xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 24 24",children:[e.jsx("title",{children:"Activate builds for this project"}),e.jsxs("g",{fill:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{fillRule:"evenodd",d:"M5 6.25A2.75 2.75 0 0 0 2.25 9v9A2.75 2.75 0 0 0 5 20.75h14A2.75 2.75 0 0 0 21.75 18V9A2.75 2.75 0 0 0 19 6.25zm11.5 6a1.25 1.25 0 1 0 0 2.5a1.25 1.25 0 0 0 0-2.5",clipRule:"evenodd"}),e.jsx("path",{d:"M16.485 3.069A2 2 0 0 1 19 5H9z"})]})]}),content:"Making project builds is a paid feature. Make a one-time payment for unlimited builds for this project.",okText:"Activate builds",cancelText:"Cancel",okButtonProps:{icon:e.jsx(Ee,{})},onOk:()=>{var O;const k=(O=Ge.getState().user)==null?void 0:O.id;if(k)return Ze({user:k,productId:1,projectId:t.id});console.error("User not found")},onCancel:()=>console.log("cancel build activation")});return}const h=(fe=(S=N.getState().workingProject)==null?void 0:S.attributes.pages.data)==null?void 0:fe.filter(k=>!k.attributes.isSubpage);if(!(h!=null&&h.length)){F.error("At least one page need to start build"),R(!1);return}const p=q.getState().fillProjectsList,b=N.getState().updateProjectWithHistory;R(!0),Qe(i).then(k=>{var O;if(k){let Y=structuredClone(((O=N.getState().workingProject)==null?void 0:O.attributes.builds.data)||[]);Y=[...Y,k],n?p():b({builds:{data:Y}},!1)}}).catch(()=>{F.error("Build error")}).finally(()=>{R(!1)})}const Ce=[e.jsx($,{icon:e.jsx(st,{}),onClick:()=>m(`/projects/${t.id}`),block:!0,style:{width:"90%"},type:"text",children:"Edit"},"edit"),e.jsx(H,{menu:{items:[{key:"Clone Project",label:"Clone Project",icon:e.jsx(G,{}),onClick:()=>U(a).then(i=>{if(!i){F.error("Failed to clone project");return}l&&m(`/projects/${i}`)})},{key:"Delete Project",danger:!0,label:"Delete Project",icon:e.jsx(Z,{}),onClick:()=>{ve({icon:e.jsx(he,{}),title:"Remove Project?",content:`Please confirm removing project "${t.attributes.name}"`,okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},onOk:async()=>{await ge({projectId:a}).then(()=>{const i=q.getState().fillProjectsList;i(),l&&m("/projects")})},onCancel:()=>{}})}}]},children:e.jsx($,{icon:e.jsx(je,{}),block:!0,style:{width:"90%"},type:"text"},"more")},"clone")],Pe=[e.jsx($,{icon:e.jsx(G,{}),onClick:()=>{U(t.id).then(i=>{i&&m(`/projects/${i}`)})},block:!0,style:{width:"100%"},type:"text",children:"Clone to my Projects"},"clone")],ke=()=>v?Pe:l?Re:Ce,Re=[e.jsx(H.Button,{className:"expandedDropdownButton ProjectLiveButton",icon:e.jsx(C,{}),menu:{items:[{key:"Default",label:e.jsxs(e.Fragment,{children:[e.jsx(C,{})," Default"]})},...((ae=(ie=t.attributes)==null?void 0:ie.env)==null?void 0:ae.map(i=>({key:i.envId,label:e.jsxs(e.Fragment,{children:[e.jsx(C,{})," ",i.envName]})})))||[]],onClick:({key:i})=>{A(i)}},children:e.jsxs("a",{href:Ye(),target:"_blank",rel:"noreferrer",style:{color:"inherit",display:"block"},children:[e.jsx(Pt,{})," Live",e.jsx(V,{icon:e.jsx(C,{style:{marginRight:-5}}),style:{marginLeft:5,lineHeight:"1em",padding:"2px 3px"},color:B?"purple":"",children:B||"Default"})]})},"live"),e.jsxs(H.Button,{loading:z,className:"expandedDropdownButton ProjectBuildButton",icon:e.jsx(L,{}),onClick:()=>_(a),menu:{items:[{key:"Default",label:e.jsxs(e.Fragment,{children:[e.jsx(C,{})," Default"]})},...((re=(ne=t.attributes)==null?void 0:ne.env)==null?void 0:re.map(i=>({key:i.envId,label:e.jsxs(e.Fragment,{children:[e.jsx(C,{})," ",i.envName]})})))||[]],onClick:({key:i})=>{P(i)}},children:[(se=t.attributes.permissions)!=null&&se.canBuild?e.jsx(L,{}):e.jsx(Ue,{}),"Build",e.jsx(V,{icon:e.jsx(C,{style:{marginRight:-5}}),style:{marginLeft:5,lineHeight:"1em",padding:"2px 3px"},color:I?"purple":"",children:I||"Default"})]},"build"),e.jsx(H,{className:"ProjectMenuButton",menu:{items:[{key:"Project Settings",label:"Project Settings",icon:e.jsx(at,{}),onClick:()=>W(t.id)},{key:"Clone Project",label:"Clone Project",icon:e.jsx(G,{}),onClick:()=>U(a).then(i=>{l&&m(`/projects/${i}`)})},{key:"Delete Project",danger:!0,label:"Delete Project",icon:e.jsx(Z,{}),onClick:()=>{ve({icon:e.jsx(he,{}),title:"Remove Project?",content:`Please confirm removing project "${t.attributes.name}"`,okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},onOk:async()=>{await ge({projectId:a}).then(()=>{const i=q.getState().fillProjectsList;i(),l&&m("/projects")})},onCancel:()=>{}})}}]},children:e.jsx($,{icon:e.jsx(je,{}),block:!0,type:"dashed"})},"settings")],[M,X]=r.useState(null);r.useEffect(()=>{var h;const i=(h=t.attributes.builds)==null?void 0:h.data;if(i!=null&&i.length){const p=Math.max(...i.map(y=>y.id)),b=i.find(y=>y.id===p);b&&X(b)}else X(null)},[t]);const Be=r.useContext(tt);return e.jsx("div",{id:"ProjectCardSection",children:e.jsxs(Je,{id:"Top",as:qe,children:[e.jsx(Ht,{title:e.jsxs(e.Fragment,{children:[o.name,!n&&e.jsx(Xe,{guide:Be})]}),description:e.jsxs(e.Fragment,{children:[e.jsx(Ke,{title:"Main Theme Colors",style:{background:((ce=(oe=(le=t.attributes.theme)==null?void 0:le.data)==null?void 0:oe.attributes)==null?void 0:ce.colorsPreview)||"gray"}}),e.jsxs("div",{style:{display:"flex",gap:30},children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(nt,{style:{marginRight:"0.3em"}}),(me=(ue=(de=o.theme)==null?void 0:de.data)==null?void 0:ue.attributes)==null?void 0:me.name]}),e.jsxs("div",{children:[e.jsx(J,{style:{marginRight:"0.3em"}}),"Updated:"," ",Q(o.updatedAt).format("MMMM Do YYYY, h:mm a")]}),v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(it,{style:{marginRight:"0.3em"}}),"Creator:"," ",x?"me":`${T} ${D}, ${E}`]}),e.jsxs("div",{children:[e.jsx(ct,{style:{marginRight:"0.3em"}}),"License: ",f]}),e.jsxs("div",{children:[e.jsx(Bt,{style:{marginRight:"0.3em"}}),"Category: ",d]}),e.jsxs("div",{children:[e.jsx(Ot,{style:{marginRight:"0.3em"}}),"Price: ",c??"free"]})]}),!v&&n&&e.jsxs("div",{children:[e.jsx(L,{style:{marginRight:"0.3em"}}),"Last Build:"," ",M?e.jsx(rt,{content:e.jsxs(e.Fragment,{children:[e.jsx(J,{style:{marginRight:"0.5em"}}),Q(M.attributes.createdAt).format("MMMM Do YYYY, h:mm a")]}),children:e.jsx("span",{onClick:()=>{we(void 0+M.attributes.url,M.attributes.name)},className:"lastProjectLink",children:M.attributes.name})}):"none"]})]}),v&&e.jsx(Et,{projectTitle:t.attributes.name,projectScreenshots:j})]}),!n&&e.jsx(St,{project:t,buildingNow:z})]})}),e.jsx(be,{}),e.jsx("div",{className:"projectCardActionsBox",children:ke()})]},a)})};export{Xt as default};
