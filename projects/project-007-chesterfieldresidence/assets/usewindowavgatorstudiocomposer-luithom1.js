import{r as p,L as C,h as f}from"./index-BWO8qd00.js";import{v as V,x as w,w as I,y as R,z as x,A as B,u as M,e as X}from"./editorApp-BQHhAWNR.js";import{u as y,g as A}from"./variablesAPI-D_uU0Jyf.js";import{d as D,u as E}from"./datasourceTools-CeSl9gC_.js";import{p as F,h as N,i as z,j as W,k as Y,l as O}from"./useGetElDimensionsStyles-DKp_YFdD.js";var j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},q=function(s,i){return p.createElement(C,f(f({},s),{},{ref:i,icon:j}))},_=p.forwardRef(q);const $=V()(w(t=>({xPanelStatus:"disconnected",lastErrorMessage:"",manualStartConnect:!1,updateXpanelStore:s=>{t(i=>({...i,...s}))}}),{name:"xpanelStore",storage:{getItem:R,setItem:x,removeItem:B}}),I.isEqual),G=({targetHtmlElement:t})=>{let s={left:0,top:0,right:0,bottom:0,width:0,height:0,deltaCenterX:0,deltaCenterY:0};if(!t)return s;const i=t.parentElement;if(i){const c=M.getState().editorZoom??1,n=t.getBoundingClientRect(),r=i.getBoundingClientRect(),d=(n.left-r.left)/c,g=(n.top-r.top)/c,h=(r.right-n.right)/c,e=(r.bottom-n.bottom)/c,a="offsetWidth"in t?t.offsetWidth:0,o="offsetHeight"in t?t.offsetHeight:0,l=r.left+r.width/2,u=r.top+r.height/2,m=n.left+n.width/2,S=n.top+n.height/2,b=(m-l)/c,v=(S-u)/c;s={left:d,top:g,right:h,bottom:e,width:a,height:o,deltaCenterX:b,deltaCenterY:v}}return s},J=()=>{const t=X(),{setVariableNewValue:s}=y.getState(),{addValueToStore:i,getValueFromStore:c}=D.getState();p.useEffect(()=>{const n=({uid:e})=>{var o,l;const a=E.getState().current;return e?(l=(o=a.filter(u=>u.uid===e))==null?void 0:o[0])==null?void 0:l.value:a},r=({name:e})=>{const a=A(e),{currentValue:o,defaultValue:l}=a??{};return o===void 0?l:o},d=({name:e,value:a})=>{s({name:e,currentValue:a})},g=({name:e,type:a,joinNumber:o,value:l,scope:u})=>{i({name:e,type:a,joinNumber:o,value:l,scope:u})},h=({name:e,type:a,scope:o})=>c(e,a,o);window.avgatorStudio={navigate:t,publishAnalog:F,publishDigital:N,publishSerial:z,getInstantDigitalFb:W,getInstantAnalogFb:Y,getInstantSerialFb:O,getDatasource:n,getVariableByName:r,setStoreValue:g,getStoreValue:h,setVariableByName:d}},[i,c,t,s])};export{_ as R,J as a,G as g,$ as u};
