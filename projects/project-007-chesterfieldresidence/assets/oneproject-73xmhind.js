const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./projectCard-TZRFKHpg.js","./index-BWO8qd00.js","./index-CtV2aIBv.css","./useCustomFonts--hfI8X19.js","./editorApp-BQHhAWNR.js","./editorApp-BmhU-YmB.css","./index-BPRdgIWZ.js","./moment-G82_0lEo.js","./driverGuideButton-BquW8wR7.js","./index.es-6fh8Idhv.js","./index-DQFZSvcF.js","./SettingOutlined-BfK-OcKA.js","./DiffOutlined-4UMKY59v.js","./BgColorsOutlined-B_gNkL_v.js","./index-PlVE70kS.js","./leftSidebar-AH8kSalj.js","./Styles-BTfwVjr1.js","./GlobalOutlined-f3TBbcvU.js","./projectGlobalContainers-DkdxG4nR.js","./EditableCell-CnqTEXkH.js","./index-DI0YWsM8.js","./index-xMIPA-_5.js","./MobileOutlined-DKAIJHhJ.js","./printProjectMedia-Djr9UrYv.js","./printMediaGallery-pCY-1x6k.js","./localActiveAPI-Dv2O1BDy.js","./projectPages-48mhm7zM.js","./pageAPI-B3I9BgVC.js","./variablesAPI-D_uU0Jyf.js","./___vite-browser-external_commonjs-proxy-FhmH_qOu.js","./deletePage-BqMP05t5.js","./renderActionTag-DNrT7Mjk.js","./tableFieldSearchInput-DW8T1Il9.js","./dayjs.min-DIl2m-M7.js","./projectSubPages-B1EbAg2T.js","./projectVariables-pDeALek1.js","./projectModificators-Ds8KCpla.js","./DirectoryTree-BGSJ2KkI.js","./modificatorAPI-CAH1u60t.js","./projectDatasouces-CTo5XTAL.js","./datasourceAPI-BARHsYAW.js","./datasourceTools-CeSl9gC_.js","./PictureOutlined-C1bPwfBs.js"])))=>i.map(i=>d[i]);
import{r as w,L as q,h as A,j as s,b as Pe,aj as k,ak as T}from"./index-BWO8qd00.js";import{e as re,f as je,a as se,h as _e,g as Ce,B as le,D as S}from"./editorApp-BQHhAWNR.js";import{A as Ee}from"./leftSidebar-AH8kSalj.js";import{T as J,a as Le,u as X}from"./useCustomFonts--hfI8X19.js";import{R as Se}from"./GlobalOutlined-f3TBbcvU.js";var ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-696 72h136v656H184V184zm656 656H384V384h456v456zM384 320V184h456v136H384z"}}]},name:"layout",theme:"outlined"},Be=function(t,o){return w.createElement(q,A(A({},t),{},{ref:o,icon:ke}))},Ae=w.forwardRef(Be),Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M640.6 429.8h257.1c7.9 0 14.3-6.4 14.3-14.3V158.3c0-7.9-6.4-14.3-14.3-14.3H640.6c-7.9 0-14.3 6.4-14.3 14.3v92.9H490.6c-3.9 0-7.1 3.2-7.1 7.1v221.5h-85.7v-96.5c0-7.9-6.4-14.3-14.3-14.3H126.3c-7.9 0-14.3 6.4-14.3 14.3v257.2c0 7.9 6.4 14.3 14.3 14.3h257.1c7.9 0 14.3-6.4 14.3-14.3V544h85.7v221.5c0 3.9 3.2 7.1 7.1 7.1h135.7v92.9c0 7.9 6.4 14.3 14.3 14.3h257.1c7.9 0 14.3-6.4 14.3-14.3v-257c0-7.9-6.4-14.3-14.3-14.3h-257c-7.9 0-14.3 6.4-14.3 14.3v100h-78.6v-393h78.6v100c0 7.9 6.4 14.3 14.3 14.3zm53.5-217.9h150V362h-150V211.9zM329.9 587h-150V437h150v150zm364.2 75.1h150v150.1h-150V662.1z"}}]},name:"partition",theme:"outlined"},Te=function(t,o){return w.createElement(q,A(A({},t),{},{ref:o,icon:Me}))},$e=w.forwardRef(Te),He={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144a16 16 0 0116 16v304a16 16 0 01-16 16H160a16 16 0 01-16-16V160a16 16 0 0116-16zm-52 68H212v200h200zm493.33 87.69a16 16 0 010 22.62L724.31 503.33a16 16 0 01-22.62 0L520.67 322.31a16 16 0 010-22.62l181.02-181.02a16 16 0 0122.62 0zm-84.85 11.3L713 203.53 605.52 311 713 418.48zM464 544a16 16 0 0116 16v304a16 16 0 01-16 16H160a16 16 0 01-16-16V560a16 16 0 0116-16zm-52 68H212v200h200zm452-68a16 16 0 0116 16v304a16 16 0 01-16 16H560a16 16 0 01-16-16V560a16 16 0 0116-16zm-52 68H612v200h200z"}}]},name:"product",theme:"outlined"},De=function(t,o){return w.createElement(q,A(A({},t),{},{ref:o,icon:He}))},Q=w.forwardRef(De),Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M759 335c0-137-111-248-248-248S263 198 263 335c0 82.8 40.6 156.2 103 201.2-.4.2-.7.3-.9.4-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00136 874.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C356 614.2 431 583 511 583c137 0 248-111 248-248zM511 507c-95 0-172-77-172-172s77-172 172-172 172 77 172 172-77 172-172 172zm105 221h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H703.5l47.2-60.1a8.1 8.1 0 001.7-4.9c0-4.4-3.6-8-8-8h-72.6c-4.9 0-9.5 2.3-12.6 6.1l-68.5 87.1c-4.4 5.6-6.8 12.6-6.8 19.8.1 17.7 14.4 32 32.1 32zm240 64H592c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h176.5l-47.2 60.1a8.1 8.1 0 00-1.7 4.9c0 4.4 3.6 8 8 8h72.6c4.9 0 9.5-2.3 12.6-6.1l68.5-87.1c4.4-5.6 6.8-12.6 6.8-19.8-.1-17.7-14.4-32-32.1-32z"}}]},name:"user-switch",theme:"outlined"},Ie=function(t,o){return w.createElement(q,A(A({},t),{},{ref:o,icon:Re}))},ze=w.forwardRef(Ie);const ae=["Top","Pages","SubPages","Global Containers","Variables","Data sources","Functions","Media Gallery","Fonts"],Y=({data:e,title:t})=>s.jsxs(s.Fragment,{children:[s.jsx("span",{style:{paddingRight:3},children:t}),(e==null?void 0:e.length)===void 0?s.jsx(Pe,{}):`[${e==null?void 0:e.length}]`]}),Pt=()=>{const e=re(),[,t]=je(),o=se(f=>f.workingProject),{projectId:i}=_e(),{myProjects:n,communityTemplates:a,myTemplates:u}=Ce(),[g,r]=w.useState("myProjects"),[d,l]=w.useState(["myProjects"]);w.useEffect(()=>{if(g.includes("templateId"))try{const{filter:f,templateId:_}=JSON.parse(g);t({filter:f,templateId:_})}catch{}else t({filter:g})},[g,t]);const v=f=>{l(f)},m=(f,_)=>{try{const j=f[0];if(j===void 0)return;typeof j=="number"?e("/projects/"+j):(r(j),l(C=>C.includes(j)?C:[...C,j]))}catch(j){console.log(j)}},y=n==null?void 0:n.map(f=>({title:f.attributes.name,key:f.id,icon:s.jsx(Ae,{})})).sort((f,_)=>f.title.localeCompare(_.title)),b=a==null?void 0:a.map(f=>{const _={filter:"communityTemplates",templateId:f.id};return{title:f.attributes.name,key:JSON.stringify(_),icon:s.jsx(Q,{})}}).sort((f,_)=>f.title.localeCompare(_.title)),x=u==null?void 0:u.map(f=>({title:f.attributes.name,key:f.id,icon:s.jsx(Q,{})})).sort((f,_)=>f.title.localeCompare(_.title)),[h,P]=w.useState("");return w.useEffect(()=>{if(h){let f=document.getElementById(h);f&&f.scrollIntoView({behavior:"smooth"}),P("")}},[h]),s.jsxs("div",{style:{padding:10},children:[i&&o&&s.jsxs(s.Fragment,{children:[s.jsxs(le,{onClick:()=>e("/projects/"),block:!0,size:"small",type:"dashed",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:s.jsxs("g",{fill:"none",fillRule:"evenodd",children:[s.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),s.jsx("path",{fill:"currentColor",d:"M8.293 12.707a1 1 0 0 1 0-1.414l5.657-5.657a1 1 0 1 1 1.414 1.414L10.414 12l4.95 4.95a1 1 0 0 1-1.414 1.414z"})]})}),"Back to all projects"]}),s.jsx(S,{style:{margin:"10px 0"}}),s.jsx(J,{onSelect:f=>P(String(f[0])),showLine:!0,showIcon:!0,selectedKeys:[],defaultExpandedKeys:["Project Data"],treeData:[{title:o.attributes.name,key:"Project Data",children:[...ae.map(f=>({title:f,key:f,icon:s.jsx("svg",{style:{transform:"translateY(3px)",color:"var(--ant-primary-5)"},xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",children:s.jsx("path",{fill:"currentColor",d:"M200 88v104a8 8 0 0 1-8 8H88a8 8 0 0 1-5.66-13.66L128.69 140L58.34 69.66a8 8 0 0 1 11.32-11.32L140 128.69l46.34-46.35A8 8 0 0 1 200 88"})})}))]}]})]}),i?null:s.jsx(J,{showLine:!0,showIcon:!0,selectedKeys:[g],expandedKeys:d,onSelect:m,onExpand:v,treeData:[{icon:s.jsx($e,{}),title:s.jsx(Y,{data:n,title:"My Projects"}),key:"myProjects",children:n!=null&&n.length?y:[{title:"No projects available",key:"noProjects",selectable:!1}]},{icon:s.jsx(Se,{}),title:s.jsx(Y,{data:a,title:"Community Templates"}),key:"communityTemplates",children:a!=null&&a.length?b:[{title:"No templates available",key:"no communityTemplates",selectable:!1}]},{icon:s.jsx(ze,{}),title:s.jsx(Y,{data:u,title:"My Templates"}),key:"myTemplates",children:u!=null&&u.length?x:[{title:"No templates available",key:"noTemplates",selectable:!1}]}]})]})};let Z={};function U(e={}){Z={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...e}}function c(e){return e?Z[e]:Z}function W(e,t,o,i){return(e/=i/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t}function ce(e){const t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return e.flatMap(o=>{const i=o.matches(t),n=Array.from(o.querySelectorAll(t));return[...i?[o]:[],...n]}).filter(o=>getComputedStyle(o).pointerEvents!=="none"&&Ve(o))}function de(e){if(!e||Ne(e))return;const t=c("smoothScroll");e.scrollIntoView({behavior:!t||Oe(e)?"auto":"smooth",inline:"center",block:"center"})}function Oe(e){if(!e||!e.parentElement)return;const t=e.parentElement;return t.scrollHeight>t.clientHeight}function Ne(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function Ve(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}let K={};function E(e,t){K[e]=t}function p(e){return e?K[e]:K}function ee(){K={}}let G={};function F(e,t){G[e]=t}function $(e){var t;(t=G[e])==null||t.call(G)}function We(){G={}}function Fe(e,t,o,i){let n=p("__activeStagePosition");const a=n||o.getBoundingClientRect(),u=i.getBoundingClientRect(),g=W(e,a.x,u.x-a.x,t),r=W(e,a.y,u.y-a.y,t),d=W(e,a.width,u.width-a.width,t),l=W(e,a.height,u.height-a.height,t);n={x:g,y:r,width:d,height:l},ue(n),E("__activeStagePosition",n)}function pe(e){if(!e)return;const t=e.getBoundingClientRect(),o={x:t.x,y:t.y,width:t.width,height:t.height};E("__activeStagePosition",o),ue(o)}function Ke(){const e=p("__activeStagePosition"),t=p("__overlaySvg");if(!e)return;if(!t){console.warn("No stage svg found.");return}const o=window.innerWidth,i=window.innerHeight;t.setAttribute("viewBox",`0 0 ${o} ${i}`)}function Ge(e){const t=qe(e);document.body.appendChild(t),me(t,o=>{o.target.tagName==="path"&&$("overlayClick")}),E("__overlaySvg",t)}function ue(e){const t=p("__overlaySvg");if(!t){Ge(e);return}const o=t.firstElementChild;if((o==null?void 0:o.tagName)!=="path")throw new Error("no path element found in stage svg");o.setAttribute("d",ve(e))}function qe(e){const t=window.innerWidth,o=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${t} ${o}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",ve(e)),n.style.fill=c("overlayColor")||"rgb(0,0,0)",n.style.opacity=`${c("overlayOpacity")}`,n.style.pointerEvents="auto",n.style.cursor="auto",i.appendChild(n),i}function ve(e){const t=window.innerWidth,o=window.innerHeight,i=c("stagePadding")||0,n=c("stageRadius")||0,a=e.width+i*2,u=e.height+i*2,g=Math.min(n,a/2,u/2),r=Math.floor(Math.max(g,0)),d=e.x-i+r,l=e.y-i,v=a-r*2,m=u-r*2;return`M${t},0L0,0L0,${o}L${t},${o}L${t},0Z
    M${d},${l} h${v} a${r},${r} 0 0 1 ${r},${r} v${m} a${r},${r} 0 0 1 -${r},${r} h-${v} a${r},${r} 0 0 1 -${r},-${r} v-${m} a${r},${r} 0 0 1 ${r},-${r} z`}function Ye(){const e=p("__overlaySvg");e&&e.remove()}function Ue(){const e=document.getElementById("driver-dummy-element");if(e)return e;let t=document.createElement("div");return t.id="driver-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}function te(e){const{element:t}=e;let o=typeof t=="string"?document.querySelector(t):t;o||(o=Ue()),Ze(o,e)}function Je(){const e=p("__activeElement"),t=p("__activeStep");e&&(pe(e),Ke(),ge(e,t))}function Ze(e,t){const o=Date.now(),i=p("__activeStep"),n=p("__activeElement")||e,a=!n||n===e,u=e.id==="driver-dummy-element",g=n.id==="driver-dummy-element",r=c("animate"),d=t.onHighlightStarted||c("onHighlightStarted"),l=(t==null?void 0:t.onHighlighted)||c("onHighlighted"),v=(i==null?void 0:i.onDeselected)||c("onDeselected"),m=c(),y=p();!a&&v&&v(g?void 0:n,i,{config:m,state:y}),d&&d(u?void 0:e,t,{config:m,state:y});const b=!a&&r;let x=!1;ot(),E("previousStep",i),E("previousElement",n),E("activeStep",t),E("activeElement",e);const h=()=>{if(p("__transitionCallback")!==h)return;const P=Date.now()-o,f=400-P<=400/2;t.popover&&f&&!x&&b&&(oe(e,t),x=!0),c("animate")&&P<400?Fe(P,400,n,e):(pe(e),l&&l(u?void 0:e,t,{config:c(),state:p()}),E("__transitionCallback",void 0),E("__previousStep",i),E("__previousElement",n),E("__activeStep",t),E("__activeElement",e)),window.requestAnimationFrame(h)};E("__transitionCallback",h),window.requestAnimationFrame(h),de(e),!b&&t.popover&&oe(e,t),n.classList.remove("driver-active-element","driver-no-interaction"),n.removeAttribute("aria-haspopup"),n.removeAttribute("aria-expanded"),n.removeAttribute("aria-controls"),c("disableActiveInteraction")&&e.classList.add("driver-no-interaction"),e.classList.add("driver-active-element"),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls","driver-popover-content")}function Xe(){var e;(e=document.getElementById("driver-dummy-element"))==null||e.remove(),document.querySelectorAll(".driver-active-element").forEach(t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")})}function D(){const e=p("__resizeTimeout");e&&window.cancelAnimationFrame(e),E("__resizeTimeout",window.requestAnimationFrame(Je))}function Qe(e){var t;if(!p("isInitialized")||!(e.key==="Tab"||e.keyCode===9))return;const o=p("__activeElement"),i=(t=p("popover"))==null?void 0:t.wrapper,n=ce([...i?[i]:[],...o?[o]:[]]),a=n[0],u=n[n.length-1];if(e.preventDefault(),e.shiftKey){const g=n[n.indexOf(document.activeElement)-1]||u;g==null||g.focus()}else{const g=n[n.indexOf(document.activeElement)+1]||a;g==null||g.focus()}}function he(e){var t;((t=c("allowKeyboardControl"))==null||t)&&(e.key==="Escape"?$("escapePress"):e.key==="ArrowRight"?$("arrowRightPress"):e.key==="ArrowLeft"&&$("arrowLeftPress"))}function me(e,t,o){const i=(n,a)=>{const u=n.target;e.contains(u)&&((!o||o(u))&&(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation()),a==null||a(n))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",n=>{i(n,t)},!0)}function et(){window.addEventListener("keyup",he,!1),window.addEventListener("keydown",Qe,!1),window.addEventListener("resize",D),window.addEventListener("scroll",D)}function tt(){window.removeEventListener("keyup",he),window.removeEventListener("resize",D),window.removeEventListener("scroll",D)}function ot(){const e=p("popover");e&&(e.wrapper.style.display="none")}function oe(e,t){var o,i;let n=p("popover");n&&document.body.removeChild(n.wrapper),n=it(),document.body.appendChild(n.wrapper);const{title:a,description:u,showButtons:g,disableButtons:r,showProgress:d,nextBtnText:l=c("nextBtnText")||"Next &rarr;",prevBtnText:v=c("prevBtnText")||"&larr; Previous",progressText:m=c("progressText")||"{current} of {total}"}=t.popover||{};n.nextButton.innerHTML=l,n.previousButton.innerHTML=v,n.progress.innerHTML=m,a?(n.title.innerHTML=a,n.title.style.display="block"):n.title.style.display="none",u?(n.description.innerHTML=u,n.description.style.display="block"):n.description.style.display="none";const y=g||c("showButtons"),b=d||c("showProgress")||!1,x=(y==null?void 0:y.includes("next"))||(y==null?void 0:y.includes("previous"))||b;n.closeButton.style.display=y.includes("close")?"block":"none",x?(n.footer.style.display="flex",n.progress.style.display=b?"block":"none",n.nextButton.style.display=y.includes("next")?"block":"none",n.previousButton.style.display=y.includes("previous")?"block":"none"):n.footer.style.display="none";const h=r||c("disableButtons")||[];h!=null&&h.includes("next")&&(n.nextButton.disabled=!0,n.nextButton.classList.add("driver-popover-btn-disabled")),h!=null&&h.includes("previous")&&(n.previousButton.disabled=!0,n.previousButton.classList.add("driver-popover-btn-disabled")),h!=null&&h.includes("close")&&(n.closeButton.disabled=!0,n.closeButton.classList.add("driver-popover-btn-disabled"));const P=n.wrapper;P.style.display="block",P.style.left="",P.style.top="",P.style.bottom="",P.style.right="",P.id="driver-popover-content",P.setAttribute("role","dialog"),P.setAttribute("aria-labelledby","driver-popover-title"),P.setAttribute("aria-describedby","driver-popover-description");const f=n.arrow;f.className="driver-popover-arrow";const _=((o=t.popover)==null?void 0:o.popoverClass)||c("popoverClass")||"";P.className=`driver-popover ${_}`.trim(),me(n.wrapper,B=>{var R,I,z;const M=B.target,O=((R=t.popover)==null?void 0:R.onNextClick)||c("onNextClick"),N=((I=t.popover)==null?void 0:I.onPrevClick)||c("onPrevClick"),V=((z=t.popover)==null?void 0:z.onCloseClick)||c("onCloseClick");if(M.classList.contains("driver-popover-next-btn"))return O?O(e,t,{config:c(),state:p()}):$("nextClick");if(M.classList.contains("driver-popover-prev-btn"))return N?N(e,t,{config:c(),state:p()}):$("prevClick");if(M.classList.contains("driver-popover-close-btn"))return V?V(e,t,{config:c(),state:p()}):$("closeClick")},B=>!(n!=null&&n.description.contains(B))&&!(n!=null&&n.title.contains(B))&&typeof B.className=="string"&&B.className.includes("driver-popover")),E("popover",n);const j=((i=t.popover)==null?void 0:i.onPopoverRender)||c("onPopoverRender");j&&j(n,{config:c(),state:p()}),ge(e,t),de(P);const C=e.classList.contains("driver-dummy-element"),L=ce([P,...C?[]:[e]]);L.length>0&&L[0].focus()}function fe(){const e=p("popover");if(!(e!=null&&e.wrapper))return;const t=e.wrapper.getBoundingClientRect(),o=c("stagePadding")||0,i=c("popoverOffset")||0;return{width:t.width+o+i,height:t.height+o+i,realWidth:t.width,realHeight:t.height}}function ne(e,t){const{elementDimensions:o,popoverDimensions:i,popoverPadding:n,popoverArrowDimensions:a}=t;return e==="start"?Math.max(Math.min(o.top-n,window.innerHeight-i.realHeight-a.width),a.width):e==="end"?Math.max(Math.min(o.top-(i==null?void 0:i.realHeight)+o.height+n,window.innerHeight-(i==null?void 0:i.realHeight)-a.width),a.width):e==="center"?Math.max(Math.min(o.top+o.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-a.width),a.width):0}function ie(e,t){const{elementDimensions:o,popoverDimensions:i,popoverPadding:n,popoverArrowDimensions:a}=t;return e==="start"?Math.max(Math.min(o.left-n,window.innerWidth-i.realWidth-a.width),a.width):e==="end"?Math.max(Math.min(o.left-(i==null?void 0:i.realWidth)+o.width+n,window.innerWidth-(i==null?void 0:i.realWidth)-a.width),a.width):e==="center"?Math.max(Math.min(o.left+o.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-a.width),a.width):0}function ge(e,t){const o=p("popover");if(!o)return;const{align:i="start",side:n="left"}=(t==null?void 0:t.popover)||{},a=i,u=e.id==="driver-dummy-element"?"over":n,g=c("stagePadding")||0,r=fe(),d=o.arrow.getBoundingClientRect(),l=e.getBoundingClientRect(),v=l.top-r.height;let m=v>=0;const y=window.innerHeight-(l.bottom+r.height);let b=y>=0;const x=l.left-r.width;let h=x>=0;const P=window.innerWidth-(l.right+r.width);let f=P>=0;const _=!m&&!b&&!h&&!f;let j=u;if(u==="top"&&m?f=h=b=!1:u==="bottom"&&b?f=h=m=!1:u==="left"&&h?f=m=b=!1:u==="right"&&f&&(h=m=b=!1),u==="over"){const C=window.innerWidth/2-r.realWidth/2,L=window.innerHeight/2-r.realHeight/2;o.wrapper.style.left=`${C}px`,o.wrapper.style.right="auto",o.wrapper.style.top=`${L}px`,o.wrapper.style.bottom="auto"}else if(_){const C=window.innerWidth/2-(r==null?void 0:r.realWidth)/2,L=10;o.wrapper.style.left=`${C}px`,o.wrapper.style.right="auto",o.wrapper.style.bottom=`${L}px`,o.wrapper.style.top="auto"}else if(h){const C=Math.min(x,window.innerWidth-(r==null?void 0:r.realWidth)-d.width),L=ne(a,{elementDimensions:l,popoverDimensions:r,popoverPadding:g,popoverArrowDimensions:d});o.wrapper.style.left=`${C}px`,o.wrapper.style.top=`${L}px`,o.wrapper.style.bottom="auto",o.wrapper.style.right="auto",j="left"}else if(f){const C=Math.min(P,window.innerWidth-(r==null?void 0:r.realWidth)-d.width),L=ne(a,{elementDimensions:l,popoverDimensions:r,popoverPadding:g,popoverArrowDimensions:d});o.wrapper.style.right=`${C}px`,o.wrapper.style.top=`${L}px`,o.wrapper.style.bottom="auto",o.wrapper.style.left="auto",j="right"}else if(m){const C=Math.min(v,window.innerHeight-r.realHeight-d.width);let L=ie(a,{elementDimensions:l,popoverDimensions:r,popoverPadding:g,popoverArrowDimensions:d});o.wrapper.style.top=`${C}px`,o.wrapper.style.left=`${L}px`,o.wrapper.style.bottom="auto",o.wrapper.style.right="auto",j="top"}else if(b){const C=Math.min(y,window.innerHeight-(r==null?void 0:r.realHeight)-d.width);let L=ie(a,{elementDimensions:l,popoverDimensions:r,popoverPadding:g,popoverArrowDimensions:d});o.wrapper.style.left=`${L}px`,o.wrapper.style.bottom=`${C}px`,o.wrapper.style.top="auto",o.wrapper.style.right="auto",j="bottom"}_?o.arrow.classList.add("driver-popover-arrow-none"):nt(a,j,e)}function nt(e,t,o){const i=p("popover");if(!i)return;const n=o.getBoundingClientRect(),a=fe(),u=i.arrow,g=a.width,r=window.innerWidth,d=n.width,l=n.left,v=a.height,m=window.innerHeight,y=n.top,b=n.height;u.className="driver-popover-arrow";let x=t,h=e;t==="top"?(l+d<=0?(x="right",h="end"):l+d-g<=0&&(x="top",h="start"),l>=r?(x="left",h="end"):l+g>=r&&(x="top",h="end")):t==="bottom"?(l+d<=0?(x="right",h="start"):l+d-g<=0&&(x="bottom",h="start"),l>=r?(x="left",h="start"):l+g>=r&&(x="bottom",h="end")):t==="left"?(y+b<=0?(x="bottom",h="end"):y+b-v<=0&&(x="left",h="start"),y>=m?(x="top",h="end"):y+v>=m&&(x="left",h="end")):t==="right"&&(y+b<=0?(x="bottom",h="start"):y+b-v<=0&&(x="right",h="start"),y>=m?(x="top",h="start"):y+v>=m&&(x="right",h="end")),x?(u.classList.add(`driver-popover-arrow-side-${x}`),u.classList.add(`driver-popover-arrow-align-${h}`)):u.classList.add("driver-popover-arrow-none")}function it(){const e=document.createElement("div");e.classList.add("driver-popover");const t=document.createElement("div");t.classList.add("driver-popover-arrow");const o=document.createElement("header");o.id="driver-popover-title",o.classList.add("driver-popover-title"),o.style.display="none",o.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const n=document.createElement("button");n.type="button",n.classList.add("driver-popover-close-btn"),n.setAttribute("aria-label","Close"),n.innerHTML="&times;";const a=document.createElement("footer");a.classList.add("driver-popover-footer");const u=document.createElement("span");u.classList.add("driver-popover-progress-text"),u.innerText="";const g=document.createElement("span");g.classList.add("driver-popover-navigation-btns");const r=document.createElement("button");r.type="button",r.classList.add("driver-popover-prev-btn"),r.innerHTML="&larr; Previous";const d=document.createElement("button");return d.type="button",d.classList.add("driver-popover-next-btn"),d.innerHTML="Next &rarr;",g.appendChild(r),g.appendChild(d),a.appendChild(u),a.appendChild(g),e.appendChild(n),e.appendChild(t),e.appendChild(o),e.appendChild(i),e.appendChild(a),{wrapper:e,arrow:t,title:o,description:i,footer:a,previousButton:r,nextButton:d,closeButton:n,footerButtons:g,progress:u}}function rt(){var e;const t=p("popover");t&&((e=t.wrapper.parentElement)==null||e.removeChild(t.wrapper))}function st(e={}){U(e);function t(){c("allowClose")&&d()}function o(){const l=p("activeIndex"),v=c("steps")||[];if(typeof l>"u")return;const m=l+1;v[m]?r(m):d()}function i(){const l=p("activeIndex"),v=c("steps")||[];if(typeof l>"u")return;const m=l-1;v[m]?r(m):d()}function n(l){(c("steps")||[])[l]?r(l):d()}function a(){var l;if(p("__transitionCallback"))return;const v=p("activeIndex"),m=p("__activeStep"),y=p("__activeElement");if(typeof v>"u"||typeof m>"u"||typeof p("activeIndex")>"u")return;const b=((l=m.popover)==null?void 0:l.onPrevClick)||c("onPrevClick");if(b)return b(y,m,{config:c(),state:p()});i()}function u(){var l;if(p("__transitionCallback"))return;const v=p("activeIndex"),m=p("__activeStep"),y=p("__activeElement");if(typeof v>"u"||typeof m>"u")return;const b=((l=m.popover)==null?void 0:l.onNextClick)||c("onNextClick");if(b)return b(y,m,{config:c(),state:p()});o()}function g(){p("isInitialized")||(E("isInitialized",!0),document.body.classList.add("driver-active",c("animate")?"driver-fade":"driver-simple"),et(),F("overlayClick",t),F("escapePress",t),F("arrowLeftPress",a),F("arrowRightPress",u))}function r(l=0){var v,m,y,b,x,h,P,f;const _=c("steps");if(!_){console.error("No steps to drive through"),d();return}if(!_[l]){d();return}E("__activeOnDestroyed",document.activeElement),E("activeIndex",l);const j=_[l],C=_[l+1],L=_[l-1],B=((v=j.popover)==null?void 0:v.doneBtnText)||c("doneBtnText")||"Done",R=c("allowClose"),I=typeof((m=j.popover)==null?void 0:m.showProgress)<"u"?(y=j.popover)==null?void 0:y.showProgress:c("showProgress"),z=(((b=j.popover)==null?void 0:b.progressText)||c("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${l+1}`).replace("{{total}}",`${_.length}`),M=((x=j.popover)==null?void 0:x.showButtons)||c("showButtons"),O=["next","previous",...R?["close"]:[]].filter(be=>!(M!=null&&M.length)||M.includes(be)),N=((h=j.popover)==null?void 0:h.onNextClick)||c("onNextClick"),V=((P=j.popover)==null?void 0:P.onPrevClick)||c("onPrevClick"),xe=((f=j.popover)==null?void 0:f.onCloseClick)||c("onCloseClick");te({...j,popover:{showButtons:O,nextBtnText:C?void 0:B,disableButtons:[...L?[]:["previous"]],showProgress:I,progressText:z,onNextClick:N||(()=>{C?r(l+1):d()}),onPrevClick:V||(()=>{r(l-1)}),onCloseClick:xe||(()=>{d()}),...(j==null?void 0:j.popover)||{}}})}function d(l=!0){const v=p("__activeElement"),m=p("__activeStep"),y=p("__activeOnDestroyed"),b=c("onDestroyStarted");if(l&&b){const P=!v||(v==null?void 0:v.id)==="driver-dummy-element";b(P?void 0:v,m,{config:c(),state:p()});return}const x=(m==null?void 0:m.onDeselected)||c("onDeselected"),h=c("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),tt(),rt(),Xe(),Ye(),We(),ee(),v&&m){const P=v.id==="driver-dummy-element";x&&x(P?void 0:v,m,{config:c(),state:p()}),h&&h(P?void 0:v,m,{config:c(),state:p()})}y&&y.focus()}return{isActive:()=>p("isInitialized")||!1,refresh:D,drive:(l=0)=>{g(),r(l)},setConfig:U,setSteps:l=>{ee(),U({...c(),steps:l})},getConfig:c,getState:p,getActiveIndex:()=>p("activeIndex"),isFirstStep:()=>p("activeIndex")===0,isLastStep:()=>{const l=c("steps")||[],v=p("activeIndex");return v!==void 0&&v===l.length-1},getActiveStep:()=>p("activeStep"),getActiveElement:()=>p("activeElement"),getPreviousElement:()=>p("previousElement"),getPreviousStep:()=>p("previousStep"),moveNext:o,movePrevious:i,moveTo:n,hasNextStep:()=>{const l=c("steps")||[],v=p("activeIndex");return v!==void 0&&l[v+1]},hasPreviousStep:()=>{const l=c("steps")||[],v=p("activeIndex");return v!==void 0&&l[v-1]},highlight:l=>{g(),te({...l,popover:l.popover?{showButtons:[],showProgress:!1,progressText:"",...l.popover}:void 0})},destroy:()=>{d(!1)}}}const H=(e,t="center")=>{const o=document.querySelector(e);o&&o.scrollIntoView({block:t})},we=st({showProgress:!0,steps:[{element:"#ProjectCardSection",popover:{title:"Project section",description:"This section contains information about your project. Within this block you can view the main information about your project (name, theme used, date of editing). You can also build the project or launch a preview.",side:"bottom",align:"start",onPopoverRender:()=>{H("#ProjectCardSection","end")}}},{element:".ProjectLiveButton",popover:{title:"Live Preview",description:"Live preview opens a fully functioning project in a separate window: you can navigate between pages, and if connected to a processor, you can exchange data, receive feedback, and send signals. Live preview can be launched with different settings of your project which are stored in environments.",side:"bottom",align:"start",onPopoverRender:()=>{H(".ProjectLiveButton","end")}}},{element:".GlobalEnvSelector",popover:{title:"Global environments selector",description:"The Global environments selector allows you to quickly switch between different project settings, thereby changing connection data for the management system, modifying build settings, and much more.",side:"bottom",align:"end",onPopoverRender:()=>{H(".GlobalEnvSelector","end")}}},{element:".ProjectBuildButton",popover:{title:"Project build",description:"A ready archive is produced that can be directly uploaded to the management system processor or used in a browser. Project builds can also be made using various settings from environments.",side:"bottom",align:"start",onPopoverRender:()=>{H(".ProjectBuildButton","end")}}},{element:".ProjectMenuButton",popover:{title:"Project menu",description:"Menu for your project: manage settings, clone, and more.",side:"bottom",align:"start",onPopoverRender:()=>{H(".ProjectMenuButton","end")}}},{element:"#PagesSection",popover:{title:"Pages",description:"This section contains the pages of your project, between which users can switch while using the interface. A page is a simple set of elements (buttons, sliders, widgets, subPages and others).",side:"top",align:"start",onPopoverRender:()=>{H("#PagesSection")}}}]}),ye=w.createContext(we),lt=w.lazy(()=>k(()=>import("./projectCard-TZRFKHpg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url)),at=w.lazy(()=>k(()=>import("./projectGlobalContainers-DkdxG4nR.js"),__vite__mapDeps([18,1,2,3,4,5,6,19,10,20,21,22]),import.meta.url)),ct=w.lazy(()=>k(()=>import("./printProjectMedia-Djr9UrYv.js"),__vite__mapDeps([23,1,2,3,4,5,6,24,25,10]),import.meta.url)),dt=w.lazy(()=>k(()=>import("./projectPages-48mhm7zM.js"),__vite__mapDeps([26,1,2,27,4,5,25,3,6,28,29,30,19,10,20,31,8,32,33,14,12,15,16,17]),import.meta.url)),pt=w.lazy(()=>k(()=>import("./projectSubPages-B1EbAg2T.js"),__vite__mapDeps([34,1,2,27,4,5,25,3,6,28,29,30,19,10,20,32,33,12]),import.meta.url)),ut=w.lazy(()=>k(()=>import("./projectVariables-pDeALek1.js"),__vite__mapDeps([35,1,2,19,10,4,5,6,20,3,28,31,32,14]),import.meta.url)),vt=w.lazy(()=>k(()=>import("./projectModificators-Ds8KCpla.js"),__vite__mapDeps([36,1,2,3,4,5,6,37,19,10,20,7,38,32,12]),import.meta.url)),ht=w.lazy(()=>k(()=>import("./useCustomFonts--hfI8X19.js").then(e=>e.b8),__vite__mapDeps([3,4,1,2,5,6]),import.meta.url)),mt=w.lazy(()=>k(()=>import("./projectDatasouces-CTo5XTAL.js"),__vite__mapDeps([39,1,2,3,4,5,6,19,10,20,40,41,28,29,7,32,12,14,42]),import.meta.url)),ft=()=>{const e=re(),[t,o]=w.useState(!1);w.useEffect(()=>{const d=setTimeout(()=>{o(!0)},100);return()=>clearTimeout(d)},[]);const i=se(d=>d.workingProject);Le();const n=X.getState().setMainMenuData;w.useEffect(()=>{n({showBoundingBox:!0})},[n]);const[a,u]=w.useState("");w.useEffect(()=>{if(a){const d=document.getElementById(a);d&&d.scrollIntoView({behavior:"smooth"}),u("")}},[a]);const g=w.useRef(0);w.useEffect(()=>()=>{n({oneProjectLayoutScrollPosition:g.current})},[n]);const r=w.useRef(null);return w.useEffect(()=>{const d=X.getState().oneProjectLayoutScrollPosition;r!=null&&r.current&&d&&(r.current.scrollTop=d)},[]),s.jsxs(ye.Provider,{value:we,children:[s.jsx(Ee,{children:i&&s.jsxs("div",{style:{padding:10},children:[s.jsxs(le,{onClick:()=>e("/projects/"),block:!0,size:"small",type:"dashed",children:[s.jsx("svg",{style:{transform:"translate(0,0.15em)"},xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:s.jsxs("g",{fill:"none",fillRule:"evenodd",children:[s.jsx("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),s.jsx("path",{fill:"currentColor",d:"M7.94 13.06a1.5 1.5 0 0 1 0-2.12l5.656-5.658a1.5 1.5 0 1 1 2.121 2.122L11.122 12l4.596 4.596a1.5 1.5 0 1 1-2.12 2.122l-5.66-5.658Z"})]})}),"Back to all projects"]}),s.jsx(S,{style:{margin:"10px 0"}}),s.jsx(J,{onSelect:d=>u(String(d[0])),showLine:!0,showIcon:!0,selectedKeys:[],defaultExpandedKeys:["Project Data"],treeData:[{title:i.attributes.name,key:"Project Data",children:[...ae.map(d=>({title:d,key:d,icon:s.jsx("svg",{style:{transform:"translateY(3px)",color:"var(--ant-primary-5)"},xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",children:s.jsx("path",{fill:"currentColor",d:"M200 88v104a8 8 0 0 1-8 8H88a8 8 0 0 1-5.66-13.66L128.69 140L58.34 69.66a8 8 0 0 1 11.32-11.32L140 128.69l46.34-46.35A8 8 0 0 1 200 88"})})}))]}]})]})}),s.jsx("div",{className:"appLayoutContent",children:s.jsx("div",{ref:r,onScroll:d=>{g.current=d.target.scrollTop},style:{padding:10},className:"scrollable",children:i?s.jsxs(w.Suspense,{fallback:s.jsx(T,{}),children:[s.jsx(lt,{project:i}),s.jsx(dt,{}),s.jsx(S,{}),s.jsx(pt,{}),s.jsx(S,{}),s.jsx(at,{}),s.jsx(S,{}),t&&s.jsxs(s.Fragment,{children:[s.jsx(w.Suspense,{fallback:s.jsx(T,{}),children:s.jsx(ut,{})}),s.jsx(S,{}),s.jsx(w.Suspense,{fallback:s.jsx(T,{}),children:s.jsx(mt,{})}),s.jsx(S,{}),s.jsx(w.Suspense,{fallback:s.jsx(T,{}),children:s.jsx(vt,{})}),s.jsx(S,{}),s.jsx(w.Suspense,{fallback:s.jsx(T,{}),children:s.jsx(ct,{})}),s.jsx(S,{}),s.jsx(w.Suspense,{fallback:s.jsx(T,{}),children:s.jsx(ht,{})})]})]}):s.jsx(T,{})})})]})},jt=Object.freeze(Object.defineProperty({__proto__:null,OneProjectGuideContext:ye,default:ft},Symbol.toStringTag,{value:"Module"}));export{Pt as A,ye as O,ze as R,jt as o};
