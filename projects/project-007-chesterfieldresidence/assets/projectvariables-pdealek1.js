const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./actionsOptions-Dw--Zc5R.js","./index-BWO8qd00.js","./index-CtV2aIBv.css","./useCustomFonts--hfI8X19.js","./editorApp-BQHhAWNR.js","./editorApp-BmhU-YmB.css","./index-BPRdgIWZ.js","./renderActionTag-DNrT7Mjk.js","./index-DQFZSvcF.js","./index-E6gmldJE.js","./useGetElDimensionsStyles-DKp_YFdD.js","./datasourceTools-CeSl9gC_.js","./variablesAPI-D_uU0Jyf.js","./___vite-browser-external_commonjs-proxy-FhmH_qOu.js","./index-PlVE70kS.js","./EditableCell-CnqTEXkH.js","./index-DI0YWsM8.js","./localActiveAPI-Dv2O1BDy.js","./formItemPropsWrapper-BtUXjune.js","./index-xMIPA-_5.js"])))=>i.map(i=>d[i]);
import{r as o,aj as h,j as e,a as y,b as v,ac as C}from"./index-BWO8qd00.js";import{E as c}from"./EditableCell-CnqTEXkH.js";import{u as S,D as I,b as T,g as _,I as k}from"./useCustomFonts--hfI8X19.js";import{W as w,a as E,h as A,J as P,B as f,X as R}from"./editorApp-BQHhAWNR.js";import{e as d,d as F}from"./variablesAPI-D_uU0Jyf.js";import{R as p}from"./renderActionTag-DNrT7Mjk.js";import{T as L}from"./tableFieldSearchInput-DW8T1Il9.js";import{T as D}from"./index-BPRdgIWZ.js";import{P as B}from"./index-PlVE70kS.js";import"./index-DQFZSvcF.js";import"./index-DI0YWsM8.js";const N=o.lazy(()=>h(()=>import("./actionsOptions-Dw--Zc5R.js").then(s=>s.G),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url)),{Title:O}=D,$=[{title:e.jsx(L,{searchType:"variableSearchString"}),dataIndex:"name",sorter:(s,i)=>{const n=s.name.toLowerCase(),r=i.name.toLowerCase();return n<r?-1:n>r?1:0},defaultSortOrder:"ascend"},{title:"Type",dataIndex:"type"},{title:"Default Value",dataIndex:"defaultValue"},{title:"Signal FB Setter",dataIndex:"joinValueSetter_signal_fb"},{title:e.jsxs(e.Fragment,{children:["Side Effect Actions",e.jsx(B,{placement:"top",title:"Variables reactivity",content:e.jsx("div",{style:{width:"250px"},children:"Run actions when variable value has been changed."}),trigger:"hover",children:e.jsx(R,{style:{marginLeft:7}})})]}),dataIndex:"sideEffects",className:"sideEffectsCell"},{title:"Controls",dataIndex:"controls",width:100}],Y=()=>{const{setNewVariableModalVisible:s}=w(),i=S(a=>a.variableSearchString),n=E(a=>a.workingProject),{projectId:r}=A(),[g,x]=o.useState(null),b=o.useCallback(({data:a})=>{switch(a.type){case"string":return e.jsx(c,{onChange:l=>d({projectId:r,updatedVariable:{...a,defaultValue:l}}),initialValue:a.defaultValue,value:a.defaultValue});case"number":return e.jsx(c,{onChange:l=>d({projectId:r,updatedVariable:{...a,defaultValue:l}}),initialValue:a.defaultValue,value:a.defaultValue});case"boolean":return e.jsx(c,{onChange:l=>d({projectId:r,updatedVariable:{...a,defaultValue:l}}),initialValue:a.defaultValue,value:a.defaultValue});default:return null}},[r]);return o.useEffect(()=>{var l;const a=((l=n==null?void 0:n.attributes.variables)==null?void 0:l.filter(u=>u.pageId===void 0))||[];if(a&&a!==void 0){const u=[],V=i?a.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())):a;for(const t of V)u.push({key:`variable_${t.name}`,name:t.name,type:e.jsx(e.Fragment,{children:e.jsx(p,{crestronLikeTypesNaming:!1,style:{margin:1},type:t.type,sub:t.type==="boolean"&&(t!=null&&t.waitForLoadingUi)?" ui loader":""})}),defaultValue:e.jsx(b,{data:t}),joinValueSetter_signal_fb:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(p,{style:{margin:1},type:t.type,sub:"FB"}),e.jsx(c,{style:{marginLeft:".5em"},onChange:m=>d({projectId:r,updatedVariable:{...t,joinValueSetter_signal_fb:m}}),initialValue:t.joinValueSetter_signal_fb,value:t.joinValueSetter_signal_fb,validators:[m=>P(m).catch(j=>(y.error(j.message),Promise.reject()))]})]}),sideEffects:e.jsx(o.Suspense,{fallback:e.jsx(v,{}),children:e.jsx(N,{actionsArr:(t==null?void 0:t.actions)??[],elementType:"variable",variableActionFor:t})}),controls:e.jsx(I.Button,{menu:{items:[{key:"removeVariable",danger:!0,icon:e.jsx(T,{}),label:"Delete Variable",onClick:()=>_({title:"Delete Variable?",icon:e.jsx(C,{}),content:"Are you sure? It cannot be undone.",okText:"Delete Variable",cancelText:"Cancel",okButtonProps:{danger:!0},onOk:()=>F({variableName:t.name,projectId:r}),onCancel:()=>console.log("cancel variable delete")})}]}})});x(u)}},[b,r,i,n]),e.jsxs(e.Fragment,{children:[e.jsx(O,{id:"Variables",style:{margin:"15px 0"},level:5,children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:"Variables"}),e.jsx(f,{onClick:()=>s(!0),children:"Create Variable"})]})}),e.jsxs(e.Fragment,{children:[e.jsx(k,{columns:$,dataSource:g||[],pagination:!1}),e.jsx(f,{style:{marginTop:15},type:"primary",onClick:()=>s(!0),children:"Create Variable"},"submit")]})]})};export{Y as default};
