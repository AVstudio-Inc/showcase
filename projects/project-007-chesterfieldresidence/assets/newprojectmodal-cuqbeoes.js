import{r as b,j as r,a as P}from"./index-BWO8qd00.js";import{g as l,F as s,M as q,B as p,I as y,b4 as C}from"./editorApp-BQHhAWNR.js";import{u as k}from"./mainLayout-BdgzpI7o.js";import{h as T}from"./moment-G82_0lEo.js";import{S as c}from"./useCustomFonts--hfI8X19.js";import"./SettingOutlined-BfK-OcKA.js";import"./index-BPRdgIWZ.js";import"./pageAPI-B3I9BgVC.js";import"./localActiveAPI-Dv2O1BDy.js";import"./variablesAPI-D_uU0Jyf.js";import"./___vite-browser-external_commonjs-proxy-FhmH_qOu.js";import"./useWindowAvgatorStudioComposer-LuIThOM1.js";import"./datasourceTools-CeSl9gC_.js";import"./useGetElDimensionsStyles-DKp_YFdD.js";import"./useWebXpanel-BbDsMuZo.js";import"./index-PlVE70kS.js";import"./newVariableModal-DGKfnKTN.js";import"./renderActionTag-DNrT7Mjk.js";import"./index-DQFZSvcF.js";import"./index-DI0YWsM8.js";import"./index-xMIPA-_5.js";import"./Styles-BTfwVjr1.js";import"./datasourceAPI-BARHsYAW.js";import"./formItemPropsWrapper-BtUXjune.js";import"./modificatorAPI-CAH1u60t.js";const{Option:g}=c,Y=({setOpenNewProjectModal:i})=>{var n;const t=k(e=>e.themesList),u=l(e=>e.myProjects??[]),d=l(e=>e.myTemplates??[]),[a]=s.useForm(),m=()=>{a.submit()};function f(e){return![...u,...d].some(o=>o.attributes.name===e)}const j=({name:e,theme:o})=>{x(!0),C({inputData:{name:e,theme:o}}).then(()=>{i(!1),P.success("Project created")})},[h,x]=b.useState(!1);return r.jsx("div",{onKeyUp:e=>{e.key==="Enter"&&m()},children:r.jsx(q,{maskClosable:!1,title:"Create New Project",open:!0,onCancel:()=>i(!1),footer:[r.jsx(p,{onClick:()=>i(!1),children:"Cancel"},"back"),r.jsx(p,{loading:h,type:"primary",onClick:m,children:"Add new project"},"submit")],children:r.jsxs(s,{labelCol:{xs:{span:9}},wrapperCol:{xs:{span:12}},form:a,initialValues:{name:`New project (${T(new Date).format("MMM Do, h:mm a")})`,theme:(n=t==null?void 0:t[0])==null?void 0:n.id,defaultOrientation:"portrait"},onFinish:j,scrollToFirstError:!0,children:[r.jsx(s.Item,{colon:!1,required:!1,name:"name",label:"Name",rules:[{required:!0,message:"This field is required."},()=>({validator(e,o){return o&&f(o)?Promise.resolve():Promise.reject(new Error("Project name must be unique"))}})],children:r.jsx(y,{})}),r.jsx(s.Item,{colon:!1,required:!1,name:"theme",label:"Theme",rules:[{required:!0,message:"This field is required."}],children:r.jsx(c,{children:t==null?void 0:t.map(e=>r.jsx(g,{value:e.id,children:e.attributes.name},e.id))})})]})})})};export{Y as default};
